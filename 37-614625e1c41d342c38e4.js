(window.webpackJsonp=window.webpackJsonp||[]).push([[37],{226:function(n,t,e){e(227)},227:function(n,t){!function(n){"use strict";var t=function(n){var e=n,r=function(){return e};return{get:r,set:function(n){e=n},clone:function(){return t(r())}}},e=function(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t]},r=function(n,t){return function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return n(t.apply(null,e))}},o=function(n){return function(){return n}},i=function(n){return n};function u(n){for(var t=[],e=1;e<arguments.length;e++)t[e-1]=arguments[e];return function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];var o=t.concat(e);return n.apply(null,o)}}var a,c=function(n){return function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return!n.apply(null,t)}},l=function(n){return n()},f=o(!1),s=o(!0),d=f,m=s,g=function(){return p},p=function(){var n=function(n){return n.isNone()},t=function(n){return n()},e=function(n){return n},r={fold:function(n,t){return n()},is:d,isSome:d,isNone:m,getOr:e,getOrThunk:t,getOrDie:function(n){throw new Error(n||"error: getOrDie called on none.")},getOrNull:function(){return null},getOrUndefined:function(){},or:e,orThunk:t,map:g,ap:g,each:function(){},bind:g,flatten:g,exists:d,forall:m,filter:g,equals:n,equals_:n,toArray:function(){return[]},toString:o("none()")};return Object.freeze&&Object.freeze(r),r}(),h=function(n){var t=function(){return n},e=function(){return o},r=function(t){return t(n)},o={fold:function(t,e){return e(n)},is:function(t){return n===t},isSome:m,isNone:d,getOr:t,getOrThunk:t,getOrDie:t,getOrNull:t,getOrUndefined:t,or:e,orThunk:e,map:function(t){return h(t(n))},ap:function(t){return t.fold(g,function(t){return h(t(n))})},each:function(t){t(n)},bind:r,flatten:t,exists:r,forall:r,filter:function(t){return t(n)?o:p},equals:function(t){return t.is(n)},equals_:function(t,e){return t.fold(d,function(t){return e(n,t)})},toArray:function(){return[n]},toString:function(){return"some("+n+")"}};return o},v={some:h,none:g,from:function(n){return null==n?p:h(n)}},b=tinymce.util.Tools.resolve("tinymce.PluginManager"),w=function(n){return function(t){return function(n){if(null===n)return"null";var t=typeof n;return"object"===t&&Array.prototype.isPrototypeOf(n)?"array":"object"===t&&String.prototype.isPrototypeOf(n)?"string":t}(t)===n}},y=w("string"),x=w("array"),S=w("boolean"),C=w("function"),O=w("number"),T=void 0===(a=Array.prototype.indexOf)?function(n,t){return B(n,t)}:function(n,t){return a.call(n,t)},R=function(n,t){return T(n,t)>-1},D=function(n,t){return _(n,t).isSome()},A=function(n,t){for(var e=n.length,r=new Array(e),o=0;o<e;o++){var i=n[o];r[o]=t(i,o,n)}return r},E=function(n,t){for(var e=0,r=n.length;e<r;e++)t(n[e],e,n)},N=function(n,t){for(var e=[],r=0,o=n.length;r<o;r++){var i=n[r];t(i,r,n)&&e.push(i)}return e},k=function(n,t,e){return function(n,t){for(var e=n.length-1;e>=0;e--)t(n[e],e,n)}(n,function(n){e=t(e,n)}),e},I=function(n,t,e){return E(n,function(n){e=t(e,n)}),e},P=function(n,t){for(var e=0,r=n.length;e<r;e++){var o=n[e];if(t(o,e,n))return v.some(o)}return v.none()},_=function(n,t){for(var e=0,r=n.length;e<r;e++)if(t(n[e],e,n))return v.some(e);return v.none()},B=function(n,t){for(var e=0,r=n.length;e<r;++e)if(n[e]===t)return e;return-1},M=Array.prototype.push,L=function(n){for(var t=[],e=0,r=n.length;e<r;++e){if(!Array.prototype.isPrototypeOf(n[e]))throw new Error("Arr.flatten item "+e+" was not an array, input: "+n);M.apply(t,n[e])}return t},j=function(n,t){var e=A(n,t);return L(e)},W=function(n,t){for(var e=0,r=n.length;e<r;++e)if(!0!==t(n[e],e,n))return!1;return!0},U=Array.prototype.slice,z=function(n){var t=U.call(n,0);return t.reverse(),t},F=(C(Array.from)&&Array.from,Object.keys),H=Object.hasOwnProperty,q=function(n,t){for(var e=F(n),r=0,o=e.length;r<o;r++){var i=e[r];t(n[i],i,n)}},V=function(n,t){return G(n,function(n,e,r){return{k:e,v:t(n,e,r)}})},G=function(n,t){var e={};return q(n,function(r,o){var i=t(r,o,n);e[i.k]=i.v}),e},K=function(n,t){return X(n,t)?v.some(n[t]):v.none()},X=function(n,t){return H.call(n,t)},$=function(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];return function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(n.length!==t.length)throw new Error('Wrong number of arguments to struct. Expected "['+n.length+']", got '+t.length+" arguments");var r={};return E(n,function(n,e){r[n]=o(t[e])}),r}},Y=function(n){return n.slice(0).sort()},J=function(n,t){throw new Error("All required keys ("+Y(n).join(", ")+") were not specified. Specified keys were: "+Y(t).join(", ")+".")},Z=function(n){throw new Error("Unsupported keys for object: "+Y(n).join(", "))},Q=function(n,t){if(!x(t))throw new Error("The "+n+" fields must be an array. Was: "+t+".");E(t,function(t){if(!y(t))throw new Error("The value "+t+" in the "+n+" fields was not a string.")})},nn=function(n){var t=Y(n);P(t,function(n,e){return e<t.length-1&&n===t[e+1]}).each(function(n){throw new Error("The field: "+n+" occurs more than once in the combined fields: ["+t.join(", ")+"].")})},tn=function(n,t){var e=n.concat(t);if(0===e.length)throw new Error("You must specify at least one required or optional field.");return Q("required",n),Q("optional",t),nn(e),function(r){var i=F(r);W(n,function(n){return R(i,n)})||J(n,i);var u=N(i,function(n){return!R(e,n)});u.length>0&&Z(u);var a={};return E(n,function(n){a[n]=o(r[n])}),E(t,function(n){a[n]=o(Object.prototype.hasOwnProperty.call(r,n)?v.some(r[n]):v.none())}),a}},en=(n.Node.ATTRIBUTE_NODE,n.Node.CDATA_SECTION_NODE,n.Node.COMMENT_NODE),rn=n.Node.DOCUMENT_NODE,on=(n.Node.DOCUMENT_TYPE_NODE,n.Node.DOCUMENT_FRAGMENT_NODE,n.Node.ELEMENT_NODE),un=n.Node.TEXT_NODE,an=(n.Node.PROCESSING_INSTRUCTION_NODE,n.Node.ENTITY_REFERENCE_NODE,n.Node.ENTITY_NODE,n.Node.NOTATION_NODE,function(n){return n.dom().nodeName.toLowerCase()}),cn=function(n){return n.dom().nodeType},ln=function(n){return function(t){return cn(t)===n}},fn=function(n){return cn(n)===en||"#comment"===an(n)},sn=ln(on),dn=ln(un),mn=ln(rn),gn=function(t,e,r){if(!(y(r)||S(r)||O(r)))throw n.console.error("Invalid call to Attr.set. Key ",e,":: Value ",r,":: Element ",t),new Error("Attribute value was not simple");t.setAttribute(e,r+"")},pn=function(n,t,e){gn(n.dom(),t,e)},hn=function(n,t){var e=n.dom();q(t,function(n,t){gn(e,t,n)})},vn=function(n,t){var e=n.dom().getAttribute(t);return null===e?void 0:e},bn=function(n,t){var e=n.dom();return!(!e||!e.hasAttribute)&&e.hasAttribute(t)},wn=function(n,t){n.dom().removeAttribute(t)},yn=function(n){return I(n.dom().attributes,function(n,t){return n[t.name]=t.value,n},{})},xn=function(n,t,e){return""===t||!(n.length<t.length)&&n.substr(e,e+t.length)===t},Sn=function(n,t){return-1!==n.indexOf(t)},Cn=function(n,t){return xn(n,t,0)},On=function(n){return void 0!==n.style},Tn=function(n){var t,e=!1;return function(){for(var r=[],o=0;o<arguments.length;o++)r[o]=arguments[o];return e||(e=!0,t=n.apply(null,r)),t}},Rn=function(n){if(null==n)throw new Error("Node cannot be null or undefined");return{dom:o(n)}},Dn={fromHtml:function(t,e){var r=(e||n.document).createElement("div");if(r.innerHTML=t,!r.hasChildNodes()||r.childNodes.length>1)throw n.console.error("HTML does not have a single root node",t),new Error("HTML must have a single root node");return Rn(r.childNodes[0])},fromTag:function(t,e){var r=(e||n.document).createElement(t);return Rn(r)},fromText:function(t,e){var r=(e||n.document).createTextNode(t);return Rn(r)},fromDom:Rn,fromPoint:function(n,t,e){var r=n.dom();return v.from(r.elementFromPoint(t,e)).map(Rn)}},An=function(n){var t=dn(n)?n.dom().parentNode:n.dom();return null!=t&&t.ownerDocument.body.contains(t)},En=Tn(function(){return Nn(Dn.fromDom(n.document))}),Nn=function(n){var t=n.dom().body;if(null==t)throw new Error("Body is not available yet");return Dn.fromDom(t)},kn=function(t,e,r){if(!y(r))throw n.console.error("Invalid call to CSS.set. Property ",e,":: Value ",r,":: Element ",t),new Error("CSS value must be a string: "+r);On(t)&&t.style.setProperty(e,r)},In=function(n,t,e){var r=n.dom();kn(r,t,e)},Pn=function(n,t){var e=n.dom();q(t,function(n,t){kn(e,t,n)})},_n=function(t,e){var r=t.dom(),o=n.window.getComputedStyle(r).getPropertyValue(e),i=""!==o||An(t)?o:Bn(r,e);return null===i?void 0:i},Bn=function(n,t){return On(n)?n.style.getPropertyValue(t):""},Mn=function(n,t){var e=n.dom(),r=Bn(e,t);return v.from(r).filter(function(n){return n.length>0})},Ln=function(n,t){!function(n,t){On(n)&&n.style.removeProperty(t)}(n.dom(),t),bn(n,"style")&&""===vn(n,"style").replace(/^\s+|\s+$/g,"")&&wn(n,"style")},jn="undefined"!=typeof window?window:Function("return this;")(),Wn=function(n,t){return function(n,t){for(var e=null!=t?t:jn,r=0;r<n.length&&null!=e;++r)e=e[n[r]];return e}(n.split("."),t)},Un=function(n,t){var e=function(n,t){return Wn(n,t)}(n,t);if(null==e)throw n+" not available on this browser";return e},zn=function(){return Un("Node")},Fn=function(n,t,e){return 0!=(n.compareDocumentPosition(t)&e)},Hn=function(n,t){return Fn(n,t,zn().DOCUMENT_POSITION_CONTAINED_BY)},qn=function(){return Vn(0,0)},Vn=function(n,t){return{major:n,minor:t}},Gn={nu:Vn,detect:function(n,t){var e=String(t).toLowerCase();return 0===n.length?qn():function(n,t){var e=function(n,t){for(var e=0;e<n.length;e++){var r=n[e];if(r.test(t))return r}}(n,t);if(!e)return{major:0,minor:0};var r=function(n){return Number(t.replace(e,"$"+n))};return Vn(r(1),r(2))}(n,e)},unknown:qn},Kn=function(n,t){return function(){return t===n}},Xn=function(n){var t=n.current;return{current:t,version:n.version,isEdge:Kn("Edge",t),isChrome:Kn("Chrome",t),isIE:Kn("IE",t),isOpera:Kn("Opera",t),isFirefox:Kn("Firefox",t),isSafari:Kn("Safari",t)}},$n={unknown:function(){return Xn({current:void 0,version:Gn.unknown()})},nu:Xn,edge:o("Edge"),chrome:o("Chrome"),ie:o("IE"),opera:o("Opera"),firefox:o("Firefox"),safari:o("Safari")},Yn=function(n,t){return function(){return t===n}},Jn=function(n){var t=n.current;return{current:t,version:n.version,isWindows:Yn("Windows",t),isiOS:Yn("iOS",t),isAndroid:Yn("Android",t),isOSX:Yn("OSX",t),isLinux:Yn("Linux",t),isSolaris:Yn("Solaris",t),isFreeBSD:Yn("FreeBSD",t)}},Zn={unknown:function(){return Jn({current:void 0,version:Gn.unknown()})},nu:Jn,windows:o("Windows"),ios:o("iOS"),android:o("Android"),linux:o("Linux"),osx:o("OSX"),solaris:o("Solaris"),freebsd:o("FreeBSD")},Qn=function(n,t){var e=String(t).toLowerCase();return P(n,function(n){return n.search(e)})},nt=function(n,t){return Qn(n,t).map(function(n){var e=Gn.detect(n.versionRegexes,t);return{current:n.name,version:e}})},tt=function(n,t){return Qn(n,t).map(function(n){var e=Gn.detect(n.versionRegexes,t);return{current:n.name,version:e}})},et=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,rt=function(n){return function(t){return Sn(t,n)}},ot=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:function(n){return Sn(n,"edge/")&&Sn(n,"chrome")&&Sn(n,"safari")&&Sn(n,"applewebkit")}},{name:"Chrome",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,et],search:function(n){return Sn(n,"chrome")&&!Sn(n,"chromeframe")}},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:function(n){return Sn(n,"msie")||Sn(n,"trident")}},{name:"Opera",versionRegexes:[et,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:rt("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:rt("firefox")},{name:"Safari",versionRegexes:[et,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:function(n){return(Sn(n,"safari")||Sn(n,"mobile/"))&&Sn(n,"applewebkit")}}],it=[{name:"Windows",search:rt("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:function(n){return Sn(n,"iphone")||Sn(n,"ipad")},versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:rt("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"OSX",search:rt("os x"),versionRegexes:[/.*?os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:rt("linux"),versionRegexes:[]},{name:"Solaris",search:rt("sunos"),versionRegexes:[]},{name:"FreeBSD",search:rt("freebsd"),versionRegexes:[]}],ut={browsers:o(ot),oses:o(it)},at=function(n){var t=ut.browsers(),e=ut.oses(),r=nt(t,n).fold($n.unknown,$n.nu),i=tt(e,n).fold(Zn.unknown,Zn.nu),u=function(n,t,e){var r=n.isiOS()&&!0===/ipad/i.test(e),i=n.isiOS()&&!r,u=n.isAndroid()&&3===n.version.major,a=n.isAndroid()&&4===n.version.major,c=r||u||a&&!0===/mobile/i.test(e),l=n.isiOS()||n.isAndroid(),f=l&&!c,s=t.isSafari()&&n.isiOS()&&!1===/safari/i.test(e);return{isiPad:o(r),isiPhone:o(i),isTablet:o(c),isPhone:o(f),isTouch:o(l),isAndroid:n.isAndroid,isiOS:n.isiOS,isWebView:o(s)}}(i,r,n);return{browser:r,os:i,deviceType:u}},ct={detect:Tn(function(){var t=n.navigator.userAgent;return at(t)})},lt=on,ft=rn,st=function(n,t){var e=n.dom();if(e.nodeType!==lt)return!1;if(void 0!==e.matches)return e.matches(t);if(void 0!==e.msMatchesSelector)return e.msMatchesSelector(t);if(void 0!==e.webkitMatchesSelector)return e.webkitMatchesSelector(t);if(void 0!==e.mozMatchesSelector)return e.mozMatchesSelector(t);throw new Error("Browser lacks native selectors")},dt=function(n){return n.nodeType!==lt&&n.nodeType!==ft||0===n.childElementCount},mt=function(n,t){return n.dom()===t.dom()},gt=ct.detect().browser.isIE()?function(n,t){return Hn(n.dom(),t.dom())}:function(n,t){var e=n.dom(),r=t.dom();return e!==r&&e.contains(r)},pt=st,ht=function(n){return Dn.fromDom(n.dom().ownerDocument)},vt=function(n){var t=n.dom();return v.from(t.parentNode).map(Dn.fromDom)},bt=function(n,t){for(var e=C(t)?t:o(!1),r=n.dom(),i=[];null!==r.parentNode&&void 0!==r.parentNode;){var u=r.parentNode,a=Dn.fromDom(u);if(i.push(a),!0===e(a))break;r=u}return i},wt=function(n){var t=n.dom();return v.from(t.previousSibling).map(Dn.fromDom)},yt=function(n){var t=n.dom();return v.from(t.nextSibling).map(Dn.fromDom)},xt=function(n){var t=n.dom();return A(t.childNodes,Dn.fromDom)},St=function(n,t){var e=n.dom().childNodes;return v.from(e[t]).map(Dn.fromDom)},Ct=($("element","offset"),function(n,t){vt(n).each(function(e){e.dom().insertBefore(t.dom(),n.dom())})}),Ot=function(n,t){yt(n).fold(function(){vt(n).each(function(n){Rt(n,t)})},function(n){Ct(n,t)})},Tt=function(n,t){(function(n){return St(n,0)})(n).fold(function(){Rt(n,t)},function(e){n.dom().insertBefore(t.dom(),e.dom())})},Rt=function(n,t){n.dom().appendChild(t.dom())},Dt=function(n,t){Ct(n,t),Rt(t,n)},At=function(n,t){E(t,function(e,r){var o=0===r?n:t[r-1];Ot(o,e)})},Et=function(n,t){E(t,function(t){Rt(n,t)})},Nt=function(n){n.dom().textContent="",E(xt(n),function(n){kt(n)})},kt=function(n){var t=n.dom();null!==t.parentNode&&t.parentNode.removeChild(t)},It=function(n){var t,e=xt(n);e.length>0&&(t=n,E(e,function(n){Ct(t,n)})),kt(n)},Pt=$("width","height"),_t=$("rows","columns"),Bt=$("row","column"),Mt=$("x","y"),Lt=$("element","rowspan","colspan"),jt=$("element","rowspan","colspan","isNew"),Wt={dimensions:Pt,grid:_t,address:Bt,coords:Mt,extended:$("element","rowspan","colspan","row","column"),detail:Lt,detailnew:jt,rowdata:$("element","cells","section"),elementnew:$("element","isNew"),rowdatanew:$("element","cells","section","isNew"),rowcells:$("cells","section"),rowdetails:$("details","section"),bounds:$("startRow","startCol","finishRow","finishCol")},Ut=function(n,t){var e=[];return E(xt(n),function(n){t(n)&&(e=e.concat([n])),e=e.concat(Ut(n,t))}),e},zt=function(n,t,e){return function(n,t,e){return N(bt(n,e),t)}(n,function(n){return st(n,t)},e)},Ft=function(n,t){return function(n,t){return N(xt(n),t)}(n,function(n){return st(n,t)})},Ht=function(t,e){return function(t,e){var r=void 0===e?n.document:e.dom();return dt(r)?[]:A(r.querySelectorAll(t),Dn.fromDom)}(e,t)};function qt(n,t,e,r,o){return n(e,r)?v.some(e):C(o)&&o(e)?v.none():t(e,r,o)}var Vt=function(n,t,e){for(var r=n.dom(),i=C(e)?e:o(!1);r.parentNode;){r=r.parentNode;var u=Dn.fromDom(r);if(t(u))return v.some(u);if(i(u))break}return v.none()},Gt=function(n,t,e){return Vt(n,function(n){return st(n,t)},e)},Kt=function(n,t){return function(n,t){return P(n.dom().childNodes,r(t,Dn.fromDom)).map(Dn.fromDom)}(n,function(n){return st(n,t)})},Xt=function(t,e){return function(t,e){var r=void 0===e?n.document:e.dom();return dt(r)?v.none():v.from(r.querySelector(t)).map(Dn.fromDom)}(e,t)},$t=function(n,t,e){return qt(st,Gt,n,t,e)},Yt=function(n,t,e){return j(xt(n),function(n){return st(n,t)?e(n)?[n]:[]:Yt(n,t,e)})},Jt={firstLayer:function(n,t){return Yt(n,t,o(!0))},filterFirstLayer:Yt},Zt=function(n,t,e){var r=void 0!==e?e:o(!1);return r(t)?v.none():R(n,an(t))?v.some(t):Gt(t,n.join(","),function(n){return st(n,"table")||r(n)})},Qt=function(n,t){return vt(t).map(function(t){return Ft(t,n)})},ne=u(Qt,"th,td"),te=u(Qt,"tr"),ee=function(n,t){return parseInt(vn(n,t),10)},re={cell:function(n,t){return Zt(["td","th"],n,t)},firstCell:function(n){return Xt(n,"th,td")},cells:function(n){return Jt.firstLayer(n,"th,td")},neighbourCells:ne,table:function(n,t){return $t(n,"table",t)},row:function(n,t){return Zt(["tr"],n,t)},rows:function(n){return Jt.firstLayer(n,"tr")},notCell:function(n,t){return Zt(["caption","tr","tbody","tfoot","thead"],n,t)},neighbourRows:te,attr:ee,grid:function(n,t,e){var r=ee(n,t),o=ee(n,e);return Wt.grid(r,o)}},oe=function(n){var t=re.rows(n);return A(t,function(n){var t=n,e=vt(t).map(function(n){var t=an(n);return"tfoot"===t||"thead"===t||"tbody"===t?t:"tbody"}).getOr("tbody"),r=A(re.cells(n),function(n){var t=bn(n,"rowspan")?parseInt(vn(n,"rowspan"),10):1,e=bn(n,"colspan")?parseInt(vn(n,"colspan"),10):1;return Wt.detail(n,t,e)});return Wt.rowdata(t,r,e)})},ie=function(n,t){return A(n,function(n){var e=A(re.cells(n),function(n){var t=bn(n,"rowspan")?parseInt(vn(n,"rowspan"),10):1,e=bn(n,"colspan")?parseInt(vn(n,"colspan"),10):1;return Wt.detail(n,t,e)});return Wt.rowdata(n,e,t.section())})},ue=function(n,t){return n+","+t},ae=function(n,t){var e=j(n.all(),function(n){return n.cells()});return N(e,t)},ce={generate:function(n){var t={},e=[],r=n.length,i=0;E(n,function(n,r){var o=[];E(n.cells(),function(n,e){for(var u=0;void 0!==t[ue(r,u)];)u++;for(var a=Wt.extended(n.element(),n.rowspan(),n.colspan(),r,u),c=0;c<n.colspan();c++)for(var l=0;l<n.rowspan();l++){var f=u+c,s=ue(r+l,f);t[s]=a,i=Math.max(i,f+1)}o.push(a)}),e.push(Wt.rowdata(n.element(),o,n.section()))});var u=Wt.grid(r,i);return{grid:o(u),access:o(t),all:o(e)}},getAt:function(n,t,e){var r=n.access()[ue(t,e)];return void 0!==r?v.some(r):v.none()},findItem:function(n,t,e){var r=ae(n,function(n){return e(t,n.element())});return r.length>0?v.some(r[0]):v.none()},filterItems:ae,justCells:function(n){var t=A(n.all(),function(n){return n.cells()});return L(t)}},le=$("minRow","minCol","maxRow","maxCol"),fe=function(n,t,e){var r=n[e].element(),o=Dn.fromTag("td");Rt(o,Dn.fromTag("br")),(t?Rt:Tt)(r,o)},se=function(n,t){var e=function(n){return st(n.element(),t)},r=oe(n),o=ce.generate(r),i=function(n,t){var e=n.grid().columns(),r=n.grid().rows(),o=e,i=0,u=0;return q(n.access(),function(n){if(t(n)){var e=n.row(),a=e+n.rowspan()-1,c=n.column(),l=c+n.colspan()-1;e<r?r=e:a>i&&(i=a),c<o?o=c:l>u&&(u=l)}}),le(r,o,i,u)}(o,e),u="th:not("+t+"),td:not("+t+")",a=Jt.filterFirstLayer(n,"th,td",function(n){return st(n,u)});return E(a,kt),function(n,t,e,r){for(var o=t.grid().columns(),i=t.grid().rows(),u=0;u<i;u++)for(var a=!1,c=0;c<o;c++)u<e.minRow()||u>e.maxRow()||c<e.minCol()||c>e.maxCol()||(ce.getAt(t,u,c).filter(r).isNone()?fe(n,a,u):a=!0)}(r,o,i,e),function(n,t){var e=N(Jt.firstLayer(n,"tr"),function(n){return 0===n.dom().childElementCount});E(e,kt),t.minCol()!==t.maxCol()&&t.minRow()!==t.maxRow()||E(Jt.firstLayer(n,"th,td"),function(n){wn(n,"rowspan"),wn(n,"colspan")}),wn(n,"width"),wn(n,"height"),Ln(n,"width"),Ln(n,"height")}(n,i),n},de=function(n,t){var e=function(t){return n(t)?v.from(t.dom().nodeValue):v.none()},r=ct.detect().browser,o=r.isIE()&&10===r.version.major?function(n){try{return e(n)}catch(t){return v.none()}}:e;return{get:function(e){if(!n(e))throw new Error("Can only get "+t+" value of a "+t+" node");return o(e).getOr("")},getOption:o,set:function(e,r){if(!n(e))throw new Error("Can only set raw "+t+" value of a "+t+" node");e.dom().nodeValue=r}}}(dn,"text"),me=function(n){return de.get(n)},ge=function(n){return de.getOption(n)},pe=function(n,t){de.set(n,t)},he=function(n){return"img"===an(n)?1:ge(n).fold(function(){return xt(n).length},function(n){return n.length})},ve=["img","br"],be=function(n){return ge(n).filter(function(n){return 0!==n.trim().length||n.indexOf(" ")>-1}).isSome()||R(ve,an(n))},we=function(n){return t=be,(e=function(n){for(var r=0;r<n.childNodes.length;r++){if(t(Dn.fromDom(n.childNodes[r])))return v.some(Dn.fromDom(n.childNodes[r]));var o=e(n.childNodes[r]);if(o.isSome())return o}return v.none()})(n.dom());var t,e},ye=function(n){return xe(n,be)},xe=function(n,t){var e=function(n){for(var r=xt(n),o=r.length-1;o>=0;o--){var i=r[o];if(t(i))return v.some(i);var u=e(i);if(u.isSome())return u}return v.none()};return e(n)},Se=function(n,t){return Dn.fromDom(n.dom().cloneNode(t))},Ce=function(n){return Se(n,!1)},Oe=function(n){return Se(n,!0)},Te=function(n,t){var e=function(n,t){var e=Dn.fromTag(t),r=yn(n);return hn(e,r),e}(n,t),r=xt(Oe(n));return Et(e,r),e},Re=function(){var n=Dn.fromTag("td");return Rt(n,Dn.fromTag("br")),n},De=function(n,t,e){var r=Te(n,t);return q(e,function(n,t){null===n?wn(r,t):pn(r,t,n)}),r},Ae=function(n){return n},Ee=function(n){return function(){return Dn.fromTag("tr",n.dom())}},Ne=function(n,t,e){return{row:Ee(t),cell:function(t){var r,o,i,u,a=ht(t.element()),c=Dn.fromTag(an(t.element()),a.dom()),l=e.getOr(["strong","em","b","i","span","font","h1","h2","h3","h4","h5","h6","p","div"]),f=l.length>0?function(n,t,e){return we(n).map(function(r){var o=e.join(","),i=zt(r,o,function(t){return mt(t,n)});return k(i,function(n,t){var e=Ce(t);return wn(e,"contenteditable"),Rt(n,e),e},t)}).getOr(t)}(t.element(),c,l):c;return Rt(f,Dn.fromTag("br")),r=t.element(),o=c,i=r.dom(),u=o.dom(),On(i)&&On(u)&&(u.style.cssText=i.style.cssText),Ln(c,"height"),1!==t.colspan()&&Ln(t.element(),"width"),n(t.element(),c),c},replace:De,gap:Re}},ke=function(n){return{row:Ee(n),cell:Re,replace:Ae,gap:Re}},Ie=["body","p","div","article","aside","figcaption","figure","footer","header","nav","section","ol","ul","li","table","thead","tbody","tfoot","caption","tr","td","th","h1","h2","h3","h4","h5","h6","blockquote","pre","address"];function Pe(){return{up:o({selector:Gt,closest:$t,predicate:Vt,all:bt}),down:o({selector:Ht,predicate:Ut}),styles:o({get:_n,getRaw:Mn,set:In,remove:Ln}),attrs:o({get:vn,set:pn,remove:wn,copyTo:function(n,t){var e=yn(n);hn(t,e)}}),insert:o({before:Ct,after:Ot,afterAll:At,append:Rt,appendAll:Et,prepend:Tt,wrap:Dt}),remove:o({unwrap:It,remove:kt}),create:o({nu:Dn.fromTag,clone:function(n){return Dn.fromDom(n.dom().cloneNode(!1))},text:Dn.fromText}),query:o({comparePosition:function(n,t){return n.dom().compareDocumentPosition(t.dom())},prevSibling:wt,nextSibling:yt}),property:o({children:xt,name:an,parent:vt,document:function(n){return n.dom().ownerDocument},isText:dn,isComment:fn,isElement:sn,getText:me,setText:pe,isBoundary:function(n){return!!sn(n)&&("body"===an(n)||R(Ie,an(n)))},isEmptyTag:function(n){return!!sn(n)&&R(["br","img","hr","input"],an(n))}}),eq:mt,is:pt}}var _e=$("left","right"),Be=function(n,t,e){var r=n.property().children(t);return _(r,u(n.eq,e)).map(function(n){return{before:o(r.slice(0,n)),after:o(r.slice(n+1))}})},Me=function(n,t,e){return Be(n,t,e).map(function(r){var o=n.create().clone(t);return n.insert().appendAll(o,r.before().concat([e])),n.insert().appendAll(t,r.after()),n.insert().before(t,o),_e(o,t)})},Le=function(n,t,e){return Be(n,t,e).map(function(e){var r=n.create().clone(t);return n.insert().appendAll(r,e.after()),n.insert().after(t,r),_e(t,r)})},je=function(n,t,e,r){var o=$("first","second","splits"),i=function(t,u,a){var c=o(t,v.none(),a);return e(t)?o(t,u,a):n.property().parent(t).bind(function(o){return r(n,o,t).map(function(n){var t=[{first:n.left,second:n.right}],r=e(o)?o:n.left();return i(r,v.some(n.right()),a.concat(t))}).getOr(c)})};return i(t,v.none(),[])},We=function(n,t,e,r){var o=t(n,e);return k(r,function(e,r){var o=t(n,r);return Ue(n,e,o)},o)},Ue=function(n,t,e){return t.bind(function(t){return e.filter(u(n.eq,t))})},ze=function(n,t,e){return e.length>0?function(n,t,e,r){return r(n,t,e[0],e.slice(1))}(n,t,e,We):v.none()},Fe=function(n,t){return u(n.eq,t)},He=function(n,t,e,r){var i=void 0!==r?r:o(!1),u=[t].concat(n.up().all(t)),a=[e].concat(n.up().all(e)),c=function(n){return _(n,i).fold(function(){return n},function(t){return n.slice(0,t+1)})},l=c(u),f=c(a),s=P(l,function(t){return D(f,Fe(n,t))});return{firstpath:o(l),secondpath:o(f),shared:o(s)}},qe=function(n,t,e){var r=He(n,t,e);return r.shared().bind(function(t){return function(n,t,e,r){var o=n.property().children(t);if(n.eq(t,e[0]))return v.some([e[0]]);if(n.eq(t,r[0]))return v.some([r[0]]);var i=function(e){var r=z(e),i=_(r,Fe(n,t)).getOr(-1),u=i<r.length-1?r[i+1]:r[i];return _(o,Fe(n,u))},u=i(e),a=i(r);return u.bind(function(n){return a.map(function(t){var e=Math.min(n,t),r=Math.max(n,t);return o.slice(e,r+1)})})}(n,t,r.firstpath(),r.secondpath())})},Ve=He,Ge=function(n,t,e){return ze(n,t,e)},Ke=function(n,t,e){return qe(n,t,e)},Xe=function(n,t,e,r){return Ve(n,t,e,r)},$e=function(n,t,e){return Me(n,t,e)},Ye=function(n,t,e){return Le(n,t,e)},Je=function(n,t,e,r){return je(n,t,e,r)},Ze=Pe(),Qe={sharedOne:function(n,t){return Ge(Ze,function(t,e){return n(e)},t)},subset:function(n,t){return Ke(Ze,n,t)},ancestors:function(n,t,e){return Xe(Ze,n,t,e)},breakToLeft:function(n,t){return $e(Ze,n,t)},breakToRight:function(n,t){return Ye(Ze,n,t)},breakPath:function(n,t,e){return Je(Ze,n,t,function(n,t,r){return e(t,r)})}},nr=function(n,t){return t.column()>=n.startCol()&&t.column()+t.colspan()-1<=n.finishCol()&&t.row()>=n.startRow()&&t.row()+t.rowspan()-1<=n.finishRow()},tr=function(n,t){var e=t.column(),r=t.column()+t.colspan()-1,o=t.row(),i=t.row()+t.rowspan()-1;return e<=n.finishCol()&&r>=n.startCol()&&o<=n.finishRow()&&i>=n.startRow()},er=function(n,t){for(var e=!0,r=u(nr,t),o=t.startRow();o<=t.finishRow();o++)for(var i=t.startCol();i<=t.finishCol();i++)e=e&&ce.getAt(n,o,i).exists(r);return e?v.some(t):v.none()},rr=function(n,t,e){var r=ce.findItem(n,t,mt),o=ce.findItem(n,e,mt);return r.bind(function(n){return o.map(function(t){return e=n,r=t,Wt.bounds(Math.min(e.row(),r.row()),Math.min(e.column(),r.column()),Math.max(e.row()+e.rowspan()-1,r.row()+r.rowspan()-1),Math.max(e.column()+e.colspan()-1,r.column()+r.colspan()-1));var e,r})})},or=rr,ir=function(n,t,e){return rr(n,t,e).bind(function(t){return er(n,t)})},ur=function(n,t,e,r){return ce.findItem(n,t,mt).bind(function(t){var o=e>0?t.row()+t.rowspan()-1:t.row(),i=r>0?t.column()+t.colspan()-1:t.column();return ce.getAt(n,o+e,i+r).map(function(n){return n.element()})})},ar=function(n,t,e){return or(n,t,e).map(function(t){var e=ce.filterItems(n,u(tr,t));return A(e,function(n){return n.element()})})},cr=function(n,t){return ce.findItem(n,t,function(n,t){return gt(t,n)}).bind(function(n){return n.element()})},lr=function(n){var t=oe(n);return ce.generate(t)},fr=function(n,t,e){return re.table(n).bind(function(r){var o=lr(r);return ur(o,n,t,e)})},sr=function(n,t,e){var r=lr(n);return ar(r,t,e)},dr=function(n,t,e,r,o){var i=lr(n),u=mt(n,e)?t:cr(i,t),a=mt(n,o)?r:cr(i,r);return ar(i,u,a)},mr=function(n,t,e){var r=lr(n);return ir(r,t,e)},gr=function(n,t){return Gt(n,"table")},pr=tn(["boxes","start","finish"],[]),hr=function(n,t,e){var r=function(n){return function(t){return e(t)||mt(t,n)}};return mt(n,t)?v.some(pr({boxes:v.some([n]),start:n,finish:t})):gr(n).bind(function(o){return gr(t).bind(function(i){if(mt(o,i))return v.some(pr({boxes:sr(o,n,t),start:n,finish:t}));if(gt(o,i)){var u=(a=zt(t,"td,th",r(o))).length>0?a[a.length-1]:t;return v.some(pr({boxes:dr(o,n,o,t,i),start:n,finish:u}))}if(gt(i,o)){var a,c=(a=zt(n,"td,th",r(i))).length>0?a[a.length-1]:n;return v.some(pr({boxes:dr(i,n,o,t,i),start:n,finish:c}))}return Qe.ancestors(n,t).shared().bind(function(u){return $t(u,"table",e).bind(function(e){var u=zt(t,"td,th",r(e)),a=u.length>0?u[u.length-1]:t,c=zt(n,"td,th",r(e)),l=c.length>0?c[c.length-1]:n;return v.some(pr({boxes:dr(e,n,o,t,i),start:l,finish:a}))})})})})},vr={identify:hr,retrieve:function(n,t){var e=Ht(n,t);return e.length>0?v.some(e):v.none()},shiftSelection:function(n,t,e,r,i){return function(n,t){return P(n,function(n){return st(n,t)})}(n,i).bind(function(n){return fr(n,t,e).bind(function(n){return function(n,t){return Gt(n,"table").bind(function(e){return Xt(e,t).bind(function(t){return hr(t,n).bind(function(n){return n.boxes().map(function(t){return{boxes:o(t),start:o(n.start()),finish:o(n.finish())}})})})})}(n,r)})})},getEdges:function(n,t,e){return Xt(n,t).bind(function(t){return Xt(n,e).bind(function(n){return Qe.sharedOne(gr,[t,n]).map(function(e){return{first:o(t),last:o(n),table:o(e)}})})})}},br=function(n,t){return vr.retrieve(n,t)},wr=function(n,t,e){return vr.getEdges(n,t,e).bind(function(t){var e=function(t){return mt(n,t)},r=Gt(t.first(),"thead,tfoot,tbody,table",e),o=Gt(t.last(),"thead,tfoot,tbody,table",e);return r.bind(function(n){return o.bind(function(e){return mt(n,e)?mr(t.table(),t.first(),t.last()):v.none()})})})},yr="data-mce-selected",xr={selected:o(yr),selectedSelector:o("td[data-mce-selected],th[data-mce-selected]"),attributeSelector:o("[data-mce-selected]"),firstSelected:o("data-mce-first-selected"),firstSelectedSelector:o("td[data-mce-first-selected],th[data-mce-first-selected]"),lastSelected:o("data-mce-last-selected"),lastSelectedSelector:o("td[data-mce-last-selected],th[data-mce-last-selected]")},Sr=function(n){if(!x(n))throw new Error("cases must be an array");if(0===n.length)throw new Error("there must be at least one case");var t=[],e={};return E(n,function(r,o){var i=F(r);if(1!==i.length)throw new Error("one and only one name per case");var u=i[0],a=r[u];if(void 0!==e[u])throw new Error("duplicate key detected:"+u);if("cata"===u)throw new Error("cannot have a case named cata (sorry)");if(!x(a))throw new Error("case arguments must be an array");t.push(u),e[u]=function(){var e=arguments.length;if(e!==a.length)throw new Error("Wrong number of arguments to case "+u+". Expected "+a.length+" ("+a+"), got "+e);for(var r=new Array(e),i=0;i<r.length;i++)r[i]=arguments[i];return{fold:function(){if(arguments.length!==n.length)throw new Error("Wrong number of arguments to fold. Expected "+n.length+", got "+arguments.length);return arguments[o].apply(null,r)},match:function(n){var e=F(n);if(t.length!==e.length)throw new Error("Wrong number of arguments to match. Expected: "+t.join(",")+"\nActual: "+e.join(","));if(!W(t,function(n){return R(e,n)}))throw new Error("Not all branches were specified when using match. Specified: "+e.join(", ")+"\nRequired: "+t.join(", "));return n[u].apply(null,r)},log:function(n){console.log(n,{constructors:t,constructor:u,params:r})}}}}),e},Cr=Sr([{none:[]},{multiple:["elements"]},{single:["selection"]}]),Or={cata:function(n,t,e,r){return n.fold(t,e,r)},none:Cr.none,multiple:Cr.multiple,single:Cr.single},Tr=function(n,t){return Or.cata(t.get(),o([]),i,o([n]))},Rr=function(n,t){return Or.cata(t.get(),v.none,function(t,e){return 0===t.length?v.none():wr(n,xr.firstSelectedSelector(),xr.lastSelectedSelector()).bind(function(n){return t.length>1?v.some({bounds:o(n),cells:o(t)}):v.none()})},v.none)},Dr=function(n,t){var e=Tr(n,t);return e.length>0&&W(e,function(n){return bn(n,"rowspan")&&parseInt(vn(n,"rowspan"),10)>1||bn(n,"colspan")&&parseInt(vn(n,"colspan"),10)>1})?v.some(e):v.none()},Ar=Tr,Er=function(n){return{element:o(n),mergable:v.none,unmergable:v.none,selection:o([n])}},Nr=$("element","clipboard","generators"),kr={noMenu:Er,forMenu:function(n,t,e){return{element:o(e),mergable:o(Rr(t,n)),unmergable:o(Dr(e,n)),selection:o(Ar(e,n))}},notCell:function(n){return Er(n)},paste:Nr,pasteRows:function(n,t,e,r,i){return{element:o(e),mergable:v.none,unmergable:v.none,selection:o(Ar(e,n)),clipboard:o(r),generators:o(i)}}},Ir={registerEvents:function(t,r,o,i){t.on("BeforeGetContent",function(n){!0===n.selection&&Or.cata(r.get(),e,function(e){n.preventDefault(),function(n){return re.table(n[0]).map(Oe).map(function(n){return[se(n,xr.attributeSelector())]})}(e).each(function(e){n.content="text"===n.format?function(n){return A(n,function(n){return n.dom().innerText}).join("")}(e):function(n,t){return A(t,function(t){return n.selection.serializer.serialize(t.dom(),{})}).join("")}(t,e)})},e)}),t.on("BeforeSetContent",function(e){!0===e.selection&&!0===e.paste&&v.from(t.dom.getParent(t.selection.getStart(),"th,td")).each(function(r){var u=Dn.fromDom(r);re.table(u).each(function(r){var a,c,l,f=N((a=e.content,(l=(c||n.document).createElement("div")).innerHTML=a,xt(Dn.fromDom(l))),function(n){return"meta"!==an(n)});if(1===f.length&&"table"===an(f[0])){e.preventDefault();var s=Dn.fromDom(t.getDoc()),d=ke(s),m=kr.paste(u,f[0],d);o.pasteCells(r,m).each(function(n){t.selection.setRng(n),t.focus(),i.clear(r)})}})})})}};function Pr(n,t){var e=function(e){var r=t(e);if(r<=0||null===r){var o=_n(e,n);return parseFloat(o)||0}return r},r=function(n,t){return I(t,function(t,e){var r=_n(n,e),o=void 0===r?0:parseInt(r,10);return isNaN(o)?t:t+o},0)};return{set:function(t,e){if(!O(e)&&!e.match(/^[0-9]+$/))throw new Error(n+".set accepts only positive integer values. Value was "+e);var r=t.dom();On(r)&&(r.style[n]=e+"px")},get:e,getOuter:e,aggregate:r,max:function(n,t,e){var o=r(n,e);return t>o?t-o:0}}}var _r=Pr("height",function(n){var t=n.dom();return An(n)?t.getBoundingClientRect().height:t.offsetHeight}),Br=function(n){return _r.get(n)},Mr=function(n){return _r.getOuter(n)},Lr=Pr("width",function(n){return n.dom().offsetWidth}),jr=function(n){return Lr.get(n)},Wr=function(n){return Lr.getOuter(n)},Ur=ct.detect(),zr=function(n,t,e){return function(n,t){var e=parseFloat(n);return isNaN(e)?t:e}(_n(n,t),e)},Fr=function(n){return Ur.browser.isIE()||Ur.browser.isEdge()?function(n){var t=zr(n,"padding-top",0),e=zr(n,"padding-bottom",0),r=zr(n,"border-top-width",0),o=zr(n,"border-bottom-width",0),i=n.dom().getBoundingClientRect().height;return"border-box"===_n(n,"box-sizing")?i:i-t-e-(r+o)}(n):zr(n,"height",Br(n))},Hr=/(\d+(\.\d+)?)(\w|%)*/,qr=/(\d+(\.\d+)?)%/,Vr=/(\d+(\.\d+)?)px|em/,Gr=function(n,t){In(n,"height",t+"px")},Kr=function(n,t,e,r){var o,i,u=parseInt(n,10);return xn(o=n,i="%",o.length-i.length)&&"table"!==an(t)?function(n,t,e,r){var o=re.table(n).map(function(n){var r=e(n);return Math.floor(t/100*r)}).getOr(t);return r(n,o),o}(t,u,e,r):u},Xr=function(n){var t=function(n){return Mn(n,"height").getOrThunk(function(){return Fr(n)+"px"})}(n);return t?Kr(t,n,Br,Gr):Br(n)},$r=function(n,t){return bn(n,t)?parseInt(vn(n,t),10):1},Yr=function(n){return Mn(n,"width").fold(function(){return v.from(vn(n,"width"))},function(n){return v.some(n)})},Jr=function(n,t){return n/t.pixelWidth()*100},Zr={percentageBasedSizeRegex:o(qr),pixelBasedSizeRegex:o(Vr),setPixelWidth:function(n,t){In(n,"width",t+"px")},setPercentageWidth:function(n,t){In(n,"width",t+"%")},setHeight:Gr,getPixelWidth:function(n,t){return Yr(n).fold(function(){return jr(n)},function(e){return function(n,t,e){if(Vr.test(t)){var r=Vr.exec(t);return parseInt(r[1],10)}if(qr.test(t)){var o=qr.exec(t);return function(n,t){return n/100*t.pixelWidth()}(parseFloat(o[1]),e)}return jr(n)}(n,e,t)})},getPercentageWidth:function(n,t){return Yr(n).fold(function(){var e=jr(n);return Jr(e,t)},function(e){return function(n,t,e){if(qr.test(t)){var r=qr.exec(t);return parseFloat(r[1])}var o=jr(n);return Jr(o,e)}(n,e,t)})},getGenericWidth:function(n){return Yr(n).bind(function(n){if(Hr.test(n)){var t=Hr.exec(n);return v.some({width:o(t[1]),unit:o(t[3])})}return v.none()})},setGenericWidth:function(n,t,e){In(n,"width",t+e)},getHeight:function(n){return function(n,t,e){return e(n)/$r(n,t)}(n,"rowspan",Xr)},getRawWidth:Yr},Qr=function(n,t){Zr.getGenericWidth(n).each(function(e){var r=e.width()/2;Zr.setGenericWidth(n,r,e.unit()),Zr.setGenericWidth(t,r,e.unit())})},no=function(n,t){return{left:o(n),top:o(t),translate:function(e,r){return no(n+e,t+r)}}},to=no,eo=function(n,t){return void 0!==n?n:void 0!==t?t:0},ro=function(t){var e=t.dom().ownerDocument,r=e.body,o=function(t){var e=t.dom();return e===e.window&&t instanceof n.Window?t:mn(t)?e.defaultView||e.parentWindow:null}(Dn.fromDom(e)),i=e.documentElement,u=eo(o.pageYOffset,i.scrollTop),a=eo(o.pageXOffset,i.scrollLeft),c=eo(i.clientTop,r.clientTop),l=eo(i.clientLeft,r.clientLeft);return oo(t).translate(a-l,u-c)},oo=function(t){var e=t.dom(),r=e.ownerDocument,o=r.body,i=Dn.fromDom(r.documentElement);return o===e?to(o.offsetLeft,o.offsetTop):function(t,e){var r=e||Dn.fromDom(n.document.documentElement);return Vt(t,u(mt,r)).isSome()}(t,i)?function(n){var t=n.getBoundingClientRect();return to(t.left,t.top)}(e):to(0,0)},io=$("row","y"),uo=$("col","x"),ao=function(n){return ro(n).left()+Wr(n)},co=function(n){return ro(n).left()},lo=function(n,t){return uo(n,co(t))},fo=function(n,t){return uo(n,ao(t))},so=function(n){return ro(n).top()},mo=function(n,t,e){if(0===e.length)return[];var r=A(e.slice(1),function(t,e){return t.map(function(t){return n(e,t)})}),o=e[e.length-1].map(function(n){return t(e.length-1,n)});return r.concat([o])},go={delta:i,positions:u(mo,function(n,t){return io(n,so(t))},function(n,t){return io(n,so(t)+Mr(t))}),edge:so},po={delta:i,edge:co,positions:u(mo,lo,fo)},ho={height:go,rtl:{delta:function(n,t){return-n},edge:ao,positions:u(mo,fo,lo)},ltr:po},vo={ltr:ho.ltr,rtl:ho.rtl};function bo(n){var t=function(t){return n(t).isRtl()?vo.rtl:vo.ltr};return{delta:function(n,e){return t(e).delta(n,e)},edge:function(n){return t(n).edge(n)},positions:function(n,e){return t(e).positions(n)}}}var wo,yo=function(n){var t=oe(n);return ce.generate(t).grid()},xo=Object.prototype.hasOwnProperty,So=(wo=function(n,t){return t},function(){for(var n=new Array(arguments.length),t=0;t<n.length;t++)n[t]=arguments[t];if(0===n.length)throw new Error("Can't merge zero objects");for(var e={},r=0;r<n.length;r++){var o=n[r];for(var i in o)xo.call(o,i)&&(e[i]=wo(e[i],o[i]))}return e}),Co=function(n){for(var t=[],e=function(n){t.push(n)},r=0;r<n.length;r++)n[r].each(e);return t},Oo=function(n,t){for(var e=0;e<n.length;e++){var r=t(n[e],e);if(r.isSome())return r}return v.none()},To=function(n,t,e,r){e===r?wn(n,t):pn(n,t,e)},Ro=function(n,t){var e=[],r=[],i=function(t,o){t.length>0?function(t,o){var i=Kt(n,o).getOrThunk(function(){var t=Dn.fromTag(o,ht(n).dom());return Rt(n,t),t});Nt(i);var u=A(t,function(n){n.isNew()&&e.push(n.element());var t=n.element();return Nt(t),E(n.cells(),function(n){n.isNew()&&r.push(n.element()),To(n.element(),"colspan",n.colspan(),1),To(n.element(),"rowspan",n.rowspan(),1),Rt(t,n.element())}),t});Et(i,u)}(t,o):function(t){Kt(n,t).each(kt)}(o)},u=[],a=[],c=[];return E(t,function(n){switch(n.section()){case"thead":u.push(n);break;case"tbody":a.push(n);break;case"tfoot":c.push(n)}}),i(u,"thead"),i(a,"tbody"),i(c,"tfoot"),{newRows:o(e),newCells:o(r)}},Do=function(n){return A(n,function(n){var t=Ce(n.element());return E(n.cells(),function(n){var e=Oe(n.element());To(e,"colspan",n.colspan(),1),To(e,"rowspan",n.rowspan(),1),Rt(t,e)}),t})},Ao=function(n,t){var e=vn(n,t);return void 0===e||""===e?[]:e.split(" ")},Eo=function(n){return void 0!==n.dom().classList},No=function(n,t){return function(n,t,e){var r=Ao(n,t).concat([e]);return pn(n,t,r.join(" ")),!0}(n,"class",t)},ko=function(n,t){return function(n,t,e){var r=N(Ao(n,t),function(n){return n!==e});return r.length>0?pn(n,t,r.join(" ")):wn(n,t),!1}(n,"class",t)},Io=function(n,t){Eo(n)?n.dom().classList.add(t):No(n,t)},Po=function(n){0===(Eo(n)?n.dom().classList:function(n){return Ao(n,"class")}(n)).length&&wn(n,"class")},_o=function(n,t){return Eo(n)&&n.dom().classList.contains(t)},Bo=function(n,t){for(var e=[],r=0;r<n;r++)e.push(t(r));return e},Mo=function(n,t){for(var e=[],r=n;r<t;r++)e.push(r);return e},Lo=function(n,t){if(t<0||t>=n.length-1)return v.none();var e=n[t].fold(function(){var e=z(n.slice(0,t));return Oo(e,function(n,t){return n.map(function(n){return{value:n,delta:t+1}})})},function(n){return v.some({value:n,delta:0})}),r=n[t+1].fold(function(){var e=n.slice(t+1);return Oo(e,function(n,t){return n.map(function(n){return{value:n,delta:t+1}})})},function(n){return v.some({value:n,delta:1})});return e.bind(function(n){return r.map(function(t){var e=t.delta+n.delta;return Math.abs(t.value-n.value)/e})})},jo=function(n,t,e){var r=n();return P(r,t).orThunk(function(){return v.from(r[0]).orThunk(e)}).map(function(n){return n.element()})},Wo=function(n){var t=n.grid(),e=Mo(0,t.columns()),r=Mo(0,t.rows());return A(e,function(t){return jo(function(){return j(r,function(e){return ce.getAt(n,e,t).filter(function(n){return n.column()===t}).fold(o([]),function(n){return[n]})})},function(n){return 1===n.colspan()},function(){return ce.getAt(n,0,t)})})},Uo=function(n){var t=n.grid(),e=Mo(0,t.rows()),r=Mo(0,t.columns());return A(e,function(t){return jo(function(){return j(r,function(e){return ce.getAt(n,t,e).filter(function(n){return n.row()===t}).fold(o([]),function(n){return[n]})})},function(n){return 1===n.rowspan()},function(){return ce.getAt(n,t,0)})})},zo=function(n){var t=n.replace(/\./g,"-");return{resolve:function(n){return t+"-"+n}}},Fo=zo("ephox-snooker"),Ho={resolve:Fo.resolve},qo=function(n,t,e,r,o){var i=Dn.fromTag("div");return Pn(i,{position:"absolute",left:t-r/2+"px",top:e+"px",height:o+"px",width:r+"px"}),hn(i,{"data-column":n,role:"presentation"}),i},Vo=function(n,t,e,r,o){var i=Dn.fromTag("div");return Pn(i,{position:"absolute",left:t+"px",top:e-o/2+"px",height:o+"px",width:r+"px"}),hn(i,{"data-row":n,role:"presentation"}),i},Go=Ho.resolve("resizer-bar"),Ko=Ho.resolve("resizer-rows"),Xo=Ho.resolve("resizer-cols"),$o=function(n){var t=Ht(n.parent(),"."+Go);E(t,kt)},Yo=function(n,t,e){var r=n.origin();E(t,function(t,o){t.each(function(t){var o=e(r,t);Io(o,Go),Rt(n.parent(),o)})})},Jo=function(n,t,e,r,o,i){var u=ro(t);!function(n,t,e,r){Yo(n,t,function(n,t){var o=Vo(t.row(),e.left()-n.left(),t.y()-n.top(),r,7);return Io(o,Ko),o})}(n,e.length>0?o.positions(e,t):[],u,Wr(t)),function(n,t,e,r){Yo(n,t,function(n,t){var o=qo(t.col(),t.x()-n.left(),e.top()-n.top(),7,r);return Io(o,Xo),o})}(n,r.length>0?i.positions(r,t):[],u,Mr(t))},Zo=function(n,t){var e=Ht(n.parent(),"."+Go);E(e,t)},Qo={refresh:function(n,t,e,r){$o(n);var o=oe(t),i=ce.generate(o),u=Uo(i),a=Wo(i);Jo(n,t,u,a,e,r)},hide:function(n){Zo(n,function(n){In(n,"display","none")})},show:function(n){Zo(n,function(n){In(n,"display","block")})},destroy:$o,isRowBar:function(n){return _o(n,Ko)},isColBar:function(n){return _o(n,Xo)}},ni=function(n,t){return Wt.rowcells(t,n.section())},ti=function(n,t){return n.cells()[t]},ei={addCell:function(n,t,e){var r=n.cells(),o=r.slice(0,t),i=r.slice(t),u=o.concat([e]).concat(i);return ni(n,u)},setCells:ni,mutateCell:function(n,t,e){n.cells()[t]=e},getCell:ti,getCellElement:function(n,t){return ti(n,t).element()},mapCells:function(n,t){var e=n.cells(),r=A(e,t);return Wt.rowcells(r,n.section())},cellLength:function(n){return n.cells().length}},ri=function(n,t){if(0===n.length)return 0;var e=n[0];return _(n,function(n){return!t(e.element(),n.element())}).fold(function(){return n.length},function(n){return n})},oi=function(n,t,e,r){var i=function(n,t){return n[t]}(n,t).cells().slice(e),u=ri(i,r),a=function(n,t){return A(n,function(n){return ei.getCell(n,t)})}(n,e).slice(t),c=ri(a,r);return{colspan:o(u),rowspan:o(c)}},ii=function(n,t){var e=A(n,function(n,t){return A(n.cells(),function(n,t){return!1})});return A(n,function(r,o){var i=j(r.cells(),function(r,i){if(!1===e[o][i]){var u=oi(n,o,i,t);return function(n,t,r,o){for(var i=n;i<n+r;i++)for(var u=t;u<t+o;u++)e[i][u]=!0}(o,i,u.rowspan(),u.colspan()),[Wt.detailnew(r.element(),u.rowspan(),u.colspan(),r.isNew())]}return[]});return Wt.rowdetails(i,r.section())})},ui=function(n,t,e){for(var r=[],o=0;o<n.grid().rows();o++){for(var i=[],u=0;u<n.grid().columns();u++){var a=ce.getAt(n,o,u).map(function(n){return Wt.elementnew(n.element(),e)}).getOrThunk(function(){return Wt.elementnew(t.gap(),!0)});i.push(a)}var c=Wt.rowcells(i,n.all()[o].section());r.push(c)}return r},ai=function(n,t){return A(n,function(n){var e=function(n){return Oo(n,function(n){return vt(n.element()).map(function(n){var t=vt(n).isNone();return Wt.elementnew(n,t)})}).getOrThunk(function(){return Wt.elementnew(t.row(),!0)})}(n.details());return Wt.rowdatanew(e.element(),n.details(),n.section(),e.isNew())})},ci=function(n,t){var e=ii(n,mt);return ai(e,t)},li=function(n,t){var e=L(A(n.all(),function(n){return n.cells()}));return P(e,function(n){return mt(t,n.element())})},fi=function(n,t,e,r,i){return function(u,a,c,l,f){var s=oe(a),d=ce.generate(s);return t(d,c).map(function(t){var e=function(n,t){return ui(n,t,!1)}(d,l),r=n(e,t,mt,i(l)),u=ci(r.grid(),l);return{grid:o(u),cursor:r.cursor}}).fold(function(){return v.none()},function(n){var t=Ro(a,n.grid());return e(a,n.grid(),f),r(a),Qo.refresh(u,a,ho.height,f),v.some({cursor:n.cursor,newRows:t.newRows,newCells:t.newCells})})}},si=ci,di=function(n,t){return re.cell(t.element()).bind(function(t){return li(n,t)})},mi=function(n,t){var e=A(t.selection(),function(t){return re.cell(t).bind(function(t){return li(n,t)})}),r=Co(e);return r.length>0?v.some(r):v.none()},gi=function(n,t){return re.cell(t.element()).bind(function(e){return li(n,e).map(function(n){return So(n,{generators:t.generators,clipboard:t.clipboard})})})},pi=function(n,t){var e=A(t.selection(),function(t){return re.cell(t).bind(function(t){return li(n,t)})}),r=Co(e);return r.length>0?v.some(So({cells:r},{generators:t.generators,clipboard:t.clipboard})):v.none()},hi=function(n,t){return t.mergable()},vi=function(n,t){return t.unmergable()},bi=function(n){return{is:function(t){return n===t},isValue:s,isError:f,getOr:o(n),getOrThunk:o(n),getOrDie:o(n),or:function(t){return bi(n)},orThunk:function(t){return bi(n)},fold:function(t,e){return e(n)},map:function(t){return bi(t(n))},mapError:function(t){return bi(n)},each:function(t){t(n)},bind:function(t){return t(n)},exists:function(t){return t(n)},forall:function(t){return t(n)},toOption:function(){return v.some(n)}}},wi=function(n){return{is:f,isValue:f,isError:s,getOr:i,getOrThunk:function(n){return n()},getOrDie:function(){return(t=String(n),function(){throw new Error(t)})();var t},or:function(n){return n},orThunk:function(n){return n()},fold:function(t,e){return t(n)},map:function(t){return wi(n)},mapError:function(t){return wi(t(n))},each:e,bind:function(t){return wi(n)},exists:f,forall:s,toOption:v.none}},yi={value:bi,error:wi},xi=function(n,t){return A(n,function(){return Wt.elementnew(t.cell(),!0)})},Si=function(n,t,e){return n.concat(Bo(t,function(t){return ei.setCells(n[n.length-1],xi(n[n.length-1].cells(),e))}))},Ci=function(n,t,e){return A(n,function(n){return ei.setCells(n,n.cells().concat(xi(Mo(0,t),e)))})},Oi=function(n,t,e){if(n.row()>=t.length||n.column()>ei.cellLength(t[0]))return yi.error("invalid start address out of table bounds, row: "+n.row()+", column: "+n.column());var r=t.slice(n.row()),i=r[0].cells().slice(n.column()),u=ei.cellLength(e[0]),a=e.length;return yi.value({rowDelta:o(r.length-a),colDelta:o(i.length-u)})},Ti=function(n,t){var e=ei.cellLength(n[0]),r=ei.cellLength(t[0]);return{rowDelta:o(0),colDelta:o(e-r)}},Ri=function(n,t,e){var r=t.colDelta()<0?Ci:i;return(t.rowDelta()<0?Si:i)(r(n,Math.abs(t.colDelta()),e),Math.abs(t.rowDelta()),e)},Di=function(n,t,e,r){if(0===n.length)return n;for(var o=t.startRow();o<=t.finishRow();o++)for(var i=t.startCol();i<=t.finishCol();i++)ei.mutateCell(n[o],i,Wt.elementnew(r(),!1));return n},Ai=function(n,t,e,r){for(var o=!0,i=0;i<n.length;i++)for(var u=0;u<ei.cellLength(n[0]);u++){var a=e(ei.getCellElement(n[i],u),t);!0===a&&!1===o?ei.mutateCell(n[i],u,Wt.elementnew(r(),!0)):!0===a&&(o=!1)}return n},Ei=function(n,t,e,r){if(t>0&&t<n.length){var o=function(n,t){return I(n,function(n,e){return D(n,function(n){return t(n.element(),e.element())})?n:n.concat([e])},[])}(n[t-1].cells(),e);E(o,function(o){for(var i=v.none(),u=function(t){for(var u=function(u){var a=n[t].cells()[u];e(a.element(),o.element())&&(i.isNone()&&(i=v.some(r())),i.each(function(e){ei.mutateCell(n[t],u,Wt.elementnew(e,!0))}))},a=0;a<ei.cellLength(n[0]);a++)u(a)},a=t;a<n.length;a++)u(a)})}return n},Ni=function(n,t,e,r){var o=u(r,ei.getCell(n[t],e).element()),i=n[t];return n.length>1&&ei.cellLength(i)>1&&(e>0&&o(ei.getCellElement(i,e-1))||e<i.length-1&&o(ei.getCellElement(i,e+1))||t>0&&o(ei.getCellElement(n[t-1],e))||t<n.length-1&&o(ei.getCellElement(n[t+1],e)))},ki=function(n,t,e,r,o){return Oi(n,t,e).map(function(i){var u=Ri(t,i,r);return function(n,t,e,r,o){for(var i=n.row(),u=n.column(),a=i+e.length,c=u+ei.cellLength(e[0]),l=i;l<a;l++)for(var f=u;f<c;f++){Ni(t,l,f,o)&&Ai(t,ei.getCellElement(t[l],f),o,r.cell);var s=ei.getCellElement(e[l-i],f-u),d=r.replace(s);ei.mutateCell(t[l],f,Wt.elementnew(d,!0))}return t}(n,u,e,r,o)})},Ii=function(n,t,e,r,o){Ei(t,n,o,r.cell);var i=Ti(e,t),u=Ri(e,i,r),a=Ti(t,u),c=Ri(t,a,r);return c.slice(0,n).concat(u).concat(c.slice(n,c.length))},Pi=function(n,t,e,r,o){var i=n.slice(0,t),u=n.slice(t),a=ei.mapCells(n[e],function(e,i){return t>0&&t<n.length&&r(ei.getCellElement(n[t-1],i),ei.getCellElement(n[t],i))?ei.getCell(n[t],i):Wt.elementnew(o(e.element(),r),!0)});return i.concat([a]).concat(u)},_i=function(n,t,e,r,o){return A(n,function(n){var i=t>0&&t<ei.cellLength(n)&&r(ei.getCellElement(n,t-1),ei.getCellElement(n,t))?ei.getCell(n,t):Wt.elementnew(o(ei.getCellElement(n,e),r),!0);return ei.addCell(n,t,i)})},Bi=function(n,t,e,r,o){var i=e+1;return A(n,function(n,u){var a=u===t?Wt.elementnew(o(ei.getCellElement(n,e),r),!0):ei.getCell(n,e);return ei.addCell(n,i,a)})},Mi=function(n,t,e,r,o){var i=t+1,u=n.slice(0,i),a=n.slice(i),c=ei.mapCells(n[t],function(n,t){return t===e?Wt.elementnew(o(n.element(),r),!0):n});return u.concat([c]).concat(a)},Li=function(n,t,e){return n.slice(0,t).concat(n.slice(e+1))},ji=function(n,t,e){var r=A(n,function(n){var r=n.cells().slice(0,t).concat(n.cells().slice(e+1));return Wt.rowcells(r,n.section())});return N(r,function(n){return n.cells().length>0})},Wi=function(n,t,e,r){return A(n,function(n){return ei.mapCells(n,function(n){return function(n){return D(t,function(t){return e(n.element(),t.element())})}(n)?Wt.elementnew(r(n.element(),e),!0):n})})},Ui=function(n,t,e,r){return void 0!==ei.getCellElement(n[t],e)&&t>0&&r(ei.getCellElement(n[t-1],e),ei.getCellElement(n[t],e))},zi=function(n,t,e){return t>0&&e(ei.getCellElement(n,t-1),ei.getCellElement(n,t))},Fi=function(n,t,e,r){var o=j(n,function(r,o){return Ui(n,o,t,e)||zi(r,t,e)?[]:[ei.getCell(r,t)]});return Wi(n,o,e,r)},Hi=function(n,t,e,r){var o=n[t],i=j(o.cells(),function(r,i){return Ui(n,t,i,e)||zi(o,i,e)?[]:[r]});return Wi(n,i,e,r)},qi=function(n){return{fold:n}},Vi=function(){return qi(function(n,t,e,r,o){return n()})},Gi=function(n){return qi(function(t,e,r,o,i){return e(n)})},Ki=function(n,t){return qi(function(e,r,o,i,u){return o(n,t)})},Xi=function(n,t,e){return qi(function(r,o,i,u,a){return u(n,t,e)})},$i=function(n,t){return qi(function(e,r,o,i,u){return u(n,t)})},Yi=function(n,t,e,r){var i=n.slice(0),u=function(n,t){return 0===n.length?Vi():1===n.length?Gi(0):0===t?Ki(0,1):t===n.length-1?$i(t-1,t):t>0&&t<n.length-1?Xi(t-1,t,t+1):Vi()}(n,t),a=function(n){return A(n,o(0))},c=o(a(i)),l=function(n,t){if(e>=0){var o=Math.max(r.minCellWidth(),i[t]-e);return a(i.slice(0,n)).concat([e,o-i[t]]).concat(a(i.slice(t+1)))}var u=Math.max(r.minCellWidth(),i[n]+e),c=i[n]-u;return a(i.slice(0,n)).concat([u-i[n],c]).concat(a(i.slice(t+1)))},f=l;return u.fold(c,function(n){return r.singleColumnWidth(i[n],e)},f,function(n,t,e){return l(t,e)},function(n,t){if(e>=0)return a(i.slice(0,t)).concat([e]);var o=Math.max(r.minCellWidth(),i[t]+e);return a(i.slice(0,t)).concat([o-i[t]])})},Ji=function(n,t){return bn(n,t)&&parseInt(vn(n,t),10)>1},Zi={hasColspan:function(n){return Ji(n,"colspan")},hasRowspan:function(n){return Ji(n,"rowspan")},minWidth:o(10),minHeight:o(10),getInt:function(n,t){return parseInt(_n(n,t),10)}},Qi=function(n,t,e){return Mn(n,t).fold(function(){return e(n)+"px"},function(n){return n})},nu=function(n){return Qi(n,"width",Zr.getPixelWidth)},tu=function(n){return Qi(n,"height",Zr.getHeight)},eu=function(n,t,e,r,o){var i=Wo(n),u=A(i,function(n){return n.map(t.edge)});return A(i,function(n,t){return n.filter(c(Zi.hasColspan)).fold(function(){var n=Lo(u,t);return r(n)},function(n){return e(n,o)})})},ru=function(n){return n.map(function(n){return n+"px"}).getOr("")},ou=function(n,t,e,r){var o=Uo(n),i=A(o,function(n){return n.map(t.edge)});return A(o,function(n,t){return n.filter(c(Zi.hasRowspan)).fold(function(){var n=Lo(i,t);return r(n)},function(n){return e(n)})})},iu={getRawWidths:function(n,t){return eu(n,t,nu,ru)},getPixelWidths:function(n,t,e){return eu(n,t,Zr.getPixelWidth,function(n){return n.getOrThunk(e.minCellWidth)},e)},getPercentageWidths:function(n,t,e){return eu(n,t,Zr.getPercentageWidth,function(n){return n.fold(function(){return e.minCellWidth()},function(n){return n/e.pixelWidth()*100})},e)},getPixelHeights:function(n,t){return ou(n,t,Zr.getHeight,function(n){return n.getOrThunk(Zi.minHeight)})},getRawHeights:function(n,t){return ou(n,t,tu,ru)}},uu=function(n,t,e){for(var r=0,o=n;o<t;o++)r+=void 0!==e[o]?e[o]:0;return r},au=function(n,t){var e=ce.justCells(n);return A(e,function(n){var e=uu(n.column(),n.column()+n.colspan(),t);return{element:n.element,width:o(e),colspan:n.colspan}})},cu=function(n,t){var e=ce.justCells(n);return A(e,function(n){var e=uu(n.row(),n.row()+n.rowspan(),t);return{element:n.element,height:o(e),rowspan:n.rowspan}})},lu=function(n,t){return A(n.all(),function(n,e){return{element:n.element,height:o(t[e])}})},fu=function(n){var t=parseInt(n,10),e=i;return{width:o(t),pixelWidth:o(t),getWidths:iu.getPixelWidths,getCellDelta:e,singleColumnWidth:function(n,t){return[Math.max(Zi.minWidth(),n+t)-n]},minCellWidth:Zi.minWidth,setElementWidth:Zr.setPixelWidth,setTableWidth:function(n,t,e){var r=k(t,function(n,t){return n+t},0);Zr.setPixelWidth(n,r)}}},su=function(n,t){if(Zr.percentageBasedSizeRegex().test(t))return function(n,t){var e=parseFloat(n),r=jr(t);return{width:o(e),pixelWidth:o(r),getWidths:iu.getPercentageWidths,getCellDelta:function(n){return n/r*100},singleColumnWidth:function(n,t){return[100-n]},minCellWidth:function(){return Zi.minWidth()/r*100},setElementWidth:Zr.setPercentageWidth,setTableWidth:function(n,t,r){var o=e+r;Zr.setPercentageWidth(n,o)}}}(Zr.percentageBasedSizeRegex().exec(t)[1],n);if(Zr.pixelBasedSizeRegex().test(t)){var e=Zr.pixelBasedSizeRegex().exec(t);return fu(e[1])}var r=jr(n);return fu(r)},du=function(n){return Zr.getRawWidth(n).fold(function(){var t=jr(n);return fu(t)},function(t){return su(n,t)})},mu=function(n){return ce.generate(n)},gu=function(n){var t=oe(n);return mu(t)},pu={adjustWidth:function(n,t,e,r){var o=du(n),i=o.getCellDelta(t),u=gu(n),a=o.getWidths(u,r,o),c=Yi(a,e,i,o),l=A(c,function(n,t){return n+a[t]}),f=au(u,l);E(f,function(n){o.setElementWidth(n.element(),n.width())}),e===u.grid().columns()-1&&o.setTableWidth(n,l,i)},adjustHeight:function(n,t,e,r){var o=gu(n),i=iu.getPixelHeights(o,r),u=A(i,function(n,r){return e===r?Math.max(t+n,Zi.minHeight()):n}),a=cu(o,u),c=lu(o,u);E(c,function(n){Zr.setHeight(n.element(),n.height())}),E(a,function(n){Zr.setHeight(n.element(),n.height())});var l=k(u,function(n,t){return n+t},0);Zr.setHeight(n,l)},adjustWidthTo:function(n,t,e){var r=du(n),o=mu(t),i=r.getWidths(o,e,r),u=au(o,i);E(u,function(n){r.setElementWidth(n.element(),n.width())});var a=k(i,function(n,t){return t+n},0);u.length>0&&r.setTableWidth(n,a)}},hu=function(n,t,e){if(0===t.length)throw new Error("You must specify at least one required field.");return Q("required",t),nn(t),function(r){var o=F(r);W(t,function(n){return R(o,n)})||J(t,o),n(t,o);var i=N(t,function(n){return!e.validate(r[n],n)});return i.length>0&&function(n,t){throw new Error("All values need to be of type: "+t+". Keys ("+Y(n).join(", ")+") were not.")}(i,e.label),r}},vu=function(n,t){var e=N(t,function(t){return!R(n,t)});e.length>0&&Z(e)},bu=function(n){return function(n,t){return hu(n,t,{validate:C,label:"function"})}(vu,n)},wu=function(n){var t=bn(n,"colspan")?parseInt(vn(n,"colspan"),10):1,e=bn(n,"rowspan")?parseInt(vn(n,"rowspan"),10):1;return{element:o(n),colspan:o(t),rowspan:o(e)}},yu=bu(["cell","row","replace","gap"]),xu=function(n,e){yu(n);var r=t(v.none()),o=void 0!==e?e:wu,i=function(t){return function(t){return n.cell(t)}(o(t))},u=function(n){var t=i(n);return r.get().isNone()&&r.set(v.some(t)),a=v.some({item:n,replacement:t}),t},a=v.none();return{getOrInit:function(n,t){return a.fold(function(){return u(n)},function(e){return t(n,e.item)?e.replacement:u(n)})},cursor:r.get}},Su=function(n,e){return function(r){var o=t(v.none());yu(r);var i=[],u=function(t){var u=r.replace(t,e,{scope:n});return i.push({item:t,sub:u}),o.get().isNone()&&o.set(v.some(u)),u};return{replaceOrInit:function(n,t){return function(n,t){return P(i,function(e){return t(e.item,n)})}(n,t).fold(function(){return u(n)},function(e){return t(n,e.item)?e.sub:u(n)})},cursor:o.get}}},Cu=function(n){yu(n);var e=t(v.none());return{combine:function(t){return e.get().isNone()&&e.set(v.some(t)),function(){var e=n.cell({element:o(t),colspan:o(1),rowspan:o(1)});return Ln(e,"width"),Ln(t,"width"),e}},cursor:e.get}},Ou=["body","p","div","article","aside","figcaption","figure","footer","header","nav","section","ol","ul","table","thead","tfoot","tbody","caption","tr","td","th","h1","h2","h3","h4","h5","h6","blockquote","pre","address"],Tu=function(n,t){var e=n.property().name(t);return R(Ou,e)},Ru=function(n,t){return R(["br","img","hr","input"],n.property().name(t))},Du=Tu,Au=function(n,t){var e=n.property().name(t);return R(["ol","ul"],e)},Eu=Ru,Nu=Pe(),ku=function(n){return Du(Nu,n)},Iu=function(n){return Au(Nu,n)},Pu=function(n){return Eu(Nu,n)},_u=function(n){var t,e=function(n){return"br"===an(n)},r=function(n){return ye(n).bind(function(t){var r=yt(t).map(function(n){return!!ku(n)||(Pu(n)?"img"!==an(n):void 0)}).getOr(!1);return vt(t).map(function(o){return!0===r||"li"===an(i=o)||Vt(i,Iu).isSome()||e(t)||ku(o)&&!mt(n,o)?[]:[Dn.fromTag("br")];var i})}).getOr([])},o=0===(t=j(n,function(n){var t=xt(n);return function(n){return W(n,function(n){return e(n)||dn(n)&&0===me(n).trim().length})}(t)?[]:t.concat(r(n))})).length?[Dn.fromTag("br")]:t;Nt(n[0]),Et(n[0],o)},Bu=function(n){0===re.cells(n).length&&kt(n)},Mu=$("grid","cursor"),Lu=function(n,t,e){return ju(n,t,e).orThunk(function(){return ju(n,0,0)})},ju=function(n,t,e){return v.from(n[t]).bind(function(n){return v.from(n.cells()[e]).bind(function(n){return v.from(n.element())})})},Wu=function(n,t,e){return Mu(n,ju(n,t,e))},Uu=function(n){return I(n,function(n,t){return D(n,function(n){return n.row()===t.row()})?n:n.concat([t])},[]).sort(function(n,t){return n.row()-t.row()})},zu=function(n){return I(n,function(n,t){return D(n,function(n){return n.column()===t.column()})?n:n.concat([t])},[]).sort(function(n,t){return n.column()-t.column()})},Fu=function(n,t,e){var r=ie(n,e),o=ce.generate(r);return ui(o,t,!0)},Hu=pu.adjustWidthTo,qu={insertRowBefore:fi(function(n,t,e,r){var o=t.row(),i=t.row(),u=Pi(n,i,o,e,r.getOrInit);return Wu(u,i,t.column())},di,e,e,xu),insertRowsBefore:fi(function(n,t,e,r){var o=t[0].row(),i=t[0].row(),u=Uu(t),a=I(u,function(n,t){return Pi(n,i,o,e,r.getOrInit)},n);return Wu(a,i,t[0].column())},mi,e,e,xu),insertRowAfter:fi(function(n,t,e,r){var o=t.row(),i=t.row()+t.rowspan(),u=Pi(n,i,o,e,r.getOrInit);return Wu(u,i,t.column())},di,e,e,xu),insertRowsAfter:fi(function(n,t,e,r){var o=Uu(t),i=o[o.length-1].row(),u=o[o.length-1].row()+o[o.length-1].rowspan(),a=I(o,function(n,t){return Pi(n,u,i,e,r.getOrInit)},n);return Wu(a,u,t[0].column())},mi,e,e,xu),insertColumnBefore:fi(function(n,t,e,r){var o=t.column(),i=t.column(),u=_i(n,i,o,e,r.getOrInit);return Wu(u,t.row(),i)},di,Hu,e,xu),insertColumnsBefore:fi(function(n,t,e,r){var o=zu(t),i=o[0].column(),u=o[0].column(),a=I(o,function(n,t){return _i(n,u,i,e,r.getOrInit)},n);return Wu(a,t[0].row(),u)},mi,Hu,e,xu),insertColumnAfter:fi(function(n,t,e,r){var o=t.column(),i=t.column()+t.colspan(),u=_i(n,i,o,e,r.getOrInit);return Wu(u,t.row(),i)},di,Hu,e,xu),insertColumnsAfter:fi(function(n,t,e,r){var o=t[t.length-1].column(),i=t[t.length-1].column()+t[t.length-1].colspan(),u=zu(t),a=I(u,function(n,t){return _i(n,i,o,e,r.getOrInit)},n);return Wu(a,t[0].row(),i)},mi,Hu,e,xu),splitCellIntoColumns:fi(function(n,t,e,r){var o=Bi(n,t.row(),t.column(),e,r.getOrInit);return Wu(o,t.row(),t.column())},di,Hu,e,xu),splitCellIntoRows:fi(function(n,t,e,r){var o=Mi(n,t.row(),t.column(),e,r.getOrInit);return Wu(o,t.row(),t.column())},di,e,e,xu),eraseColumns:fi(function(n,t,e,r){var o=zu(t),i=ji(n,o[0].column(),o[o.length-1].column()),u=Lu(i,t[0].row(),t[0].column());return Mu(i,u)},mi,Hu,Bu,xu),eraseRows:fi(function(n,t,e,r){var o=Uu(t),i=Li(n,o[0].row(),o[o.length-1].row()),u=Lu(i,t[0].row(),t[0].column());return Mu(i,u)},mi,e,Bu,xu),makeColumnHeader:fi(function(n,t,e,r){var o=Fi(n,t.column(),e,r.replaceOrInit);return Wu(o,t.row(),t.column())},di,e,e,Su("row","th")),unmakeColumnHeader:fi(function(n,t,e,r){var o=Fi(n,t.column(),e,r.replaceOrInit);return Wu(o,t.row(),t.column())},di,e,e,Su(null,"td")),makeRowHeader:fi(function(n,t,e,r){var o=Hi(n,t.row(),e,r.replaceOrInit);return Wu(o,t.row(),t.column())},di,e,e,Su("col","th")),unmakeRowHeader:fi(function(n,t,e,r){var o=Hi(n,t.row(),e,r.replaceOrInit);return Wu(o,t.row(),t.column())},di,e,e,Su(null,"td")),mergeCells:fi(function(n,t,e,r){var i=t.cells();_u(i);var u=Di(n,t.bounds(),e,o(i[0]));return Mu(u,v.from(i[0]))},hi,e,e,Cu),unmergeCells:fi(function(n,t,e,r){var o=k(t,function(n,t){return Ai(n,t,e,r.combine(t))},n);return Mu(o,v.from(t[0]))},vi,Hu,e,Cu),pasteCells:fi(function(n,t,e,r){var o,i,u,a,c=(o=t.clipboard(),i=t.generators(),u=oe(o),a=ce.generate(u),ui(a,i,!0)),l=Wt.address(t.row(),t.column());return ki(l,n,c,t.generators(),e).fold(function(){return Mu(n,v.some(t.element()))},function(n){var e=Lu(n,t.row(),t.column());return Mu(n,e)})},gi,Hu,e,xu),pasteRowsBefore:fi(function(n,t,e,r){var o=n[t.cells[0].row()],i=t.cells[0].row(),u=Fu(t.clipboard(),t.generators(),o),a=Ii(i,n,u,t.generators(),e),c=Lu(a,t.cells[0].row(),t.cells[0].column());return Mu(a,c)},pi,e,e,xu),pasteRowsAfter:fi(function(n,t,e,r){var o=n[t.cells[0].row()],i=t.cells[t.cells.length-1].row()+t.cells[t.cells.length-1].rowspan(),u=Fu(t.clipboard(),t.generators(),o),a=Ii(i,n,u,t.generators(),e),c=Lu(a,t.cells[0].row(),t.cells[0].column());return Mu(a,c)},pi,e,e,xu)},Vu=function(n){return Dn.fromDom(n.getBody())},Gu=function(n){return n.getBoundingClientRect().width},Ku=function(n){return n.getBoundingClientRect().height},Xu=function(n){return function(t){return mt(t,Vu(n))}},$u=function(n){return/^[0-9]+$/.test(n)&&(n+="px"),n},Yu=function(n){var t=Ht(n,"td[data-mce-style],th[data-mce-style]");wn(n,"data-mce-style"),E(t,function(n){wn(n,"data-mce-style")})},Ju={isRtl:o(!1)},Zu={isRtl:o(!0)},Qu={directionAt:function(n){return"rtl"===function(n){return"rtl"===_n(n,"direction")?"rtl":"ltr"}(n)?Zu:Ju}},na={"border-collapse":"collapse",width:"100%"},ta={border:"1"},ea=function(n){return n.getParam("table_default_attributes",ta,"object")},ra=function(n){return n.getParam("table_default_styles",na,"object")},oa=function(n){return n.getParam("table_tab_navigation",!0,"boolean")},ia=function(n){return n.getParam("table_cell_advtab",!0,"boolean")},ua=function(n){return n.getParam("table_row_advtab",!0,"boolean")},aa=function(n){return n.getParam("table_advtab",!0,"boolean")},ca=function(n){return n.getParam("table_style_by_css",!1,"boolean")},la=function(n){return n.getParam("table_class_list",[],"array")},fa=function(n){return!1===n.getParam("table_responsive_width")},sa=function(n,t){return n.fire("newrow",{node:t})},da=function(n,t){return n.fire("newcell",{node:t})},ma=function(n,t,e,r){n.fire("ObjectResizeStart",{target:t,width:e,height:r})},ga=function(n,t,e,r){n.fire("ObjectResized",{target:t,width:e,height:r})},pa=function(n,t){var r=function(n){return"table"===an(Vu(n))},o=function(n){var t=n.getParam("table_clone_elements");return y(t)?v.some(t.split(/[ ,]/)):Array.isArray(t)?v.some(t):v.none()}(n),i=function(t,e,r,i){return function(u,a){Yu(u);var c=i(),l=Dn.fromDom(n.getDoc()),f=bo(Qu.directionAt),s=Ne(r,l,o);return e(u)?t(c,u,a,s,f).bind(function(t){return E(t.newRows(),function(t){sa(n,t.dom())}),E(t.newCells(),function(t){da(n,t.dom())}),t.cursor().map(function(t){var e=n.dom.createRng();return e.setStart(t.dom(),0),e.setEnd(t.dom(),0),e})}):v.none()}};return{deleteRow:i(qu.eraseRows,function(t){var e=yo(t);return!1===r(n)||e.rows()>1},e,t),deleteColumn:i(qu.eraseColumns,function(t){var e=yo(t);return!1===r(n)||e.columns()>1},e,t),insertRowsBefore:i(qu.insertRowsBefore,s,e,t),insertRowsAfter:i(qu.insertRowsAfter,s,e,t),insertColumnsBefore:i(qu.insertColumnsBefore,s,Qr,t),insertColumnsAfter:i(qu.insertColumnsAfter,s,Qr,t),mergeCells:i(qu.mergeCells,s,e,t),unmergeCells:i(qu.unmergeCells,s,e,t),pasteRowsBefore:i(qu.pasteRowsBefore,s,e,t),pasteRowsAfter:i(qu.pasteRowsAfter,s,e,t),pasteCells:i(qu.pasteCells,s,e,t)}},ha=function(n,t,e){var r=oe(n),o=ce.generate(r);return mi(o,t).map(function(n){var t=ui(o,e,!1).slice(n[0].row(),n[n.length-1].row()+n[n.length-1].rowspan()),r=si(t,e);return Do(r)})},va=tinymce.util.Tools.resolve("tinymce.util.Tools"),ba=function(n,t,e){e&&n.formatter.apply("align"+e,{},t)},wa=function(n,t,e){e&&n.formatter.apply("valign"+e,{},t)},ya=function(n,t){va.each("left center right".split(" "),function(e){n.formatter.remove("align"+e,{},t)})},xa=function(n,t){va.each("top middle bottom".split(" "),function(e){n.formatter.remove("valign"+e,{},t)})},Sa=function(n,t,e){var r;return r=function(t,r){for(var o=0;o<r.length;o++){var i=n.getStyle(r[o],e);if(void 0===t&&(t=i),t!==i)return""}return t}(r,n.select("td,th",t))},Ca=function(){return(Ca=Object.assign||function(n){for(var t,e=1,r=arguments.length;e<r;e++)for(var o in t=arguments[e])Object.prototype.hasOwnProperty.call(t,o)&&(n[o]=t[o]);return n}).apply(this,arguments)},Oa=function(n,t){var e=function(t){return Cn(t,"rgb")?n.toHex(t):t};return{borderstyle:Mn(Dn.fromDom(t),"border-style").getOr(""),bordercolor:Mn(Dn.fromDom(t),"border-color").map(e).getOr(""),backgroundcolor:Mn(Dn.fromDom(t),"background-color").map(e).getOr("")}},Ta=function(n,t,e,r,o){var i={};return va.each(n.split(" "),function(n){r.formatter.matchNode(o,t+n)&&(i[e]=n)}),i[e]||(i[e]=""),i},Ra=u(Ta,"left center right"),Da=u(Ta,"top middle bottom"),Aa=function(n,t,e){var r=function(n,e){return e=e||[],va.each(n,function(n){var o={text:n.text||n.title};n.menu?o.menu=r(n.menu):(o.value=n.value,t&&t(o)),e.push(o)}),e};return r(n,e||[])},Ea=function(n){var t=n[0],e=n.slice(1),r=F(t);return E(e,function(n){E(r,function(e){q(n,function(n,r,o){var i=t[e];""!==i&&e===r&&i!==n&&(t[e]="")})})}),t},Na=function(){return{title:"Advanced",items:[{name:"borderstyle",type:"selectbox",label:"Border style",items:[{text:"Select...",value:""},{text:"Solid",value:"solid"},{text:"Dotted",value:"dotted"},{text:"Dashed",value:"dashed"},{text:"Double",value:"double"},{text:"Groove",value:"groove"},{text:"Ridge",value:"ridge"},{text:"Inset",value:"inset"},{text:"Outset",value:"outset"},{text:"None",value:"none"},{text:"Hidden",value:"hidden"}]},{name:"bordercolor",type:"colorinput",label:"Border color"},{name:"backgroundcolor",type:"colorinput",label:"Background color"}]}},ka=function(n,t,e){var r=n.dom;return Ca({width:r.getStyle(t,"width")||r.getAttrib(t,"width"),height:r.getStyle(t,"height")||r.getAttrib(t,"height"),cellspacing:r.getStyle(t,"border-spacing")||r.getAttrib(t,"cellspacing"),cellpadding:r.getAttrib(t,"cellpadding")||Sa(n.dom,t,"padding"),border:function(t,e){var r=Mn(Dn.fromDom(e),"border-width");return ca(n)&&r.isSome()?r.getOr(""):t.getAttrib(e,"border")||Sa(n.dom,e,"border-width")||Sa(n.dom,e,"border")}(r,t),caption:!!r.select("caption",t)[0],class:r.getAttrib(t,"class","")},Ra("align","align",n,t),e?Oa(r,t):{})},Ia=function(n,t,e){var r=n.dom;return Ca({height:r.getStyle(t,"height")||r.getAttrib(t,"height"),scope:r.getAttrib(t,"scope"),class:r.getAttrib(t,"class",""),align:"",type:t.parentNode.nodeName.toLowerCase()},Ra("align","align",n,t),e?Oa(r,t):{})},Pa=function(n,t,e){var r=n.dom;return Ca({width:r.getStyle(t,"width")||r.getAttrib(t,"width"),height:r.getStyle(t,"height")||r.getAttrib(t,"height"),scope:r.getAttrib(t,"scope"),celltype:t.nodeName.toLowerCase(),class:r.getAttrib(t,"class","")},Ra("align","halign",n,t),Da("valign","valign",n,t),e?Oa(r,t):{})},_a=function(n,t){var e,r,o,i=ra(n),u=ea(n),a=n.dom,c=t?function(n){var t=function(t){return Cn(t,"rgb")?n.toHex(t):t},e=K(i,"border-style").getOr(""),r=K(i,"border-color").getOr(""),o=K(i,"background-color").getOr("");return{borderstyle:e,bordercolor:t(r),backgroundcolor:t(o)}}(a):{};return Ca({},{height:"",width:"100%",cellspacing:"",cellpadding:"",caption:!1,class:"",align:"",border:""},i,u,c,(o=i["border-width"],ca(n)&&o?{border:o}:K(u,"border").fold(function(){return{}},function(n){return{border:n}})),(e=K(i,"border-spacing").or(K(u,"cellspacing")).fold(function(){return{}},function(n){return{cellspacing:n}}),r=K(i,"border-padding").or(K(u,"cellpadding")).fold(function(){return{}},function(n){return{cellpadding:n}}),Ca({},e,r)))},Ba=[{name:"width",type:"input",label:"Width"},{name:"height",type:"input",label:"Height"},{name:"celltype",type:"selectbox",label:"Cell type",items:[{text:"Cell",value:"td"},{text:"Header cell",value:"th"}]},{name:"scope",type:"selectbox",label:"Scope",items:[{text:"None",value:""},{text:"Row",value:"row"},{text:"Column",value:"col"},{text:"Row group",value:"rowgroup"},{text:"Column group",value:"colgroup"}]},{name:"halign",type:"selectbox",label:"H Align",items:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},{name:"valign",type:"selectbox",label:"V Align",items:[{text:"None",value:""},{text:"Top",value:"top"},{text:"Middle",value:"middle"},{text:"Bottom",value:"bottom"}]}],Ma=function(n){return function(n){var t=function(n){return n.getParam("table_cell_class_list",[],"array")}(n),e=Aa(t,function(t){t.value&&(t.textStyle=function(){return n.formatter.getCssText({block:"tr",classes:[t.value]})})});return t.length>0?v.some({name:"class",type:"selectbox",label:"Class",items:e}):v.none()}(n).fold(function(){return Ba},function(n){return Ba.concat(n)})},La={normal:function(n,t){return{setAttrib:function(e,r){n.setAttrib(t,e,r)},setStyle:function(e,r){n.setStyle(t,e,r)}}},ifTruthy:function(n,t){return{setAttrib:function(e,r){r&&n.setAttrib(t,e,r)},setStyle:function(e,r){r&&n.setStyle(t,e,r)}}}},ja=function(n,t){n.setAttrib("scope",t.scope),n.setAttrib("class",t.class),n.setStyle("width",$u(t.width)),n.setStyle("height",$u(t.height))},Wa=function(n,t){n.setStyle("background-color",t.backgroundcolor),n.setStyle("border-color",t.bordercolor),n.setStyle("border-style",t.borderstyle)},Ua=function(n,t,e){var r=n.dom,o=e.celltype&&t[0].nodeName.toLowerCase()!==e.celltype?r.rename(t[0],e.celltype):t[0],i=La.normal(r,o);ja(i,e),ia(n)&&Wa(i,e),ya(n,o),xa(n,o),e.halign&&ba(n,o,e.halign),e.valign&&wa(n,o,e.valign)},za=function(n,t,e){var r=n.dom;va.each(t,function(t){e.celltype&&t.nodeName.toLowerCase()!==e.celltype&&(t=r.rename(t,e.celltype));var o=La.ifTruthy(r,t);ja(o,e),ia(n)&&Wa(o,e),e.halign&&ba(n,t,e.halign),e.valign&&wa(n,t,e.valign)})},Fa=function(n,t,e){var r=e.getData();e.close(),n.undoManager.transact(function(){(1===t.length?Ua:za)(n,t,r),n.focus()})},Ha=function(n){var t,e=[];if(e=n.dom.select("td[data-mce-selected],th[data-mce-selected]"),t=n.dom.getParent(n.selection.getStart(),"td,th"),!e.length&&t&&e.push(t),t=t||e[0]){var r=va.map(e,function(t){return Pa(n,t,ia(n))}),o=Ea(r),i={type:"tabpanel",tabs:[{title:"General",items:Ma(n)},Na()]},a={type:"panel",items:[{type:"grid",columns:2,items:Ma(n)}]};n.windowManager.open({title:"Cell Properties",size:"normal",body:ia(n)?i:a,buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:o,onSubmit:u(Fa,n,e)})}},qa=[{type:"selectbox",name:"type",label:"Row type",items:[{text:"Header",value:"thead"},{text:"Body",value:"tbody"},{text:"Footer",value:"tfoot"}]},{type:"selectbox",name:"align",label:"Alignment",items:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},{label:"Height",name:"height",type:"input"}],Va=function(n){return function(n){var t=function(n){return n.getParam("table_row_class_list",[],"array")}(n),e=Aa(t,function(t){t.value&&(t.textStyle=function(){return n.formatter.getCssText({block:"tr",classes:[t.value]})})});return t.length>0?v.some({name:"class",type:"selectbox",label:"Class",items:e}):v.none()}(n).fold(function(){return qa},function(n){return qa.concat(n)})},Ga=function(n,t,e,r){var o=n.dom,i=r.getData();r.close();var u=1===t.length?La.normal:La.ifTruthy;n.undoManager.transact(function(){va.each(t,function(t){i.type!==t.parentNode.nodeName.toLowerCase()&&function(n,t,e){var r=n.getParent(t,"table"),o=t.parentNode,i=n.select(e,r)[0];i||(i=n.create(e),r.firstChild?"CAPTION"===r.firstChild.nodeName?n.insertAfter(i,r.firstChild):r.insertBefore(i,r.firstChild):r.appendChild(i)),i.appendChild(t),o.hasChildNodes()||n.remove(o)}(n.dom,t,i.type);var r=u(o,t);r.setAttrib("scope",i.scope),r.setAttrib("class",i.class),r.setStyle("height",$u(i.height)),ua(n)&&function(n,t){n.setStyle("background-color",t.backgroundcolor),n.setStyle("border-color",t.bordercolor),n.setStyle("border-style",t.borderstyle)}(r,i),i.align!==e.align&&(ya(n,t),ba(n,t,i.align))}),n.focus()})},Ka=function(n){var t,e,r=n.dom,o=[];if((t=r.getParent(n.selection.getStart(),"table"))&&(e=r.getParent(n.selection.getStart(),"td,th"),va.each(t.rows,function(n){va.each(n.cells,function(t){if((r.getAttrib(t,"data-mce-selected")||t===e)&&o.indexOf(n)<0)return o.push(n),!1})}),o[0])){var i=va.map(o,function(t){return Ia(n,t,ua(n))}),a=Ea(i),c={type:"tabpanel",tabs:[{title:"General",items:Va(n)},Na()]},l={type:"panel",items:[{type:"grid",columns:2,items:Va(n)}]};n.windowManager.open({title:"Row Properties",size:"normal",body:ua(n)?c:l,buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:a,onSubmit:u(Ga,n,o,a)})}},Xa=tinymce.util.Tools.resolve("tinymce.Env"),$a={styles:{"border-collapse":"collapse",width:"100%"},attributes:{border:"1"},percentages:!0},Ya=function(n,t,e,r,o){void 0===o&&(o=$a);var i=Dn.fromTag("table");Pn(i,o.styles),hn(i,o.attributes);var u=Dn.fromTag("tbody");Rt(i,u);for(var a=[],c=0;c<n;c++){for(var l=Dn.fromTag("tr"),f=0;f<t;f++){var s=c<e||f<r?Dn.fromTag("th"):Dn.fromTag("td");f<r&&pn(s,"scope","row"),c<e&&pn(s,"scope","col"),Rt(s,Dn.fromTag("br")),o.percentages&&In(s,"width",100/t+"%"),Rt(l,s)}a.push(l)}return Et(u,a),i},Ja=function(n,t){n.selection.select(t.dom(),!0),n.selection.collapse(!0)},Za=function(n,t,e){var r,o=ra(n),i={styles:o,attributes:ea(n),percentages:(r=o.width,y(r)&&-1!==r.indexOf("%")&&!fa(n))},a=Ya(e,t,0,0,i);pn(a,"data-mce-id","__mce");var c,l,f,s=(c=a,l=Dn.fromTag("div"),f=Dn.fromDom(c.dom().cloneNode(!0)),Rt(l,f),function(n){return n.dom().innerHTML}(l));return n.insertContent(s),Xt(Vu(n),'table[data-mce-id="__mce"]').map(function(t){return fa(n)&&In(t,"width",_n(t,"width")),wn(t,"data-mce-id"),function(n,t){E(Ht(t,"tr"),function(t){sa(n,t.dom()),E(Ht(t,"th,td"),function(t){da(n,t.dom())})})}(n,t),function(n,t){Xt(t,"td,th").each(u(Ja,n))}(n,t),t.dom()}).getOr(null)},Qa=function(n,t,e,r){if("TD"===t.tagName||"TH"===t.tagName)n.setStyle(t,e,r);else if(t.children)for(var o=0;o<t.children.length;o++)Qa(n,t.children[o],e,r)},nc=function(n,t,e){var r,o=n.dom,i=e.getData();e.close(),""===i.class&&delete i.class,n.undoManager.transact(function(){if(!t){var e=parseInt(i.cols,10)||1,u=parseInt(i.rows,10)||1;t=Za(n,e,u)}!function(n,t,e){var r,o=n.dom,i={},u={};if(i.class=e.class,u.height=$u(e.height),o.getAttrib(t,"width")&&!ca(n)?i.width=(r=e.width)?r.replace(/px$/,""):"":u.width=$u(e.width),ca(n)?(u["border-width"]=$u(e.border),u["border-spacing"]=$u(e.cellspacing)):(i.border=e.border,i.cellpadding=e.cellpadding,i.cellspacing=e.cellspacing),ca(n)&&t.children)for(var a=0;a<t.children.length;a++)Qa(o,t.children[a],{"border-width":$u(e.border),padding:$u(e.cellpadding)}),aa(n)&&Qa(o,t.children[a],{"border-color":e.bordercolor});aa(n)&&(u["background-color"]=e.backgroundcolor,u["border-color"]=e.bordercolor,u["border-style"]=e.borderstyle),i.style=o.serializeStyle(So(ra(n),u)),o.setAttribs(t,So(ea(n),i))}(n,t,i),(r=o.select("caption",t)[0])&&!i.caption&&o.remove(r),!r&&i.caption&&((r=o.create("caption")).innerHTML=Xa.ie?" ":'<br data-mce-bogus="1"/>',t.insertBefore(r,t.firstChild)),""===i.align?ya(n,t):ba(n,t,i.align),n.focus(),n.addVisual()})},tc=function(n,t){var e,r=n.dom,o=_a(n,aa(n));!1===t?(e=r.getParent(n.selection.getStart(),"table"))?o=ka(n,e,aa(n)):aa(n)&&(o.borderstyle="",o.bordercolor="",o.backgroundcolor=""):(o.cols="1",o.rows="1",aa(n)&&(o.borderstyle="",o.bordercolor="",o.backgroundcolor=""));var i=la(n).length>0;i&&o.class&&(o.class=o.class.replace(/\s*mce\-item\-table\s*/g,""));var a=t?[{type:"input",name:"cols",label:"Cols"},{type:"input",name:"rows",label:"Rows"}]:[],c=function(n){return n.getParam("table_appearance_options",!0,"boolean")}(n)?[{type:"input",name:"cellspacing",label:"Cell spacing"},{type:"input",name:"cellpadding",label:"Cell padding"},{type:"input",name:"border",label:"Border width"},{type:"label",label:"Caption",items:[{type:"checkbox",name:"caption",label:"Show caption"}]}]:[],l=i?[{type:"selectbox",name:"class",label:"Class",items:Aa(la(n),function(t){t.value&&(t.textStyle=function(){return n.formatter.getCssText({block:"table",classes:[t.value]})})})}]:[],f={type:"grid",columns:2,items:a.concat([{type:"input",name:"width",label:"Width"},{type:"input",name:"height",label:"Height"}]).concat(c).concat([{type:"selectbox",name:"align",label:"Alignment",items:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]}]).concat(l)},s={type:"panel",items:[f]},d={type:"tabpanel",tabs:[{title:"General",items:[f]},Na()]},m=aa(n)?d:s;n.windowManager.open({title:"Table Properties",size:"normal",body:m,onSubmit:u(nc,n,e),buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:o})},ec=function(n){return function(t){return v.from(t.dom.getParent(t.selection.getStart(),n)).map(Dn.fromDom)}},rc=ec("th,td"),oc=ec("th,td,caption"),ic=va.each,uc={registerCommands:function(n,t,r,o,i){var a=Xu(n),l=function(n){return re.table(n,a)},f=function(n){return{width:Gu(n.dom()),height:Gu(n.dom())}},s=function(t){rc(n).each(function(e){l(e).each(function(i){var u=kr.forMenu(o,i,e),a=f(i);t(i,u).each(function(t){!function(n,t,e){var r=f(e);t.width===r.width&&t.height===r.height||(ma(n,e.dom(),t.width,t.height),ga(n,e.dom(),r.width,r.height))}(n,a,i),n.selection.setRng(t),n.focus(),r.clear(i),Yu(i)})})})},d=function(t){return rc(n).map(function(t){return l(t).bind(function(r){var i=Dn.fromDom(n.getDoc()),u=kr.forMenu(o,r,t),a=Ne(e,i,v.none());return ha(r,u,a)})})},m=function(t){i.get().each(function(e){var i=A(e,function(n){return Oe(n)});rc(n).each(function(e){l(e).each(function(u){var a=Dn.fromDom(n.getDoc()),c=ke(a),l=kr.pasteRows(o,u,e,i,c);t(u,l).each(function(t){n.selection.setRng(t),n.focus(),r.clear(u)})})})})};ic({mceTableSplitCells:function(){s(t.unmergeCells)},mceTableMergeCells:function(){s(t.mergeCells)},mceTableInsertRowBefore:function(){s(t.insertRowsBefore)},mceTableInsertRowAfter:function(){s(t.insertRowsAfter)},mceTableInsertColBefore:function(){s(t.insertColumnsBefore)},mceTableInsertColAfter:function(){s(t.insertColumnsAfter)},mceTableDeleteCol:function(){s(t.deleteColumn)},mceTableDeleteRow:function(){s(t.deleteRow)},mceTableCutRow:function(n){d().each(function(n){i.set(n),s(t.deleteRow)})},mceTableCopyRow:function(n){d().each(function(n){i.set(n)})},mceTablePasteRowBefore:function(n){m(t.pasteRowsBefore)},mceTablePasteRowAfter:function(n){m(t.pasteRowsAfter)},mceTableDelete:function(){oc(n).each(function(t){re.table(t,a).filter(c(a)).each(function(t){var e=Dn.fromText("");if(Ot(t,e),kt(t),n.dom.isEmpty(n.getBody()))n.setContent(""),n.selection.setCursorLocation();else{var r=n.dom.createRng();r.setStart(e.dom(),0),r.setEnd(e.dom(),0),n.selection.setRng(r),n.nodeChanged()}})})}},function(t,e){n.addCommand(e,t)}),ic({mceInsertTable:u(tc,n,!0),mceTableProps:u(tc,n,!1),mceTableRowProps:u(Ka,n),mceTableCellProps:u(Ha,n)},function(t,e){n.addCommand(e,function(n,e){t(e)})})}},ac=function(n){var t=v.from(n.dom().documentElement).map(Dn.fromDom).getOr(n);return{parent:o(t),view:o(n),origin:o(to(0,0))}},cc=function(n,t){return{parent:o(t),view:o(n),origin:o(to(0,0))}};function lc(n){var t=$.apply(null,n),e=[];return{bind:function(n){if(void 0===n)throw"Event bind error: undefined handler";e.push(n)},unbind:function(n){e=N(e,function(t){return t!==n})},trigger:function(){var n=t.apply(null,arguments);E(e,function(t){t(n)})}}}var fc={create:function(n){return{registry:V(n,function(n){return{bind:n.bind,unbind:n.unbind}}),trigger:V(n,function(n){return n.trigger})}}},sc={mode:bu(["compare","extract","mutate","sink"]),sink:bu(["element","start","stop","destroy"]),api:bu(["forceDrop","drop","move","delayDrop"])},dc={resolve:zo("ephox-dragster").resolve},mc=function(n,t){return function(e){if(n(e)){var i=Dn.fromDom(e.target),u=function(){e.stopPropagation()},a=function(){e.preventDefault()},c=r(a,u),l=function(n,t,e,r,i,u,a){return{target:o(n),x:o(t),y:o(e),stop:r,prevent:i,kill:u,raw:o(a)}}(i,e.clientX,e.clientY,u,a,c,e);t(l)}}},gc=function(n,t,e,r){return function(n,t,e,r,o){var i=mc(e,r);return n.dom().addEventListener(t,i,o),{unbind:u(pc,n,t,i,o)}}(n,t,e,r,!1)},pc=function(n,t,e,r){n.dom().removeEventListener(t,e,r)},hc=o(!0),vc=function(n,t,e){return gc(n,t,hc,e)},bc=sc.mode({compare:function(n,t){return to(t.left()-n.left(),t.top()-n.top())},extract:function(n){return v.some(to(n.x(),n.y()))},sink:function(n,t){var e=function(n){var t=So({layerClass:dc.resolve("blocker")},n),e=Dn.fromTag("div");return pn(e,"role","presentation"),Pn(e,{position:"fixed",left:"0px",top:"0px",width:"100%",height:"100%"}),Io(e,dc.resolve("blocker")),Io(e,t.layerClass),{element:function(){return e},destroy:function(){kt(e)}}}(t),r=vc(e.element(),"mousedown",n.forceDrop),o=vc(e.element(),"mouseup",n.drop),i=vc(e.element(),"mousemove",n.move),u=vc(e.element(),"mouseout",n.delayDrop);return sc.sink({element:e.element,start:function(n){Rt(n,e.element())},stop:function(){kt(e.element())},destroy:function(){e.destroy(),o.unbind(),i.unbind(),u.unbind(),r.unbind()}})},mutate:function(n,t){n.mutate(t.left(),t.top())}});function wc(){var n=v.none(),t=fc.create({move:lc(["info"])});return{onEvent:function(e,r){r.extract(e).each(function(e){(function(t,e){var r=n.map(function(n){return t.compare(n,e)});return n=v.some(e),r})(r,e).each(function(n){t.trigger.move(n)})})},reset:function(){n=v.none()},events:t.registry}}function yc(){var n={onEvent:function(n,t){},reset:e},t=wc(),r=n;return{on:function(){r.reset(),r=t},off:function(){r.reset(),r=n},isOn:function(){return r===t},onEvent:function(n,t){r.onEvent(n,t)},events:t.events}}var xc=function(n,t,e){var r,o,i,u=!1,a=fc.create({start:lc([]),stop:lc([])}),c=yc(),l=function(){d.stop(),c.isOn()&&(c.off(),a.trigger.stop())},f=(r=l,o=200,i=null,{cancel:function(){null!==i&&(clearTimeout(i),i=null)},throttle:function(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];null!==i&&clearTimeout(i),i=setTimeout(function(){r.apply(null,n),i=null},o)}});c.events.move.bind(function(e){t.mutate(n,e.info())});var s=function(n){return function(){var t=Array.prototype.slice.call(arguments,0);if(u)return n.apply(null,t)}},d=t.sink(sc.api({forceDrop:l,drop:s(l),move:s(function(n,e){f.cancel(),c.onEvent(n,t)}),delayDrop:s(f.throttle)}),e);return{element:d.element,go:function(n){d.start(n),c.on(),a.trigger.start()},on:function(){u=!0},off:function(){u=!1},destroy:function(){d.destroy()},events:a.registry}},Sc={transform:function(n,t){var e=void 0!==t?t:{},r=void 0!==e.mode?e.mode:bc;return xc(n,r,t)}},Cc=function(n,t,e){return $t(n,t,e).isSome()};function Oc(){var n=fc.create({drag:lc(["xDelta","yDelta","target"])}),t=v.none(),e=function(){var n=fc.create({drag:lc(["xDelta","yDelta"])});return{mutate:function(t,e){n.trigger.drag(t,e)},events:n.registry}}();return e.events.drag.bind(function(e){t.each(function(t){n.trigger.drag(e.xDelta(),e.yDelta(),t)})}),{assign:function(n){t=v.some(n)},get:function(){return t},mutate:e.mutate,events:n.registry}}var Tc=Ho.resolve("resizer-bar-dragging");function Rc(n,t){var e=ho.height,r=function(n,t,e){var r=Oc(),o=Sc.transform(r,{}),i=v.none(),a=function(n,t){return v.from(vn(n,t))};r.events.drag.bind(function(n){a(n.target(),"data-row").each(function(t){var e=Zi.getInt(n.target(),"top");In(n.target(),"top",e+n.yDelta()+"px")}),a(n.target(),"data-column").each(function(t){var e=Zi.getInt(n.target(),"left");In(n.target(),"left",e+n.xDelta()+"px")})});var c=function(n,t){return Zi.getInt(n,t)-parseInt(vn(n,"data-initial-"+t),10)};o.events.stop.bind(function(){r.get().each(function(r){i.each(function(o){a(r,"data-row").each(function(n){var t=c(r,"top");wn(r,"data-initial-top"),m.trigger.adjustHeight(o,t,parseInt(n,10))}),a(r,"data-column").each(function(n){var t=c(r,"left");wn(r,"data-initial-left"),m.trigger.adjustWidth(o,t,parseInt(n,10))}),Qo.refresh(n,o,e,t)})})});var l=function(t,e){m.trigger.startAdjust(),r.assign(t),pn(t,"data-initial-"+e,parseInt(_n(t,e),10)),Io(t,Tc),In(t,"opacity","0.2"),o.go(n.parent())},f=vc(n.parent(),"mousedown",function(n){Qo.isRowBar(n.target())&&l(n.target(),"top"),Qo.isColBar(n.target())&&l(n.target(),"left")}),s=function(t){return mt(t,n.view())},d=vc(n.view(),"mouseover",function(r){"table"===an(r.target())||Cc(r.target(),"table",s)?(i="table"===an(r.target())?v.some(r.target()):Gt(r.target(),"table",s)).each(function(r){Qo.refresh(n,r,e,t)}):An(r.target())&&Qo.destroy(n)}),m=fc.create({adjustHeight:lc(["table","delta","row"]),adjustWidth:lc(["table","delta","column"]),startAdjust:lc([])});return{destroy:function(){f.unbind(),d.unbind(),o.destroy(),Qo.destroy(n)},refresh:function(r){Qo.refresh(n,r,e,t)},on:o.on,off:o.off,hideBars:u(Qo.hide,n),showBars:u(Qo.show,n),events:m.registry}}(n,t,e),o=fc.create({beforeResize:lc(["table"]),afterResize:lc(["table"]),startDrag:lc([])});return r.events.adjustHeight.bind(function(n){o.trigger.beforeResize(n.table());var t=e.delta(n.delta());pu.adjustHeight(n.table(),t,n.row(),e),o.trigger.afterResize(n.table())}),r.events.startAdjust.bind(function(n){o.trigger.startDrag()}),r.events.adjustWidth.bind(function(n){o.trigger.beforeResize(n.table());var e=t.delta(n.delta(),n.table());pu.adjustWidth(n.table(),e,n.column(),t),o.trigger.afterResize(n.table())}),{on:r.on,off:r.off,hideBars:r.hideBars,showBars:r.showBars,destroy:r.destroy,events:o.registry}}var Dc=function(n,t){return n.inline?cc(Vu(n),function(){var n=Dn.fromTag("div");return Pn(n,{position:"static",height:"0",width:"0",padding:"0",margin:"0",border:"0"}),Rt(En(),n),n}()):ac(Dn.fromDom(n.getDoc()))},Ac=function(n,t){n.inline&&kt(t.parent())},Ec=function(n){var t,e,r=v.none(),o=v.none(),i=v.none(),u=/(\d+(\.\d+)?)%/,a=function(n){return"TABLE"===n.nodeName};return n.on("init",function(){var t=bo(Qu.directionAt),e=Dc(n);if(i=v.some(e),function(n){var t=n.getParam("object_resizing",!0);return"table"===t||t}(n)&&function(n){return n.getParam("table_resize_bars",!0,"boolean")}(n)){var u=Rc(e,t);u.on(),u.events.startDrag.bind(function(t){r=v.some(n.selection.getRng())}),u.events.beforeResize.bind(function(t){var e=t.table().dom();ma(n,e,Gu(e),Ku(e))}),u.events.afterResize.bind(function(t){var e=t.table(),o=e.dom();Yu(e),r.each(function(t){n.selection.setRng(t),n.focus()}),ga(n,o,Gu(o),Ku(o)),n.undoManager.add()}),o=v.some(u)}}),n.on("ObjectResizeStart",function(r){var o,i=r.target;a(i)&&(t=r.width,o=i,e=n.dom.getStyle(o,"width")||n.dom.getAttrib(o,"width"))}),n.on("ObjectResized",function(r){var o=r.target;if(a(o)){var i=o;if(u.test(e)){var c=parseFloat(u.exec(e)[1]),l=r.width*c/t;n.dom.setStyle(i,"width",l+"%")}else{var f=[];va.each(i.rows,function(t){va.each(t.cells,function(t){var e=n.dom.getStyle(t,"width",!0);f.push({cell:t,width:e})})}),va.each(f,function(t){n.dom.setStyle(t.cell,"width",t.width),n.dom.setAttrib(t.cell,"width",null)})}}}),{lazyResize:function(){return o},lazyWire:function(){return i.getOr(ac(Dn.fromDom(n.getBody())))},destroy:function(){o.each(function(n){n.destroy()}),i.each(function(t){Ac(n,t)})}}},Nc=function(n){return{fold:n}},kc=function(n){return Nc(function(t,e,r,o){return t(n)})},Ic=function(n){return Nc(function(t,e,r,o){return e(n)})},Pc=function(n,t){return Nc(function(e,r,o,i){return o(n,t)})},_c=function(n){return Nc(function(t,e,r,o){return o(n)})},Bc=function(n,t){return re.table(n,t).bind(function(t){var e=re.cells(t);return _(e,function(t){return mt(n,t)}).map(function(n){return{index:o(n),all:o(e)}})})},Mc=function(n,t){return Bc(n,t).fold(function(){return kc(n)},function(t){return t.index()+1<t.all().length?Pc(n,t.all()[t.index()+1]):_c(n)})},Lc=function(n,t){return Bc(n,t).fold(function(){return kc()},function(t){return t.index()-1>=0?Pc(n,t.all()[t.index()-1]):Ic(n)})},jc=Sr([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),Wc={before:jc.before,on:jc.on,after:jc.after,cata:function(n,t,e,r){return n.fold(t,e,r)},getStart:function(n){return n.fold(i,i,i)}},Uc=Sr([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),zc=$("start","soffset","finish","foffset"),Fc=function(n){var t,e=function(n){return n.match({domRange:function(n){return Dn.fromDom(n.startContainer)},relative:function(n,t){return Wc.getStart(n)},exact:function(n,t,e,r){return n}})}(n);return t=e.dom().ownerDocument.defaultView,Dn.fromDom(t)},Hc=(Uc.domRange,Uc.relative),qc=Uc.exact,Vc=function(n,t,e,r){var o=function(n,t,e,r){var o=ht(n).dom().createRange();return o.setStart(n.dom(),t),o.setEnd(e.dom(),r),o}(n,t,e,r),i=mt(n,e)&&t===r;return o.collapsed&&!i},Gc=function(n,t){n.selectNodeContents(t.dom())},Kc=function(n,t,e){var r,o=n.document.createRange();return r=o,t.fold(function(n){r.setStartBefore(n.dom())},function(n,t){r.setStart(n.dom(),t)},function(n){r.setStartAfter(n.dom())}),function(n,t){t.fold(function(t){n.setEndBefore(t.dom())},function(t,e){n.setEnd(t.dom(),e)},function(t){n.setEndAfter(t.dom())})}(o,e),o},Xc=function(n,t,e,r,o){var i=n.document.createRange();return i.setStart(t.dom(),e),i.setEnd(r.dom(),o),i},$c=function(n){return{left:o(n.left),top:o(n.top),right:o(n.right),bottom:o(n.bottom),width:o(n.width),height:o(n.height)}},Yc=Sr([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),Jc=function(n,t,e){return t(Dn.fromDom(e.startContainer),e.startOffset,Dn.fromDom(e.endContainer),e.endOffset)},Zc=function(n,t){return function(n,t){var e=t.ltr();return e.collapsed?t.rtl().filter(function(n){return!1===n.collapsed}).map(function(n){return Yc.rtl(Dn.fromDom(n.endContainer),n.endOffset,Dn.fromDom(n.startContainer),n.startOffset)}).getOrThunk(function(){return Jc(0,Yc.ltr,e)}):Jc(0,Yc.ltr,e)}(0,function(n,t){return t.match({domRange:function(n){return{ltr:o(n),rtl:v.none}},relative:function(t,e){return{ltr:Tn(function(){return Kc(n,t,e)}),rtl:Tn(function(){return v.some(Kc(n,e,t))})}},exact:function(t,e,r,o){return{ltr:Tn(function(){return Xc(n,t,e,r,o)}),rtl:Tn(function(){return v.some(Xc(n,r,o,t,e))})}}})}(n,t))},Qc=function(n,t){return Zc(n,t).match({ltr:function(t,e,r,o){var i=n.document.createRange();return i.setStart(t.dom(),e),i.setEnd(r.dom(),o),i},rtl:function(t,e,r,o){var i=n.document.createRange();return i.setStart(r.dom(),o),i.setEnd(t.dom(),e),i}})},nl=(Yc.ltr,Yc.rtl,function(n,t,e){return t>=n.left&&t<=n.right&&e>=n.top&&e<=n.bottom}),tl=function(n,t,e,r,o){var i=function(e){var r=n.dom().createRange();return r.setStart(t.dom(),e),r.collapse(!0),r},u=me(t).length,a=function(n,t,e,r,o){if(0===o)return 0;if(t===r)return o-1;for(var i=r,u=1;u<o;u++){var a=n(u),c=Math.abs(t-a.left);if(e<=a.bottom){if(e<a.top||c>i)return u-1;i=c}}return 0}(function(n){return i(n).getBoundingClientRect()},e,r,o.right,u);return i(a)},el=function(n,t,e,r){var o=n.dom().createRange();o.selectNode(t.dom());var i=o.getClientRects();return Oo(i,function(n){return nl(n,e,r)?v.some(n):v.none()}).map(function(o){return tl(n,t,e,r,o)})},rl=function(n,t,e,r){var o=n.dom().createRange(),i=xt(t);return Oo(i,function(t){return o.selectNode(t.dom()),nl(o.getBoundingClientRect(),e,r)?ol(n,t,e,r):v.none()})},ol=function(n,t,e,r){return(dn(t)?el:rl)(n,t,e,r)},il=function(n,t){return t-n.left<n.right-t},ul=function(n,t,e){var r=n.dom().createRange();return r.selectNode(t.dom()),r.collapse(e),r},al=function(n,t,e){var r=n.dom().createRange();r.selectNode(t.dom());var o=r.getBoundingClientRect(),i=il(o,e);return(!0===i?we:ye)(t).map(function(t){return ul(n,t,i)})},cl=function(n,t,e){var r=t.dom().getBoundingClientRect(),o=il(r,e);return v.some(ul(n,t,o))},ll=function(n,t,e,r){var o=n.dom().createRange();o.selectNode(t.dom());var i=o.getBoundingClientRect();return function(n,t,e,r){var o=n.dom().createRange();o.selectNode(t.dom());var i=o.getBoundingClientRect(),u=Math.max(i.left,Math.min(i.right,e)),a=Math.max(i.top,Math.min(i.bottom,r));return ol(n,t,u,a)}(n,t,Math.max(i.left,Math.min(i.right,e)),Math.max(i.top,Math.min(i.bottom,r)))},fl=document.caretPositionFromPoint?function(n,t,e){return v.from(n.dom().caretPositionFromPoint(t,e)).bind(function(t){if(null===t.offsetNode)return v.none();var e=n.dom().createRange();return e.setStart(t.offsetNode,t.offset),e.collapse(),v.some(e)})}:document.caretRangeFromPoint?function(n,t,e){return v.from(n.dom().caretRangeFromPoint(t,e))}:function(n,t,e){return Dn.fromPoint(n,t,e).bind(function(r){var o=function(){return function(n,t,e){return(0===xt(t).length?cl:al)(n,t,e)}(n,r,t)};return 0===xt(r).length?o():ll(n,r,t,e).orThunk(o)})},sl=function(n,t){var e=an(n);return"input"===e?Wc.after(n):R(["br","img"],e)?0===t?Wc.before(n):Wc.after(n):Wc.on(n,t)},dl=function(n,t){var e=n.fold(Wc.before,sl,Wc.after),r=t.fold(Wc.before,sl,Wc.after);return Hc(e,r)},ml=function(n,t,e,r){var o=sl(n,t),i=sl(e,r);return Hc(o,i)},gl=function(n,t){v.from(n.getSelection()).each(function(n){n.removeAllRanges(),n.addRange(t)})},pl=function(n,t,e,r,o){var i=Xc(n,t,e,r,o);gl(n,i)},hl=function(n,t){return Zc(n,t).match({ltr:function(t,e,r,o){pl(n,t,e,r,o)},rtl:function(t,e,r,o){var i=n.getSelection();if(i.setBaseAndExtent)i.setBaseAndExtent(t.dom(),e,r.dom(),o);else if(i.extend)try{!function(n,t,e,r,o,i){t.collapse(e.dom(),r),t.extend(o.dom(),i)}(0,i,t,e,r,o)}catch(u){pl(n,r,o,t,e)}else pl(n,r,o,t,e)}})},vl=function(n,t,e,r,o){var i=ml(t,e,r,o);hl(n,i)},bl=function(n,t,e){var r=dl(t,e);hl(n,r)},wl=function(n){var t=Fc(n).dom(),e=function(n,e,r,o){return Xc(t,n,e,r,o)},r=function(n){return n.match({domRange:function(n){var t=Dn.fromDom(n.startContainer),e=Dn.fromDom(n.endContainer);return ml(t,n.startOffset,e,n.endOffset)},relative:dl,exact:ml})}(n);return Zc(t,r).match({ltr:e,rtl:e})},yl=function(n){var t=Dn.fromDom(n.anchorNode),e=Dn.fromDom(n.focusNode);return Vc(t,n.anchorOffset,e,n.focusOffset)?v.some(zc(t,n.anchorOffset,e,n.focusOffset)):function(n){if(n.rangeCount>0){var t=n.getRangeAt(0),e=n.getRangeAt(n.rangeCount-1);return v.some(zc(Dn.fromDom(t.startContainer),t.startOffset,Dn.fromDom(e.endContainer),e.endOffset))}return v.none()}(n)},xl=function(n,t){var e=function(n,t){var e=n.document.createRange();return Gc(e,t),e}(n,t);gl(n,e)},Sl=function(n){return function(n){return v.from(n.getSelection()).filter(function(n){return n.rangeCount>0}).bind(yl)}(n).map(function(n){return qc(n.start(),n.soffset(),n.finish(),n.foffset())})},Cl=function(n,t){return function(n){var t=n.getClientRects(),e=t.length>0?t[0]:n.getBoundingClientRect();return e.width>0||e.height>0?v.some(e).map($c):v.none()}(Qc(n,t))},Ol=function(n,t,e){return function(n,t,e){var r=Dn.fromDom(n.document);return fl(r,t,e).map(function(n){return zc(Dn.fromDom(n.startContainer),n.startOffset,Dn.fromDom(n.endContainer),n.endOffset)})}(n,t,e)},Tl=function(n){n.getSelection().removeAllRanges()},Rl=tinymce.util.Tools.resolve("tinymce.util.VK"),Dl=function(n,t,e,r){return kl(n,t,Mc(e),r)},Al=function(n,t,e,r){return kl(n,t,Lc(e),r)},El=function(n,t){var e=qc(t,0,t,0);return wl(e)},Nl=function(n,t){var e,r=Ht(t,"tr");return(e=r,0===e.length?v.none():v.some(e[e.length-1])).bind(function(n){return Xt(n,"td,th").map(function(n){return El(0,n)})})},kl=function(n,t,e,r,o){return e.fold(v.none,v.none,function(n,t){return we(t).map(function(n){return El(0,n)})},function(e){return re.table(e,t).bind(function(t){var o=kr.noMenu(e);return n.undoManager.transact(function(){r.insertRowsAfter(t,o)}),Nl(0,t)})})},Il=["table","li","dl"],Pl={handle:function(n,t,e,r){if(n.keyCode===Rl.TAB){var o=Vu(t),i=function(n){var t=an(n);return mt(n,o)||R(Il,t)},u=t.selection.getRng();if(u.collapsed){var a=Dn.fromDom(u.startContainer);re.cell(a,i).each(function(o){n.preventDefault(),(n.shiftKey?Al:Dl)(t,i,o,e,r).each(function(n){t.selection.setRng(n)})})}}}},_l={response:$("selection","kill")},Bl=function(n){return function(t){return t===n}},Ml=Bl(38),Ll=Bl(40),jl={ltr:{isBackward:Bl(37),isForward:Bl(39)},rtl:{isBackward:Bl(39),isForward:Bl(37)},isUp:Ml,isDown:Ll,isNavigation:function(n){return n>=37&&n<=40}},Wl={convertToRange:function(n,t){var e=Qc(n,t);return{start:o(Dn.fromDom(e.startContainer)),soffset:o(e.startOffset),finish:o(Dn.fromDom(e.endContainer)),foffset:o(e.endOffset)}},makeSitus:function(n,t,e,r){return{start:o(Wc.on(n,t)),finish:o(Wc.on(e,r))}}},Ul=(ct.detect().browser.isSafari(),function(t){var e=void 0!==t?t.dom():n.document,r=e.body.scrollLeft||e.documentElement.scrollLeft,o=e.body.scrollTop||e.documentElement.scrollTop;return to(r,o)}),zl=function(t,e,r){(void 0!==r?r.dom():n.document).defaultView.scrollBy(t,e)};function Fl(n){return{elementFromPoint:function(t,e){return Dn.fromPoint(Dn.fromDom(n.document),t,e)},getRect:function(n){return n.dom().getBoundingClientRect()},getRangedRect:function(t,e,r,o){var i=qc(t,e,r,o);return Cl(n,i).map(function(n){return V(n,l)})},getSelection:function(){return Sl(n).map(function(t){return Wl.convertToRange(n,t)})},fromSitus:function(t){var e=Hc(t.start(),t.finish());return Wl.convertToRange(n,e)},situsFromPoint:function(t,e){return Ol(n,t,e).map(function(n){return{start:o(Wc.on(n.start(),n.soffset())),finish:o(Wc.on(n.finish(),n.foffset()))}})},clearSelection:function(){Tl(n)},setSelection:function(t){vl(n,t.start(),t.soffset(),t.finish(),t.foffset())},setRelativeSelection:function(t,e){bl(n,t,e)},selectContents:function(t){xl(n,t)},getInnerHeight:function(){return n.innerHeight},getScrollY:function(){return Ul(Dn.fromDom(n.document)).top()},scrollBy:function(t,e){zl(t,e,Dn.fromDom(n.document))}}}var Hl=function(n,t,e,r,o){return mt(e,r)?v.none():vr.identify(e,r,t).bind(function(t){var r=t.boxes().getOr([]);return r.length>0?(o(n,r,t.start(),t.finish()),v.some(_l.response(v.some(Wl.makeSitus(e,0,e,he(e))),!0))):v.none()})},ql={sync:function(n,t,e,r,o,i,u){return mt(e,o)&&r===i?v.none():$t(e,"td,th",t).bind(function(e){return $t(o,"td,th",t).bind(function(r){return Hl(n,t,e,r,u)})})},detect:Hl,update:function(n,t,e,r,o){return vr.shiftSelection(r,n,t,o.firstSelectedSelector(),o.lastSelectedSelector()).map(function(n){return o.clear(e),o.selectRange(e,n.boxes(),n.start(),n.finish()),n.boxes()})}},Vl=tn(["left","top","right","bottom"],[]),Gl={nu:Vl,moveUp:function(n,t){return Vl({left:n.left(),top:n.top()-t,right:n.right(),bottom:n.bottom()-t})},moveDown:function(n,t){return Vl({left:n.left(),top:n.top()+t,right:n.right(),bottom:n.bottom()+t})},moveBottomTo:function(n,t){var e=n.bottom()-n.top();return Vl({left:n.left(),top:t-e,right:n.right(),bottom:t})},moveTopTo:function(n,t){var e=n.bottom()-n.top();return Vl({left:n.left(),top:t,right:n.right(),bottom:t+e})},getTop:function(n){return n.top()},getBottom:function(n){return n.bottom()},translate:function(n,t,e){return Vl({left:n.left()+t,top:n.top()+e,right:n.right()+t,bottom:n.bottom()+e})},toString:function(n){return"("+n.left()+", "+n.top()+") -> ("+n.right()+", "+n.bottom()+")"}},Kl=function(n){return Gl.nu({left:n.left,top:n.top,right:n.right,bottom:n.bottom})},Xl=function(n,t){return v.some(n.getRect(t))},$l=function(n,t,e){return sn(t)?Xl(n,t).map(Kl):dn(t)?function(n,t,e){return e>=0&&e<he(t)?n.getRangedRect(t,e,t,e+1):e>0?n.getRangedRect(t,e-1,t,e):v.none()}(n,t,e).map(Kl):v.none()},Yl=function(n,t){return sn(t)?Xl(n,t).map(Kl):dn(t)?n.getRangedRect(t,0,t,he(t)).map(Kl):v.none()},Jl=$("item","mode"),Zl=function(n,t,e,r){return void 0===r&&(r=Ql),n.property().parent(t).map(function(n){return Jl(n,r)})},Ql=function(n,t,e,r){return void 0===r&&(r=nf),e.sibling(n,t).map(function(n){return Jl(n,r)})},nf=function(n,t,e,r){void 0===r&&(r=nf);var o=n.property().children(t);return e.first(o).map(function(n){return Jl(n,r)})},tf=[{current:Zl,next:Ql,fallback:v.none()},{current:Ql,next:nf,fallback:v.some(Zl)},{current:nf,next:nf,fallback:v.some(Ql)}],ef=function(n,t,e,r,o){return void 0===o&&(o=tf),P(o,function(n){return n.current===e}).bind(function(e){return e.current(n,t,r,e.next).orThunk(function(){return e.fallback.bind(function(e){return ef(n,t,e,r)})})})},rf=function(){return{sibling:function(n,t){return n.query().prevSibling(t)},first:function(n){return n.length>0?v.some(n[n.length-1]):v.none()}}},of=function(){return{sibling:function(n,t){return n.query().nextSibling(t)},first:function(n){return n.length>0?v.some(n[0]):v.none()}}},uf=function(n,t,e,r,o,i){return ef(n,t,r,o).bind(function(t){return i(t.item())?v.none():e(t.item())?v.some(t.item()):uf(n,t.item(),e,t.mode(),o,i)})},af=function(n){return function(t){return 0===n.property().children(t).length}},cf=function(n,t,e,r){return uf(n,t,e,Ql,rf(),r)},lf=function(n,t,e,r){return uf(n,t,e,Ql,of(),r)},ff=Pe(),sf=function(n,t){return function(n,t,e){return cf(n,t,af(n),e)}(ff,n,t)},df=function(n,t){return function(n,t,e){return lf(n,t,af(n),e)}(ff,n,t)},mf=Sr([{none:[]},{retry:["caret"]}]),gf=function(n,t,e){return(r=t,i=ku,qt(function(n){return i(n)},Vt,r,i,u)).fold(o(!1),function(t){return Yl(n,t).exists(function(n){return function(n,t){return n.left()<t.left()||Math.abs(t.right()-n.left())<1||n.left()>t.right()}(e,n)})});var r,i,u},pf={point:Gl.getTop,adjuster:function(n,t,e,r,o){var i=Gl.moveUp(o,5);return Math.abs(e.top()-r.top())<1?mf.retry(i):e.bottom()<o.top()?mf.retry(i):e.bottom()===o.top()?mf.retry(Gl.moveUp(o,1)):gf(n,t,o)?mf.retry(Gl.translate(i,5,0)):mf.none()},move:Gl.moveUp,gather:sf},hf={point:Gl.getBottom,adjuster:function(n,t,e,r,o){var i=Gl.moveDown(o,5);return Math.abs(e.bottom()-r.bottom())<1?mf.retry(i):e.top()>o.bottom()?mf.retry(i):e.top()===o.bottom()?mf.retry(Gl.moveDown(o,1)):gf(n,t,o)?mf.retry(Gl.translate(i,5,0)):mf.none()},move:Gl.moveDown,gather:df},vf=function(n,t,e,r,o){return 0===o?v.some(r):function(n,t,e){return n.elementFromPoint(t,e).filter(function(n){return"table"===an(n)}).isSome()}(n,r.left(),t.point(r))?function(n,t,e,r,o){return vf(n,t,e,t.move(r,5),o)}(n,t,e,r,o-1):n.situsFromPoint(r.left(),t.point(r)).bind(function(i){return i.start().fold(v.none,function(i,u){return Yl(n,i,u).bind(function(u){return t.adjuster(n,i,u,e,r).fold(v.none,function(r){return vf(n,t,e,r,o-1)})}).orThunk(function(){return v.some(r)})},v.none)})},bf=function(n,t,e){var r=n.move(e,5),o=vf(t,n,e,r,100).getOr(r);return function(n,t,e){return n.point(t)>e.getInnerHeight()?v.some(n.point(t)-e.getInnerHeight()):n.point(t)<0?v.some(-n.point(t)):v.none()}(n,o,t).fold(function(){return t.situsFromPoint(o.left(),n.point(o))},function(e){return t.scrollBy(0,e),t.situsFromPoint(o.left(),n.point(o)-e)})},wf={tryUp:u(bf,pf),tryDown:u(bf,hf),ieTryUp:function(n,t){return n.situsFromPoint(t.left(),t.top()-5)},ieTryDown:function(n,t){return n.situsFromPoint(t.left(),t.bottom()+5)},getJumpSize:o(5)},yf=Sr([{none:["message"]},{success:[]},{failedUp:["cell"]},{failedDown:["cell"]}]),xf=function(n){return $t(n,"tr")},Sf={verify:function(n,t,e,r,o,i,u){return $t(r,"td,th",u).bind(function(e){return $t(t,"td,th",u).map(function(t){return mt(e,t)?mt(r,e)&&he(e)===o?i(t):yf.none("in same cell"):Qe.sharedOne(xf,[e,t]).fold(function(){return function(n,t,e){var r=n.getRect(t),o=n.getRect(e);return o.right>r.left&&o.left<r.right}(n,t,e)?yf.success():i(t)},function(n){return i(t)})})}).getOr(yf.none("default"))},cata:function(n,t,e,r,o){return n.fold(t,e,r,o)},adt:yf},Cf=$("element","offset"),Of=($("element","deltaOffset"),$("element","start","finish"),$("begin","end"),$("element","text"),$("ancestor","descendants","element","index"),$("parent","children","element","index")),Tf=function(n,t){return _(n,u(mt,t))},Rf=function(n){return"br"===an(n)},Df=function(n,t,e){return t(n,e).bind(function(n){return dn(n)&&0===me(n).trim().length?Df(n,t,e):v.some(n)})},Af=function(n,t,e,r){return function(n,t){return St(n,t).filter(Rf).orThunk(function(){return St(n,t-1).filter(Rf)})}(t,e).bind(function(t){return r.traverse(t).fold(function(){return Df(t,r.gather,n).map(r.relative)},function(n){return(t=n,vt(t).bind(function(n){var e=xt(n);return Tf(e,t).map(function(r){return Of(n,e,t,r)})})).map(function(n){return Wc.on(n.parent(),n.index())});var t})})},Ef=function(n,t,e,r){return(Rf(t)?function(n,t,e){return e.traverse(t).orThunk(function(){return Df(t,e.gather,n)}).map(e.relative)}(n,t,r):Af(n,t,e,r)).map(function(n){return{start:o(n),finish:o(n)}})},Nf=function(n){return Sf.cata(n,function(n){return v.none()},function(){return v.none()},function(n){return v.some(Cf(n,0))},function(n){return v.some(Cf(n,he(n)))})},kf=ct.detect(),If=function(n,t,e,r,o,i){return 0===i?v.none():Bf(n,t,e,r,o).bind(function(u){var a=n.fromSitus(u),c=Sf.verify(n,e,r,a.finish(),a.foffset(),o.failure,t);return Sf.cata(c,function(){return v.none()},function(){return v.some(u)},function(u){return mt(e,u)&&0===r?Pf(n,e,r,Gl.moveUp,o):If(n,t,u,0,o,i-1)},function(u){return mt(e,u)&&r===he(u)?Pf(n,e,r,Gl.moveDown,o):If(n,t,u,he(u),o,i-1)})})},Pf=function(n,t,e,r,o){return $l(n,t,e).bind(function(t){return _f(n,o,r(t,wf.getJumpSize()))})},_f=function(n,t,e){return kf.browser.isChrome()||kf.browser.isSafari()||kf.browser.isFirefox()||kf.browser.isEdge()?t.otherRetry(n,e):kf.browser.isIE()?t.ieRetry(n,e):v.none()},Bf=function(n,t,e,r,o){return $l(n,e,r).bind(function(t){return _f(n,o,t)})},Mf=function(n,t,e){return function(n,t,e){return n.getSelection().bind(function(r){return Ef(t,r.finish(),r.foffset(),e).fold(function(){return v.some(Cf(r.finish(),r.foffset()))},function(o){var i=n.fromSitus(o),u=Sf.verify(n,r.finish(),r.foffset(),i.finish(),i.foffset(),e.failure,t);return Nf(u)})})}(n,t,e).bind(function(r){return If(n,t,r.element(),r.offset(),e,20).map(n.fromSitus)})},Lf=ct.detect(),jf=function(n,t){return Vt(n,function(n){return vt(n).exists(function(n){return mt(n,t)})},e).isSome();var e},Wf=function(n,t,e,r,i){return $t(r,"td,th",t).bind(function(r){return $t(r,"table",t).bind(function(u){return jf(i,u)?Mf(n,t,e).bind(function(n){return $t(n.finish(),"td,th",t).map(function(t){return{start:o(r),finish:o(t),range:o(n)}})}):v.none()})})},Uf=function(n,t,e,r,o,i){return Lf.browser.isIE()?v.none():i(r,t).orThunk(function(){return Wf(n,t,e,r,o).map(function(n){var t=n.range();return _l.response(v.some(Wl.makeSitus(t.start(),t.soffset(),t.finish(),t.foffset())),!0)})})},zf=function(n,t,e,r,o,i,u){return Wf(n,e,r,o,i).bind(function(n){return ql.detect(t,e,n.start(),n.finish(),u)})},Ff=function(n,t){return $t(n,"tr",t).bind(function(n){return $t(n,"table",t).bind(function(e){var r=Ht(e,"tr");return mt(n,r[0])?function(n,t,e){return cf(ff,n,t,e)}(e,function(n){return ye(n).isSome()},t).map(function(n){var t=he(n);return _l.response(v.some(Wl.makeSitus(n,t,n,t)),!0)}):v.none()})})},Hf=function(n,t){return $t(n,"tr",t).bind(function(n){return $t(n,"table",t).bind(function(e){var r=Ht(e,"tr");return mt(n,r[r.length-1])?function(n,t,e){return lf(ff,n,t,e)}(e,function(n){return we(n).isSome()},t).map(function(n){return _l.response(v.some(Wl.makeSitus(n,0,n,0)),!0)}):v.none()})})},qf=function(n,t){return $t(n,"td,th",t)},Vf={down:{traverse:yt,gather:df,relative:Wc.before,otherRetry:wf.tryDown,ieRetry:wf.ieTryDown,failure:Sf.adt.failedDown},up:{traverse:wt,gather:sf,relative:Wc.before,otherRetry:wf.tryUp,ieRetry:wf.ieTryUp,failure:Sf.adt.failedUp}},Gf=$("rows","cols"),Kf={mouse:function(n,t,e,r){var o=function(n,t,e,r){var o=v.none(),i=function(){o=v.none()};return{mousedown:function(n){r.clear(t),o=qf(n.target(),e)},mouseover:function(i){o.each(function(o){r.clear(t),qf(i.target(),e).each(function(i){vr.identify(o,i,e).each(function(e){var u=e.boxes().getOr([]);(u.length>1||1===u.length&&!mt(o,i))&&(r.selectRange(t,u,e.start(),e.finish()),n.selectContents(i))})})})},mouseup:function(){o.each(i)}}}(Fl(n),t,e,r);return{mousedown:o.mousedown,mouseover:o.mouseover,mouseup:o.mouseup}},keyboard:function(n,t,e,r){var o=Fl(n),i=function(){return r.clear(t),v.none()};return{keydown:function(n,a,c,l,f,s){var d=n.raw().which,m=!0===n.raw().shiftKey;return vr.retrieve(t,r.selectedSelector()).fold(function(){return jl.isDown(d)&&m?u(zf,o,t,e,Vf.down,l,a,r.selectRange):jl.isUp(d)&&m?u(zf,o,t,e,Vf.up,l,a,r.selectRange):jl.isDown(d)?u(Uf,o,e,Vf.down,l,a,Hf):jl.isUp(d)?u(Uf,o,e,Vf.up,l,a,Ff):v.none},function(n){var e=function(e){return function(){return Oo(e,function(e){return ql.update(e.rows(),e.cols(),t,n,r)}).fold(function(){return vr.getEdges(t,r.firstSelectedSelector(),r.lastSelectedSelector()).map(function(n){var e=jl.isDown(d)||s.isForward(d)?Wc.after:Wc.before;return o.setRelativeSelection(Wc.on(n.first(),0),e(n.table())),r.clear(t),_l.response(v.none(),!0)})},function(n){return v.some(_l.response(v.none(),!0))})}};return jl.isDown(d)&&m?e([Gf(1,0)]):jl.isUp(d)&&m?e([Gf(-1,0)]):s.isBackward(d)&&m?e([Gf(0,-1),Gf(-1,0)]):s.isForward(d)&&m?e([Gf(0,1),Gf(1,0)]):jl.isNavigation(d)&&!1===m?i:v.none})()},keyup:function(n,o,i,u,a){return vr.retrieve(t,r.selectedSelector()).fold(function(){var c=n.raw().which;return 0==(!0===n.raw().shiftKey)?v.none():jl.isNavigation(c)?ql.sync(t,e,o,i,u,a,r.selectRange):v.none()},v.none)}}}},Xf=function(n,t){E(t,function(t){!function(n,t){Eo(n)?n.dom().classList.remove(t):ko(n,t),Po(n)}(n,t)})},$f={byClass:function(n){var t,e,r=(t=n.selected(),function(n){Io(n,t)}),o=(e=[n.selected(),n.lastSelected(),n.firstSelected()],function(n){Xf(n,e)}),i=function(t){var e=Ht(t,n.selectedSelector());E(e,o)};return{clear:i,selectRange:function(t,e,o,u){i(t),E(e,r),Io(o,n.firstSelected()),Io(u,n.lastSelected())},selectedSelector:n.selectedSelector,firstSelectedSelector:n.firstSelectedSelector,lastSelectedSelector:n.lastSelectedSelector}},byAttr:function(n){var t=function(t){wn(t,n.selected()),wn(t,n.firstSelected()),wn(t,n.lastSelected())},e=function(t){pn(t,n.selected(),"1")},r=function(e){var r=Ht(e,n.selectedSelector());E(r,t)};return{clear:r,selectRange:function(t,o,i,u){r(t),E(o,e),pn(i,n.firstSelected(),"1"),pn(u,n.lastSelected(),"1")},selectedSelector:n.selectedSelector,firstSelectedSelector:n.firstSelectedSelector,lastSelectedSelector:n.lastSelectedSelector}}},Yf=function(n){return!1===_o(Dn.fromDom(n.target),"ephox-snooker-resizer-bar")},Jf=function(n){return{get:function(){var t=Vu(n);return br(t,xr.selectedSelector()).fold(function(){return void 0===n.selection.getStart()?Or.none():Or.single(n.selection)},function(n){return Or.multiple(n)})}}},Zf=function(n,e){var r=t(v.none()),o=t([]),i=function(){return oc(n).bind(function(n){return re.table(n).map(function(t){return"caption"===an(n)?kr.notCell(n):kr.forMenu(e,t,n)})})},u=function(){r.set(Tn(i)()),E(o.get(),function(n){return n()})},a=function(n,t){var e=function(){return r.get().fold(function(){n.setDisabled(!0)},function(e){n.setDisabled(t(e))})};return e(),o.set(o.get().concat([e])),function(){o.set(N(o.get(),function(n){return n!==e}))}};return n.on("nodechange",u),{onSetupTable:function(n){return a(n,function(n){return!1})},onSetupCellOrRow:function(n){return a(n,function(n){return"caption"===an(n.element())})},onSetupMergeable:function(n){return a(n,function(n){return n.mergable().isNone()})},onSetupUnmergeable:function(n){return a(n,function(n){return n.unmergable().isNone()})},resetTargets:u,targets:function(){return r.get()}}},Qf={addButtons:function(n,t){n.ui.registry.addMenuButton("table",{tooltip:"Table",icon:"table",fetch:function(n){return n("inserttable tableprops deletetable | cell row column")}});var e=function(t){return function(){return n.execCommand(t)}};n.ui.registry.addButton("tableprops",{tooltip:"Table properties",onAction:e("mceTableProps"),icon:"table",onSetup:t.onSetupTable}),n.ui.registry.addButton("tabledelete",{tooltip:"Delete table",onAction:e("mceTableDelete"),icon:"table-delete-table",onSetup:t.onSetupTable}),n.ui.registry.addButton("tablecellprops",{tooltip:"Cell properties",onAction:e("mceTableCellProps"),icon:"table-cell-properties",onSetup:t.onSetupCellOrRow}),n.ui.registry.addButton("tablemergecells",{tooltip:"Merge cells",onAction:e("mceTableMergeCells"),icon:"table-merge-cells",onSetup:t.onSetupMergeable}),n.ui.registry.addButton("tablesplitcells",{tooltip:"Split cell",onAction:e("mceTableSplitCells"),icon:"table-split-cells",onSetup:t.onSetupUnmergeable}),n.ui.registry.addButton("tableinsertrowbefore",{tooltip:"Insert row before",onAction:e("mceTableInsertRowBefore"),icon:"table-insert-row-above",onSetup:t.onSetupCellOrRow}),n.ui.registry.addButton("tableinsertrowafter",{tooltip:"Insert row after",onAction:e("mceTableInsertRowAfter"),icon:"table-insert-row-after",onSetup:t.onSetupCellOrRow}),n.ui.registry.addButton("tabledeleterow",{tooltip:"Delete row",onAction:e("mceTableDeleteRow"),icon:"table-delete-row",onSetup:t.onSetupCellOrRow}),n.ui.registry.addButton("tablerowprops",{tooltip:"Row properties",onAction:e("mceTableRowProps"),icon:"table-row-properties",onSetup:t.onSetupCellOrRow}),n.ui.registry.addButton("tableinsertcolbefore",{tooltip:"Insert column before",onAction:e("mceTableInsertColBefore"),icon:"table-insert-column-before",onSetup:t.onSetupCellOrRow}),n.ui.registry.addButton("tableinsertcolafter",{tooltip:"Insert column after",onAction:e("mceTableInsertColAfter"),icon:"table-insert-column-after",onSetup:t.onSetupCellOrRow}),n.ui.registry.addButton("tabledeletecol",{tooltip:"Delete column",onAction:e("mceTableDeleteCol"),icon:"table-delete-column",onSetup:t.onSetupCellOrRow}),n.ui.registry.addButton("tablecutrow",{tooltip:"Cut row",onAction:e("mceTableCutRow"),icon:"temporary-placeholder",onSetup:t.onSetupCellOrRow}),n.ui.registry.addButton("tablecopyrow",{tooltip:"Copy row",onAction:e("mceTableCopyRow"),icon:"temporary-placeholder",onSetup:t.onSetupCellOrRow}),n.ui.registry.addButton("tablepasterowbefore",{tooltip:"Paste row before",onAction:e("mceTablePasteRowBefore"),icon:"temporary-placeholder",onSetup:t.onSetupCellOrRow}),n.ui.registry.addButton("tablepasterowafter",{tooltip:"Paste row after",onAction:e("mceTablePasteRowAfter"),icon:"temporary-placeholder",onSetup:t.onSetupCellOrRow})},addToolbars:function(n){var t=function(n){return n.getParam("table_toolbar","tableprops tabledelete | tableinsertrowbefore tableinsertrowafter tabledeleterow | tableinsertcolbefore tableinsertcolafter tabledeletecol")}(n);t.length>0&&n.ui.registry.addContextToolbar("table",{predicate:function(t){return n.dom.is(t,"table")&&n.getBody().contains(t)},items:t,scope:"node",position:"node"})}},ns={addMenuItems:function(n,t){var e=function(t){return function(){return n.execCommand(t)}},r=function(t){var e=t.numRows,r=t.numColumns;n.undoManager.transact(function(){Za(n,r,e)}),n.addVisual()},o={text:"Table properties",onSetup:t.onSetupTable,onAction:e("mceTableProps")},i={text:"Delete table",icon:"table-delete-table",onSetup:t.onSetupTable,onAction:e("mceTableDelete")},u={type:"nestedmenuitem",text:"Row",getSubmenuItems:function(){return[{type:"menuitem",text:"Insert row before",icon:"table-insert-row-above",onAction:e("mceTableInsertRowBefore"),onSetup:t.onSetupCellOrRow},{type:"menuitem",text:"Insert row after",icon:"table-insert-row-after",onAction:e("mceTableInsertRowAfter"),onSetup:t.onSetupCellOrRow},{type:"menuitem",text:"Delete row",icon:"table-delete-row",onAction:e("mceTableDeleteRow"),onSetup:t.onSetupCellOrRow},{type:"menuitem",text:"Row properties",icon:"table-row-properties",onAction:e("mceTableRowProps"),onSetup:t.onSetupCellOrRow},{type:"separator"},{type:"menuitem",text:"Cut row",onAction:e("mceTableCutRow"),onSetup:t.onSetupCellOrRow},{type:"menuitem",text:"Copy row",onAction:e("mceTableCopyRow"),onSetup:t.onSetupCellOrRow},{type:"menuitem",text:"Paste row before",onAction:e("mceTablePasteRowBefore"),onSetup:t.onSetupCellOrRow},{type:"menuitem",text:"Paste row after",onAction:e("mceTablePasteRowAfter"),onSetup:t.onSetupCellOrRow}]}},a={type:"nestedmenuitem",text:"Column",getSubmenuItems:function(){return[{type:"menuitem",text:"Insert column before",icon:"table-insert-column-before",onAction:e("mceTableInsertColBefore"),onSetup:t.onSetupCellOrRow},{type:"menuitem",text:"Insert column after",icon:"table-insert-column-after",onAction:e("mceTableInsertColAfter"),onSetup:t.onSetupCellOrRow},{type:"menuitem",text:"Delete column",icon:"table-delete-column",onAction:e("mceTableDeleteCol"),onSetup:t.onSetupCellOrRow}]}},c={type:"nestedmenuitem",text:"Cell",getSubmenuItems:function(){return[{type:"menuitem",text:"Cell properties",icon:"table-cell-properties",onAction:e("mceTableCellProps"),onSetup:t.onSetupCellOrRow},{type:"menuitem",text:"Merge cells",icon:"table-merge-cells",onAction:e("mceTableMergeCells"),onSetup:t.onSetupMergeable},{type:"menuitem",text:"Split cell",icon:"table-split-cells",onAction:e("mceTableSplitCells"),onSetup:t.onSetupUnmergeable}]}};!1===function(n){return n.getParam("table_grid",!0,"boolean")}(n)?n.ui.registry.addMenuItem("inserttable",{text:"Table",icon:"table",onAction:e("mceInsertTable")}):n.ui.registry.addNestedMenuItem("inserttable",{text:"Table",icon:"table",getSubmenuItems:function(){return[{type:"fancymenuitem",fancytype:"inserttable",onAction:r}]}}),n.ui.registry.addMenuItem("tableprops",o),n.ui.registry.addMenuItem("deletetable",i),n.ui.registry.addNestedMenuItem("row",u),n.ui.registry.addNestedMenuItem("column",a),n.ui.registry.addNestedMenuItem("cell",c),n.ui.registry.addContextMenu("table",{update:function(){return t.resetTargets(),t.targets().fold(function(){return""},function(n){return"caption"===an(n.element())?"tableprops deletetable":"cell row column | tableprops deletetable"})}})}},ts=function(n,t){return{insertTable:function(t,e){return Za(n,t,e)},setClipboardRows:function(n){return function(n,t){var e=A(n,Dn.fromDom);t.set(v.from(e))}(n,t)},getClipboardRows:function(){return function(n){return n.get().fold(function(){},function(n){return A(n,function(n){return n.dom()})})}(t)}}};b.add("table",function(n){var i=Ec(n),u=function(n,t){var i=tn(["mousedown","mouseover","mouseup","keyup","keydown"],[]),u=v.none(),a=$f.byAttr(xr);return n.on("init",function(c){var l=n.getWin(),f=Vu(n),s=Xu(n),d=Kf.mouse(l,f,s,a),m=Kf.keyboard(l,f,s,a),g=function(t,e){(function(n){return!0===n.raw().shiftKey})(t)&&(e.kill()&&t.kill(),e.selection().each(function(t){var e=Hc(t.start(),t.finish()),r=Qc(l,e);n.selection.setRng(r)}))},p=function(t){var e=w(t);if(e.raw().shiftKey&&jl.isNavigation(e.raw().which)){var r=n.selection.getRng(),o=Dn.fromDom(r.startContainer),i=Dn.fromDom(r.endContainer);m.keyup(e,o,r.startOffset,i,r.endOffset).each(function(n){g(e,n)})}},h=function(e){var r=w(e);t().each(function(n){n.hideBars()});var o=n.selection.getRng(),i=Dn.fromDom(n.selection.getStart()),u=Dn.fromDom(o.startContainer),a=Dn.fromDom(o.endContainer),c=Qu.directionAt(i).isRtl()?jl.rtl:jl.ltr;m.keydown(r,u,o.startOffset,a,o.endOffset,c).each(function(n){g(r,n)}),t().each(function(n){n.showBars()})},b=function(n){return n.hasOwnProperty("x")&&n.hasOwnProperty("y")},w=function(n){var t=Dn.fromDom(n.target),e=function(){n.stopPropagation()},i=function(){n.preventDefault()},u=r(i,e);return{target:o(t),x:o(b(n)?n.x:null),y:o(b(n)?n.y:null),stop:e,prevent:i,kill:u,raw:o(n)}},y=function(n){return 0===n.button},x=function(n){y(n)&&Yf(n)&&d.mousedown(w(n))},S=function(n){var t;void 0!==(t=n).buttons&&0==(1&t.buttons)||!Yf(n)||d.mouseover(w(n))},C=function(n){y(n)&&Yf(n)&&d.mouseup(w(n))};n.on("mousedown",x),n.on("mouseover",S),n.on("mouseup",C),n.on("keyup",p),n.on("keydown",h),n.on("nodechange",function(){var t=n.selection,r=Dn.fromDom(t.getStart()),o=Dn.fromDom(t.getEnd());Qe.sharedOne(re.table,[r,o]).fold(function(){a.clear(f)},e)}),u=v.some(i({mousedown:x,mouseover:S,mouseup:C,keyup:p,keydown:h}))}),{clear:a.clear,destroy:function(){u.each(function(n){})}}}(n,i.lazyResize),a=pa(n,i.lazyWire),c=Jf(n),l=Zf(n,c),f=t(v.none());return uc.registerCommands(n,a,u,c,f),Ir.registerEvents(n,c,a,u),ns.addMenuItems(n,l),Qf.addButtons(n,l),Qf.addToolbars(n),n.on("PreInit",function(){n.serializer.addTempAttr(xr.firstSelected()),n.serializer.addTempAttr(xr.lastSelected())}),oa(n)&&n.on("keydown",function(t){Pl.handle(t,n,a,i.lazyWire)}),n.on("remove",function(){i.destroy(),u.destroy()}),ts(n,f)})}(window)},228:function(n,t,e){e(229)},229:function(n,t){!function(n){"use strict";var t,e,r,o,i,u=tinymce.util.Tools.resolve("tinymce.PluginManager"),a=tinymce.util.Tools.resolve("tinymce.util.VK"),c=function(n){return n.target_list},l=function(n){return n.rel_list},f=function(n){return n.link_class_list},s=function(n){return"boolean"==typeof n.link_assume_external_targets&&n.link_assume_external_targets},d=function(n){return"boolean"==typeof n.link_context_toolbar&&n.link_context_toolbar},m=function(n){return n.link_list},g=function(n){return"string"==typeof n.default_link_target},p=function(n){return n.default_link_target},h=c,v=function(n){return!1!==c(n)},b=l,w=function(n){return void 0!==l(n)},y=f,x=function(n){return void 0!==f(n)},S=function(n){return!1!==n.link_title},C=function(n){return"boolean"==typeof n.allow_unsafe_link_target&&n.allow_unsafe_link_target},O=function(n){return!0===n.link_quicklink},T=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),R=tinymce.util.Tools.resolve("tinymce.Env"),D=function(t){if(!R.ie||R.ie>10){var e=n.document.createElement("a");e.target="_blank",e.href=t,e.rel="noreferrer noopener";var r=n.document.createEvent("MouseEvents");r.initMouseEvent("click",!0,!0,n.window,0,0,0,0,0,!1,!1,!1,!1,0,null),function(t,e){n.document.body.appendChild(t),t.dispatchEvent(e),n.document.body.removeChild(t)}(e,r)}else{var o=n.window.open("","_blank");if(o){o.opener=null;var i=o.document;i.open(),i.write('<meta http-equiv="refresh" content="0; url='+T.DOM.encode(t)+'">'),i.close()}}},A=function(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t]},E=function(n){return function(){return n}},N=E(!1),k=E(!0),I=N,P=k,_=function(){return B},B=(o={fold:function(n,t){return n()},is:I,isSome:I,isNone:P,getOr:r=function(n){return n},getOrThunk:e=function(n){return n()},getOrDie:function(n){throw new Error(n||"error: getOrDie called on none.")},getOrNull:function(){return null},getOrUndefined:function(){},or:r,orThunk:e,map:_,ap:_,each:function(){},bind:_,flatten:_,exists:I,forall:P,filter:_,equals:t=function(n){return n.isNone()},equals_:t,toArray:function(){return[]},toString:E("none()")},Object.freeze&&Object.freeze(o),o),M=function(n){var t=function(){return n},e=function(){return o},r=function(t){return t(n)},o={fold:function(t,e){return e(n)},is:function(t){return n===t},isSome:P,isNone:I,getOr:t,getOrThunk:t,getOrDie:t,getOrNull:t,getOrUndefined:t,or:e,orThunk:e,map:function(t){return M(t(n))},ap:function(t){return t.fold(_,function(t){return M(t(n))})},each:function(t){t(n)},bind:r,flatten:t,exists:r,forall:r,filter:function(t){return t(n)?o:B},equals:function(t){return t.is(n)},equals_:function(t,e){return t.fold(I,function(t){return e(n,t)})},toArray:function(){return[n]},toString:function(){return"some("+n+")"}};return o},L={some:M,none:_,from:function(n){return null==n?B:M(n)}},j=function(n){return function(t){return function(n){if(null===n)return"null";var t=typeof n;return"object"===t&&Array.prototype.isPrototypeOf(n)?"array":"object"===t&&String.prototype.isPrototypeOf(n)?"string":t}(t)===n}},W=j("string"),U=j("function"),z=void 0===(i=Array.prototype.indexOf)?function(n,t){return H(n,t)}:function(n,t){return i.call(n,t)},F=function(n,t){for(var e=0,r=n.length;e<r;e++)t(n[e],e,n)},H=function(n,t){for(var e=0,r=n.length;e<r;++e)if(n[e]===t)return e;return-1},q=Array.prototype.push,V=function(n){for(var t=[],e=0,r=n.length;e<r;++e){if(!Array.prototype.isPrototypeOf(n[e]))throw new Error("Arr.flatten item "+e+" was not an array, input: "+n);q.apply(t,n[e])}return t},G=function(n,t){var e=function(n,t){for(var e=n.length,r=new Array(e),o=0;o<e;o++){var i=n[o];r[o]=t(i,o,n)}return r}(n,t);return V(e)},K=(Array.prototype.slice,U(Array.from)&&Array.from,tinymce.util.Tools.resolve("tinymce.util.Tools")),X=function(n,t){var e=["noopener"],r=n?n.split(/\s+/):[],o=function(n){return n.filter(function(n){return-1===K.inArray(e,n)})},i=t?function(n){return(n=o(n)).length>0?n.concat(e):e}(r):o(r);return i.length>0?function(n){return K.trim(n.sort().join(" "))}(i):""},$=function(n,t){return t=t||n.selection.getNode(),J(t)?n.dom.select("a[href]",t)[0]:n.dom.getParent(t,"a[href]")},Y=function(n){return n&&"A"===n.nodeName&&!!n.href},J=function(n){return n&&"FIGURE"===n.nodeName&&/\bimage\b/i.test(n.className)},Z=function(n){return t=["title","rel","class","target"],e=function(t,e){return n[e].each(function(n){t[e]=n.length>0?n:null}),t},r={href:n.href},F(t,function(n){r=e(r,n)}),r;var t,e,r},Q=function(n,t){var e=n.dom.select("img",t)[0];if(e){var r=n.dom.getParents(e,"a[href]",t)[0];r&&(r.parentNode.insertBefore(e,r),n.dom.remove(r))}},nn=function(n,t,e){var r=n.dom.select("img",t)[0];if(r){var o=n.dom.create("a",e);r.parentNode.insertBefore(o,r),o.appendChild(r)}},tn=function(n,t,e){n.undoManager.transact(function(){var r=n.selection.getNode(),o=$(n,r),i=Z(e);if(!w(n.settings)&&!1===C(n.settings)){var u=X(i.rel,"_blank"===i.target);i.rel=u||null}e.href===t.href&&t.attach(),o?(n.focus(),function(n,t,e,r){e.each(function(n){t.hasOwnProperty("innerText")?t.innerText=n:t.textContent=n}),n.dom.setAttribs(t,r),n.selection.select(t)}(n,o,e.text,i)):function(n,t,e,r){J(t)?nn(n,t,r):e.fold(function(){return n.execCommand("mceInsertLink",!1,r)},function(t){return n.insertContent(n.dom.createHTML("a",r,n.dom.encode(t)))})}(n,r,e.text,i)})},en=function(n){n.undoManager.transact(function(){var t=n.selection.getNode();if(J(t))Q(n,t);else{var e=n.dom.getParent(t,"a[href]",n.getBody());e&&n.dom.remove(e,!0)}n.focus()})},rn=function(n){return K.grep(n,Y).length>0},on=function(n){var t=n.getAttribute("data-mce-href");return t||n.getAttribute("href")},un=function(n){return!(/</.test(n)&&(!/^<a [^>]+>[^<]+<\/a>$/.test(n)||-1===n.indexOf("href=")))},an=$,cn=function(n,t){return function(n){return n.replace(/\uFEFF/g,"")}(t?t.innerText||t.textContent:n.getContent({format:"text"}))},ln=X,fn=function(n){for(var t=[],e=function(n){t.push(n)},r=0;r<n.length;r++)n[r].each(e);return t},sn=function(n,t){for(var e=0;e<n.length;e++){var r=t(n[e],e);if(r.isSome())return r}return L.none()},dn=function(n){return W(n.value)?n.value:""},mn=function(n){return void 0===n&&(n=dn),function(t){return L.from(t).map(function(t){return function(n,t){var e=[];return K.each(n,function(n){var r=W(n.text)?n.text:W(n.title)?n.title:"";if(void 0!==n.menu);else{var o=t(n);e.push({text:r,value:o})}}),e}(t,n)})}},gn={sanitize:function(n){return mn(dn)(n)},sanitizeWith:mn,createUi:function(n,t){return function(e){return{name:n,type:"selectbox",label:t,items:e}}},getValue:dn},pn=function(n){var t=n,e=function(){return t};return{get:e,set:function(n){t=n},clone:function(){return pn(e())}}},hn=function(n,t,e,r){var o=r[t],i=n.length>0;return void 0!==o?function(n,t){return sn(t,function(t){return L.some(t).filter(function(t){return t.value===n})})}(o,e).map(function(t){return{url:{value:t.value,meta:{text:i?n:t.text,attach:A}},text:i?n:t.text}}):L.none()},vn=function(n,t){var e=pn(n.text),r=function(n,r){var o,i,u=(o=t,i=r.name,"link"===i?o.catalogs.link:"anchor"===i?o.catalogs.anchor:L.none()).getOr([]);return hn(e.get(),r.name,u,n)};return{onChange:function(n,t){return"url"===t.name?function(n){if(e.get().length<=0){var t=void 0!==n.url.meta.text?n.url.meta.text:n.url.value;return L.some({text:t})}return L.none()}(n()):(o=["anchor","link"],i=t.name,z(o,i)>-1?r(n(),t):"text"===t.name?(e.set(n().text),L.none()):L.none());var o,i}}},bn=function(){return(bn=Object.assign||function(n){for(var t,e=1,r=arguments.length;e<r;e++)for(var o in t=arguments[e])Object.prototype.hasOwnProperty.call(t,o)&&(n[o]=t[o]);return n}).apply(this,arguments)},wn=function(n){var t=L.none(),e=[],r=function(n){o()?u(n):e.push(n)},o=function(){return t.isSome()},i=function(n){F(n,u)},u=function(n){t.each(function(t){setTimeout(function(){n(t)},0)})};return n(function(n){t=L.some(n),i(e),e=[]}),{get:r,map:function(n){return wn(function(t){r(function(e){t(n(e))})})},isReady:o}},yn={nu:wn,pure:function(n){return wn(function(t){t(n)})}},xn=function(n){var t=function(t){var e;n((e=t,function(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];var r=this;setTimeout(function(){e.apply(r,n)},0)}))},e=function(){return yn.nu(t)};return{map:function(n){return xn(function(e){t(function(t){var r=n(t);e(r)})})},bind:function(n){return xn(function(e){t(function(t){n(t).get(e)})})},anonBind:function(n){return xn(function(e){t(function(t){n.get(e)})})},toLazy:e,toCached:function(){var n=null;return xn(function(t){null===n&&(n=e()),n.get(t)})},get:t}},Sn={nu:xn,pure:function(n){return xn(function(t){t(n)})}},Cn=tinymce.util.Tools.resolve("tinymce.util.Delay"),On=function(n){var t=n.href;return t.indexOf("@")>0&&-1===t.indexOf("//")&&-1===t.indexOf("mailto:")?L.some({message:"The URL you entered seems to be an email address. Do you want to add the required mailto: prefix?",preprocess:function(n){return bn({},n,{href:"mailto:"+t})}}):L.none()},Tn=function(n){return function(t){var e=t.href;return!0===n&&!/^\w+:/i.test(e)||!1===n&&/^\s*www[\.|\d\.]/i.test(e)?L.some({message:"The URL you entered seems to be an external link. Do you want to add the required http:// prefix?",preprocess:function(n){return bn({},n,{href:"http://"+e})}}):L.none()}},Rn=function(n,t,e){return sn([On,Tn(t)],function(n){return n(e)}).fold(function(){return Sn.pure(e)},function(t){return Sn.nu(function(r){!function(n,t,e){var r=n.selection.getRng();Cn.setEditorTimeout(n,function(){n.windowManager.confirm(t,function(t){n.selection.setRng(r),e(t)})})}(n,t.message,function(n){console.log("state",n),r(n?t.preprocess(e):e)})})})},Dn=function(n){var t=n.dom.select("a:not([href])"),e=G(t,function(n){var t=n.name||n.id;return t?[{text:t,value:"#"+t}]:[]});return e.length>0?L.some([{text:"None",value:""}].concat(e)):L.none()},An=function(n){if(x(n.settings)){var t=y(n.settings);return gn.sanitize(t)}return L.none()},En=tinymce.util.Tools.resolve("tinymce.util.XHR"),Nn=function(n){var t=function(t){return n.convertURL(t.value||t.url,"href")},e=m(n.settings);return Sn.nu(function(n){"string"==typeof e?En.send({url:e,success:function(t){return n(function(n){try{return L.some(JSON.parse(n))}catch(t){return L.none()}}(t))},error:function(t){return n(L.none())}}):"function"==typeof e?e(function(t){return n(L.some(t))}):n(L.from(e))}).map(function(n){return n.bind(gn.sanitizeWith(t))})},kn=function(n,t){if(w(n.settings)){var e=b(n.settings),r=t.is("_blank");return(!1===C(n.settings)?gn.sanitizeWith(function(n){return ln(gn.getValue(n),r)}):gn.sanitize)(e)}return L.none()},In=[{text:"Current window",value:""},{text:"New window",value:"_blank"}],Pn=function(n){if(v(n.settings)){var t=h(n.settings);return gn.sanitize(t).orThunk(function(){return L.some(In)})}return L.none()},_n=function(n,t,e){var r=n.getAttrib(t,e);return null!==r&&r.length>0?L.some(r):L.none()},Bn=function(n,t,e){return Nn(n).map(function(r){var o=function(n,t,e,r){var o=n.dom,i=un(r.getContent())?L.some(cn(r,e)):L.none(),u=e?L.some(o.getAttrib(e,"href")):L.none(),a=g(t)?L.some(p(t)):L.none(),c=e?L.from(o.getAttrib(e,"target")):a,l=_n(o,e,"rel"),f=_n(o,e,"class");return{url:u,text:i,title:_n(o,e,"title"),target:c,rel:l,linkClass:f}}(n,t,e,n.selection);return{anchor:o,catalogs:{targets:Pn(n),rels:kn(n,o.target),classes:An(n),anchor:Dn(n),link:r},optNode:L.from(e),flags:{titleEnabled:S(t)}}})},Mn=function(n){(function(n){var t=n.settings,e=an(n);return Bn(n,t,e)})(n).map(function(t){var e=function(n,t,e){return function(r){var o=r.getData();if(!o.url.value)return en(n),void r.close();var i=function(n){return L.from(o[n]).filter(function(e){return!t.anchor[n].is(e)})},u={href:o.url.value,text:i("text"),target:i("target"),rel:i("rel"),class:i("linkClass"),title:i("title")},a={href:o.url.value,attach:void 0!==o.url.meta&&o.url.meta.attach?o.url.meta.attach:function(){}};Rn(n,e,u).get(function(t){tn(n,a,t)}),r.close()}}(n,t,s(n.settings));return function(n,t){var e,r=n.anchor.text.map(function(){return{name:"text",type:"input",label:"Text to display"}}).toArray(),o=n.flags.titleEnabled?[{name:"title",type:"input",label:"Title"}]:[],i={url:{value:(e=n).anchor.url.getOr(""),meta:{attach:function(){},text:e.anchor.url.fold(function(){return""},function(){return e.anchor.text.getOr("")}),original:{value:e.anchor.url.getOr("")}}},text:e.anchor.text.getOr(""),title:e.anchor.title.getOr(""),anchor:e.anchor.url.getOr(""),link:e.anchor.url.getOr(""),rel:e.anchor.rel.getOr(""),target:e.anchor.target.getOr(""),linkClass:e.anchor.linkClass.getOr("")},u=vn(i,n),a=n.catalogs;return{title:"Insert/Edit Link",size:"normal",body:{type:"panel",items:V([[{name:"url",type:"urlinput",filetype:"file",label:"URL"}],r,o,fn([a.anchor.map(gn.createUi("anchor","Anchors")),a.rels.map(gn.createUi("rel","Rel")),a.targets.map(gn.createUi("target","Open link in...")),a.link.map(gn.createUi("link","Link list")),a.classes.map(gn.createUi("linkClass","Class"))])])},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:i,onChange:function(n,t){var e=t.name;u.onChange(n.getData,{name:e}).each(function(t){n.setData(t)})},onSubmit:t}}(t,e)}).get(function(t){n.windowManager.open(t)})},Ln=function(n,t){return n.dom.getParent(t,"a[href]")},jn=function(n){return Ln(n,n.selection.getStart())},Wn=function(n,t){if(t){var e=on(t);if(/^#/.test(e)){var r=n.$(e);r.length&&n.selection.scrollIntoView(r[0],!0)}else D(t.href)}},Un=function(n){return function(){Mn(n)}},zn=function(n){return function(){Wn(n,jn(n))}},Fn=function(n){n.on("click",function(t){var e=Ln(n,t.target);e&&a.metaKeyPressed(t)&&(t.preventDefault(),Wn(n,e))}),n.on("keydown",function(t){var e=jn(n);e&&13===t.keyCode&&function(n){return!0===n.altKey&&!1===n.shiftKey&&!1===n.ctrlKey&&!1===n.metaKey}(t)&&(t.preventDefault(),Wn(n,e))})},Hn=function(n){return function(t){var e=function(e){return t.setActive(!n.readonly&&!!an(n,e.element))};return n.on("nodechange",e),function(){return n.off("nodechange",e)}}},qn=function(n){return function(t){t.setDisabled(!rn(n.dom.getParents(n.selection.getStart())));var e=function(n){return t.setDisabled(!rn(n.parents))};return n.on("nodechange",e),function(){return n.off("nodechange",e)}}},Vn=function(n){n.addCommand("mceLink",function(){O(n.settings)?n.fire("contexttoolbar-show",{toolbarKey:"quicklink"}):Un(n)()})},Gn=function(n){n.addShortcut("Meta+K","",function(){n.execCommand("mceLink")})},Kn=function(n){n.ui.registry.addToggleButton("link",{icon:"link",tooltip:"Insert/edit link",onAction:Un(n),onSetup:Hn(n)}),n.ui.registry.addButton("unlink",{icon:"unlink",tooltip:"Remove link",onAction:function(){return en(n)},onSetup:qn(n)})},Xn=function(n){n.ui.registry.addMenuItem("openlink",{text:"Open link",icon:"new-tab",onAction:zn(n),onSetup:qn(n)}),n.ui.registry.addMenuItem("link",{icon:"link",text:"Link...",shortcut:"Meta+K",onAction:Un(n)}),n.ui.registry.addMenuItem("unlink",{icon:"unlink",text:"Remove link",onAction:function(){return en(n)},onSetup:qn(n)})},$n=function(n){n.ui.registry.addContextMenu("link",{update:function(t){return rn(n.dom.getParents(t,"a"))?"link unlink openlink":"link"}})},Yn=function(n){n.ui.registry.addContextForm("quicklink",{launch:{type:"contextformtogglebutton",icon:"link",tooltip:"Link",onSetup:Hn(n)},label:"Link",predicate:function(t){return!!an(n,t)&&d(n.settings)},initValue:function(){var t=an(n);return t?on(t):""},commands:[{type:"contextformtogglebutton",icon:"link",tooltip:"Link",primary:!0,onSetup:function(t){var e=n.selection.getNode();return t.setActive(!!an(n,e)),Hn(n)(t)},onAction:function(t){var e=an(n),r=t.getValue();if(e)n.dom.setAttrib(e,"href",r),function(n){n.selection.collapse(!1)}(n),t.hide();else{var o={href:r,attach:function(){}},i=un(n.selection.getContent())?L.some(cn(n.selection,e)).filter(function(n){return n.length>0}).or(L.from(r)):L.none();tn(n,o,{href:r,text:i,title:L.none(),rel:L.none(),target:L.none(),class:L.none()}),t.hide()}}},{type:"contextformtogglebutton",icon:"unlink",tooltip:"Remove link",active:!1,onSetup:function(){return function(){}},onAction:function(t){en(n),t.hide()}}]})};u.add("link",function(n){Kn(n),Xn(n),$n(n),Yn(n),Fn(n),Vn(n),Gn(n)})}(window)},230:function(n,t,e){e(231)},231:function(n,t){!function(n){"use strict";var t,e,r,o,i=tinymce.util.Tools.resolve("tinymce.PluginManager"),u=function(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t]},a=function(n){return function(){return n}},c=function(n){return n},l=a(!1),f=a(!0),s=l,d=f,m=function(){return g},g=(o={fold:function(n,t){return n()},is:s,isSome:s,isNone:d,getOr:r=function(n){return n},getOrThunk:e=function(n){return n()},getOrDie:function(n){throw new Error(n||"error: getOrDie called on none.")},getOrNull:function(){return null},getOrUndefined:function(){},or:r,orThunk:e,map:m,ap:m,each:function(){},bind:m,flatten:m,exists:s,forall:d,filter:m,equals:t=function(n){return n.isNone()},equals_:t,toArray:function(){return[]},toString:a("none()")},Object.freeze&&Object.freeze(o),o),p=function(n){var t=function(){return n},e=function(){return o},r=function(t){return t(n)},o={fold:function(t,e){return e(n)},is:function(t){return n===t},isSome:d,isNone:s,getOr:t,getOrThunk:t,getOrDie:t,getOrNull:t,getOrUndefined:t,or:e,orThunk:e,map:function(t){return p(t(n))},ap:function(t){return t.fold(m,function(t){return p(t(n))})},each:function(t){t(n)},bind:r,flatten:t,exists:r,forall:r,filter:function(t){return t(n)?o:g},equals:function(t){return t.is(n)},equals_:function(t,e){return t.fold(s,function(t){return e(n,t)})},toArray:function(){return[n]},toString:function(){return"some("+n+")"}};return o},h={some:p,none:m,from:function(n){return null==n?g:p(n)}},v=function(n){return function(t){return function(n){if(null===n)return"null";var t=typeof n;return"object"===t&&Array.prototype.isPrototypeOf(n)?"array":"object"===t&&String.prototype.isPrototypeOf(n)?"string":t}(t)===n}},b=v("string"),w=v("object"),y=v("function"),x=v("number"),S=function(n,t){for(var e=0,r=n.length;e<r;e++)t(n[e],e,n)},C=Array.prototype.push,O=function(n){for(var t=[],e=0,r=n.length;e<r;++e){if(!Array.prototype.isPrototypeOf(n[e]))throw new Error("Arr.flatten item "+e+" was not an array, input: "+n);C.apply(t,n[e])}return t},T=(Array.prototype.slice,y(Array.from)&&Array.from,function(){return(T=Object.assign||function(n){for(var t,e=1,r=arguments.length;e<r;e++)for(var o in t=arguments[e])Object.prototype.hasOwnProperty.call(t,o)&&(n[o]=t[o]);return n}).apply(this,arguments)}),R=function(n){var t=h.none(),e=[],r=function(n){o()?u(n):e.push(n)},o=function(){return t.isSome()},i=function(n){S(n,u)},u=function(n){t.each(function(t){setTimeout(function(){n(t)},0)})};return n(function(n){t=h.some(n),i(e),e=[]}),{get:r,map:function(n){return R(function(t){r(function(e){t(n(e))})})},isReady:o}},D={nu:R,pure:function(n){return R(function(t){t(n)})}},A=function(n){var t=function(t){var e;n((e=t,function(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];var r=this;setTimeout(function(){e.apply(r,n)},0)}))},e=function(){return D.nu(t)};return{map:function(n){return A(function(e){t(function(t){var r=n(t);e(r)})})},bind:function(n){return A(function(e){t(function(t){n(t).get(e)})})},anonBind:function(n){return A(function(e){t(function(t){n.get(e)})})},toLazy:e,toCached:function(){var n=null;return A(function(t){null===n&&(n=e()),n.get(t)})},get:t}},E={nu:A,pure:function(n){return A(function(t){t(n)})}},N=function(n){return{is:function(t){return n===t},isValue:f,isError:l,getOr:a(n),getOrThunk:a(n),getOrDie:a(n),or:function(t){return N(n)},orThunk:function(t){return N(n)},fold:function(t,e){return e(n)},map:function(t){return N(t(n))},mapError:function(t){return N(n)},each:function(t){t(n)},bind:function(t){return t(n)},exists:function(t){return t(n)},forall:function(t){return t(n)},toOption:function(){return h.some(n)}}},k=function(n){return{is:l,isValue:l,isError:f,getOr:c,getOrThunk:function(n){return n()},getOrDie:function(){return(t=String(n),function(){throw new Error(t)})();var t},or:function(n){return n},orThunk:function(n){return n()},fold:function(t,e){return t(n)},map:function(t){return k(n)},mapError:function(t){return k(t(n))},each:u,bind:function(t){return k(n)},exists:l,forall:f,toOption:h.none}},I={value:N,error:k},P=function(n){return T({},n,{toCached:function(){return P(n.toCached())},bindFuture:function(t){return P(n.bind(function(n){return n.fold(function(n){return E.pure(I.error(n))},function(n){return t(n)})}))},bindResult:function(t){return P(n.map(function(n){return n.bind(t)}))},mapResult:function(t){return P(n.map(function(n){return n.map(t)}))},mapError:function(t){return P(n.map(function(n){return n.mapError(t)}))},foldResult:function(t,e){return n.map(function(n){return n.fold(t,e)})},withTimeout:function(t,e){return P(E.nu(function(r){var o=!1,i=window.setTimeout(function(){o=!0,r(I.error(e()))},t);n.get(function(n){o||(window.clearTimeout(i),r(n))})}))}})},_=function(n){return P(E.nu(n))},B=_,M=Object.prototype.hasOwnProperty,L=function(n){return function(){for(var t=new Array(arguments.length),e=0;e<t.length;e++)t[e]=arguments[e];if(0===t.length)throw new Error("Can't merge zero objects");for(var r={},o=0;o<t.length;o++){var i=t[o];for(var u in i)M.call(i,u)&&(r[u]=n(r[u],i[u]))}return r}},j=L(function(n,t){return w(n)&&w(t)?j(n,t):t}),W=L(function(n,t){return t}),U="undefined"!=typeof window?window:Function("return this;")(),z=function(n,t){return function(n,t){for(var e=null!=t?t:U,r=0;r<n.length&&null!=e;++r)e=e[n[r]];return e}(n.split("."),t)},F={getOrDie:function(n,t){var e=function(n,t){return z(n,t)}(n,t);if(null==e)throw n+" not available on this browser";return e}},H=function(){return F.getOrDie("URL")},q=function(n){return H().createObjectURL(n)},V=function(n){H().revokeObjectURL(n)},G=function(n){var t=n.imageList.map(function(n){return{name:"images",type:"selectbox",label:"Image list",items:n}}),e=n.classList.map(function(n){return{name:"classes",type:"selectbox",label:"Class",items:n}});return O([[{name:"src",type:"urlinput",filetype:"image",label:"Source"}],t.toArray(),n.hasDescription?[{name:"alt",type:"input",label:"Image description"}]:[],n.hasImageTitle?[{name:"title",type:"input",label:"Image title"}]:[],n.hasDimensions?[{name:"dimensions",type:"sizeinput"}]:[],[{type:"grid",columns:2,items:O([e.toArray(),n.hasImageCaption?[{type:"label",label:"Caption",items:[{type:"checkbox",name:"caption",label:"Show caption"}]}]:[]])}]])},K=function(n){return{title:"General",items:G(n)}},X=G,$=tinymce.util.Tools.resolve("tinymce.util.Promise"),Y=tinymce.util.Tools.resolve("tinymce.util.Tools"),J=tinymce.util.Tools.resolve("tinymce.util.XHR"),Z=function(n){return!1!==n.settings.image_dimensions},Q=function(n){return!0===n.settings.image_advtab},nn=function(n){return n.getParam("image_prepend_url","")},tn=function(n){return n.getParam("image_class_list")},en=function(n){return!1!==n.settings.image_description},rn=function(n){return!0===n.settings.image_title},on=function(n){return!0===n.settings.image_caption},un=function(n){return n.getParam("image_list",!1)},an=function(n){return!!n.getParam("images_upload_url",!1)},cn=function(n){return!!n.getParam("images_upload_handler",!1)},ln=function(n){return n.getParam("images_upload_url")},fn=function(n){return n.getParam("images_upload_handler")},sn=function(n){return n.getParam("images_upload_base_path")},dn=function(n){return n.getParam("images_upload_credentials")},mn=function(n,t){return Math.max(parseInt(n,10),parseInt(t,10))},gn=function(t,e){var r=n.document.createElement("img");function o(n){r.parentNode&&r.parentNode.removeChild(r),e(n)}r.onload=function(){var n={width:mn(r.width,r.clientWidth),height:mn(r.height,r.clientHeight)};o(I.value(n))},r.onerror=function(){o(I.error(void 0))};var i=r.style;i.visibility="hidden",i.position="fixed",i.bottom=i.left="0px",i.width=i.height="auto",n.document.body.appendChild(r),r.src=t},pn=function(n){return n&&(n=n.replace(/px$/,"")),n},hn=function(n){return n.length>0&&/^[0-9]+$/.test(n)&&(n+="px"),n},vn=function(n){if(n.margin){var t=String(n.margin).split(" ");switch(t.length){case 1:n["margin-top"]=n["margin-top"]||t[0],n["margin-right"]=n["margin-right"]||t[0],n["margin-bottom"]=n["margin-bottom"]||t[0],n["margin-left"]=n["margin-left"]||t[0];break;case 2:n["margin-top"]=n["margin-top"]||t[0],n["margin-right"]=n["margin-right"]||t[1],n["margin-bottom"]=n["margin-bottom"]||t[0],n["margin-left"]=n["margin-left"]||t[1];break;case 3:n["margin-top"]=n["margin-top"]||t[0],n["margin-right"]=n["margin-right"]||t[1],n["margin-bottom"]=n["margin-bottom"]||t[2],n["margin-left"]=n["margin-left"]||t[1];break;case 4:n["margin-top"]=n["margin-top"]||t[0],n["margin-right"]=n["margin-right"]||t[1],n["margin-bottom"]=n["margin-bottom"]||t[2],n["margin-left"]=n["margin-left"]||t[3]}delete n.margin}return n},bn=function(n,t){var e=un(n);"string"==typeof e?J.send({url:e,success:function(n){t(JSON.parse(n))}}):"function"==typeof e?e(t):t(e)},wn=function(n,t,e){function r(){e.onload=e.onerror=null,n.selection&&(n.selection.select(e),n.nodeChanged())}e.onload=function(){t.width||t.height||!Z(n)||n.dom.setAttribs(e,{width:e.clientWidth,height:e.clientHeight}),r()},e.onerror=r},yn=function(n){return new $(function(t,e){var r=new(F.getOrDie("FileReader"));r.onload=function(){t(r.result)},r.onerror=function(){e(r.error.message)},r.readAsDataURL(n)})},xn=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils").DOM,Sn=function(n){return n.style.marginLeft&&n.style.marginRight&&n.style.marginLeft===n.style.marginRight?pn(n.style.marginLeft):""},Cn=function(n){return n.style.marginTop&&n.style.marginBottom&&n.style.marginTop===n.style.marginBottom?pn(n.style.marginTop):""},On=function(n){return n.style.borderWidth?pn(n.style.borderWidth):""},Tn=function(n,t){return n.hasAttribute(t)?n.getAttribute(t):""},Rn=function(n,t){return n.style[t]?n.style[t]:""},Dn=function(n){return null!==n.parentNode&&"FIGURE"===n.parentNode.nodeName},An=function(n,t,e){n.setAttribute(t,e)},En=function(n){Dn(n)?function(n){var t=n.parentNode;xn.insertAfter(n,t),xn.remove(t)}(n):function(n){var t=xn.create("figure",{class:"image"});xn.insertAfter(t,n),t.appendChild(n),t.appendChild(xn.create("figcaption",{contentEditable:!0},"Caption")),t.contentEditable="false"}(n)},Nn=function(n,t){var e=n.getAttribute("style"),r=t(null!==e?e:"");r.length>0?(n.setAttribute("style",r),n.setAttribute("data-mce-style",r)):n.removeAttribute("style")},kn=function(n,t){return function(n,e,r){n.style[e]?(n.style[e]=hn(r),Nn(n,t)):An(n,e,r)}},In=function(n,t){return n.style[t]?pn(n.style[t]):Tn(n,t)},Pn=function(n,t){var e=hn(t);n.style.marginLeft=e,n.style.marginRight=e},_n=function(n,t){var e=hn(t);n.style.marginTop=e,n.style.marginBottom=e},Bn=function(n,t){var e=hn(t);n.style.borderWidth=e},Mn=function(n,t){n.style.borderStyle=t},Ln=function(n){return"FIGURE"===n.nodeName},jn=function(t,e){var r=n.document.createElement("img");return An(r,"style",e.style),(Sn(r)||""!==e.hspace)&&Pn(r,e.hspace),(Cn(r)||""!==e.vspace)&&_n(r,e.vspace),(On(r)||""!==e.border)&&Bn(r,e.border),(function(n){return Rn(n,"borderStyle")}(r)||""!==e.borderStyle)&&Mn(r,e.borderStyle),t(r.getAttribute("style"))},Wn=function(n,t){return{src:Tn(t,"src"),alt:Tn(t,"alt"),title:Tn(t,"title"),width:In(t,"width"),height:In(t,"height"),class:Tn(t,"class"),style:n(Tn(t,"style")),caption:Dn(t),hspace:Sn(t),vspace:Cn(t),border:On(t),borderStyle:Rn(t,"borderStyle")}},Un=function(n,t,e,r,o){e[r]!==t[r]&&o(n,r,e[r])},zn=function(n,t){return function(e,r,o){n(e,o),Nn(e,t)}},Fn=function(n,t,e){var r=Wn(n,e);Un(e,r,t,"caption",function(n,t,e){return En(n)}),Un(e,r,t,"src",An),Un(e,r,t,"alt",An),Un(e,r,t,"title",An),Un(e,r,t,"width",kn(0,n)),Un(e,r,t,"height",kn(0,n)),Un(e,r,t,"class",An),Un(e,r,t,"style",zn(function(n,t){return An(n,"style",t)},n)),Un(e,r,t,"hspace",zn(Pn,n)),Un(e,r,t,"vspace",zn(_n,n)),Un(e,r,t,"border",zn(Bn,n)),Un(e,r,t,"borderStyle",zn(Mn,n))},Hn=function(n,t){var e=n.dom.styles.parse(t),r=vn(e),o=n.dom.styles.parse(n.dom.styles.serialize(r));return n.dom.styles.serialize(o)},qn=function(n){var t=n.selection.getNode(),e=n.dom.getParent(t,"figure.image");return e?n.dom.select("img",e)[0]:t&&("IMG"!==t.nodeName||t.getAttribute("data-mce-object")||t.getAttribute("data-mce-placeholder"))?null:t},Vn=function(n,t){var e=n.dom,r=e.getParent(t.parentNode,function(t){return n.schema.getTextBlockElements()[t.nodeName]},n.getBody());return r?e.split(r,t):t},Gn=function(t,e){var r=function(t,e){var r=n.document.createElement("img");if(Fn(t,W(e,{caption:!1}),r),An(r,"alt",e.alt),e.caption){var o=xn.create("figure",{class:"image"});return o.appendChild(r),o.appendChild(xn.create("figcaption",{contentEditable:!0},"Caption")),o.contentEditable="false",o}return r}(function(n){return Hn(t,n)},e);t.dom.setAttrib(r,"data-mce-id","__mcenew"),t.focus(),t.selection.setContent(r.outerHTML);var o=t.dom.select('*[data-mce-id="__mcenew"]')[0];if(t.dom.setAttrib(o,"data-mce-id",null),Ln(o)){var i=Vn(t,o);t.selection.select(i)}else t.selection.select(o)},Kn=function(n,t){var e=qn(n);e?t.src?function(n,t){var e=qn(n);if(Fn(function(t){return Hn(n,t)},t,e),function(n,t){n.dom.setAttrib(t,"src",t.getAttribute("src"))}(n,e),Ln(e.parentNode)){var r=e.parentNode;Vn(n,r),n.selection.select(e.parentNode)}else n.selection.select(e),wn(n,t,e)}(n,t):function(n,t){if(t){var e=n.dom.is(t.parentNode,"figure.image")?t.parentNode:t;n.dom.remove(e),n.focus(),n.nodeChanged(),n.dom.isEmpty(n.getBody())&&(n.setContent(""),n.selection.setCursorLocation())}}(n,e):t.src&&Gn(n,t)},Xn=function(n){return b(n.value)?n.value:""},$n=function(n,t){var e=[];return Y.each(n,function(n){var r=b(n.text)?n.text:b(n.title)?n.title:"";if(void 0!==n.menu){var o=$n(n.menu,t);e.push({text:r,items:o})}else{var i=t(n);e.push({text:r,value:i})}}),e},Yn=function(n){return void 0===n&&(n=Xn),function(t){return t?h.from(t).map(function(t){return $n(t,n)}):h.none()}},Jn=function(n,t){return function(n,t){for(var e=0;e<n.length;e++){var r=t(n[e],e);if(r.isSome())return r}return h.none()}(n,function(n){return function(n){return Object.prototype.hasOwnProperty.call(n,"items")}(n)?Jn(n.items,t):n.value===t?h.some(n):h.none()})},Zn=Yn,Qn=function(n){return Yn(Xn)(n)},nt=function(n,t){return n.bind(function(n){return Jn(n,t)})},tt=function(){},et=function(n,t){return n?n.replace(/\/$/,"")+"/"+t.replace(/^\//,""):t};function rt(t){var e=function(e,r,o,i){var u,a;(u=new(F.getOrDie("XMLHttpRequest"))).open("POST",t.url),u.withCredentials=t.credentials,u.upload.onprogress=function(n){i(n.loaded/n.total*100)},u.onerror=function(){o("Image upload failed due to a XHR Transport error. Code: "+u.status)},u.onload=function(){var n;u.status<200||u.status>=300?o("HTTP Error: "+u.status):(n=JSON.parse(u.responseText))&&"string"==typeof n.location?r(et(t.basePath,n.location)):o("Invalid JSON: "+u.responseText)},(a=new n.FormData).append("file",e.blob(),e.filename()),u.send(a)};return t=Y.extend({credentials:!1,handler:e},t),{upload:function(n){return t.url||t.handler!==e?function(n,t){return new $(function(e,r){try{t(n,e,r,tt)}catch(o){r(o.message)}})}(n,t.handler):$.reject("Upload url missing from the settings.")}}}var ot,it,ut,at=function(n){return{title:"Advanced",items:[{type:"input",label:"Style",name:"style"},{type:"grid",columns:2,items:[{type:"input",label:"Vertical space",name:"vspace"},{type:"input",label:"Horizontal space",name:"hspace"},{type:"input",label:"Border width",name:"border"},{type:"selectbox",name:"borderstyle",label:"Border style",items:[{text:"Select...",value:""},{text:"Solid",value:"solid"},{text:"Dotted",value:"dotted"},{text:"Dashed",value:"dashed"},{text:"Double",value:"double"},{text:"Groove",value:"groove"},{text:"Ridge",value:"ridge"},{text:"Inset",value:"inset"},{text:"Outset",value:"outset"},{text:"None",value:"none"},{text:"Hidden",value:"hidden"}]}]}]}},ct=function(n){var t=Zn(function(t){return n.convertURL(t.value||t.url,"src")}),e=E.nu(function(e){bn(n,function(n){e(t(n).map(function(n){return O([[{text:"None",value:""}],n])}))})}),r=Qn(tn(n)),o=Q(n),i=an(n),u=cn(n),a=function(n){var t=qn(n);return t?Wn(function(t){return Hn(n,t)},t):{src:"",alt:"",title:"",width:"",height:"",class:"",style:"",caption:!1,hspace:"",vspace:"",border:"",borderStyle:""}}(n),c=en(n),l=rn(n),f=Z(n),s=on(n),d=ln(n),m=sn(n),g=dn(n),p=fn(n),v=h.some(nn(n)).filter(function(n){return b(n)&&n.length>0});return e.map(function(n){return{image:a,imageList:n,classList:r,hasAdvTab:o,hasUploadUrl:i,hasUploadHandler:u,hasDescription:c,hasImageTitle:l,hasDimensions:f,hasImageCaption:s,url:d,basePath:m,credentials:g,handler:p,prependURL:v}})},lt=function(n){return{title:"Upload",items:[{type:"dropzone",name:"fileinput"}]}},ft=function(n){return{src:{value:n.src,meta:{}},images:n.src,alt:n.alt,title:n.title,dimensions:{width:n.width,height:n.height},classes:n.class,caption:n.caption,style:n.style,vspace:n.vspace,border:n.border,hspace:n.hspace,borderstyle:n.borderStyle,fileinput:[]}},st=function(n){return{src:n.src.value,alt:n.alt,title:n.title,width:n.dimensions.width,height:n.dimensions.height,class:n.classes,style:n.style,caption:n.caption,hspace:n.hspace,vspace:n.vspace,border:n.border,borderStyle:n.borderstyle}},dt=function(n,t){var e=t.getData();(function(n,t){return/^(?:[a-zA-Z]+:)?\/\//.test(t)?h.none():n.prependURL.bind(function(n){return t.substring(0,n.length)!==n?h.some(n+t):h.none()})})(n,e.src.value).each(function(n){t.setData({src:{value:n,meta:e.src.meta}})})},mt=function(n,t){(function(n,t){var e=t.src.meta;if(void 0!==e){var r=j({},t);return n.hasDescription&&b(e.alt)&&(r.alt=e.alt),n.hasImageTitle&&b(e.title)&&(r.title=e.title),n.hasDimensions&&(b(e.width)&&(r.dimensions.width=e.width),b(e.height)&&(r.dimensions.height=e.height)),b(e.class)&&nt(n.classList,e.class).each(function(n){r.classes=n.value}),n.hasAdvTab&&(b(e.vspace)&&(r.vspace=e.vspace),b(e.border)&&(r.border=e.border),b(e.hspace)&&(r.hspace=e.hspace),b(e.borderstyle)&&(r.borderstyle=e.borderstyle)),h.some(r)}return h.none()})(n,t.getData()).each(function(n){return t.setData(n)})},gt=function(n,t,e,r){dt(t,r),mt(t,r),function(n,t,e,r){var o=r.getData(),i=o.src.value,u=o.src.meta||{};u.width||u.height||!t.hasDimensions||n.imageSize(i).get(function(n){n.each(function(n){e.open&&r.setData({dimensions:n})})})}(n,t,e,r),function(n,t,e){var r=e.getData(),o=nt(n.imageList,r.src.value);t.prevImage=o,e.setData({images:o.map(function(n){return n.value}).getOr("")})}(t,e,r)},pt=function(n,t,e){var r=vn(n(e.style)),o=j({},e);return o.vspace=function(n){return n["margin-top"]&&n["margin-bottom"]&&n["margin-top"]===n["margin-bottom"]?pn(String(n["margin-top"])):""}(r),o.hspace=function(n){return n["margin-right"]&&n["margin-left"]&&n["margin-right"]===n["margin-left"]?pn(String(n["margin-right"])):""}(r),o.border=function(n){return n["border-width"]?pn(String(n["border-width"])):""}(r),o.borderstyle=function(n){return n["border-style"]?String(n["border-style"]):""}(r),o.style=function(n,t,e){return t(n(t(e)))}(n,t,r),o},ht=function(n,t,e,r){var o,i=r.getData();r.block("Uploading image"),(o=i.fileinput,0===o.length?h.none():h.some(o[0])).fold(function(){r.unblock()},function(o){var i=q(o),u=rt({url:t.url,basePath:t.basePath,credentials:t.credentials,handler:t.handler}),a=function(){r.unblock(),V(i)};yn(o).then(function(c){var l=n.createBlobCache(o,i,c);u.upload(l).then(function(o){r.setData({src:{value:o,meta:{}}}),r.showTab("General"),gt(n,t,e,r),a()}).catch(function(t){a(),n.alertErr(r,t)})})})},vt=function(n,t,e){return function(r,o){"src"===o.name?gt(n,t,e,r):"images"===o.name?function(n,t,e,r){var o=r.getData(),i=nt(t.imageList,o.images);i.each(function(n){""===o.alt||e.prevImage.map(function(n){return n.text===o.alt}).getOr(!1)?""===n.value?r.setData({src:n,alt:e.prevAlt}):r.setData({src:n,alt:n.text}):r.setData({src:n})}),e.prevImage=i,gt(n,t,e,r)}(n,t,e,r):"alt"===o.name?e.prevAlt=r.getData().alt:"style"===o.name?function(n,t){var e=t.getData(),r=pt(n.parseStyle,n.serializeStyle,e);t.setData(r)}(n,r):"vspace"===o.name||"hspace"===o.name||"border"===o.name||"borderstyle"===o.name?function(n,t,e){var r=j(ft(t.image),e.getData()),o=jn(n.normalizeCss,st(r));e.setData({style:o})}(n,t,r):"fileinput"===o.name&&ht(n,t,e,r)}},bt=function(n){return function(){n.open=!1}},wt=function(n){return n.hasAdvTab||n.hasUploadUrl||n.hasUploadHandler?{type:"tabpanel",tabs:O([[K(n)],n.hasAdvTab?[at(n)]:[],n.hasUploadUrl||n.hasUploadHandler?[lt(n)]:[]])}:{type:"panel",items:X(n)}},yt=function(n){return function(t){var e=function(n){return{prevImage:nt(n.imageList,n.image.src),prevAlt:n.image.alt,open:!0}}(t);return{title:"Insert/Edit Image",size:"normal",body:wt(t),buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:ft(t.image),onSubmit:n.onSubmit(t),onChange:vt(n,t,e),onClose:bt(e)}}},xt=function(n){return function(t){return function(e){var r=j(ft(t.image),e.getData());n.undoManager.transact(function(){Kn(n,st(r))}),n.editorUpload.uploadImagesAuto(),e.close()}}},St=function(n){return function(t){return B(function(e){gn(n.documentBaseURI.toAbsolute(t),function(n){var t=n.bind(function(n){return(b(n.width)||x(n.width))&&(b(n.height)||x(n.height))?I.value({width:String(n.width),height:String(n.height)}):I.error(void 0)});e(t)})})}},Ct=function(n){return function(t,e,r){return n.editorUpload.blobCache.create({blob:t,blobUri:e,name:t.name?t.name.replace(/\.[^\.]+$/,""):null,base64:r.split(",")[1]})}},Ot=function(n){return function(t,e){n.windowManager.alert(e,t.close)}},Tt=function(n){return function(t){return Hn(n,t)}},Rt=function(n){return function(t){return n.dom.parseStyle(t)}},Dt=function(n){return function(t,e){return n.dom.serializeStyle(t,e)}},At=function(n){var t={onSubmit:xt(n),imageSize:St(n),createBlobCache:Ct(n),alertErr:Ot(n),normalizeCss:Tt(n),parseStyle:Rt(n),serializeStyle:Dt(n)};return{open:function(){return ct(n).map(yt(t)).get(function(t){n.windowManager.open(t)})}}},Et=function(n){n.addCommand("mceImage",At(n).open)},Nt=function(n){var t=n.attr("class");return t&&/\bimage\b/.test(t)},kt=function(n){return function(t){for(var e,r=t.length,o=function(t){t.attr("contenteditable",n?"true":null)};r--;)e=t[r],Nt(e)&&(e.attr("contenteditable",n?"false":null),Y.each(e.getAll("figcaption"),o))}},It=function(n){n.on("preInit",function(){n.parser.addNodeFilter("figure",kt(!0)),n.serializer.addNodeFilter("figure",kt(!1))})},Pt=function(n){if(null==n)throw new Error("Node cannot be null or undefined");return{dom:a(n)}},_t={fromHtml:function(t,e){var r=(e||n.document).createElement("div");if(r.innerHTML=t,!r.hasChildNodes()||r.childNodes.length>1)throw n.console.error("HTML does not have a single root node",t),new Error("HTML must have a single root node");return Pt(r.childNodes[0])},fromTag:function(t,e){var r=(e||n.document).createElement(t);return Pt(r)},fromText:function(t,e){var r=(e||n.document).createTextNode(t);return Pt(r)},fromDom:Pt,fromPoint:function(n,t,e){var r=n.dom();return h.from(r.elementFromPoint(t,e)).map(Pt)}},Bt=(n.Node.ATTRIBUTE_NODE,n.Node.CDATA_SECTION_NODE,n.Node.COMMENT_NODE,n.Node.DOCUMENT_NODE,n.Node.DOCUMENT_TYPE_NODE,n.Node.DOCUMENT_FRAGMENT_NODE,n.Node.ELEMENT_NODE,n.Node.TEXT_NODE,n.Node.PROCESSING_INSTRUCTION_NODE,n.Node.ENTITY_REFERENCE_NODE,n.Node.ENTITY_NODE,n.Node.NOTATION_NODE,function(){return Mt(0,0)}),Mt=function(n,t){return{major:n,minor:t}},Lt={nu:Mt,detect:function(n,t){var e=String(t).toLowerCase();return 0===n.length?Bt():function(n,t){var e=function(n,t){for(var e=0;e<n.length;e++){var r=n[e];if(r.test(t))return r}}(n,t);if(!e)return{major:0,minor:0};var r=function(n){return Number(t.replace(e,"$"+n))};return Mt(r(1),r(2))}(n,e)},unknown:Bt},jt=function(n,t){return function(){return t===n}},Wt=function(n){var t=n.current;return{current:t,version:n.version,isEdge:jt("Edge",t),isChrome:jt("Chrome",t),isIE:jt("IE",t),isOpera:jt("Opera",t),isFirefox:jt("Firefox",t),isSafari:jt("Safari",t)}},Ut={unknown:function(){return Wt({current:void 0,version:Lt.unknown()})},nu:Wt,edge:a("Edge"),chrome:a("Chrome"),ie:a("IE"),opera:a("Opera"),firefox:a("Firefox"),safari:a("Safari")},zt=function(n,t){return function(){return t===n}},Ft=function(n){var t=n.current;return{current:t,version:n.version,isWindows:zt("Windows",t),isiOS:zt("iOS",t),isAndroid:zt("Android",t),isOSX:zt("OSX",t),isLinux:zt("Linux",t),isSolaris:zt("Solaris",t),isFreeBSD:zt("FreeBSD",t)}},Ht={unknown:function(){return Ft({current:void 0,version:Lt.unknown()})},nu:Ft,windows:a("Windows"),ios:a("iOS"),android:a("Android"),linux:a("Linux"),osx:a("OSX"),solaris:a("Solaris"),freebsd:a("FreeBSD")},qt=function(n,t){var e=String(t).toLowerCase();return function(n,t){for(var e=0,r=n.length;e<r;e++){var o=n[e];if(t(o,e,n))return h.some(o)}return h.none()}(n,function(n){return n.search(e)})},Vt=function(n,t){return qt(n,t).map(function(n){var e=Lt.detect(n.versionRegexes,t);return{current:n.name,version:e}})},Gt=function(n,t){return qt(n,t).map(function(n){var e=Lt.detect(n.versionRegexes,t);return{current:n.name,version:e}})},Kt=function(n,t){return-1!==n.indexOf(t)},Xt=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,$t=function(n){return function(t){return Kt(t,n)}},Yt=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:function(n){return Kt(n,"edge/")&&Kt(n,"chrome")&&Kt(n,"safari")&&Kt(n,"applewebkit")}},{name:"Chrome",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,Xt],search:function(n){return Kt(n,"chrome")&&!Kt(n,"chromeframe")}},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:function(n){return Kt(n,"msie")||Kt(n,"trident")}},{name:"Opera",versionRegexes:[Xt,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:$t("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:$t("firefox")},{name:"Safari",versionRegexes:[Xt,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:function(n){return(Kt(n,"safari")||Kt(n,"mobile/"))&&Kt(n,"applewebkit")}}],Jt=[{name:"Windows",search:$t("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:function(n){return Kt(n,"iphone")||Kt(n,"ipad")},versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:$t("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"OSX",search:$t("os x"),versionRegexes:[/.*?os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:$t("linux"),versionRegexes:[]},{name:"Solaris",search:$t("sunos"),versionRegexes:[]},{name:"FreeBSD",search:$t("freebsd"),versionRegexes:[]}],Zt={browsers:a(Yt),oses:a(Jt)},Qt=function(n){var t=Zt.browsers(),e=Zt.oses(),r=Vt(t,n).fold(Ut.unknown,Ut.nu),o=Gt(e,n).fold(Ht.unknown,Ht.nu),i=function(n,t,e){var r=n.isiOS()&&!0===/ipad/i.test(e),o=n.isiOS()&&!r,i=n.isAndroid()&&3===n.version.major,u=n.isAndroid()&&4===n.version.major,c=r||i||u&&!0===/mobile/i.test(e),l=n.isiOS()||n.isAndroid(),f=l&&!c,s=t.isSafari()&&n.isiOS()&&!1===/safari/i.test(e);return{isiPad:a(r),isiPhone:a(o),isTablet:a(c),isPhone:a(f),isTouch:a(l),isAndroid:n.isAndroid,isiOS:n.isiOS,isWebView:a(s)}}(o,r,n);return{browser:r,os:o,deviceType:i}},ne=((ot=function(){var t=n.navigator.userAgent;return Qt(t)},ut=!1,function(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];return ut||(ut=!0,it=ot.apply(null,n)),it})().browser.isIE(),function(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t]}("element","offset"),function(t){t.ui.registry.addToggleButton("image",{icon:"image",tooltip:"Insert/edit image",onAction:At(t).open,onSetup:function(n){return t.selection.selectorChangedWithUnbind("img:not([data-mce-object],[data-mce-placeholder]),figure.image",n.setActive).unbind}}),t.ui.registry.addMenuItem("image",{icon:"image",text:"Image...",onAction:At(t).open}),t.ui.registry.addContextMenu("image",{update:function(e){return Ln(e)||"IMG"===e.nodeName?[(r=e,{text:"Image",icon:"image",onAction:function(){var e=((ot=function(){var t=n.navigator.userAgent;return Qt(t)},ut=!1,function(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];return ut||(ut=!0,it=ot.apply(null,n)),it})().browser.isIE(),function(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t]}("element","offset"),function(n){return(t=n,e=t.dom(),h.from(e.parentNode).map(_t.fromDom)).filter(function(n){return"figure"===n.dom().nodeName.toLowerCase()}).getOr(n);var t,e})(_t.fromDom(r));t.selection.select(e.dom()),At(t).open()}})]:[];var r}})});i.add("image",function(n){It(n),ne(n),Et(n)})}(window)},232:function(n,t,e){e(233)},233:function(n,t){!function(){"use strict";var n=tinymce.util.Tools.resolve("tinymce.PluginManager"),t=function(n,t){n.focus(),n.undoManager.transact(function(){n.setContent(t)}),n.selection.setCursorLocation(),n.nodeChanged()},e=function(n){return n.getContent({source_view:!0})},r=function(n){var r=e(n);n.windowManager.open({title:"Source Code",size:"large",body:{type:"panel",items:[{type:"textarea",name:"code"}]},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:{code:r},onSubmit:function(e){t(n,e.getData().code),e.close()}})},o=function(n){n.addCommand("mceCodeEditor",function(){r(n)})},i=function(n){n.ui.registry.addButton("code",{icon:"sourcecode",tooltip:"Source code",onAction:function(){return r(n)}}),n.ui.registry.addMenuItem("code",{icon:"sourcecode",text:"Source code",onAction:function(){return r(n)}})};n.add("code",function(n){return o(n),i(n),{}})}()},234:function(n,t,e){n.exports=e(235)()},235:function(n,t,e){"use strict";var r=e(236);function o(){}n.exports=function(){function n(n,t,e,o,i,u){if(u!==r){var a=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw a.name="Invariant Violation",a}}function t(){return n}n.isRequired=n;var e={array:n,bool:n,func:n,number:n,object:n,string:n,symbol:n,any:n,arrayOf:t,element:n,instanceOf:t,node:n,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t};return e.checkPropTypes=o,e.PropTypes=e,e}},236:function(n,t,e){"use strict";n.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},237:function(n,t,e){"use strict";(function(n){e.d(t,"a",function(){return o});var r=function(){return"undefined"!=typeof window?window:n},o=function(){var n=r();return n&&n.tinymce?n.tinymce:null}}).call(this,e(43))},239:function(n,t,e){"use strict";e.r(t);var r,o=e(0),i=e(234),u=function(){return(u=Object.assign||function(n){for(var t,e=1,r=arguments.length;e<r;e++)for(var o in t=arguments[e])Object.prototype.hasOwnProperty.call(t,o)&&(n[o]=t[o]);return n}).apply(this,arguments)},a={onActivate:i.func,onAddUndo:i.func,onBeforeAddUndo:i.func,onBeforeExecCommand:i.func,onBeforeGetContent:i.func,onBeforeRenderUI:i.func,onBeforeSetContent:i.func,onBeforePaste:i.func,onBlur:i.func,onChange:i.func,onClearUndos:i.func,onClick:i.func,onContextMenu:i.func,onCopy:i.func,onCut:i.func,onDblclick:i.func,onDeactivate:i.func,onDirty:i.func,onDrag:i.func,onDragDrop:i.func,onDragEnd:i.func,onDragGesture:i.func,onDragOver:i.func,onDrop:i.func,onExecCommand:i.func,onFocus:i.func,onFocusIn:i.func,onFocusOut:i.func,onGetContent:i.func,onHide:i.func,onInit:i.func,onKeyDown:i.func,onKeyPress:i.func,onKeyUp:i.func,onLoadContent:i.func,onMouseDown:i.func,onMouseEnter:i.func,onMouseLeave:i.func,onMouseMove:i.func,onMouseOut:i.func,onMouseOver:i.func,onMouseUp:i.func,onNodeChange:i.func,onObjectResizeStart:i.func,onObjectResized:i.func,onObjectSelected:i.func,onPaste:i.func,onPostProcess:i.func,onPostRender:i.func,onPreProcess:i.func,onProgressState:i.func,onRedo:i.func,onRemove:i.func,onReset:i.func,onSaveContent:i.func,onSelectionChange:i.func,onSetAttrib:i.func,onSetContent:i.func,onShow:i.func,onSubmit:i.func,onUndo:i.func,onVisualAid:i.func},c=u({apiKey:i.string,id:i.string,inline:i.bool,init:i.object,initialValue:i.string,onEditorChange:i.func,value:i.string,tagName:i.string,cloudChannel:i.string,plugins:i.oneOfType([i.string,i.array]),toolbar:i.oneOfType([i.string,i.array]),disabled:i.bool,textareaName:i.string},a),l=function(n){return"function"==typeof n},f=0,s=function(n){var t=(new Date).getTime();return n+"_"+Math.floor(1e9*Math.random())+ ++f+String(t)},d=function(n){return null!==n&&"textarea"===n.tagName.toLowerCase()},m=function(n){return void 0===n||""===n?[]:Array.isArray(n)?n:n.split(" ")},g=function(n,t){return m(n).concat(m(t))},p=e(237),h=(r=function(n,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var e in t)t.hasOwnProperty(e)&&(n[e]=t[e])})(n,t)},function(n,t){function e(){this.constructor=n}r(n,t),n.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),v=function(){return(v=Object.assign||function(n){for(var t,e=1,r=arguments.length;e<r;e++)for(var o in t=arguments[e])Object.prototype.hasOwnProperty.call(t,o)&&(n[o]=t[o]);return n}).apply(this,arguments)},b={listeners:[],scriptId:s("tiny-script"),scriptLoaded:!1},w=function(n){function t(){var t=null!==n&&n.apply(this,arguments)||this;return t.element=null,t.initialise=function(){var n=v({},t.props.init,{target:t.element,readonly:t.props.disabled,inline:t.inline,plugins:g(t.props.init&&t.props.init.plugins,t.props.plugins),toolbar:t.props.toolbar||t.props.init&&t.props.init.toolbar,setup:function(n){t.editor=n,n.on("init",function(e){t.initEditor(e,n)}),t.props.init&&"function"==typeof t.props.init.setup&&t.props.init.setup(n)}});d(t.element)&&(t.element.style.visibility=""),Object(p.a)().init(n)},t}return h(t,n),t.prototype.componentWillMount=function(){this.id=this.id||this.props.id||s("tiny-react"),this.inline=this.props.inline?this.props.inline:this.props.init&&this.props.init.inline},t.prototype.componentDidMount=function(){if(null!==Object(p.a)())this.initialise();else if(this.element&&this.element.ownerDocument){var n=this.element.ownerDocument,t=this.props.cloudChannel,e=this.props.apiKey?this.props.apiKey:"";!function(n,t,e,r){n.scriptLoaded?r():(n.listeners.push(r),t.getElementById(n.scriptId)||function(n,t,e,r){var o=t.createElement("script");o.type="application/javascript",o.id=n,o.addEventListener("load",r),o.src=e,t.head&&t.head.appendChild(o)}(n.scriptId,t,e,function(){n.listeners.forEach(function(n){return n()}),n.scriptLoaded=!0}))}(b,n,"https://cloud.tinymce.com/"+t+"/tinymce.min.js?apiKey="+e,this.initialise)}},t.prototype.componentWillUnmount=function(){null!==Object(p.a)()&&Object(p.a)().remove(this.editor)},t.prototype.componentWillReceiveProps=function(n){this.editor&&this.editor.initialized&&(this.currentContent=this.currentContent||this.editor.getContent(),"string"==typeof n.value&&n.value!==this.props.value&&n.value!==this.currentContent&&this.editor.setContent(n.value),"boolean"==typeof n.disabled&&n.disabled!==this.props.disabled&&this.editor.setMode(n.disabled?"readonly":"design"))},t.prototype.render=function(){return this.inline?this.renderInline():this.renderIframe()},t.prototype.initEditor=function(n,t){var e=this,r="string"==typeof this.props.value?this.props.value:"string"==typeof this.props.initialValue?this.props.initialValue:"";t.setContent(r),l(this.props.onEditorChange)&&t.on("change keyup setcontent",function(n){e.currentContent=t.getContent(),l(e.props.onEditorChange)&&e.props.onEditorChange(e.currentContent)}),function(n,t,e){var r;Object.keys(n).filter((r=Object.keys(a),function(n){return-1!==r.indexOf(n)})).forEach(function(r){var o=n[r];l(o)&&("onInit"===r?o(e,t):t.on(r.substring(2),function(n){return o(n,t)}))})}(this.props,t,n)},t.prototype.renderInline=function(){var n=this,t=this.props.tagName,e=void 0===t?"div":t;return o.createElement(e,{ref:function(t){return n.element=t},id:this.id})},t.prototype.renderIframe=function(){var n=this;return o.createElement("textarea",{ref:function(t){return n.element=t},style:{visibility:"hidden"},id:this.id,name:this.props.textareaName})},t.propTypes=c,t.defaultProps={cloudChannel:"5"},t}(o.Component);e.d(t,"Editor",function(){return w})}}]);
//# sourceMappingURL=37-614625e1c41d342c38e4.js.map