{"version":3,"sources":["webpack:///./node_modules/@tinymce/tinymce-react/lib/es2015/main/ts/TinyMCE.js","webpack:///./node_modules/tinymce/plugins/code/plugin.js","webpack:///./node_modules/tinymce/plugins/table/index.js","webpack:///./node_modules/tinymce/plugins/link/index.js","webpack:///./node_modules/tinymce/plugins/image/index.js","webpack:///./node_modules/@tinymce/tinymce-react/lib/es2015/main/ts/components/Editor.js","webpack:///./node_modules/@tinymce/tinymce-react/lib/es2015/main/ts/components/EditorPropTypes.js","webpack:///./node_modules/@tinymce/tinymce-react/lib/es2015/main/ts/Utils.js","webpack:///./node_modules/@tinymce/tinymce-react/lib/es2015/main/ts/ScriptLoader.js","webpack:///./node_modules/@tinymce/tinymce-react/lib/es2015/main/ts/index.js","webpack:///./node_modules/tinymce/plugins/code/index.js","webpack:///./src/pages/editors/tinymce.js","webpack:///./node_modules/tinymce/plugins/table/plugin.js","webpack:///./node_modules/tinymce/plugins/link/plugin.js","webpack:///./node_modules/tinymce/plugins/image/plugin.js"],"names":["getGlobal","window","global","getTinymce","tinymce","util","Tools","resolve","Content","editor","html","focus","undoManager","transact","setContent","selection","setCursorLocation","nodeChanged","getContent","source_view","Dialog","editorContent","windowManager","open","title","size","body","type","items","name","buttons","text","primary","initialData","code","onSubmit","api","getData","close","Commands","register","addCommand","Buttons","ui","registry","addButton","icon","tooltip","onAction","addMenuItem","add","_extendStatics","__assign","Object","assign","t","s","i","n","arguments","length","p","prototype","hasOwnProperty","call","apply","this","eventPropTypes","onActivate","onAddUndo","onBeforeAddUndo","onBeforeExecCommand","onBeforeGetContent","onBeforeRenderUI","onBeforeSetContent","onBeforePaste","onBlur","onChange","onClearUndos","onClick","onContextMenu","onCopy","onCut","onDblclick","onDeactivate","onDirty","onDrag","onDragDrop","onDragEnd","onDragGesture","onDragOver","onDrop","onExecCommand","onFocus","onFocusIn","onFocusOut","onGetContent","onHide","onInit","onKeyDown","onKeyPress","onKeyUp","onLoadContent","onMouseDown","onMouseEnter","onMouseLeave","onMouseMove","onMouseOut","onMouseOver","onMouseUp","onNodeChange","onObjectResizeStart","onObjectResized","onObjectSelected","onPaste","onPostProcess","onPostRender","onPreProcess","onProgressState","onRedo","onRemove","onReset","onSaveContent","onSelectionChange","onSetAttrib","onSetContent","onShow","onUndo","onVisualAid","EditorPropTypes","apiKey","id","inline","init","initialValue","onEditorChange","value","tagName","cloudChannel","plugins","toolbar","disabled","textareaName","isFunction","x","bindHandlers","props","boundHandlers","keys","filter","map","handler","eventName","substring","findEventHandlers","forEach","found","oldHandler","off","newHandler","e","on","unique","uuid","prefix","time","Date","getTime","Math","floor","random","String","isTextarea","element","toLowerCase","normalizePluginArray","Array","isArray","split","mergePlugins","initPlugins","inputPlugins","concat","__extends","d","b","setPrototypeOf","__proto__","__","constructor","create","scriptState","listeners","scriptId","scriptLoaded","_super","Editor","_this","initialise","finalInit","target","elementRef","current","readonly","setup","initEditor","style","visibility","componentDidUpdate","prevProps","initialized","currentContent","setMode","componentDidMount","ownerDocument","doc","channel","state","url","callback","push","getElementById","scriptTag","createElement","referrerPolicy","addEventListener","src","head","appendChild","injectScriptTag","fn","componentWillUnmount","remove","render","renderInline","renderIframe","initEvent","newContent","_a","ref","propTypes","defaultProps","TinyMCE","useState","setEditor","useEffect","require","keywords","domGlobals","Cell","initial","get","set","v","clone","noop","compose","fa","fb","args","_i","constant","identity","curry","initialArgs","restArgs","all","not","f","never","always","none","NONE","eq","o","isNone","thunk","me","fold","is","isSome","getOr","getOrThunk","getOrDie","msg","Error","getOrNull","getOrUndefined","undefined","or","orThunk","each","bind","exists","forall","equals","equals_","toArray","toString","freeze","some","a","constant_a","self","elementEq","Option","from","isType","isPrototypeOf","typeOf","isString","isBoolean","isNumber","nativeSlice","slice","nativeIndexOf","indexOf","nativePush","contains","xs","ts","pred","len","r","foldr","acc","eachr","foldl","find","findIndex","flatten","output","reverse","each$1","obj","k","map$1","tupleMap","tuple","key","has","Immutable","fields","values","struct","sort","arr","reqMessage","required","join","unsuppMessage","unsupported","validateStrArr","label","array","checkDupes","everything","sorted","MixedBag","optional","keys$1","req","opt","COMMENT","Node","ATTRIBUTE_NODE","CDATA_SECTION_NODE","COMMENT_NODE","DOCUMENT","DOCUMENT_NODE","ELEMENT","DOCUMENT_TYPE_NODE","DOCUMENT_FRAGMENT_NODE","ELEMENT_NODE","TEXT","TEXT_NODE","PROCESSING_INSTRUCTION_NODE","ENTITY_REFERENCE_NODE","ENTITY_NODE","NOTATION_NODE","Function","dom","nodeName","nodeType","isType$1","isComment","isElement","isText","rawSet","console","error","setAttribute","setAll","attrs","get$1","getAttribute","has$1","hasAttribute","removeAttribute","attributes","attr","checkRange","str","substr","start","contains$1","startsWith","isSupported","getPropertyValue","cached","called","fromDom","node","Element","fromHtml","scope","div","document","innerHTML","hasChildNodes","childNodes","fromTag","tag","fromText","createTextNode","fromPoint","docElm","y","elementFromPoint","inBody","parentNode","getBody","internalSet","property","setProperty","set$1","setAll$1","css","get$2","getComputedStyle","getUnsafeProperty","getRaw","raw","remove$1","removeProperty","internalRemove","replace","compareDocumentPosition","match","DOCUMENT_POSITION_CONTAINED_BY","_assign","unknown","nu","major","minor","Version","detect","versionRegexes","agent","cleanedAgent","regexes","test","firstMatch","group","Number","find$1","isBrowser","nu$1","info","version","isEdge","isChrome","isIE","isOpera","isFirefox","isSafari","Browser","edge","chrome","ie","opera","firefox","safari","isOS","nu$2","isWindows","isiOS","isAndroid","isOSX","isLinux","isSolaris","isFreeBSD","OperatingSystem","windows","ios","android","linux","osx","solaris","freebsd","detect$1","candidates","userAgent","candidate","search","UaString","browsers","browser","oses","os","normalVersionRegex","checkContains","uastring","PlatformInfo","PlatformDetection","mediaMatch","deviceType","isiPad","isiPhone","isMobile","isTouch","isTablet","isPhone","iOSwebview","isDesktop","isWebView","DeviceType","platform","navigator","query","matchMedia","matches","detect$3","ELEMENT$1","DOCUMENT$1","selector","elem","msMatchesSelector","webkitMatchesSelector","mozMatchesSelector","bypassSelector","childElementCount","e1","e2","contains$2","d1","d2","is$1","owner","parent","parents","isRoot","stop","ret","rawParent","prevSibling","previousSibling","nextSibling","children","child","index","cs","before","marker","insertBefore","after","append","prepend","firstChild","wrap","wrapper","after$1","elements","append$1","empty","textContent","rogue","remove$2","removeChild","unwrap","children$1","grid","address","detail","detailnew","extended","rowdata","elementnew","rowdatanew","rowcells","rowdetails","bounds","descendants","predicate","result","ancestors$1","ancestors","children$2","descendants$1","base","querySelectorAll","ClosestOrAncestor","ancestor","el","ancestor$1","child$2","child$1","descendant$1","querySelector","one","closest$1","filterFirstLayer","LayerSelector","firstLayer","lookup","tags","elm","neighbours","neighbourCells","neighbourRows","parseInt","TableLookup","cell","firstCell","cells","table","row","rows","notCell","rowProp","colProp","rowsCount","cols","DetailsList","parentSection","parentName","rowspan","colspan","example","section","column","filterItems","warehouse","Warehouse","generate","list","access","maxRows","maxColumns","details","currentRow","j","cc","newpos","max","grid$1","getAt","findItem","item","comparator","filtered","justCells","w","statsStruct","makeCell","seenSelected","rowIndex","td","CopySelected","selectedSelector","isSelected","house","stats","totalColumns","columns","minRow","minCol","maxRow","maxCol","startRow","endRow","startCol","endCol","findSelectedStats","unselectedCells","totalRows","fillInGaps","emptyRows","clean","getOption","nodeValue","NodeValue","get$3","set$2","getEnd","elementsWithCursorPosition","isCursorPosition","trim","first","descend","child_1","res","last$1","descendantRtl","clone$1","original","isDeep","cloneNode","shallow","deep","copy$1","shallowAs","cloneChildren","createCell","replica","pasteReplace","newRow","TableFill","cellOperations","mutate","formatsToClone","prev","source","sourceDom","targetDom","docu","formats","lastNode","oldCell","newCell","firstText","formatSelector","last","clonedFormat","cloneFormats","cssText","gap","paste","isWithin","finishCol","finishRow","CellBounds","leftEdge","rightEdge","topEdge","bottomEdge","isRect","detailIsWithin","getAnyBox","startCell","finishCell","startCoords","finishCoords","sc","fc","detailA","detailB","min","CellGroup","CellFinder","finish","inside","innerCell","c1","c2","getWarehouse","TablePositions","deltaRow","deltaColumn","firstTable","lastTable","optStartCell","optLastCell","lastCell","TagBoundaries","DomUniverse","up","closest","down","styles","copyTo","destination","as","insert","afterAll","appendAll","comparePosition","other","getText","setText","isBoundary","isEmptyTag","leftRight","brokenPath","bisect","universe","ind","unsafeOne","look","tail","commonElement","end","eq$1","ancestors$2","ps1","ps2","prune","path","pruned1","pruned2","shared","firstpath","secondpath","Parent","sharedOne","all$1","subset","ancs","common","finder","ps","topDown","startIndex","endIndex","sIndex","eIndex","unsafeSubset","breakToLeft","parts","prior","breakToRight","second","breakPath","isTop","breaker","next","splits","fallback","breakage","extra","left","right","nextChild","DomParent","_universe","u","c","Identified","lookupTable","container","identify","getIsRoot","rootTable","boxes","startTable","finishTable","ancestorCells","lca","lcaTable","finishAncestorCells","startAncestorCells","CellSelection","retrieve","sels","shiftSelection","firstSelectedSelector","lastSelectedSelector","box","getLast","identified","expandTo","getEdges","tbl","TableSelection","edges","firstAncestor","lastAncestor","fA","lA","selected","Ephemera","attributeSelector","firstSelected","lastSelected","Adt","cases","constructors","adt","acase","count","argLength","branches","branchKeys","reqKey","log","params","type$1","multiple","single","SelectionTypes","cata","subject","onNone","onMultiple","onSingle","selections","CellOperations","_env","noMenu","mergable","unmergable","paste$1","TableTargets","forMenu","pasteRows","clipboard","generators","Clipboard","registerEvents","actions","cellSelection","preventDefault","extractSelected","content","format","innerText","getTextContent","serializer","serialize","serializeElements","getParent","getStart","domCell","getDoc","targets","pasteCells","rng","setRng","clear","Dimension","getOffset","parseFloat","aggregate","properties","val","isNaN","h","getOuter","cumulativeInclusions","api$1","getBoundingClientRect","height","offsetHeight","get$4","api$2","offsetWidth","get$5","getOuter$1","platform$1","getProp","px","num","toNumber","RuntimeSize","paddingTop","paddingBottom","borderTop","borderBottom","getCalculatedHeight","genericSizeRegex","percentageBasedSizeRegex","pixelBasedSizeRegex","setHeight","amount","normalizePixelSize","getter","setter","suffix","number","newSize","total","convert","getTotalHeight","getHeightValue","getSpan","getRawWidth","width","normalizePercentageWidth","cellWidth","tableSize","pixelWidth","Sizes","setPixelWidth","setPercentageWidth","getPixelWidth","pixelMatch","exec","percentMatch","normalizePixelWidth","choosePixelSize","getPercentageWidth","intWidth","choosePercentageSize","getGenericWidth","unit","setGenericWidth","getHeight","get$6","CellMutations","main","newWidth","Position","top","translate","firstDefinedOrZero","absolute","win","defaultView","documentElement","offsetLeft","offsetTop","scrollTop","pageYOffset","scrollLeft","pageXOffset","clientTop","clientLeft","viewport","boxPosition","rowInfo","colInfo","rtlEdge","ltrEdge","getLeftEdge","getRightEdge","getTop","getTopEdge","getBottomEdge","findPositions","getInnerEdge","getOuterEdge","lines","cellOption","lastLine","BarPositions","delta","positions","optElements","rtl","step","ltr","ResizeDirection","TableDirection","directionAt","auto","isRtl","merger","TableGridSize","input","cat","findMap","setIfNot","ignore","Redraw","newRows","newCells","renderOrRemoveSection","gridSection","sectionName","tb","isNew","tr","renderSection","removeSection","headSection","bodySection","footSection","clonedCell","read","supports","classList","add$1","clazz","remove$4","remove$3","add$2","cleanClass","get$7","has$2","range","deduce","rest","aa","extras","abs","decide","getBlock","isSingle","getFallback","inBlock","Blocks","rowsArr","col","namespace","dashNamespace","Styles","Bar","blocker","position","resizeBar","resizeRowBar","resizeColBar","destroy","wire","previous","drawBar","origin","cpOption","cp","bar","refreshGrid","hdirection","vdirection","rowPositions","tableWidth","rowBar","refreshRow","colPositions","tableHeight","colBar","refreshCol","each$2","bars","Bars","setCells","gridRow","getCell","GridRow","addCell","mutateCell","getCellElement","mapCells","cellLength","findDiff","comp","TableGrid","restOfRow","getRow","endColIndex","restOfColumn","getColumn","endRowIndex","Transitions","seen","ri","ci","updateSeen","rowCells","deriveRows","rendered","findRow","toDetailList","findInWarehouse","run","operation","extract","adjustment","postAction","genWrappers","direction","model","fromWarehouse","cursor","out","newElements","onCell","onPasteRows","lc","onCells","isValue","isError","_","onValue","mapError","toOption","message","onError","Result","fill","generator","rowFill","repititions","repeat","_row","colFill","Fitment","startAddress","gridA","gridB","rowRemainder","colRemainder","colRequired","rowRequired","rowDelta","colDelta","colLengthA","colLengthB","fillCols","MergingOperations","substitution","isToReplace","currentCell","uniqueCells","replacement","_loop_1","_loop_2","sub","isSpanning","matching","TableMerge","fittedGrid","mergeTables","fittedNewGrid","secondDelta","fittedOldGrid","ModificationOperations","between","ex","exampleRow","exampleCol","replaceIn","isTarget","notStartRow","colIndex","notStartColumn","TransformOperations","targetRow","only","middle","ColumnContext","Deltas","context","neighbours$1","zero","newNext","minCellWidth","newThis","diffx","onLeft","singleColumnWidth","_prev","getSpan$1","CellUtils","hasColspan","hasRowspan","minWidth","minHeight","getInt","getRaw$1","getRawW","getRawH","getWidthFrom","getWidth","backups","deduced","getDeduced","getHeightFrom","ColumnSizes","getRawWidths","getPixelWidths","getPercentageWidths","getPixelHeights","getRawHeights","measures","Recalculations","widths","heights","pixelSize","getCellDelta","getWidths","setElementWidth","setTableWidth","newWidths","_delta","chooseSize","floatWidth","_newWidths","change","percentageSize","fallbackWidth","TableSize","getWarehouse$1","getTableWarehouse","Adjustments","deltas","dx","newSizes","newHeights","dy","newCellSizes","newRowSizes","baseWith","handleUnsupported","invalidKeys","validate","incorrect","invalidTypeMessage","handleExact","exactly","verifyGenerators","elementToData","Generators","toData","nuFrom","data","recent","getOrInit","makeNew","replaceOrInit","combine","blockList","isBlock","Structure","universe$1","DomStructure","TableContent","isBr","markCell","rightSiblingIsBlock","rightSibling","isListItem","contents","advancedBr","outcome","elementFromGrid","findIn","bundle","uniqueRows","currentDetail","uniqueColumns","gridifyRows","pasteDetails","wh","resize","TableOperations","insertRowBefore","targetIndex","newGrid","insertRowsBefore","newG","insertRowAfter","insertRowsAfter","insertColumnBefore","insertColumnsBefore","insertColumnAfter","insertColumnsAfter","splitCellIntoColumns","splitCellIntoRows","eraseColumns","_comparator","_genWrappers","eraseRows","makeColumnHeader","unmakeColumnHeader","makeRowHeader","unmakeRowHeader","mergeCells","_warehouse","unmergeCells","gridify","nuGrid","pasteRowsBefore","mergedGrid","pasteRowsAfter","getBody$1","getPixelWidth$1","getPixelHeight","addSizeSuffix","removeDataStyle","dataStyleCells","ltr$1","rtl$1","Direction","getDirection","defaultStyles","defaultAttributes","border","getDefaultAttributes","getParam","getDefaultStyles","hasTabNavigation","hasAdvancedCellTab","hasAdvancedRowTab","hasAdvancedTableTab","shouldStyleWithCss","getTableClassList","isPixelsForced","getCloneElements","cloneElements","fireNewRow","fire","fireNewCell","fireObjectResizeStart","fireObjectResized","fireTableSelectionChange","otherCells","fireTableSelectionClear","TableActions","lazyWire","isTableBody","execute","guard","createRng","setStart","setEnd","deleteRow","deleteColumn","CopyRows","selectedCells","slicedGrid","slicedDetails","global$1","Styles$1","formatter","firstChildStyle","elms","currentStyle","getStyle","checkChildren","select","extractAdvancedStyles","rgbToHex","toHex","borderwidth","borderstyle","bordercolor","backgroundcolor","getAlignment","alignments","formatName","dataName","alignmentData","matchNode","getHAlignment","getVAlignment","Helpers","inputList","itemCallback","startItems","appendItems","menuItem","menu","baseData","comparisonData","itemValue","itemKey","comparisonValue","dialogName","advTabItems","hasAdvTableTab","getAttrib","cellspacing","cellpadding","optBorderWidth","getBorder","caption","align","celltype","spacing","padding","borderWidth","advStyle","borderStyle","borderColor","bgColor","extractAdvancedStyleData","children$3","CellDialogGeneralTab","rowClassList","getCellClassList","classes","textStyle","getCssText","block","getClassList","classlist","DomModifier","normal","setAttrib","setStyle","prop","ifTruthy","updateSimpleProps","modifiers","updateAdvancedProps","applyToSingle","cellElm","rename","halign","valign","applyToMultiple","onSubmitCellForm","CellDialog","cellsData","dialogTabPanel","tabs","dialogPanel","formChildren","RowDialogGeneralTab","getRowClassList","getClassList$1","onSubmitRowForm","oldData","createModifier","rowElm","toType","tableElm","oldParentElm","parentElm","insertAfter","switchRowType","modifier","updateAdvancedProps$1","RowDialog","rowsData","hasOwnProperty$1","merge$3","old","objects","curObject","global$2","DefaultRenderOptions","percentages","render$1","rowHeaders","columnHeaders","renderOpts","tbody","trs","placeCaretInCell","collapse","InsertTable","options","get$8","getOuter$2","insertContent","fireEvents","selectFirstCellInTable","TableDialogGeneralTab","hasClasses","insertNewTable","rowColCountItems","inputMode","appearanceItems","hasAppearanceOptions","classListItem","styleTDTH","onSubmitTableForm","captionElm","serializeStyle","setAttribs","applyDataToElement","addVisual","TableDialog","generalPanel","dialogBody","getSelectionStartFromSelector","getSelectionStartCell","getSelectionStartCellOrCaption","each$3","registerCommands","clipboardRows","getTableFromCell","getSize","actOnSelection","beforeSize","oldSize","resizeChange","copyRowSelection","pasteOnSelection","clonedRows","mceTableSplitCells","mceTableMergeCells","mceTableInsertRowBefore","mceTableInsertRowAfter","mceTableInsertColBefore","mceTableInsertColAfter","mceTableDeleteCol","mceTableDeleteRow","mceTableCutRow","mceTableCopyRow","mceTablePasteRowBefore","mceTablePasteRowAfter","mceTableDelete","cellOrCaption","isEmpty","func","mceInsertTable","mceTableProps","mceTableRowProps","mceTableCellProps","ResizeWire","view","editable","Event","handlers","unbind","trigger","event","Events","typeDefs","fromRawEvent","rawEvent","stopPropagation","prevent","kill","mkEvent","clientX","clientY","binder","useCapture","wrapped","handle","removeEventListener","filter$1","bind$2","bind$1","Styles$2","DragMode","DragSink","DragApi","MouseDrag","compare","sink","dragApi","settings","layerClass","Blocker","mdown","forceDrop","mup","drop","mmove","move","mout","delayDrop","mutation","InDrag","events","onEvent","mode","update","reset","Movement","noDragState","inDragState","dragState","isOn","Dragging","rate","timer","active","movement","throttledDrop","cancel","clearTimeout","throttle","setTimeout","runIfActive","go","Dragger","BarMutation","drag","delegate","Mutation","xDelta","yDelta","isContentEditableTrue","resizeBarDragging","BarManager","resizing","hoverTable","getResizer","_dataRow","_dataCol","currentCol","getDelta","dir","adjustHeight","adjustWidth","startAdjust","mousedown","findClosestEditableTable","findClosestContentEditable","mouseover","refresh","hideBars","showBars","TableResize","manager","beforeResize","afterResize","startDrag","TableWire","margin","createContainer","calculatePercentageWidth","getResizeHandler","startW","startRawW","selectionRng","isTable","lazyResize","rawWire","objectResizing","hasObjectResizing","hasTableResizeBars","sz","getRng","rawTable","targetElm","tableHasPercentage","enforcePixels","isPercentagesForced","tablePercentage","enforcePercentage","percentW","targetPercentW","newCellSizes_1","newCellSize","adt$1","CellLocation","detect$4","CellNavigation","SimRange","adt$2","Situ","onBefore","onOn","onAfter","situ","adt$3","domRange","relative","exact","Selection","exactFromRange","simRange","soffset","foffset","getWin","startContainer","startSitu","finishSitu","getStart$1","selectNodeContentsUsing","selectNodeContents","relativeToNative","createRange","setStartBefore","setStartAfter","setEndBefore","setEndAfter","setFinish","exactToNative","toRect","rect","bottom","adt$4","fromRange","startOffset","endContainer","endOffset","diagnose","ranges","collapsed","rev","doDiagnose","getRanges","asLtrRange","inRect","locateOffset","textnode","rangeForOffset","offset","rectForOffset","maxX","curDeltaX","searchForPoint","searchInChildren","nodes","selectNode","locateNode","rects","getClientRects","locate","getCollapseDirection","createCollapsedNode","collapseDirection","locateInElement","cursorRange","locateInEmpty","searchTextNodes","boundedX","boundedY","locate$1","availableSearch","caretPositionFromPoint","pos","offsetNode","caretRangeFromPoint","beforeSpecial","name$1","preprocessRelative","preprocessExact","after$3","makeRange","same","doSetNativeRange","getSelection","removeAllRanges","addRange","doSetRange","setRangeFromRelative","setBaseAndExtent","extend","setLegacyRtlRange","setExact","setRelative","toNative","getDomRange","preprocess","doGetExact","anchor","anchorNode","focusNode","anchorOffset","focusOffset","rangeCount","firstRng","getRangeAt","lastRng","readRange","setToElement","get$a","sel","getExact","getFirstRect$1","getFirstRect","getAtPoint","fromPoint$1","global$3","forward","backward","getCellFirstCursorPosition","getNewRowCursorPosition","rootElements","TabContext","keyCode","TAB","body_1","isRoot_1","shiftKey","Response","Situs","Util","convertToRange","makeSitus","detect$5","selectRange","cellSel","KeySelection","sync","annotations","newSels","clearBeforeUpdate","traverse","backtrack","_direction","transition","sidestep","advance","sibling","successors","Walkers","hone","go$1","rules","succ","rule","isLeaf","seekLeft","seekRight","universe$2","before$4","before$3","after$5","after$4","point","adt$5","success","failedUp","failedDown","isRow","BeforeAfter","verify","bridge","beforeOffset","afterOffset","failure","afterCell","beforeCell","beforeBounds","getRect","afterBounds","isOverlapping","_sharedRow","onSuccess","onFailedUp","onFailedDown","inParent","gatherer","cand","gather","handleParent","findBr","br","adjacent","indexInParent","BrTags","handleBr","tgt","analysis","nu$3","Carets","moveUp","caret","moveDown","moveBottomTo","moveTopTo","getBottom","toCaret","getElemBox","Rectangles","getRangedRect","getPartialBox","adt$6","retry","inOutsideBlock","isOutside","upMovement","adjuster","guessBox","higherCaret","downMovement","lowerCaret","adjustForTable","numRetries","adjustTil","isAtTable","situsFromPoint","guess","newCaret","moved","adjusted","getInnerHeight","checkScroll","scrollBy","Retries","tryUp","tryDown","ieTryUp","ieTryDown","getJumpSize","platform$2","tryAgain","tryAt","otherRetry","ieRetry","tryCursor","TableKeys","brNeighbour","fromSitus","findSpot","spot","scan","situs","detection","inSameTable","simulate","VerticalMovement","precheck","seekLeft$1","lastOffset","seekRight$1","findCell","KeyDirection","isKey","keycode","isUp","isDown","SelectionKeys","isBackward","isForward","isNavigation","Rect","sr","WindowBridge","exactAdt","clearSelection","collapseSelection","toStart","setSelection","setRelativeSelection","selectContents","innerHeight","getScrollY","_DOC","by","rc","InputHandlers","mouse","clearState","mouseup","_event","MouseSelection","keyboard","clearToNavigate","keydown","realEvent","which","attempts","keyup","external","remove$7","remove$5","SelectionAnnotation","byClass","ephemera","addSelectionClass","removeSelectionClasses","byAttr","onSelection","onClear","removeSelectionAttributes","addSelectionAttribute","OtherCells","getOtherCells","upOrLeftCells","upGrid","upDetails","slicedCells","getUpOrLeftCells","downOrRightCells","downGrid","downDetails","getDownOrRightCells","hasInternalTarget","Selections","getSelectionTargets","_targets","changeHandlers","findTargets","resetTargets","onSetup","isDisabled","setDisabled","onSetupTable","onSetupCellOrRow","onSetupMergeable","onSetupUnmergeable","addButtons","selectionTargets","addMenuButton","fetch","cmd","command","execCommand","addToolbars","getToolbar","addContextToolbar","MenuItems","addMenuItems","insertTableAction","numRows","numColumns","tableProperties","deleteTable","rowItems","getSubmenuItems","columnItems","cellItems","hasTableGrid","addNestedMenuItem","fancytype","addContextMenu","getApi","resizeHandler","insertTable","setClipboardRows","sugarRows","_setClipboardRows","getClipboardRows","_getClipboardRows","Plugin","handlerStruct","mouseHandlers","keyHandlers","lastTarget","lastTimeStamp","handleResponse","response","hasShiftKey","ns","wrappedEvent","wrapEvent","isMouseEvent","isLeftMouse","button","mouseDown","mouseOver","mouseUp","doubleTap","touchEnd","lT","lTS","timeStamp","CellSelection$1","addTempAttr","Settings","externalTargets","OpenUrl","link","href","rel","evt","createEvent","initMouseEvent","dispatchEvent","appendClickRemove","hasProtocol","applyRelTargetRules","isUnsafe","rels","removeTargetRules","inArray","newRels","addTargetRules","getAnchorElement","selectedElm","getNode","isImageFigure","isLink","className","getLinkAttrs","applyLinkOverrides","linkAttrs","newLinkAttrs","newRel","assumeExternalTargets","handleExternalTargets","unlinkImageFigure","fig","img","getParents","linkImageFigure","Utils","attachState","anchorElm","attach","updateLink","createHTML","encode","createLink","grep","trimCaretContainers","getValue","sanitizeWith","extracter","extractValue","sanitizeList","ListOptions","sanitize","createUi","persistentText","fieldName","catalog","hasPersistentText","findTextByValue","meta","DialogChanges","linkSettings","onCatalogChange","catalogs","urlText","onUrlChange","exports$1","module","exports","define","amd","EphoxContactWrapper","1","cachedSetTimeout","cachedClearTimeout","process","defaultSetTimout","defaultClearTimeout","runTimeout","fun","currentQueue","queue","draining","queueIndex","cleanUpNextTick","drainQueue","timeout","runClearTimeout","Item","nextTick","env","argv","versions","addListener","once","removeListener","removeAllListeners","emit","prependListener","prependOnceListener","binding","cwd","chdir","umask","2","setImmediate","root","setTimeoutFunc","Promise","TypeError","_state","_handled","_value","_deferreds","doResolve","deferred","_immediateFn","cb","onFulfilled","onRejected","reject","promise","newValue","then","finale","thisArg","_unhandledRejectionFn","Handler","done","reason","prom","remaining","race","err","warn","_setImmediateFn","_setUnhandledRejectionFn","3","clearImmediate","immediateIds","nextImmediateId","Timeout","clearFn","_id","_clearFn","setInterval","clearInterval","unref","enroll","msecs","_idleTimeoutId","_idleTimeout","unenroll","_unrefActive","_onTimeout","4","promisePolyfill","Global","boltExport","baseFn","callbacks","nCallback","isReady","cbs","LazyValue","errorReporter","make","fab","aFutureB","toPromise","anonBind","futureB","toLazy","toCached","cache","Future","global$4","tryEmailTransform","tryProtocolTransform","DialogConfirms","transform","setEditorTimeout","confirm","delayedConfirm","AnchorListOptions","anchorNodes","anchors","ClassListOptions","global$5","LinkListOptions","extractor","convertURL","linkList","send","JSON","parse","parseJson","optItems","RelOptions","initialTarget","isTargetBlank_1","fallbacks","TargetOptions","nonEmptyAttr","DialogInfo","linkNode","links","linkClass","extractFromAnchor","optNode","flags","titleEnabled","collectData","getChangedValue","changedData","pData","handleSubmit","displayText","titleText","defaultTarget","getInitialData","dialogDelta","filetype","newData","setData","makeDialog","spec","getLink","getSelectedLink","gotoLink","targetEl","$","scrollIntoView","Actions","openDialog","gotoSelectedLink","leftClickedOnAHref","isCollapsed","setupGotoLinks","metaKeyPressed","altKey","ctrlKey","metaKey","hasOnlyAltModifier","toggleActiveState","nodeChangeHandler","setActive","toggleEnabledState","toolbarKey","Keyboard","addShortcut","Controls","setupButtons","addToggleButton","setupMenuItems","shortcut","setupContextMenu","setupContextToolbars","onSetupLink","buttonApi","addContextForm","launch","initValue","commands","formApi","collapseSelectionToEnd","hide","isObject","bindFuture","resA","bindResult","mapResult","foldResult","whenError","whenValue","withTimeout","errorThunk","timedOut","worker","FutureResult","baseMerge","deepMerge","merge","makeItems","imageList","hasDescription","hasImageTitle","hasDimensions","hasImageCaption","MainTab","getUploadUrl","getUploadHandler","hasUploadTab","hasAdvTab","getPrependUrl","getImageList","hasUploadUrl","hasUploadHandler","getUploadBasePath","getUploadCredentials","parseIntAndGetMax","val1","val2","dimensions","onload","clientWidth","clientHeight","onerror","splitMargin","imgElm","selectImage","blob","reader","FileReader","readAsDataURL","DOM","getHspace","image","marginLeft","marginRight","getVspace","marginTop","marginBottom","hasCaption","toggleCaption","figureElm","removeFigure","contentEditable","wrapInFigure","normalizeStyle","normalizeCss","attrValue","setSize","setHspace","pxValue","setVspace","setBorder","setBorderStyle","isFigure","getStyleValue","hspace","vspace","getBorderStyle","alt","updateProp","normalized","write","_name","mergedCss","compressed","getSelectedImage","splitTextBlock","figure","textBlock","schema","getTextBlockElements","insertImageAtCaret","outerHTML","insertedElm","insertOrUpdateImage","syncSrcAttr","writeImageDataToSelection","deleteImage","sanitizer","findEntryDelegate","isGroup","ListUtils","optList","pathJoin","path1","path2","Uploader","defaultHandler","blobInfo","progress","xhr","formData","XMLHttpRequest","withCredentials","credentials","upload","onprogress","loaded","status","json","responseText","location","basePath","FormData","filename","uploadBlob","AdvTab","collect","urlListSanitizer","futureImageList","completer","readImageDataFromSelection","prependURL","preUrl","UploadTab","fromImageData","images","fileinput","toImageData","addPrependUrl","srcURL","prependUrl","addPrependUrl2","formFillFromMeta","entry","formFillFromMeta2","changeSrc","helpers","imageSize","calculateImageSize","prevImage","updateImagesDropdown","changeStyle2","parseStyle","dataCopy","calcVSpace","calcHSpace","calcBorderWidth","calcBorderStyle","calcStyle","changeFileInput","unblock","file","blobUri","URL","createObjectURL","uploader","finalize","revokeObjectURL","dataUrl","createBlobCache","showTab","alertErr","changeHandler","prevAlt","changeImages","changeStyle","changeAStyle","closeHandler","makeDialogBody","createState","onClose","submitHandler","editorUpload","uploadImagesAuto","documentBaseURI","toAbsolute","blobCache","base64","alert","normalizeCss$1","stylesArg","hasImageClass","toggleContentEditableState","toggleContentEditable","getAll","FilterContent","parser","addNodeFilter","selectorChangedWithUnbind"],"mappings":"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","file":"component---src-pages-editors-tinymce-js-271b6594ec333b8b7b98.js","sourcesContent":["/**\n * Copyright (c) 2017-present, Ephox, Inc.\n *\n * This source code is licensed under the Apache 2 license found in the\n * LICENSE file in the root directory of this source tree.\n *\n */\nvar getGlobal = function getGlobal() {\n  return typeof window !== 'undefined' ? window : global;\n};\n\nvar getTinymce = function getTinymce() {\n  var global = getGlobal();\n  return global && global.tinymce ? global.tinymce : null;\n};\n\nexport { getTinymce };","/**\n * Copyright (c) Tiny Technologies, Inc. All rights reserved.\n * Licensed under the LGPL or a commercial license.\n * For LGPL see License.txt in the project root for license information.\n * For commercial licenses see https://www.tiny.cloud/\n *\n * Version: 5.1.3 (2019-12-04)\n */\n(function () {\n  'use strict';\n\n  var global = tinymce.util.Tools.resolve('tinymce.PluginManager');\n\n  var setContent = function setContent(editor, html) {\n    editor.focus();\n    editor.undoManager.transact(function () {\n      editor.setContent(html);\n    });\n    editor.selection.setCursorLocation();\n    editor.nodeChanged();\n  };\n\n  var getContent = function getContent(editor) {\n    return editor.getContent({\n      source_view: true\n    });\n  };\n\n  var Content = {\n    setContent: setContent,\n    getContent: getContent\n  };\n\n  var open = function open(editor) {\n    var editorContent = Content.getContent(editor);\n    editor.windowManager.open({\n      title: 'Source Code',\n      size: 'large',\n      body: {\n        type: 'panel',\n        items: [{\n          type: 'textarea',\n          name: 'code'\n        }]\n      },\n      buttons: [{\n        type: 'cancel',\n        name: 'cancel',\n        text: 'Cancel'\n      }, {\n        type: 'submit',\n        name: 'save',\n        text: 'Save',\n        primary: true\n      }],\n      initialData: {\n        code: editorContent\n      },\n      onSubmit: function onSubmit(api) {\n        Content.setContent(editor, api.getData().code);\n        api.close();\n      }\n    });\n  };\n\n  var Dialog = {\n    open: open\n  };\n\n  var register = function register(editor) {\n    editor.addCommand('mceCodeEditor', function () {\n      Dialog.open(editor);\n    });\n  };\n\n  var Commands = {\n    register: register\n  };\n\n  var register$1 = function register$1(editor) {\n    editor.ui.registry.addButton('code', {\n      icon: 'sourcecode',\n      tooltip: 'Source code',\n      onAction: function onAction() {\n        return Dialog.open(editor);\n      }\n    });\n    editor.ui.registry.addMenuItem('code', {\n      icon: 'sourcecode',\n      text: 'Source code',\n      onAction: function onAction() {\n        return Dialog.open(editor);\n      }\n    });\n  };\n\n  var Buttons = {\n    register: register$1\n  };\n\n  function Plugin() {\n    global.add('code', function (editor) {\n      Commands.register(editor);\n      Buttons.register(editor);\n      return {};\n    });\n  }\n\n  Plugin();\n})();","// Exports the \"table\" plugin for usage with module loaders\n// Usage:\n//   CommonJS:\n//     require('tinymce/plugins/table')\n//   ES2015:\n//     import 'tinymce/plugins/table'\nrequire('./plugin.js');","// Exports the \"link\" plugin for usage with module loaders\n// Usage:\n//   CommonJS:\n//     require('tinymce/plugins/link')\n//   ES2015:\n//     import 'tinymce/plugins/link'\nrequire('./plugin.js');","// Exports the \"image\" plugin for usage with module loaders\n// Usage:\n//   CommonJS:\n//     require('tinymce/plugins/image')\n//   ES2015:\n//     import 'tinymce/plugins/image'\nrequire('./plugin.js');","import \"core-js/modules/es6.object.assign\";\nimport \"core-js/modules/es6.object.create\";\nimport \"core-js/modules/es6.object.set-prototype-of\";\n\n/**\n * Copyright (c) 2017-present, Ephox, Inc.\n *\n * This source code is licensed under the Apache 2 license found in the\n * LICENSE file in the root directory of this source tree.\n *\n */\nvar __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n\n    return _extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    _extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nvar __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n\n      for (var p in s) {\n        if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n      }\n    }\n\n    return t;\n  };\n\n  return __assign.apply(this, arguments);\n};\n\nimport * as React from 'react';\nimport * as ScriptLoader from '../ScriptLoader';\nimport { getTinymce } from '../TinyMCE';\nimport { bindHandlers, isFunction, isTextarea, mergePlugins, uuid } from '../Utils';\nimport { EditorPropTypes } from './EditorPropTypes';\nvar scriptState = ScriptLoader.create();\n\nvar Editor =\n/** @class */\nfunction (_super) {\n  __extends(Editor, _super);\n\n  function Editor(props) {\n    var _this = _super.call(this, props) || this;\n\n    _this.initialise = function () {\n      var finalInit = __assign({}, _this.props.init, {\n        target: _this.elementRef.current,\n        readonly: _this.props.disabled,\n        inline: _this.inline,\n        plugins: mergePlugins(_this.props.init && _this.props.init.plugins, _this.props.plugins),\n        toolbar: _this.props.toolbar || _this.props.init && _this.props.init.toolbar,\n        setup: function setup(editor) {\n          _this.editor = editor;\n          editor.on('init', function (e) {\n            _this.initEditor(e, editor);\n          });\n\n          if (_this.props.init && typeof _this.props.init.setup === 'function') {\n            _this.props.init.setup(editor);\n          }\n        }\n      });\n\n      if (isTextarea(_this.elementRef.current)) {\n        _this.elementRef.current.style.visibility = '';\n      }\n\n      getTinymce().init(finalInit);\n    };\n\n    _this.id = _this.props.id || uuid('tiny-react');\n    _this.elementRef = React.createRef();\n    _this.inline = _this.props.inline ? _this.props.inline : _this.props.init && _this.props.init.inline;\n    _this.boundHandlers = {};\n    return _this;\n  }\n\n  Editor.prototype.componentDidUpdate = function (prevProps) {\n    if (this.editor && this.editor.initialized) {\n      bindHandlers(this.editor, this.props, this.boundHandlers);\n      this.currentContent = this.currentContent || this.editor.getContent();\n\n      if (typeof this.props.value === 'string' && this.props.value !== prevProps.value && this.props.value !== this.currentContent) {\n        this.editor.setContent(this.props.value);\n      }\n\n      if (typeof this.props.disabled === 'boolean' && this.props.disabled !== prevProps.disabled) {\n        this.editor.setMode(this.props.disabled ? 'readonly' : 'design');\n      }\n    }\n  };\n\n  Editor.prototype.componentDidMount = function () {\n    if (getTinymce() !== null) {\n      this.initialise();\n    } else if (this.elementRef.current && this.elementRef.current.ownerDocument) {\n      var doc = this.elementRef.current.ownerDocument;\n      var channel = this.props.cloudChannel;\n      var apiKey = this.props.apiKey ? this.props.apiKey : 'no-api-key';\n      ScriptLoader.load(scriptState, doc, \"https://cdn.tiny.cloud/1/\" + apiKey + \"/tinymce/\" + channel + \"/tinymce.min.js\", this.initialise);\n    }\n  };\n\n  Editor.prototype.componentWillUnmount = function () {\n    if (getTinymce() !== null) {\n      getTinymce().remove(this.editor);\n    }\n  };\n\n  Editor.prototype.render = function () {\n    return this.inline ? this.renderInline() : this.renderIframe();\n  };\n\n  Editor.prototype.initEditor = function (initEvent, editor) {\n    var _this = this;\n\n    var value = typeof this.props.value === 'string' ? this.props.value : typeof this.props.initialValue === 'string' ? this.props.initialValue : '';\n    editor.setContent(value);\n\n    if (isFunction(this.props.onEditorChange)) {\n      editor.on('change keyup setcontent', function (e) {\n        var newContent = editor.getContent();\n\n        if (newContent !== _this.currentContent) {\n          _this.currentContent = newContent;\n\n          if (isFunction(_this.props.onEditorChange)) {\n            _this.props.onEditorChange(_this.currentContent, editor);\n          }\n        }\n      });\n    }\n\n    if (isFunction(this.props.onInit)) {\n      this.props.onInit(initEvent, editor);\n    }\n\n    bindHandlers(editor, this.props, this.boundHandlers);\n  };\n\n  Editor.prototype.renderInline = function () {\n    var _a = this.props.tagName,\n        tagName = _a === void 0 ? 'div' : _a;\n    return React.createElement(tagName, {\n      ref: this.elementRef,\n      id: this.id\n    });\n  };\n\n  Editor.prototype.renderIframe = function () {\n    return React.createElement('textarea', {\n      ref: this.elementRef,\n      style: {\n        visibility: 'hidden'\n      },\n      name: this.props.textareaName,\n      id: this.id\n    });\n  };\n\n  Editor.propTypes = EditorPropTypes;\n  Editor.defaultProps = {\n    cloudChannel: '5'\n  };\n  return Editor;\n}(React.Component);\n\nexport { Editor };","import \"core-js/modules/es6.object.assign\";\n\n/**\n * Copyright (c) 2017-present, Ephox, Inc.\n *\n * This source code is licensed under the Apache 2 license found in the\n * LICENSE file in the root directory of this source tree.\n *\n */\nvar __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n\n      for (var p in s) {\n        if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n      }\n    }\n\n    return t;\n  };\n\n  return __assign.apply(this, arguments);\n};\n\nimport * as PropTypes from 'prop-types';\nexport var eventPropTypes = {\n  onActivate: PropTypes.func,\n  onAddUndo: PropTypes.func,\n  onBeforeAddUndo: PropTypes.func,\n  onBeforeExecCommand: PropTypes.func,\n  onBeforeGetContent: PropTypes.func,\n  onBeforeRenderUI: PropTypes.func,\n  onBeforeSetContent: PropTypes.func,\n  onBeforePaste: PropTypes.func,\n  onBlur: PropTypes.func,\n  onChange: PropTypes.func,\n  onClearUndos: PropTypes.func,\n  onClick: PropTypes.func,\n  onContextMenu: PropTypes.func,\n  onCopy: PropTypes.func,\n  onCut: PropTypes.func,\n  onDblclick: PropTypes.func,\n  onDeactivate: PropTypes.func,\n  onDirty: PropTypes.func,\n  onDrag: PropTypes.func,\n  onDragDrop: PropTypes.func,\n  onDragEnd: PropTypes.func,\n  onDragGesture: PropTypes.func,\n  onDragOver: PropTypes.func,\n  onDrop: PropTypes.func,\n  onExecCommand: PropTypes.func,\n  onFocus: PropTypes.func,\n  onFocusIn: PropTypes.func,\n  onFocusOut: PropTypes.func,\n  onGetContent: PropTypes.func,\n  onHide: PropTypes.func,\n  onInit: PropTypes.func,\n  onKeyDown: PropTypes.func,\n  onKeyPress: PropTypes.func,\n  onKeyUp: PropTypes.func,\n  onLoadContent: PropTypes.func,\n  onMouseDown: PropTypes.func,\n  onMouseEnter: PropTypes.func,\n  onMouseLeave: PropTypes.func,\n  onMouseMove: PropTypes.func,\n  onMouseOut: PropTypes.func,\n  onMouseOver: PropTypes.func,\n  onMouseUp: PropTypes.func,\n  onNodeChange: PropTypes.func,\n  onObjectResizeStart: PropTypes.func,\n  onObjectResized: PropTypes.func,\n  onObjectSelected: PropTypes.func,\n  onPaste: PropTypes.func,\n  onPostProcess: PropTypes.func,\n  onPostRender: PropTypes.func,\n  onPreProcess: PropTypes.func,\n  onProgressState: PropTypes.func,\n  onRedo: PropTypes.func,\n  onRemove: PropTypes.func,\n  onReset: PropTypes.func,\n  onSaveContent: PropTypes.func,\n  onSelectionChange: PropTypes.func,\n  onSetAttrib: PropTypes.func,\n  onSetContent: PropTypes.func,\n  onShow: PropTypes.func,\n  onSubmit: PropTypes.func,\n  onUndo: PropTypes.func,\n  onVisualAid: PropTypes.func\n};\nexport var EditorPropTypes = __assign({\n  apiKey: PropTypes.string,\n  id: PropTypes.string,\n  inline: PropTypes.bool,\n  init: PropTypes.object,\n  initialValue: PropTypes.string,\n  onEditorChange: PropTypes.func,\n  value: PropTypes.string,\n  tagName: PropTypes.string,\n  cloudChannel: PropTypes.string,\n  plugins: PropTypes.oneOfType([PropTypes.string, PropTypes.array]),\n  toolbar: PropTypes.oneOfType([PropTypes.string, PropTypes.array]),\n  disabled: PropTypes.bool,\n  textareaName: PropTypes.string\n}, eventPropTypes);","import \"core-js/modules/es6.regexp.split\";\nimport \"core-js/modules/es6.array.is-array\";\nimport \"core-js/modules/es6.array.for-each\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.array.iterator\";\nimport \"core-js/modules/es6.object.to-string\";\nimport \"core-js/modules/es6.object.keys\";\nimport \"core-js/modules/es6.array.filter\";\nimport \"core-js/modules/es6.array.map\";\n\n/**\n * Copyright (c) 2017-present, Ephox, Inc.\n *\n * This source code is licensed under the Apache 2 license found in the\n * LICENSE file in the root directory of this source tree.\n *\n */\nimport { eventPropTypes } from './components/EditorPropTypes';\nexport var isFunction = function isFunction(x) {\n  return typeof x === 'function';\n};\n\nvar isEventProp = function isEventProp(name) {\n  return name in eventPropTypes;\n};\n\nvar findEventHandlers = function findEventHandlers(props) {\n  return Object.keys(props).filter(isEventProp).filter(function (name) {\n    return isFunction(props[name]);\n  }).map(function (name) {\n    return {\n      handler: props[name],\n      eventName: name.substring(2)\n    };\n  });\n};\n\nexport var bindHandlers = function bindHandlers(editor, props, boundHandlers) {\n  findEventHandlers(props).forEach(function (found) {\n    // Unbind old handler\n    var oldHandler = boundHandlers[found.eventName];\n\n    if (isFunction(oldHandler)) {\n      editor.off(found.eventName, oldHandler);\n    } // Bind new handler\n\n\n    var newHandler = function newHandler(e) {\n      return found.handler(e, editor);\n    };\n\n    boundHandlers[found.eventName] = newHandler;\n    editor.on(found.eventName, newHandler);\n  });\n};\nvar unique = 0;\nexport var uuid = function uuid(prefix) {\n  var date = new Date();\n  var time = date.getTime();\n  var random = Math.floor(Math.random() * 1000000000);\n  unique++;\n  return prefix + '_' + random + unique + String(time);\n};\nexport var isTextarea = function isTextarea(element) {\n  return element !== null && element.tagName.toLowerCase() === 'textarea';\n};\n\nvar normalizePluginArray = function normalizePluginArray(plugins) {\n  if (typeof plugins === 'undefined' || plugins === '') {\n    return [];\n  }\n\n  return Array.isArray(plugins) ? plugins : plugins.split(' ');\n};\n\nexport var mergePlugins = function mergePlugins(initPlugins, inputPlugins) {\n  return normalizePluginArray(initPlugins).concat(normalizePluginArray(inputPlugins));\n};","import \"core-js/modules/es6.array.for-each\";\n\n/**\n * Copyright (c) 2017-present, Ephox, Inc.\n *\n * This source code is licensed under the Apache 2 license found in the\n * LICENSE file in the root directory of this source tree.\n *\n */\nimport { uuid } from './Utils';\n\nvar injectScriptTag = function injectScriptTag(scriptId, doc, url, callback) {\n  var scriptTag = doc.createElement('script');\n  scriptTag.referrerPolicy = 'origin';\n  scriptTag.type = 'application/javascript';\n  scriptTag.id = scriptId;\n  scriptTag.addEventListener('load', callback);\n  scriptTag.src = url;\n\n  if (doc.head) {\n    doc.head.appendChild(scriptTag);\n  }\n};\n\nexport var create = function create() {\n  return {\n    listeners: [],\n    scriptId: uuid('tiny-script'),\n    scriptLoaded: false\n  };\n};\nexport var load = function load(state, doc, url, callback) {\n  if (state.scriptLoaded) {\n    callback();\n  } else {\n    state.listeners.push(callback);\n\n    if (!doc.getElementById(state.scriptId)) {\n      injectScriptTag(state.scriptId, doc, url, function () {\n        state.listeners.forEach(function (fn) {\n          return fn();\n        });\n        state.scriptLoaded = true;\n      });\n    }\n  }\n};","/**\n * Copyright (c) 2017-present, Ephox, Inc.\n *\n * This source code is licensed under the Apache 2 license found in the\n * LICENSE file in the root directory of this source tree.\n *\n */\nimport { Editor } from './components/Editor';\nexport { Editor };","// Exports the \"code\" plugin for usage with module loaders\n// Usage:\n//   CommonJS:\n//     require('tinymce/plugins/code')\n//   ES2015:\n//     import 'tinymce/plugins/code'\nrequire('./plugin.js');","import React, { useState, useEffect } from 'react';\nimport { Card, CardBody } from 'oah-ui';\nimport SEO from '../../components/SEO';\n\nexport default function TinyMCE() {\n  const [editor, setEditor] = useState('');\n\n  useEffect(() => {\n    if (window) {\n      require('tinymce/plugins/table');\n      require('tinymce/plugins/link');\n      require('tinymce/plugins/image');\n      require('tinymce/plugins/code');\n      const { Editor } = require('@tinymce/tinymce-react');\n      setEditor(<Editor init={{ plugins: 'link table image code' }} />);\n    }\n  }, []);\n\n  return (\n    <Card>\n      <SEO title=\"Tiny MCE\" keywords={['OAH', 'application', 'react']} />\n      <header>Tiny MCE</header>\n      <CardBody>{editor}</CardBody>\n    </Card>\n  );\n}\n","require(\"core-js/modules/es6.regexp.to-string\");\n\nrequire(\"core-js/modules/es6.date.to-string\");\n\nrequire(\"core-js/modules/es6.array.is-array\");\n\nrequire(\"core-js/modules/es6.string.sub\");\n\nrequire(\"core-js/modules/es6.regexp.split\");\n\nrequire(\"core-js/modules/es6.regexp.match\");\n\nrequire(\"core-js/modules/es6.function.bind\");\n\nrequire(\"core-js/modules/es6.string.trim\");\n\nrequire(\"core-js/modules/es6.regexp.search\");\n\nrequire(\"core-js/modules/es6.number.constructor\");\n\nrequire(\"core-js/modules/es6.object.assign\");\n\nrequire(\"core-js/modules/es6.array.filter\");\n\nrequire(\"core-js/modules/es6.array.map\");\n\nrequire(\"core-js/modules/es6.regexp.replace\");\n\nrequire(\"core-js/modules/es6.array.sort\");\n\nrequire(\"core-js/modules/web.dom.iterable\");\n\nrequire(\"core-js/modules/es6.array.iterator\");\n\nrequire(\"core-js/modules/es6.object.to-string\");\n\nrequire(\"core-js/modules/es6.object.keys\");\n\nrequire(\"core-js/modules/es6.string.iterator\");\n\nrequire(\"core-js/modules/es6.array.from\");\n\nrequire(\"core-js/modules/es6.array.some\");\n\nrequire(\"core-js/modules/es6.array.index-of\");\n\nrequire(\"core-js/modules/es6.function.name\");\n\nrequire(\"core-js/modules/es6.object.freeze\");\n\n/**\n * Copyright (c) Tiny Technologies, Inc. All rights reserved.\n * Licensed under the LGPL or a commercial license.\n * For LGPL see License.txt in the project root for license information.\n * For commercial licenses see https://www.tiny.cloud/\n *\n * Version: 5.1.3 (2019-12-04)\n */\n(function (domGlobals) {\n  'use strict';\n\n  var Cell = function Cell(initial) {\n    var value = initial;\n\n    var get = function get() {\n      return value;\n    };\n\n    var set = function set(v) {\n      value = v;\n    };\n\n    var clone = function clone() {\n      return Cell(get());\n    };\n\n    return {\n      get: get,\n      set: set,\n      clone: clone\n    };\n  };\n\n  var noop = function noop() {};\n\n  var compose = function compose(fa, fb) {\n    return function () {\n      var args = [];\n\n      for (var _i = 0; _i < arguments.length; _i++) {\n        args[_i] = arguments[_i];\n      }\n\n      return fa(fb.apply(null, args));\n    };\n  };\n\n  var constant = function constant(value) {\n    return function () {\n      return value;\n    };\n  };\n\n  var identity = function identity(x) {\n    return x;\n  };\n\n  function curry(fn) {\n    var initialArgs = [];\n\n    for (var _i = 1; _i < arguments.length; _i++) {\n      initialArgs[_i - 1] = arguments[_i];\n    }\n\n    return function () {\n      var restArgs = [];\n\n      for (var _i = 0; _i < arguments.length; _i++) {\n        restArgs[_i] = arguments[_i];\n      }\n\n      var all = initialArgs.concat(restArgs);\n      return fn.apply(null, all);\n    };\n  }\n\n  var not = function not(f) {\n    return function () {\n      var args = [];\n\n      for (var _i = 0; _i < arguments.length; _i++) {\n        args[_i] = arguments[_i];\n      }\n\n      return !f.apply(null, args);\n    };\n  };\n\n  var die = function die(msg) {\n    return function () {\n      throw new Error(msg);\n    };\n  };\n\n  var never = constant(false);\n  var always = constant(true);\n\n  var none = function none() {\n    return NONE;\n  };\n\n  var NONE = function () {\n    var eq = function eq(o) {\n      return o.isNone();\n    };\n\n    var call = function call(thunk) {\n      return thunk();\n    };\n\n    var id = function id(n) {\n      return n;\n    };\n\n    var me = {\n      fold: function fold(n, s) {\n        return n();\n      },\n      is: never,\n      isSome: never,\n      isNone: always,\n      getOr: id,\n      getOrThunk: call,\n      getOrDie: function getOrDie(msg) {\n        throw new Error(msg || 'error: getOrDie called on none.');\n      },\n      getOrNull: constant(null),\n      getOrUndefined: constant(undefined),\n      or: id,\n      orThunk: call,\n      map: none,\n      each: noop,\n      bind: none,\n      exists: never,\n      forall: always,\n      filter: none,\n      equals: eq,\n      equals_: eq,\n      toArray: function toArray() {\n        return [];\n      },\n      toString: constant('none()')\n    };\n\n    if (Object.freeze) {\n      Object.freeze(me);\n    }\n\n    return me;\n  }();\n\n  var some = function some(a) {\n    var constant_a = constant(a);\n\n    var self = function self() {\n      return me;\n    };\n\n    var bind = function bind(f) {\n      return f(a);\n    };\n\n    var me = {\n      fold: function fold(n, s) {\n        return s(a);\n      },\n      is: function is(v) {\n        return a === v;\n      },\n      isSome: always,\n      isNone: never,\n      getOr: constant_a,\n      getOrThunk: constant_a,\n      getOrDie: constant_a,\n      getOrNull: constant_a,\n      getOrUndefined: constant_a,\n      or: self,\n      orThunk: self,\n      map: function map(f) {\n        return some(f(a));\n      },\n      each: function each(f) {\n        f(a);\n      },\n      bind: bind,\n      exists: bind,\n      forall: bind,\n      filter: function filter(f) {\n        return f(a) ? me : NONE;\n      },\n      toArray: function toArray() {\n        return [a];\n      },\n      toString: function toString() {\n        return 'some(' + a + ')';\n      },\n      equals: function equals(o) {\n        return o.is(a);\n      },\n      equals_: function equals_(o, elementEq) {\n        return o.fold(never, function (b) {\n          return elementEq(a, b);\n        });\n      }\n    };\n    return me;\n  };\n\n  var from = function from(value) {\n    return value === null || value === undefined ? NONE : some(value);\n  };\n\n  var Option = {\n    some: some,\n    none: none,\n    from: from\n  };\n  var global = tinymce.util.Tools.resolve('tinymce.PluginManager');\n\n  var typeOf = function typeOf(x) {\n    if (x === null) {\n      return 'null';\n    }\n\n    var t = typeof x;\n\n    if (t === 'object' && (Array.prototype.isPrototypeOf(x) || x.constructor && x.constructor.name === 'Array')) {\n      return 'array';\n    }\n\n    if (t === 'object' && (String.prototype.isPrototypeOf(x) || x.constructor && x.constructor.name === 'String')) {\n      return 'string';\n    }\n\n    return t;\n  };\n\n  var isType = function isType(type) {\n    return function (value) {\n      return typeOf(value) === type;\n    };\n  };\n\n  var isString = isType('string');\n  var isArray = isType('array');\n  var isBoolean = isType('boolean');\n  var isFunction = isType('function');\n  var isNumber = isType('number');\n  var nativeSlice = Array.prototype.slice;\n  var nativeIndexOf = Array.prototype.indexOf;\n  var nativePush = Array.prototype.push;\n\n  var rawIndexOf = function rawIndexOf(ts, t) {\n    return nativeIndexOf.call(ts, t);\n  };\n\n  var contains = function contains(xs, x) {\n    return rawIndexOf(xs, x) > -1;\n  };\n\n  var exists = function exists(xs, pred) {\n    for (var i = 0, len = xs.length; i < len; i++) {\n      var x = xs[i];\n\n      if (pred(x, i)) {\n        return true;\n      }\n    }\n\n    return false;\n  };\n\n  var map = function map(xs, f) {\n    var len = xs.length;\n    var r = new Array(len);\n\n    for (var i = 0; i < len; i++) {\n      var x = xs[i];\n      r[i] = f(x, i);\n    }\n\n    return r;\n  };\n\n  var each = function each(xs, f) {\n    for (var i = 0, len = xs.length; i < len; i++) {\n      var x = xs[i];\n      f(x, i);\n    }\n  };\n\n  var eachr = function eachr(xs, f) {\n    for (var i = xs.length - 1; i >= 0; i--) {\n      var x = xs[i];\n      f(x, i);\n    }\n  };\n\n  var filter = function filter(xs, pred) {\n    var r = [];\n\n    for (var i = 0, len = xs.length; i < len; i++) {\n      var x = xs[i];\n\n      if (pred(x, i)) {\n        r.push(x);\n      }\n    }\n\n    return r;\n  };\n\n  var foldr = function foldr(xs, f, acc) {\n    eachr(xs, function (x) {\n      acc = f(acc, x);\n    });\n    return acc;\n  };\n\n  var foldl = function foldl(xs, f, acc) {\n    each(xs, function (x) {\n      acc = f(acc, x);\n    });\n    return acc;\n  };\n\n  var find = function find(xs, pred) {\n    for (var i = 0, len = xs.length; i < len; i++) {\n      var x = xs[i];\n\n      if (pred(x, i)) {\n        return Option.some(x);\n      }\n    }\n\n    return Option.none();\n  };\n\n  var findIndex = function findIndex(xs, pred) {\n    for (var i = 0, len = xs.length; i < len; i++) {\n      var x = xs[i];\n\n      if (pred(x, i)) {\n        return Option.some(i);\n      }\n    }\n\n    return Option.none();\n  };\n\n  var flatten = function flatten(xs) {\n    var r = [];\n\n    for (var i = 0, len = xs.length; i < len; ++i) {\n      if (!isArray(xs[i])) {\n        throw new Error('Arr.flatten item ' + i + ' was not an array, input: ' + xs);\n      }\n\n      nativePush.apply(r, xs[i]);\n    }\n\n    return r;\n  };\n\n  var bind = function bind(xs, f) {\n    var output = map(xs, f);\n    return flatten(output);\n  };\n\n  var forall = function forall(xs, pred) {\n    for (var i = 0, len = xs.length; i < len; ++i) {\n      var x = xs[i];\n\n      if (pred(x, i) !== true) {\n        return false;\n      }\n    }\n\n    return true;\n  };\n\n  var reverse = function reverse(xs) {\n    var r = nativeSlice.call(xs, 0);\n    r.reverse();\n    return r;\n  };\n\n  var last = function last(xs) {\n    return xs.length === 0 ? Option.none() : Option.some(xs[xs.length - 1]);\n  };\n\n  var from$1 = isFunction(Array.from) ? Array.from : function (x) {\n    return nativeSlice.call(x);\n  };\n  var keys = Object.keys;\n  var hasOwnProperty = Object.hasOwnProperty;\n\n  var each$1 = function each$1(obj, f) {\n    var props = keys(obj);\n\n    for (var k = 0, len = props.length; k < len; k++) {\n      var i = props[k];\n      var x = obj[i];\n      f(x, i);\n    }\n  };\n\n  var map$1 = function map$1(obj, f) {\n    return tupleMap(obj, function (x, i) {\n      return {\n        k: i,\n        v: f(x, i)\n      };\n    });\n  };\n\n  var tupleMap = function tupleMap(obj, f) {\n    var r = {};\n    each$1(obj, function (x, i) {\n      var tuple = f(x, i);\n      r[tuple.k] = tuple.v;\n    });\n    return r;\n  };\n\n  var get = function get(obj, key) {\n    return has(obj, key) ? Option.from(obj[key]) : Option.none();\n  };\n\n  var has = function has(obj, key) {\n    return hasOwnProperty.call(obj, key);\n  };\n\n  var Immutable = function Immutable() {\n    var fields = [];\n\n    for (var _i = 0; _i < arguments.length; _i++) {\n      fields[_i] = arguments[_i];\n    }\n\n    return function () {\n      var values = [];\n\n      for (var _i = 0; _i < arguments.length; _i++) {\n        values[_i] = arguments[_i];\n      }\n\n      if (fields.length !== values.length) {\n        throw new Error('Wrong number of arguments to struct. Expected \"[' + fields.length + ']\", got ' + values.length + ' arguments');\n      }\n\n      var struct = {};\n      each(fields, function (name, i) {\n        struct[name] = constant(values[i]);\n      });\n      return struct;\n    };\n  };\n\n  var sort = function sort(arr) {\n    return arr.slice(0).sort();\n  };\n\n  var reqMessage = function reqMessage(required, keys) {\n    throw new Error('All required keys (' + sort(required).join(', ') + ') were not specified. Specified keys were: ' + sort(keys).join(', ') + '.');\n  };\n\n  var unsuppMessage = function unsuppMessage(unsupported) {\n    throw new Error('Unsupported keys for object: ' + sort(unsupported).join(', '));\n  };\n\n  var validateStrArr = function validateStrArr(label, array) {\n    if (!isArray(array)) {\n      throw new Error('The ' + label + ' fields must be an array. Was: ' + array + '.');\n    }\n\n    each(array, function (a) {\n      if (!isString(a)) {\n        throw new Error('The value ' + a + ' in the ' + label + ' fields was not a string.');\n      }\n    });\n  };\n\n  var invalidTypeMessage = function invalidTypeMessage(incorrect, type) {\n    throw new Error('All values need to be of type: ' + type + '. Keys (' + sort(incorrect).join(', ') + ') were not.');\n  };\n\n  var checkDupes = function checkDupes(everything) {\n    var sorted = sort(everything);\n    var dupe = find(sorted, function (s, i) {\n      return i < sorted.length - 1 && s === sorted[i + 1];\n    });\n    dupe.each(function (d) {\n      throw new Error('The field: ' + d + ' occurs more than once in the combined fields: [' + sorted.join(', ') + '].');\n    });\n  };\n\n  var MixedBag = function MixedBag(required, optional) {\n    var everything = required.concat(optional);\n\n    if (everything.length === 0) {\n      throw new Error('You must specify at least one required or optional field.');\n    }\n\n    validateStrArr('required', required);\n    validateStrArr('optional', optional);\n    checkDupes(everything);\n    return function (obj) {\n      var keys$1 = keys(obj);\n      var allReqd = forall(required, function (req) {\n        return contains(keys$1, req);\n      });\n\n      if (!allReqd) {\n        reqMessage(required, keys$1);\n      }\n\n      var unsupported = filter(keys$1, function (key) {\n        return !contains(everything, key);\n      });\n\n      if (unsupported.length > 0) {\n        unsuppMessage(unsupported);\n      }\n\n      var r = {};\n      each(required, function (req) {\n        r[req] = constant(obj[req]);\n      });\n      each(optional, function (opt) {\n        r[opt] = constant(Object.prototype.hasOwnProperty.call(obj, opt) ? Option.some(obj[opt]) : Option.none());\n      });\n      return r;\n    };\n  };\n\n  var ATTRIBUTE = domGlobals.Node.ATTRIBUTE_NODE;\n  var CDATA_SECTION = domGlobals.Node.CDATA_SECTION_NODE;\n  var COMMENT = domGlobals.Node.COMMENT_NODE;\n  var DOCUMENT = domGlobals.Node.DOCUMENT_NODE;\n  var DOCUMENT_TYPE = domGlobals.Node.DOCUMENT_TYPE_NODE;\n  var DOCUMENT_FRAGMENT = domGlobals.Node.DOCUMENT_FRAGMENT_NODE;\n  var ELEMENT = domGlobals.Node.ELEMENT_NODE;\n  var TEXT = domGlobals.Node.TEXT_NODE;\n  var PROCESSING_INSTRUCTION = domGlobals.Node.PROCESSING_INSTRUCTION_NODE;\n  var ENTITY_REFERENCE = domGlobals.Node.ENTITY_REFERENCE_NODE;\n  var ENTITY = domGlobals.Node.ENTITY_NODE;\n  var NOTATION = domGlobals.Node.NOTATION_NODE;\n  var Global = typeof domGlobals.window !== 'undefined' ? domGlobals.window : Function('return this;')();\n\n  var name = function name(element) {\n    var r = element.dom().nodeName;\n    return r.toLowerCase();\n  };\n\n  var type = function type(element) {\n    return element.dom().nodeType;\n  };\n\n  var isType$1 = function isType$1(t) {\n    return function (element) {\n      return type(element) === t;\n    };\n  };\n\n  var isComment = function isComment(element) {\n    return type(element) === COMMENT || name(element) === '#comment';\n  };\n\n  var isElement = isType$1(ELEMENT);\n  var isText = isType$1(TEXT);\n\n  var rawSet = function rawSet(dom, key, value) {\n    if (isString(value) || isBoolean(value) || isNumber(value)) {\n      dom.setAttribute(key, value + '');\n    } else {\n      domGlobals.console.error('Invalid call to Attr.set. Key ', key, ':: Value ', value, ':: Element ', dom);\n      throw new Error('Attribute value was not simple');\n    }\n  };\n\n  var set = function set(element, key, value) {\n    rawSet(element.dom(), key, value);\n  };\n\n  var setAll = function setAll(element, attrs) {\n    var dom = element.dom();\n    each$1(attrs, function (v, k) {\n      rawSet(dom, k, v);\n    });\n  };\n\n  var get$1 = function get$1(element, key) {\n    var v = element.dom().getAttribute(key);\n    return v === null ? undefined : v;\n  };\n\n  var has$1 = function has$1(element, key) {\n    var dom = element.dom();\n    return dom && dom.hasAttribute ? dom.hasAttribute(key) : false;\n  };\n\n  var remove = function remove(element, key) {\n    element.dom().removeAttribute(key);\n  };\n\n  var clone = function clone(element) {\n    return foldl(element.dom().attributes, function (acc, attr) {\n      acc[attr.name] = attr.value;\n      return acc;\n    }, {});\n  };\n\n  var checkRange = function checkRange(str, substr, start) {\n    if (substr === '') {\n      return true;\n    }\n\n    if (str.length < substr.length) {\n      return false;\n    }\n\n    var x = str.substr(start, start + substr.length);\n    return x === substr;\n  };\n\n  var contains$1 = function contains$1(str, substr) {\n    return str.indexOf(substr) !== -1;\n  };\n\n  var startsWith = function startsWith(str, prefix) {\n    return checkRange(str, prefix, 0);\n  };\n\n  var endsWith = function endsWith(str, suffix) {\n    return checkRange(str, suffix, str.length - suffix.length);\n  };\n\n  var trim = function trim(str) {\n    return str.replace(/^\\s+|\\s+$/g, '');\n  };\n\n  var isSupported = function isSupported(dom) {\n    return dom.style !== undefined && isFunction(dom.style.getPropertyValue);\n  };\n\n  var cached = function cached(f) {\n    var called = false;\n    var r;\n    return function () {\n      var args = [];\n\n      for (var _i = 0; _i < arguments.length; _i++) {\n        args[_i] = arguments[_i];\n      }\n\n      if (!called) {\n        called = true;\n        r = f.apply(null, args);\n      }\n\n      return r;\n    };\n  };\n\n  var fromHtml = function fromHtml(html, scope) {\n    var doc = scope || domGlobals.document;\n    var div = doc.createElement('div');\n    div.innerHTML = html;\n\n    if (!div.hasChildNodes() || div.childNodes.length > 1) {\n      domGlobals.console.error('HTML does not have a single root node', html);\n      throw new Error('HTML must have a single root node');\n    }\n\n    return fromDom(div.childNodes[0]);\n  };\n\n  var fromTag = function fromTag(tag, scope) {\n    var doc = scope || domGlobals.document;\n    var node = doc.createElement(tag);\n    return fromDom(node);\n  };\n\n  var fromText = function fromText(text, scope) {\n    var doc = scope || domGlobals.document;\n    var node = doc.createTextNode(text);\n    return fromDom(node);\n  };\n\n  var fromDom = function fromDom(node) {\n    if (node === null || node === undefined) {\n      throw new Error('Node cannot be null or undefined');\n    }\n\n    return {\n      dom: constant(node)\n    };\n  };\n\n  var fromPoint = function fromPoint(docElm, x, y) {\n    var doc = docElm.dom();\n    return Option.from(doc.elementFromPoint(x, y)).map(fromDom);\n  };\n\n  var Element = {\n    fromHtml: fromHtml,\n    fromTag: fromTag,\n    fromText: fromText,\n    fromDom: fromDom,\n    fromPoint: fromPoint\n  };\n\n  var inBody = function inBody(element) {\n    var dom = isText(element) ? element.dom().parentNode : element.dom();\n    return dom !== undefined && dom !== null && dom.ownerDocument.body.contains(dom);\n  };\n\n  var body = cached(function () {\n    return getBody(Element.fromDom(domGlobals.document));\n  });\n\n  var getBody = function getBody(doc) {\n    var b = doc.dom().body;\n\n    if (b === null || b === undefined) {\n      throw new Error('Body is not available yet');\n    }\n\n    return Element.fromDom(b);\n  };\n\n  var internalSet = function internalSet(dom, property, value) {\n    if (!isString(value)) {\n      domGlobals.console.error('Invalid call to CSS.set. Property ', property, ':: Value ', value, ':: Element ', dom);\n      throw new Error('CSS value must be a string: ' + value);\n    }\n\n    if (isSupported(dom)) {\n      dom.style.setProperty(property, value);\n    }\n  };\n\n  var internalRemove = function internalRemove(dom, property) {\n    if (isSupported(dom)) {\n      dom.style.removeProperty(property);\n    }\n  };\n\n  var set$1 = function set$1(element, property, value) {\n    var dom = element.dom();\n    internalSet(dom, property, value);\n  };\n\n  var setAll$1 = function setAll$1(element, css) {\n    var dom = element.dom();\n    each$1(css, function (v, k) {\n      internalSet(dom, k, v);\n    });\n  };\n\n  var get$2 = function get$2(element, property) {\n    var dom = element.dom();\n    var styles = domGlobals.window.getComputedStyle(dom);\n    var r = styles.getPropertyValue(property);\n    var v = r === '' && !inBody(element) ? getUnsafeProperty(dom, property) : r;\n    return v === null ? undefined : v;\n  };\n\n  var getUnsafeProperty = function getUnsafeProperty(dom, property) {\n    return isSupported(dom) ? dom.style.getPropertyValue(property) : '';\n  };\n\n  var getRaw = function getRaw(element, property) {\n    var dom = element.dom();\n    var raw = getUnsafeProperty(dom, property);\n    return Option.from(raw).filter(function (r) {\n      return r.length > 0;\n    });\n  };\n\n  var remove$1 = function remove$1(element, property) {\n    var dom = element.dom();\n    internalRemove(dom, property);\n\n    if (has$1(element, 'style') && trim(get$1(element, 'style')) === '') {\n      remove(element, 'style');\n    }\n  };\n\n  var copy = function copy(source, target) {\n    var sourceDom = source.dom();\n    var targetDom = target.dom();\n\n    if (isSupported(sourceDom) && isSupported(targetDom)) {\n      targetDom.style.cssText = sourceDom.style.cssText;\n    }\n  };\n\n  var compareDocumentPosition = function compareDocumentPosition(a, b, match) {\n    return (a.compareDocumentPosition(b) & match) !== 0;\n  };\n\n  var documentPositionPreceding = function documentPositionPreceding(a, b) {\n    return compareDocumentPosition(a, b, domGlobals.Node.DOCUMENT_POSITION_PRECEDING);\n  };\n\n  var documentPositionContainedBy = function documentPositionContainedBy(a, b) {\n    return compareDocumentPosition(a, b, domGlobals.Node.DOCUMENT_POSITION_CONTAINED_BY);\n  };\n\n  var Node = {\n    documentPositionPreceding: documentPositionPreceding,\n    documentPositionContainedBy: documentPositionContainedBy\n  };\n\n  var _assign = function __assign() {\n    _assign = Object.assign || function __assign(t) {\n      for (var s, i = 1, n = arguments.length; i < n; i++) {\n        s = arguments[i];\n\n        for (var p in s) {\n          if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n        }\n      }\n\n      return t;\n    };\n\n    return _assign.apply(this, arguments);\n  };\n\n  var firstMatch = function firstMatch(regexes, s) {\n    for (var i = 0; i < regexes.length; i++) {\n      var x = regexes[i];\n\n      if (x.test(s)) {\n        return x;\n      }\n    }\n\n    return undefined;\n  };\n\n  var find$1 = function find$1(regexes, agent) {\n    var r = firstMatch(regexes, agent);\n\n    if (!r) {\n      return {\n        major: 0,\n        minor: 0\n      };\n    }\n\n    var group = function group(i) {\n      return Number(agent.replace(r, '$' + i));\n    };\n\n    return nu(group(1), group(2));\n  };\n\n  var detect = function detect(versionRegexes, agent) {\n    var cleanedAgent = String(agent).toLowerCase();\n\n    if (versionRegexes.length === 0) {\n      return unknown();\n    }\n\n    return find$1(versionRegexes, cleanedAgent);\n  };\n\n  var unknown = function unknown() {\n    return nu(0, 0);\n  };\n\n  var nu = function nu(major, minor) {\n    return {\n      major: major,\n      minor: minor\n    };\n  };\n\n  var Version = {\n    nu: nu,\n    detect: detect,\n    unknown: unknown\n  };\n  var edge = 'Edge';\n  var chrome = 'Chrome';\n  var ie = 'IE';\n  var opera = 'Opera';\n  var firefox = 'Firefox';\n  var safari = 'Safari';\n\n  var isBrowser = function isBrowser(name, current) {\n    return function () {\n      return current === name;\n    };\n  };\n\n  var unknown$1 = function unknown$1() {\n    return nu$1({\n      current: undefined,\n      version: Version.unknown()\n    });\n  };\n\n  var nu$1 = function nu$1(info) {\n    var current = info.current;\n    var version = info.version;\n    return {\n      current: current,\n      version: version,\n      isEdge: isBrowser(edge, current),\n      isChrome: isBrowser(chrome, current),\n      isIE: isBrowser(ie, current),\n      isOpera: isBrowser(opera, current),\n      isFirefox: isBrowser(firefox, current),\n      isSafari: isBrowser(safari, current)\n    };\n  };\n\n  var Browser = {\n    unknown: unknown$1,\n    nu: nu$1,\n    edge: constant(edge),\n    chrome: constant(chrome),\n    ie: constant(ie),\n    opera: constant(opera),\n    firefox: constant(firefox),\n    safari: constant(safari)\n  };\n  var windows = 'Windows';\n  var ios = 'iOS';\n  var android = 'Android';\n  var linux = 'Linux';\n  var osx = 'OSX';\n  var solaris = 'Solaris';\n  var freebsd = 'FreeBSD';\n\n  var isOS = function isOS(name, current) {\n    return function () {\n      return current === name;\n    };\n  };\n\n  var unknown$2 = function unknown$2() {\n    return nu$2({\n      current: undefined,\n      version: Version.unknown()\n    });\n  };\n\n  var nu$2 = function nu$2(info) {\n    var current = info.current;\n    var version = info.version;\n    return {\n      current: current,\n      version: version,\n      isWindows: isOS(windows, current),\n      isiOS: isOS(ios, current),\n      isAndroid: isOS(android, current),\n      isOSX: isOS(osx, current),\n      isLinux: isOS(linux, current),\n      isSolaris: isOS(solaris, current),\n      isFreeBSD: isOS(freebsd, current)\n    };\n  };\n\n  var OperatingSystem = {\n    unknown: unknown$2,\n    nu: nu$2,\n    windows: constant(windows),\n    ios: constant(ios),\n    android: constant(android),\n    linux: constant(linux),\n    osx: constant(osx),\n    solaris: constant(solaris),\n    freebsd: constant(freebsd)\n  };\n\n  var DeviceType = function DeviceType(os, browser, userAgent, mediaMatch) {\n    var isiPad = os.isiOS() && /ipad/i.test(userAgent) === true;\n    var isiPhone = os.isiOS() && !isiPad;\n    var isMobile = os.isiOS() || os.isAndroid();\n    var isTouch = isMobile || mediaMatch('(pointer:coarse)');\n    var isTablet = isiPad || !isiPhone && isMobile && mediaMatch('(min-device-width:768px)');\n    var isPhone = isiPhone || isMobile && !isTablet;\n    var iOSwebview = browser.isSafari() && os.isiOS() && /safari/i.test(userAgent) === false;\n    var isDesktop = !isPhone && !isTablet && !iOSwebview;\n    return {\n      isiPad: constant(isiPad),\n      isiPhone: constant(isiPhone),\n      isTablet: constant(isTablet),\n      isPhone: constant(isPhone),\n      isTouch: constant(isTouch),\n      isAndroid: os.isAndroid,\n      isiOS: os.isiOS,\n      isWebView: constant(iOSwebview),\n      isDesktop: constant(isDesktop)\n    };\n  };\n\n  var detect$1 = function detect$1(candidates, userAgent) {\n    var agent = String(userAgent).toLowerCase();\n    return find(candidates, function (candidate) {\n      return candidate.search(agent);\n    });\n  };\n\n  var detectBrowser = function detectBrowser(browsers, userAgent) {\n    return detect$1(browsers, userAgent).map(function (browser) {\n      var version = Version.detect(browser.versionRegexes, userAgent);\n      return {\n        current: browser.name,\n        version: version\n      };\n    });\n  };\n\n  var detectOs = function detectOs(oses, userAgent) {\n    return detect$1(oses, userAgent).map(function (os) {\n      var version = Version.detect(os.versionRegexes, userAgent);\n      return {\n        current: os.name,\n        version: version\n      };\n    });\n  };\n\n  var UaString = {\n    detectBrowser: detectBrowser,\n    detectOs: detectOs\n  };\n  var normalVersionRegex = /.*?version\\/\\ ?([0-9]+)\\.([0-9]+).*/;\n\n  var checkContains = function checkContains(target) {\n    return function (uastring) {\n      return contains$1(uastring, target);\n    };\n  };\n\n  var browsers = [{\n    name: 'Edge',\n    versionRegexes: [/.*?edge\\/ ?([0-9]+)\\.([0-9]+)$/],\n    search: function search(uastring) {\n      return contains$1(uastring, 'edge/') && contains$1(uastring, 'chrome') && contains$1(uastring, 'safari') && contains$1(uastring, 'applewebkit');\n    }\n  }, {\n    name: 'Chrome',\n    versionRegexes: [/.*?chrome\\/([0-9]+)\\.([0-9]+).*/, normalVersionRegex],\n    search: function search(uastring) {\n      return contains$1(uastring, 'chrome') && !contains$1(uastring, 'chromeframe');\n    }\n  }, {\n    name: 'IE',\n    versionRegexes: [/.*?msie\\ ?([0-9]+)\\.([0-9]+).*/, /.*?rv:([0-9]+)\\.([0-9]+).*/],\n    search: function search(uastring) {\n      return contains$1(uastring, 'msie') || contains$1(uastring, 'trident');\n    }\n  }, {\n    name: 'Opera',\n    versionRegexes: [normalVersionRegex, /.*?opera\\/([0-9]+)\\.([0-9]+).*/],\n    search: checkContains('opera')\n  }, {\n    name: 'Firefox',\n    versionRegexes: [/.*?firefox\\/\\ ?([0-9]+)\\.([0-9]+).*/],\n    search: checkContains('firefox')\n  }, {\n    name: 'Safari',\n    versionRegexes: [normalVersionRegex, /.*?cpu os ([0-9]+)_([0-9]+).*/],\n    search: function search(uastring) {\n      return (contains$1(uastring, 'safari') || contains$1(uastring, 'mobile/')) && contains$1(uastring, 'applewebkit');\n    }\n  }];\n  var oses = [{\n    name: 'Windows',\n    search: checkContains('win'),\n    versionRegexes: [/.*?windows\\ nt\\ ?([0-9]+)\\.([0-9]+).*/]\n  }, {\n    name: 'iOS',\n    search: function search(uastring) {\n      return contains$1(uastring, 'iphone') || contains$1(uastring, 'ipad');\n    },\n    versionRegexes: [/.*?version\\/\\ ?([0-9]+)\\.([0-9]+).*/, /.*cpu os ([0-9]+)_([0-9]+).*/, /.*cpu iphone os ([0-9]+)_([0-9]+).*/]\n  }, {\n    name: 'Android',\n    search: checkContains('android'),\n    versionRegexes: [/.*?android\\ ?([0-9]+)\\.([0-9]+).*/]\n  }, {\n    name: 'OSX',\n    search: checkContains('os x'),\n    versionRegexes: [/.*?os\\ x\\ ?([0-9]+)_([0-9]+).*/]\n  }, {\n    name: 'Linux',\n    search: checkContains('linux'),\n    versionRegexes: []\n  }, {\n    name: 'Solaris',\n    search: checkContains('sunos'),\n    versionRegexes: []\n  }, {\n    name: 'FreeBSD',\n    search: checkContains('freebsd'),\n    versionRegexes: []\n  }];\n  var PlatformInfo = {\n    browsers: constant(browsers),\n    oses: constant(oses)\n  };\n\n  var detect$2 = function detect$2(userAgent, mediaMatch) {\n    var browsers = PlatformInfo.browsers();\n    var oses = PlatformInfo.oses();\n    var browser = UaString.detectBrowser(browsers, userAgent).fold(Browser.unknown, Browser.nu);\n    var os = UaString.detectOs(oses, userAgent).fold(OperatingSystem.unknown, OperatingSystem.nu);\n    var deviceType = DeviceType(os, browser, userAgent, mediaMatch);\n    return {\n      browser: browser,\n      os: os,\n      deviceType: deviceType\n    };\n  };\n\n  var PlatformDetection = {\n    detect: detect$2\n  };\n\n  var mediaMatch = function mediaMatch(query) {\n    return domGlobals.window.matchMedia(query).matches;\n  };\n\n  var platform = Cell(PlatformDetection.detect(domGlobals.navigator.userAgent, mediaMatch));\n\n  var detect$3 = function detect$3() {\n    return platform.get();\n  };\n\n  var ELEMENT$1 = ELEMENT;\n  var DOCUMENT$1 = DOCUMENT;\n\n  var is = function is(element, selector) {\n    var dom = element.dom();\n\n    if (dom.nodeType !== ELEMENT$1) {\n      return false;\n    } else {\n      var elem = dom;\n\n      if (elem.matches !== undefined) {\n        return elem.matches(selector);\n      } else if (elem.msMatchesSelector !== undefined) {\n        return elem.msMatchesSelector(selector);\n      } else if (elem.webkitMatchesSelector !== undefined) {\n        return elem.webkitMatchesSelector(selector);\n      } else if (elem.mozMatchesSelector !== undefined) {\n        return elem.mozMatchesSelector(selector);\n      } else {\n        throw new Error('Browser lacks native selectors');\n      }\n    }\n  };\n\n  var bypassSelector = function bypassSelector(dom) {\n    return dom.nodeType !== ELEMENT$1 && dom.nodeType !== DOCUMENT$1 || dom.childElementCount === 0;\n  };\n\n  var all = function all(selector, scope) {\n    var base = scope === undefined ? domGlobals.document : scope.dom();\n    return bypassSelector(base) ? [] : map(base.querySelectorAll(selector), Element.fromDom);\n  };\n\n  var one = function one(selector, scope) {\n    var base = scope === undefined ? domGlobals.document : scope.dom();\n    return bypassSelector(base) ? Option.none() : Option.from(base.querySelector(selector)).map(Element.fromDom);\n  };\n\n  var eq = function eq(e1, e2) {\n    return e1.dom() === e2.dom();\n  };\n\n  var regularContains = function regularContains(e1, e2) {\n    var d1 = e1.dom();\n    var d2 = e2.dom();\n    return d1 === d2 ? false : d1.contains(d2);\n  };\n\n  var ieContains = function ieContains(e1, e2) {\n    return Node.documentPositionContainedBy(e1.dom(), e2.dom());\n  };\n\n  var browser = detect$3().browser;\n  var contains$2 = browser.isIE() ? ieContains : regularContains;\n  var is$1 = is;\n\n  var owner = function owner(element) {\n    return Element.fromDom(element.dom().ownerDocument);\n  };\n\n  var defaultView = function defaultView(element) {\n    return Element.fromDom(element.dom().ownerDocument.defaultView);\n  };\n\n  var parent = function parent(element) {\n    return Option.from(element.dom().parentNode).map(Element.fromDom);\n  };\n\n  var parents = function parents(element, isRoot) {\n    var stop = isFunction(isRoot) ? isRoot : never;\n    var dom = element.dom();\n    var ret = [];\n\n    while (dom.parentNode !== null && dom.parentNode !== undefined) {\n      var rawParent = dom.parentNode;\n      var p = Element.fromDom(rawParent);\n      ret.push(p);\n\n      if (stop(p) === true) {\n        break;\n      } else {\n        dom = rawParent;\n      }\n    }\n\n    return ret;\n  };\n\n  var prevSibling = function prevSibling(element) {\n    return Option.from(element.dom().previousSibling).map(Element.fromDom);\n  };\n\n  var nextSibling = function nextSibling(element) {\n    return Option.from(element.dom().nextSibling).map(Element.fromDom);\n  };\n\n  var children = function children(element) {\n    return map(element.dom().childNodes, Element.fromDom);\n  };\n\n  var child = function child(element, index) {\n    var cs = element.dom().childNodes;\n    return Option.from(cs[index]).map(Element.fromDom);\n  };\n\n  var firstChild = function firstChild(element) {\n    return child(element, 0);\n  };\n\n  var spot = Immutable('element', 'offset');\n\n  var before = function before(marker, element) {\n    var parent$1 = parent(marker);\n    parent$1.each(function (v) {\n      v.dom().insertBefore(element.dom(), marker.dom());\n    });\n  };\n\n  var after = function after(marker, element) {\n    var sibling = nextSibling(marker);\n    sibling.fold(function () {\n      var parent$1 = parent(marker);\n      parent$1.each(function (v) {\n        append(v, element);\n      });\n    }, function (v) {\n      before(v, element);\n    });\n  };\n\n  var prepend = function prepend(parent, element) {\n    var firstChild$1 = firstChild(parent);\n    firstChild$1.fold(function () {\n      append(parent, element);\n    }, function (v) {\n      parent.dom().insertBefore(element.dom(), v.dom());\n    });\n  };\n\n  var append = function append(parent, element) {\n    parent.dom().appendChild(element.dom());\n  };\n\n  var wrap = function wrap(element, wrapper) {\n    before(element, wrapper);\n    append(wrapper, element);\n  };\n\n  var before$1 = function before$1(marker, elements) {\n    each(elements, function (x) {\n      before(marker, x);\n    });\n  };\n\n  var after$1 = function after$1(marker, elements) {\n    each(elements, function (x, i) {\n      var e = i === 0 ? marker : elements[i - 1];\n      after(e, x);\n    });\n  };\n\n  var append$1 = function append$1(parent, elements) {\n    each(elements, function (x) {\n      append(parent, x);\n    });\n  };\n\n  var empty = function empty(element) {\n    element.dom().textContent = '';\n    each(children(element), function (rogue) {\n      remove$2(rogue);\n    });\n  };\n\n  var remove$2 = function remove$2(element) {\n    var dom = element.dom();\n\n    if (dom.parentNode !== null) {\n      dom.parentNode.removeChild(dom);\n    }\n  };\n\n  var unwrap = function unwrap(wrapper) {\n    var children$1 = children(wrapper);\n\n    if (children$1.length > 0) {\n      before$1(wrapper, children$1);\n    }\n\n    remove$2(wrapper);\n  };\n\n  var dimension = Immutable('width', 'height');\n  var dimensions = Immutable('width', 'height');\n  var grid = Immutable('rows', 'columns');\n  var address = Immutable('row', 'column');\n  var coords = Immutable('x', 'y');\n  var detail = Immutable('element', 'rowspan', 'colspan');\n  var detailnew = Immutable('element', 'rowspan', 'colspan', 'isNew');\n  var extended = Immutable('element', 'rowspan', 'colspan', 'row', 'column');\n  var rowdata = Immutable('element', 'cells', 'section');\n  var elementnew = Immutable('element', 'isNew');\n  var rowdatanew = Immutable('element', 'cells', 'section', 'isNew');\n  var rowcells = Immutable('cells', 'section');\n  var rowdetails = Immutable('details', 'section');\n  var bounds = Immutable('startRow', 'startCol', 'finishRow', 'finishCol');\n\n  var ancestors = function ancestors(scope, predicate, isRoot) {\n    return filter(parents(scope, isRoot), predicate);\n  };\n\n  var children$1 = function children$1(scope, predicate) {\n    return filter(children(scope), predicate);\n  };\n\n  var descendants = function descendants(scope, predicate) {\n    var result = [];\n    each(children(scope), function (x) {\n      if (predicate(x)) {\n        result = result.concat([x]);\n      }\n\n      result = result.concat(descendants(x, predicate));\n    });\n    return result;\n  };\n\n  var ancestors$1 = function ancestors$1(scope, selector, isRoot) {\n    return ancestors(scope, function (e) {\n      return is(e, selector);\n    }, isRoot);\n  };\n\n  var children$2 = function children$2(scope, selector) {\n    return children$1(scope, function (e) {\n      return is(e, selector);\n    });\n  };\n\n  var descendants$1 = function descendants$1(scope, selector) {\n    return all(selector, scope);\n  };\n\n  function ClosestOrAncestor(is, ancestor, scope, a, isRoot) {\n    return is(scope, a) ? Option.some(scope) : isFunction(isRoot) && isRoot(scope) ? Option.none() : ancestor(scope, a, isRoot);\n  }\n\n  var ancestor = function ancestor(scope, predicate, isRoot) {\n    var element = scope.dom();\n    var stop = isFunction(isRoot) ? isRoot : constant(false);\n\n    while (element.parentNode) {\n      element = element.parentNode;\n      var el = Element.fromDom(element);\n\n      if (predicate(el)) {\n        return Option.some(el);\n      } else if (stop(el)) {\n        break;\n      }\n    }\n\n    return Option.none();\n  };\n\n  var closest = function closest(scope, predicate, isRoot) {\n    var is = function is(s, test) {\n      return test(s);\n    };\n\n    return ClosestOrAncestor(is, ancestor, scope, predicate, isRoot);\n  };\n\n  var child$1 = function child$1(scope, predicate) {\n    var pred = function pred(node) {\n      return predicate(Element.fromDom(node));\n    };\n\n    var result = find(scope.dom().childNodes, pred);\n    return result.map(Element.fromDom);\n  };\n\n  var descendant = function descendant(scope, predicate) {\n    var descend = function descend(node) {\n      for (var i = 0; i < node.childNodes.length; i++) {\n        var child_1 = Element.fromDom(node.childNodes[i]);\n\n        if (predicate(child_1)) {\n          return Option.some(child_1);\n        }\n\n        var res = descend(node.childNodes[i]);\n\n        if (res.isSome()) {\n          return res;\n        }\n      }\n\n      return Option.none();\n    };\n\n    return descend(scope.dom());\n  };\n\n  var ancestor$1 = function ancestor$1(scope, selector, isRoot) {\n    return ancestor(scope, function (e) {\n      return is(e, selector);\n    }, isRoot);\n  };\n\n  var child$2 = function child$2(scope, selector) {\n    return child$1(scope, function (e) {\n      return is(e, selector);\n    });\n  };\n\n  var descendant$1 = function descendant$1(scope, selector) {\n    return one(selector, scope);\n  };\n\n  var closest$1 = function closest$1(scope, selector, isRoot) {\n    return ClosestOrAncestor(is, ancestor$1, scope, selector, isRoot);\n  };\n\n  var firstLayer = function firstLayer(scope, selector) {\n    return filterFirstLayer(scope, selector, constant(true));\n  };\n\n  var filterFirstLayer = function filterFirstLayer(scope, selector, predicate) {\n    return bind(children(scope), function (x) {\n      return is(x, selector) ? predicate(x) ? [x] : [] : filterFirstLayer(x, selector, predicate);\n    });\n  };\n\n  var LayerSelector = {\n    firstLayer: firstLayer,\n    filterFirstLayer: filterFirstLayer\n  };\n\n  var lookup = function lookup(tags, element, isRoot) {\n    if (isRoot === void 0) {\n      isRoot = never;\n    }\n\n    if (isRoot(element)) {\n      return Option.none();\n    }\n\n    if (contains(tags, name(element))) {\n      return Option.some(element);\n    }\n\n    var isRootOrUpperTable = function isRootOrUpperTable(elm) {\n      return is(elm, 'table') || isRoot(elm);\n    };\n\n    return ancestor$1(element, tags.join(','), isRootOrUpperTable);\n  };\n\n  var cell = function cell(element, isRoot) {\n    return lookup(['td', 'th'], element, isRoot);\n  };\n\n  var cells = function cells(ancestor) {\n    return LayerSelector.firstLayer(ancestor, 'th,td');\n  };\n\n  var notCell = function notCell(element, isRoot) {\n    return lookup(['caption', 'tr', 'tbody', 'tfoot', 'thead'], element, isRoot);\n  };\n\n  var neighbours = function neighbours(selector, element) {\n    return parent(element).map(function (parent) {\n      return children$2(parent, selector);\n    });\n  };\n\n  var neighbourCells = curry(neighbours, 'th,td');\n  var neighbourRows = curry(neighbours, 'tr');\n\n  var firstCell = function firstCell(ancestor) {\n    return descendant$1(ancestor, 'th,td');\n  };\n\n  var table = function table(element, isRoot) {\n    return closest$1(element, 'table', isRoot);\n  };\n\n  var row = function row(element, isRoot) {\n    return lookup(['tr'], element, isRoot);\n  };\n\n  var rows = function rows(ancestor) {\n    return LayerSelector.firstLayer(ancestor, 'tr');\n  };\n\n  var attr = function attr(element, property) {\n    return parseInt(get$1(element, property), 10);\n  };\n\n  var grid$1 = function grid$1(element, rowProp, colProp) {\n    var rowsCount = attr(element, rowProp);\n    var cols = attr(element, colProp);\n    return grid(rowsCount, cols);\n  };\n\n  var TableLookup = {\n    cell: cell,\n    firstCell: firstCell,\n    cells: cells,\n    neighbourCells: neighbourCells,\n    table: table,\n    row: row,\n    rows: rows,\n    notCell: notCell,\n    neighbourRows: neighbourRows,\n    attr: attr,\n    grid: grid$1\n  };\n\n  var fromTable = function fromTable(table) {\n    var rows = TableLookup.rows(table);\n    return map(rows, function (row) {\n      var element = row;\n      var parent$1 = parent(element);\n      var parentSection = parent$1.map(function (p) {\n        var parentName = name(p);\n        return parentName === 'tfoot' || parentName === 'thead' || parentName === 'tbody' ? parentName : 'tbody';\n      }).getOr('tbody');\n      var cells = map(TableLookup.cells(row), function (cell) {\n        var rowspan = has$1(cell, 'rowspan') ? parseInt(get$1(cell, 'rowspan'), 10) : 1;\n        var colspan = has$1(cell, 'colspan') ? parseInt(get$1(cell, 'colspan'), 10) : 1;\n        return detail(cell, rowspan, colspan);\n      });\n      return rowdata(element, cells, parentSection);\n    });\n  };\n\n  var fromPastedRows = function fromPastedRows(rows, example) {\n    return map(rows, function (row) {\n      var cells = map(TableLookup.cells(row), function (cell) {\n        var rowspan = has$1(cell, 'rowspan') ? parseInt(get$1(cell, 'rowspan'), 10) : 1;\n        var colspan = has$1(cell, 'colspan') ? parseInt(get$1(cell, 'colspan'), 10) : 1;\n        return detail(cell, rowspan, colspan);\n      });\n      return rowdata(row, cells, example.section());\n    });\n  };\n\n  var DetailsList = {\n    fromTable: fromTable,\n    fromPastedRows: fromPastedRows\n  };\n\n  var key = function key(row, column) {\n    return row + ',' + column;\n  };\n\n  var getAt = function getAt(warehouse, row, column) {\n    var raw = warehouse.access()[key(row, column)];\n    return raw !== undefined ? Option.some(raw) : Option.none();\n  };\n\n  var findItem = function findItem(warehouse, item, comparator) {\n    var filtered = filterItems(warehouse, function (detail) {\n      return comparator(item, detail.element());\n    });\n    return filtered.length > 0 ? Option.some(filtered[0]) : Option.none();\n  };\n\n  var filterItems = function filterItems(warehouse, predicate) {\n    var all = bind(warehouse.all(), function (r) {\n      return r.cells();\n    });\n    return filter(all, predicate);\n  };\n\n  var generate = function generate(list) {\n    var access = {};\n    var cells = [];\n    var maxRows = list.length;\n    var maxColumns = 0;\n    each(list, function (details, r) {\n      var currentRow = [];\n      each(details.cells(), function (detail) {\n        var start = 0;\n\n        while (access[key(r, start)] !== undefined) {\n          start++;\n        }\n\n        var current = extended(detail.element(), detail.rowspan(), detail.colspan(), r, start);\n\n        for (var i = 0; i < detail.colspan(); i++) {\n          for (var j = 0; j < detail.rowspan(); j++) {\n            var cr = r + j;\n            var cc = start + i;\n            var newpos = key(cr, cc);\n            access[newpos] = current;\n            maxColumns = Math.max(maxColumns, cc + 1);\n          }\n        }\n\n        currentRow.push(current);\n      });\n      cells.push(rowdata(details.element(), currentRow, details.section()));\n    });\n    var grid$1 = grid(maxRows, maxColumns);\n    return {\n      grid: constant(grid$1),\n      access: constant(access),\n      all: constant(cells)\n    };\n  };\n\n  var justCells = function justCells(warehouse) {\n    var rows = map(warehouse.all(), function (w) {\n      return w.cells();\n    });\n    return flatten(rows);\n  };\n\n  var Warehouse = {\n    generate: generate,\n    getAt: getAt,\n    findItem: findItem,\n    filterItems: filterItems,\n    justCells: justCells\n  };\n  var statsStruct = Immutable('minRow', 'minCol', 'maxRow', 'maxCol');\n\n  var findSelectedStats = function findSelectedStats(house, isSelected) {\n    var totalColumns = house.grid().columns();\n    var totalRows = house.grid().rows();\n    var minRow = totalRows;\n    var minCol = totalColumns;\n    var maxRow = 0;\n    var maxCol = 0;\n    each$1(house.access(), function (detail) {\n      if (isSelected(detail)) {\n        var startRow = detail.row();\n        var endRow = startRow + detail.rowspan() - 1;\n        var startCol = detail.column();\n        var endCol = startCol + detail.colspan() - 1;\n\n        if (startRow < minRow) {\n          minRow = startRow;\n        } else if (endRow > maxRow) {\n          maxRow = endRow;\n        }\n\n        if (startCol < minCol) {\n          minCol = startCol;\n        } else if (endCol > maxCol) {\n          maxCol = endCol;\n        }\n      }\n    });\n    return statsStruct(minRow, minCol, maxRow, maxCol);\n  };\n\n  var makeCell = function makeCell(list, seenSelected, rowIndex) {\n    var row = list[rowIndex].element();\n    var td = Element.fromTag('td');\n    append(td, Element.fromTag('br'));\n    var f = seenSelected ? append : prepend;\n    f(row, td);\n  };\n\n  var fillInGaps = function fillInGaps(list, house, stats, isSelected) {\n    var totalColumns = house.grid().columns();\n    var totalRows = house.grid().rows();\n\n    for (var i = 0; i < totalRows; i++) {\n      var seenSelected = false;\n\n      for (var j = 0; j < totalColumns; j++) {\n        if (!(i < stats.minRow() || i > stats.maxRow() || j < stats.minCol() || j > stats.maxCol())) {\n          var needCell = Warehouse.getAt(house, i, j).filter(isSelected).isNone();\n\n          if (needCell) {\n            makeCell(list, seenSelected, i);\n          } else {\n            seenSelected = true;\n          }\n        }\n      }\n    }\n  };\n\n  var clean = function clean(table, stats) {\n    var emptyRows = filter(LayerSelector.firstLayer(table, 'tr'), function (row) {\n      return row.dom().childElementCount === 0;\n    });\n    each(emptyRows, remove$2);\n\n    if (stats.minCol() === stats.maxCol() || stats.minRow() === stats.maxRow()) {\n      each(LayerSelector.firstLayer(table, 'th,td'), function (cell) {\n        remove(cell, 'rowspan');\n        remove(cell, 'colspan');\n      });\n    }\n\n    remove(table, 'width');\n    remove(table, 'height');\n    remove$1(table, 'width');\n    remove$1(table, 'height');\n  };\n\n  var extract = function extract(table, selectedSelector) {\n    var isSelected = function isSelected(detail) {\n      return is(detail.element(), selectedSelector);\n    };\n\n    var list = DetailsList.fromTable(table);\n    var house = Warehouse.generate(list);\n    var stats = findSelectedStats(house, isSelected);\n    var selector = 'th:not(' + selectedSelector + ')' + ',td:not(' + selectedSelector + ')';\n    var unselectedCells = LayerSelector.filterFirstLayer(table, 'th,td', function (cell) {\n      return is(cell, selector);\n    });\n    each(unselectedCells, remove$2);\n    fillInGaps(list, house, stats, isSelected);\n    clean(table, stats);\n    return table;\n  };\n\n  var CopySelected = {\n    extract: extract\n  };\n\n  function NodeValue(is, name) {\n    var get = function get(element) {\n      if (!is(element)) {\n        throw new Error('Can only get ' + name + ' value of a ' + name + ' node');\n      }\n\n      return getOption(element).getOr('');\n    };\n\n    var getOption = function getOption(element) {\n      return is(element) ? Option.from(element.dom().nodeValue) : Option.none();\n    };\n\n    var set = function set(element, value) {\n      if (!is(element)) {\n        throw new Error('Can only set raw ' + name + ' value of a ' + name + ' node');\n      }\n\n      element.dom().nodeValue = value;\n    };\n\n    return {\n      get: get,\n      getOption: getOption,\n      set: set\n    };\n  }\n\n  var api = NodeValue(isText, 'text');\n\n  var get$3 = function get$3(element) {\n    return api.get(element);\n  };\n\n  var getOption = function getOption(element) {\n    return api.getOption(element);\n  };\n\n  var set$2 = function set$2(element, value) {\n    api.set(element, value);\n  };\n\n  var getEnd = function getEnd(element) {\n    return name(element) === 'img' ? 1 : getOption(element).fold(function () {\n      return children(element).length;\n    }, function (v) {\n      return v.length;\n    });\n  };\n\n  var NBSP = '\\xA0';\n\n  var isTextNodeWithCursorPosition = function isTextNodeWithCursorPosition(el) {\n    return getOption(el).filter(function (text) {\n      return text.trim().length !== 0 || text.indexOf(NBSP) > -1;\n    }).isSome();\n  };\n\n  var elementsWithCursorPosition = ['img', 'br'];\n\n  var isCursorPosition = function isCursorPosition(elem) {\n    var hasCursorPosition = isTextNodeWithCursorPosition(elem);\n    return hasCursorPosition || contains(elementsWithCursorPosition, name(elem));\n  };\n\n  var first = function first(element) {\n    return descendant(element, isCursorPosition);\n  };\n\n  var last$1 = function last$1(element) {\n    return descendantRtl(element, isCursorPosition);\n  };\n\n  var descendantRtl = function descendantRtl(scope, predicate) {\n    var descend = function descend(element) {\n      var children$1 = children(element);\n\n      for (var i = children$1.length - 1; i >= 0; i--) {\n        var child = children$1[i];\n\n        if (predicate(child)) {\n          return Option.some(child);\n        }\n\n        var res = descend(child);\n\n        if (res.isSome()) {\n          return res;\n        }\n      }\n\n      return Option.none();\n    };\n\n    return descend(scope);\n  };\n\n  var clone$1 = function clone$1(original, isDeep) {\n    return Element.fromDom(original.dom().cloneNode(isDeep));\n  };\n\n  var shallow = function shallow(original) {\n    return clone$1(original, false);\n  };\n\n  var deep = function deep(original) {\n    return clone$1(original, true);\n  };\n\n  var shallowAs = function shallowAs(original, tag) {\n    var nu = Element.fromTag(tag);\n    var attributes = clone(original);\n    setAll(nu, attributes);\n    return nu;\n  };\n\n  var copy$1 = function copy$1(original, tag) {\n    var nu = shallowAs(original, tag);\n    var cloneChildren = children(deep(original));\n    append$1(nu, cloneChildren);\n    return nu;\n  };\n\n  var createCell = function createCell() {\n    var td = Element.fromTag('td');\n    append(td, Element.fromTag('br'));\n    return td;\n  };\n\n  var replace = function replace(cell, tag, attrs) {\n    var replica = copy$1(cell, tag);\n    each$1(attrs, function (v, k) {\n      if (v === null) {\n        remove(replica, k);\n      } else {\n        set(replica, k, v);\n      }\n    });\n    return replica;\n  };\n\n  var pasteReplace = function pasteReplace(cell) {\n    return cell;\n  };\n\n  var newRow = function newRow(doc) {\n    return function () {\n      return Element.fromTag('tr', doc.dom());\n    };\n  };\n\n  var cloneFormats = function cloneFormats(oldCell, newCell, formats) {\n    var first$1 = first(oldCell);\n    return first$1.map(function (firstText) {\n      var formatSelector = formats.join(',');\n      var parents = ancestors$1(firstText, formatSelector, function (element) {\n        return eq(element, oldCell);\n      });\n      return foldr(parents, function (last, parent) {\n        var clonedFormat = shallow(parent);\n        remove(clonedFormat, 'contenteditable');\n        append(last, clonedFormat);\n        return clonedFormat;\n      }, newCell);\n    }).getOr(newCell);\n  };\n\n  var cellOperations = function cellOperations(mutate, doc, formatsToClone) {\n    var newCell = function newCell(prev) {\n      var docu = owner(prev.element());\n      var td = Element.fromTag(name(prev.element()), docu.dom());\n      var formats = formatsToClone.getOr(['strong', 'em', 'b', 'i', 'span', 'font', 'h1', 'h2', 'h3', 'h4', 'h5', 'h6', 'p', 'div']);\n      var lastNode = formats.length > 0 ? cloneFormats(prev.element(), td, formats) : td;\n      append(lastNode, Element.fromTag('br'));\n      copy(prev.element(), td);\n      remove$1(td, 'height');\n\n      if (prev.colspan() !== 1) {\n        remove$1(prev.element(), 'width');\n      }\n\n      mutate(prev.element(), td);\n      return td;\n    };\n\n    return {\n      row: newRow(doc),\n      cell: newCell,\n      replace: replace,\n      gap: createCell\n    };\n  };\n\n  var paste = function paste(doc) {\n    return {\n      row: newRow(doc),\n      cell: createCell,\n      replace: pasteReplace,\n      gap: createCell\n    };\n  };\n\n  var TableFill = {\n    cellOperations: cellOperations,\n    paste: paste\n  };\n\n  var fromHtml$1 = function fromHtml$1(html, scope) {\n    var doc = scope || domGlobals.document;\n    var div = doc.createElement('div');\n    div.innerHTML = html;\n    return children(Element.fromDom(div));\n  };\n\n  var inSelection = function inSelection(bounds, detail) {\n    var leftEdge = detail.column();\n    var rightEdge = detail.column() + detail.colspan() - 1;\n    var topEdge = detail.row();\n    var bottomEdge = detail.row() + detail.rowspan() - 1;\n    return leftEdge <= bounds.finishCol() && rightEdge >= bounds.startCol() && topEdge <= bounds.finishRow() && bottomEdge >= bounds.startRow();\n  };\n\n  var isWithin = function isWithin(bounds, detail) {\n    return detail.column() >= bounds.startCol() && detail.column() + detail.colspan() - 1 <= bounds.finishCol() && detail.row() >= bounds.startRow() && detail.row() + detail.rowspan() - 1 <= bounds.finishRow();\n  };\n\n  var isRectangular = function isRectangular(warehouse, bounds) {\n    var isRect = true;\n    var detailIsWithin = curry(isWithin, bounds);\n\n    for (var i = bounds.startRow(); i <= bounds.finishRow(); i++) {\n      for (var j = bounds.startCol(); j <= bounds.finishCol(); j++) {\n        isRect = isRect && Warehouse.getAt(warehouse, i, j).exists(detailIsWithin);\n      }\n    }\n\n    return isRect ? Option.some(bounds) : Option.none();\n  };\n\n  var CellBounds = {\n    inSelection: inSelection,\n    isWithin: isWithin,\n    isRectangular: isRectangular\n  };\n\n  var getBounds = function getBounds(detailA, detailB) {\n    return bounds(Math.min(detailA.row(), detailB.row()), Math.min(detailA.column(), detailB.column()), Math.max(detailA.row() + detailA.rowspan() - 1, detailB.row() + detailB.rowspan() - 1), Math.max(detailA.column() + detailA.colspan() - 1, detailB.column() + detailB.colspan() - 1));\n  };\n\n  var getAnyBox = function getAnyBox(warehouse, startCell, finishCell) {\n    var startCoords = Warehouse.findItem(warehouse, startCell, eq);\n    var finishCoords = Warehouse.findItem(warehouse, finishCell, eq);\n    return startCoords.bind(function (sc) {\n      return finishCoords.map(function (fc) {\n        return getBounds(sc, fc);\n      });\n    });\n  };\n\n  var getBox = function getBox(warehouse, startCell, finishCell) {\n    return getAnyBox(warehouse, startCell, finishCell).bind(function (bounds) {\n      return CellBounds.isRectangular(warehouse, bounds);\n    });\n  };\n\n  var CellGroup = {\n    getAnyBox: getAnyBox,\n    getBox: getBox\n  };\n\n  var moveBy = function moveBy(warehouse, cell, row, column) {\n    return Warehouse.findItem(warehouse, cell, eq).bind(function (detail) {\n      var startRow = row > 0 ? detail.row() + detail.rowspan() - 1 : detail.row();\n      var startCol = column > 0 ? detail.column() + detail.colspan() - 1 : detail.column();\n      var dest = Warehouse.getAt(warehouse, startRow + row, startCol + column);\n      return dest.map(function (d) {\n        return d.element();\n      });\n    });\n  };\n\n  var intercepts = function intercepts(warehouse, start, finish) {\n    return CellGroup.getAnyBox(warehouse, start, finish).map(function (bounds) {\n      var inside = Warehouse.filterItems(warehouse, curry(CellBounds.inSelection, bounds));\n      return map(inside, function (detail) {\n        return detail.element();\n      });\n    });\n  };\n\n  var parentCell = function parentCell(warehouse, innerCell) {\n    var isContainedBy = function isContainedBy(c1, c2) {\n      return contains$2(c2, c1);\n    };\n\n    return Warehouse.findItem(warehouse, innerCell, isContainedBy).map(function (detail) {\n      return detail.element();\n    });\n  };\n\n  var CellFinder = {\n    moveBy: moveBy,\n    intercepts: intercepts,\n    parentCell: parentCell\n  };\n\n  var moveBy$1 = function moveBy$1(cell, deltaRow, deltaColumn) {\n    return TableLookup.table(cell).bind(function (table) {\n      var warehouse = getWarehouse(table);\n      return CellFinder.moveBy(warehouse, cell, deltaRow, deltaColumn);\n    });\n  };\n\n  var intercepts$1 = function intercepts$1(table, first, last) {\n    var warehouse = getWarehouse(table);\n    return CellFinder.intercepts(warehouse, first, last);\n  };\n\n  var nestedIntercepts = function nestedIntercepts(table, first, firstTable, last, lastTable) {\n    var warehouse = getWarehouse(table);\n    var optStartCell = eq(table, firstTable) ? Option.some(first) : CellFinder.parentCell(warehouse, first);\n    var optLastCell = eq(table, lastTable) ? Option.some(last) : CellFinder.parentCell(warehouse, last);\n    return optStartCell.bind(function (startCell) {\n      return optLastCell.bind(function (lastCell) {\n        return CellFinder.intercepts(warehouse, startCell, lastCell);\n      });\n    });\n  };\n\n  var getBox$1 = function getBox$1(table, first, last) {\n    var warehouse = getWarehouse(table);\n    return CellGroup.getBox(warehouse, first, last);\n  };\n\n  var getWarehouse = function getWarehouse(table) {\n    var list = DetailsList.fromTable(table);\n    return Warehouse.generate(list);\n  };\n\n  var TablePositions = {\n    moveBy: moveBy$1,\n    intercepts: intercepts$1,\n    nestedIntercepts: nestedIntercepts,\n    getBox: getBox$1\n  };\n  var TagBoundaries = ['body', 'p', 'div', 'article', 'aside', 'figcaption', 'figure', 'footer', 'header', 'nav', 'section', 'ol', 'ul', 'li', 'table', 'thead', 'tbody', 'tfoot', 'caption', 'tr', 'td', 'th', 'h1', 'h2', 'h3', 'h4', 'h5', 'h6', 'blockquote', 'pre', 'address'];\n\n  function DomUniverse() {\n    var clone$1 = function clone$1(element) {\n      return Element.fromDom(element.dom().cloneNode(false));\n    };\n\n    var document = function document(element) {\n      return element.dom().ownerDocument;\n    };\n\n    var isBoundary = function isBoundary(element) {\n      if (!isElement(element)) {\n        return false;\n      }\n\n      if (name(element) === 'body') {\n        return true;\n      }\n\n      return contains(TagBoundaries, name(element));\n    };\n\n    var isEmptyTag = function isEmptyTag(element) {\n      if (!isElement(element)) {\n        return false;\n      }\n\n      return contains(['br', 'img', 'hr', 'input'], name(element));\n    };\n\n    var comparePosition = function comparePosition(element, other) {\n      return element.dom().compareDocumentPosition(other.dom());\n    };\n\n    var copyAttributesTo = function copyAttributesTo(source, destination) {\n      var as = clone(source);\n      setAll(destination, as);\n    };\n\n    return {\n      up: constant({\n        selector: ancestor$1,\n        closest: closest$1,\n        predicate: ancestor,\n        all: parents\n      }),\n      down: constant({\n        selector: descendants$1,\n        predicate: descendants\n      }),\n      styles: constant({\n        get: get$2,\n        getRaw: getRaw,\n        set: set$1,\n        remove: remove$1\n      }),\n      attrs: constant({\n        get: get$1,\n        set: set,\n        remove: remove,\n        copyTo: copyAttributesTo\n      }),\n      insert: constant({\n        before: before,\n        after: after,\n        afterAll: after$1,\n        append: append,\n        appendAll: append$1,\n        prepend: prepend,\n        wrap: wrap\n      }),\n      remove: constant({\n        unwrap: unwrap,\n        remove: remove$2\n      }),\n      create: constant({\n        nu: Element.fromTag,\n        clone: clone$1,\n        text: Element.fromText\n      }),\n      query: constant({\n        comparePosition: comparePosition,\n        prevSibling: prevSibling,\n        nextSibling: nextSibling\n      }),\n      property: constant({\n        children: children,\n        name: name,\n        parent: parent,\n        document: document,\n        isText: isText,\n        isComment: isComment,\n        isElement: isElement,\n        getText: get$3,\n        setText: set$2,\n        isBoundary: isBoundary,\n        isEmptyTag: isEmptyTag\n      }),\n      eq: eq,\n      is: is$1\n    };\n  }\n\n  var leftRight = Immutable('left', 'right');\n  var brokenPath = Immutable('first', 'second', 'splits');\n\n  var bisect = function bisect(universe, parent, child) {\n    var children = universe.property().children(parent);\n    var index = findIndex(children, curry(universe.eq, child));\n    return index.map(function (ind) {\n      return {\n        before: constant(children.slice(0, ind)),\n        after: constant(children.slice(ind + 1))\n      };\n    });\n  };\n\n  var breakToRight = function breakToRight(universe, parent, child) {\n    return bisect(universe, parent, child).map(function (parts) {\n      var second = universe.create().clone(parent);\n      universe.insert().appendAll(second, parts.after());\n      universe.insert().after(parent, second);\n      return leftRight(parent, second);\n    });\n  };\n\n  var breakToLeft = function breakToLeft(universe, parent, child) {\n    return bisect(universe, parent, child).map(function (parts) {\n      var prior = universe.create().clone(parent);\n      universe.insert().appendAll(prior, parts.before().concat([child]));\n      universe.insert().appendAll(parent, parts.after());\n      universe.insert().before(parent, prior);\n      return leftRight(prior, parent);\n    });\n  };\n\n  var breakPath = function breakPath(universe, item, isTop, breaker) {\n    var next = function next(child, group, splits) {\n      var fallback = brokenPath(child, Option.none(), splits);\n\n      if (isTop(child)) {\n        return brokenPath(child, group, splits);\n      } else {\n        return universe.property().parent(child).bind(function (parent) {\n          return breaker(universe, parent, child).map(function (breakage) {\n            var extra = [{\n              first: breakage.left,\n              second: breakage.right\n            }];\n            var nextChild = isTop(parent) ? parent : breakage.left();\n            return next(nextChild, Option.some(breakage.right()), splits.concat(extra));\n          });\n        }).getOr(fallback);\n      }\n    };\n\n    return next(item, Option.none(), []);\n  };\n\n  var all$1 = function all$1(universe, look, elements, f) {\n    var head = elements[0];\n    var tail = elements.slice(1);\n    return f(universe, look, head, tail);\n  };\n\n  var oneAll = function oneAll(universe, look, elements) {\n    return elements.length > 0 ? all$1(universe, look, elements, unsafeOne) : Option.none();\n  };\n\n  var unsafeOne = function unsafeOne(universe, look, head, tail) {\n    var start = look(universe, head);\n    return foldr(tail, function (b, a) {\n      var current = look(universe, a);\n      return commonElement(universe, b, current);\n    }, start);\n  };\n\n  var commonElement = function commonElement(universe, start, end) {\n    return start.bind(function (s) {\n      return end.filter(curry(universe.eq, s));\n    });\n  };\n\n  var eq$1 = function eq$1(universe, item) {\n    return curry(universe.eq, item);\n  };\n\n  var unsafeSubset = function unsafeSubset(universe, common, ps1, ps2) {\n    var children = universe.property().children(common);\n\n    if (universe.eq(common, ps1[0])) {\n      return Option.some([ps1[0]]);\n    }\n\n    if (universe.eq(common, ps2[0])) {\n      return Option.some([ps2[0]]);\n    }\n\n    var finder = function finder(ps) {\n      var topDown = reverse(ps);\n      var index = findIndex(topDown, eq$1(universe, common)).getOr(-1);\n      var item = index < topDown.length - 1 ? topDown[index + 1] : topDown[index];\n      return findIndex(children, eq$1(universe, item));\n    };\n\n    var startIndex = finder(ps1);\n    var endIndex = finder(ps2);\n    return startIndex.bind(function (sIndex) {\n      return endIndex.map(function (eIndex) {\n        var first = Math.min(sIndex, eIndex);\n        var last = Math.max(sIndex, eIndex);\n        return children.slice(first, last + 1);\n      });\n    });\n  };\n\n  var ancestors$2 = function ancestors$2(universe, start, end, isRoot) {\n    if (isRoot === void 0) {\n      isRoot = never;\n    }\n\n    var ps1 = [start].concat(universe.up().all(start));\n    var ps2 = [end].concat(universe.up().all(end));\n\n    var prune = function prune(path) {\n      var index = findIndex(path, isRoot);\n      return index.fold(function () {\n        return path;\n      }, function (ind) {\n        return path.slice(0, ind + 1);\n      });\n    };\n\n    var pruned1 = prune(ps1);\n    var pruned2 = prune(ps2);\n    var shared = find(pruned1, function (x) {\n      return exists(pruned2, eq$1(universe, x));\n    });\n    return {\n      firstpath: constant(pruned1),\n      secondpath: constant(pruned2),\n      shared: constant(shared)\n    };\n  };\n\n  var subset = function subset(universe, start, end) {\n    var ancs = ancestors$2(universe, start, end);\n    return ancs.shared().bind(function (shared) {\n      return unsafeSubset(universe, shared, ancs.firstpath(), ancs.secondpath());\n    });\n  };\n\n  var SubsetFn = {\n    subset: subset,\n    ancestors: ancestors$2\n  };\n  var sharedOne = oneAll;\n  var subset$1 = SubsetFn.subset;\n  var ancestors$3 = SubsetFn.ancestors;\n  var breakToLeft$1 = breakToLeft;\n  var breakToRight$1 = breakToRight;\n  var breakPath$1 = breakPath;\n  var Parent = {\n    sharedOne: sharedOne,\n    subset: subset$1,\n    ancestors: ancestors$3,\n    breakToLeft: breakToLeft$1,\n    breakToRight: breakToRight$1,\n    breakPath: breakPath$1\n  };\n  var universe = DomUniverse();\n\n  var sharedOne$1 = function sharedOne$1(look, elements) {\n    return Parent.sharedOne(universe, function (_universe, element) {\n      return look(element);\n    }, elements);\n  };\n\n  var subset$2 = function subset$2(start, finish) {\n    return Parent.subset(universe, start, finish);\n  };\n\n  var ancestors$4 = function ancestors$4(start, finish, isRoot) {\n    return Parent.ancestors(universe, start, finish, isRoot);\n  };\n\n  var breakToLeft$2 = function breakToLeft$2(parent, child) {\n    return Parent.breakToLeft(universe, parent, child);\n  };\n\n  var breakToRight$2 = function breakToRight$2(parent, child) {\n    return Parent.breakToRight(universe, parent, child);\n  };\n\n  var breakPath$2 = function breakPath$2(child, isTop, breaker) {\n    return Parent.breakPath(universe, child, isTop, function (u, p, c) {\n      return breaker(p, c);\n    });\n  };\n\n  var DomParent = {\n    sharedOne: sharedOne$1,\n    subset: subset$2,\n    ancestors: ancestors$4,\n    breakToLeft: breakToLeft$2,\n    breakToRight: breakToRight$2,\n    breakPath: breakPath$2\n  };\n  var create = MixedBag(['boxes', 'start', 'finish'], []);\n  var Identified = {\n    create: create\n  };\n\n  var lookupTable = function lookupTable(container) {\n    return ancestor$1(container, 'table');\n  };\n\n  var identify = function identify(start, finish, isRoot) {\n    var getIsRoot = function getIsRoot(rootTable) {\n      return function (element) {\n        return isRoot !== undefined && isRoot(element) || eq(element, rootTable);\n      };\n    };\n\n    if (eq(start, finish)) {\n      return Option.some(Identified.create({\n        boxes: Option.some([start]),\n        start: start,\n        finish: finish\n      }));\n    } else {\n      return lookupTable(start).bind(function (startTable) {\n        return lookupTable(finish).bind(function (finishTable) {\n          if (eq(startTable, finishTable)) {\n            return Option.some(Identified.create({\n              boxes: TablePositions.intercepts(startTable, start, finish),\n              start: start,\n              finish: finish\n            }));\n          } else if (contains$2(startTable, finishTable)) {\n            var ancestorCells = ancestors$1(finish, 'td,th', getIsRoot(startTable));\n            var finishCell = ancestorCells.length > 0 ? ancestorCells[ancestorCells.length - 1] : finish;\n            return Option.some(Identified.create({\n              boxes: TablePositions.nestedIntercepts(startTable, start, startTable, finish, finishTable),\n              start: start,\n              finish: finishCell\n            }));\n          } else if (contains$2(finishTable, startTable)) {\n            var ancestorCells = ancestors$1(start, 'td,th', getIsRoot(finishTable));\n            var startCell = ancestorCells.length > 0 ? ancestorCells[ancestorCells.length - 1] : start;\n            return Option.some(Identified.create({\n              boxes: TablePositions.nestedIntercepts(finishTable, start, startTable, finish, finishTable),\n              start: start,\n              finish: startCell\n            }));\n          } else {\n            return DomParent.ancestors(start, finish).shared().bind(function (lca) {\n              return closest$1(lca, 'table', isRoot).bind(function (lcaTable) {\n                var finishAncestorCells = ancestors$1(finish, 'td,th', getIsRoot(lcaTable));\n                var finishCell = finishAncestorCells.length > 0 ? finishAncestorCells[finishAncestorCells.length - 1] : finish;\n                var startAncestorCells = ancestors$1(start, 'td,th', getIsRoot(lcaTable));\n                var startCell = startAncestorCells.length > 0 ? startAncestorCells[startAncestorCells.length - 1] : start;\n                return Option.some(Identified.create({\n                  boxes: TablePositions.nestedIntercepts(lcaTable, start, startTable, finish, finishTable),\n                  start: startCell,\n                  finish: finishCell\n                }));\n              });\n            });\n          }\n        });\n      });\n    }\n  };\n\n  var retrieve = function retrieve(container, selector) {\n    var sels = descendants$1(container, selector);\n    return sels.length > 0 ? Option.some(sels) : Option.none();\n  };\n\n  var getLast = function getLast(boxes, lastSelectedSelector) {\n    return find(boxes, function (box) {\n      return is(box, lastSelectedSelector);\n    });\n  };\n\n  var getEdges = function getEdges(container, firstSelectedSelector, lastSelectedSelector) {\n    return descendant$1(container, firstSelectedSelector).bind(function (first) {\n      return descendant$1(container, lastSelectedSelector).bind(function (last) {\n        return DomParent.sharedOne(lookupTable, [first, last]).map(function (tbl) {\n          return {\n            first: constant(first),\n            last: constant(last),\n            table: constant(tbl)\n          };\n        });\n      });\n    });\n  };\n\n  var expandTo = function expandTo(finish, firstSelectedSelector) {\n    return ancestor$1(finish, 'table').bind(function (table) {\n      return descendant$1(table, firstSelectedSelector).bind(function (start) {\n        return identify(start, finish).bind(function (identified) {\n          return identified.boxes().map(function (boxes) {\n            return {\n              boxes: constant(boxes),\n              start: constant(identified.start()),\n              finish: constant(identified.finish())\n            };\n          });\n        });\n      });\n    });\n  };\n\n  var shiftSelection = function shiftSelection(boxes, deltaRow, deltaColumn, firstSelectedSelector, lastSelectedSelector) {\n    return getLast(boxes, lastSelectedSelector).bind(function (last) {\n      return TablePositions.moveBy(last, deltaRow, deltaColumn).bind(function (finish) {\n        return expandTo(finish, firstSelectedSelector);\n      });\n    });\n  };\n\n  var CellSelection = {\n    identify: identify,\n    retrieve: retrieve,\n    shiftSelection: shiftSelection,\n    getEdges: getEdges\n  };\n\n  var retrieve$1 = function retrieve$1(container, selector) {\n    return CellSelection.retrieve(container, selector);\n  };\n\n  var retrieveBox = function retrieveBox(container, firstSelectedSelector, lastSelectedSelector) {\n    return CellSelection.getEdges(container, firstSelectedSelector, lastSelectedSelector).bind(function (edges) {\n      var isRoot = function isRoot(ancestor) {\n        return eq(container, ancestor);\n      };\n\n      var firstAncestor = ancestor$1(edges.first(), 'thead,tfoot,tbody,table', isRoot);\n      var lastAncestor = ancestor$1(edges.last(), 'thead,tfoot,tbody,table', isRoot);\n      return firstAncestor.bind(function (fA) {\n        return lastAncestor.bind(function (lA) {\n          return eq(fA, lA) ? TablePositions.getBox(edges.table(), edges.first(), edges.last()) : Option.none();\n        });\n      });\n    });\n  };\n\n  var TableSelection = {\n    retrieve: retrieve$1,\n    retrieveBox: retrieveBox\n  };\n  var selected = 'data-mce-selected';\n  var selectedSelector = 'td[' + selected + '],th[' + selected + ']';\n  var attributeSelector = '[' + selected + ']';\n  var firstSelected = 'data-mce-first-selected';\n  var firstSelectedSelector = 'td[' + firstSelected + '],th[' + firstSelected + ']';\n  var lastSelected = 'data-mce-last-selected';\n  var lastSelectedSelector = 'td[' + lastSelected + '],th[' + lastSelected + ']';\n  var Ephemera = {\n    selected: constant(selected),\n    selectedSelector: constant(selectedSelector),\n    attributeSelector: constant(attributeSelector),\n    firstSelected: constant(firstSelected),\n    firstSelectedSelector: constant(firstSelectedSelector),\n    lastSelected: constant(lastSelected),\n    lastSelectedSelector: constant(lastSelectedSelector)\n  };\n\n  var generate$1 = function generate$1(cases) {\n    if (!isArray(cases)) {\n      throw new Error('cases must be an array');\n    }\n\n    if (cases.length === 0) {\n      throw new Error('there must be at least one case');\n    }\n\n    var constructors = [];\n    var adt = {};\n    each(cases, function (acase, count) {\n      var keys$1 = keys(acase);\n\n      if (keys$1.length !== 1) {\n        throw new Error('one and only one name per case');\n      }\n\n      var key = keys$1[0];\n      var value = acase[key];\n\n      if (adt[key] !== undefined) {\n        throw new Error('duplicate key detected:' + key);\n      } else if (key === 'cata') {\n        throw new Error('cannot have a case named cata (sorry)');\n      } else if (!isArray(value)) {\n        throw new Error('case arguments must be an array');\n      }\n\n      constructors.push(key);\n\n      adt[key] = function () {\n        var argLength = arguments.length;\n\n        if (argLength !== value.length) {\n          throw new Error('Wrong number of arguments to case ' + key + '. Expected ' + value.length + ' (' + value + '), got ' + argLength);\n        }\n\n        var args = new Array(argLength);\n\n        for (var i = 0; i < args.length; i++) {\n          args[i] = arguments[i];\n        }\n\n        var match = function match(branches) {\n          var branchKeys = keys(branches);\n\n          if (constructors.length !== branchKeys.length) {\n            throw new Error('Wrong number of arguments to match. Expected: ' + constructors.join(',') + '\\nActual: ' + branchKeys.join(','));\n          }\n\n          var allReqd = forall(constructors, function (reqKey) {\n            return contains(branchKeys, reqKey);\n          });\n\n          if (!allReqd) {\n            throw new Error('Not all branches were specified when using match. Specified: ' + branchKeys.join(', ') + '\\nRequired: ' + constructors.join(', '));\n          }\n\n          return branches[key].apply(null, args);\n        };\n\n        return {\n          fold: function fold() {\n            if (arguments.length !== cases.length) {\n              throw new Error('Wrong number of arguments to fold. Expected ' + cases.length + ', got ' + arguments.length);\n            }\n\n            var target = arguments[count];\n            return target.apply(null, args);\n          },\n          match: match,\n          log: function log(label) {\n            domGlobals.console.log(label, {\n              constructors: constructors,\n              constructor: key,\n              params: args\n            });\n          }\n        };\n      };\n    });\n    return adt;\n  };\n\n  var Adt = {\n    generate: generate$1\n  };\n  var type$1 = Adt.generate([{\n    none: []\n  }, {\n    multiple: ['elements']\n  }, {\n    single: ['selection']\n  }]);\n\n  var cata = function cata(subject, onNone, onMultiple, onSingle) {\n    return subject.fold(onNone, onMultiple, onSingle);\n  };\n\n  var SelectionTypes = {\n    cata: cata,\n    none: type$1.none,\n    multiple: type$1.multiple,\n    single: type$1.single\n  };\n\n  var selection = function selection(cell, selections) {\n    return SelectionTypes.cata(selections.get(), constant([]), identity, constant([cell]));\n  };\n\n  var unmergable = function unmergable(cell, selections) {\n    var hasSpan = function hasSpan(elem) {\n      return has$1(elem, 'rowspan') && parseInt(get$1(elem, 'rowspan'), 10) > 1 || has$1(elem, 'colspan') && parseInt(get$1(elem, 'colspan'), 10) > 1;\n    };\n\n    var candidates = selection(cell, selections);\n    return candidates.length > 0 && forall(candidates, hasSpan) ? Option.some(candidates) : Option.none();\n  };\n\n  var mergable = function mergable(table, selections) {\n    return SelectionTypes.cata(selections.get(), Option.none, function (cells, _env) {\n      if (cells.length === 0) {\n        return Option.none();\n      }\n\n      return TableSelection.retrieveBox(table, Ephemera.firstSelectedSelector(), Ephemera.lastSelectedSelector()).bind(function (bounds) {\n        return cells.length > 1 ? Option.some({\n          bounds: constant(bounds),\n          cells: constant(cells)\n        }) : Option.none();\n      });\n    }, Option.none);\n  };\n\n  var CellOperations = {\n    mergable: mergable,\n    unmergable: unmergable,\n    selection: selection\n  };\n\n  var noMenu = function noMenu(cell) {\n    return {\n      element: constant(cell),\n      mergable: Option.none,\n      unmergable: Option.none,\n      selection: constant([cell])\n    };\n  };\n\n  var forMenu = function forMenu(selections, table, cell) {\n    return {\n      element: constant(cell),\n      mergable: constant(CellOperations.mergable(table, selections)),\n      unmergable: constant(CellOperations.unmergable(cell, selections)),\n      selection: constant(CellOperations.selection(cell, selections))\n    };\n  };\n\n  var notCell$1 = function notCell$1(element) {\n    return noMenu(element);\n  };\n\n  var paste$1 = Immutable('element', 'clipboard', 'generators');\n\n  var pasteRows = function pasteRows(selections, table, cell, clipboard, generators) {\n    return {\n      element: constant(cell),\n      mergable: Option.none,\n      unmergable: Option.none,\n      selection: constant(CellOperations.selection(cell, selections)),\n      clipboard: constant(clipboard),\n      generators: constant(generators)\n    };\n  };\n\n  var TableTargets = {\n    noMenu: noMenu,\n    forMenu: forMenu,\n    notCell: notCell$1,\n    paste: paste$1,\n    pasteRows: pasteRows\n  };\n\n  var extractSelected = function extractSelected(cells) {\n    return TableLookup.table(cells[0]).map(deep).map(function (replica) {\n      return [CopySelected.extract(replica, Ephemera.attributeSelector())];\n    });\n  };\n\n  var serializeElements = function serializeElements(editor, elements) {\n    return map(elements, function (elm) {\n      return editor.selection.serializer.serialize(elm.dom(), {});\n    }).join('');\n  };\n\n  var getTextContent = function getTextContent(elements) {\n    return map(elements, function (element) {\n      return element.dom().innerText;\n    }).join('');\n  };\n\n  var registerEvents = function registerEvents(editor, selections, actions, cellSelection) {\n    editor.on('BeforeGetContent', function (e) {\n      var multiCellContext = function multiCellContext(cells) {\n        e.preventDefault();\n        extractSelected(cells).each(function (elements) {\n          e.content = e.format === 'text' ? getTextContent(elements) : serializeElements(editor, elements);\n        });\n      };\n\n      if (e.selection === true) {\n        SelectionTypes.cata(selections.get(), noop, multiCellContext, noop);\n      }\n    });\n    editor.on('BeforeSetContent', function (e) {\n      if (e.selection === true && e.paste === true) {\n        var cellOpt = Option.from(editor.dom.getParent(editor.selection.getStart(), 'th,td'));\n        cellOpt.each(function (domCell) {\n          var cell = Element.fromDom(domCell);\n          TableLookup.table(cell).each(function (table) {\n            var elements = filter(fromHtml$1(e.content), function (content) {\n              return name(content) !== 'meta';\n            });\n\n            if (elements.length === 1 && name(elements[0]) === 'table') {\n              e.preventDefault();\n              var doc = Element.fromDom(editor.getDoc());\n              var generators = TableFill.paste(doc);\n              var targets = TableTargets.paste(cell, elements[0], generators);\n              actions.pasteCells(table, targets).each(function (rng) {\n                editor.selection.setRng(rng);\n                editor.focus();\n                cellSelection.clear(table);\n              });\n            }\n          });\n        });\n      }\n    });\n  };\n\n  var Clipboard = {\n    registerEvents: registerEvents\n  };\n\n  function Dimension(name, getOffset) {\n    var set = function set(element, h) {\n      if (!isNumber(h) && !h.match(/^[0-9]+$/)) {\n        throw new Error(name + '.set accepts only positive integer values. Value was ' + h);\n      }\n\n      var dom = element.dom();\n\n      if (isSupported(dom)) {\n        dom.style[name] = h + 'px';\n      }\n    };\n\n    var get = function get(element) {\n      var r = getOffset(element);\n\n      if (r <= 0 || r === null) {\n        var css = get$2(element, name);\n        return parseFloat(css) || 0;\n      }\n\n      return r;\n    };\n\n    var getOuter = get;\n\n    var aggregate = function aggregate(element, properties) {\n      return foldl(properties, function (acc, property) {\n        var val = get$2(element, property);\n        var value = val === undefined ? 0 : parseInt(val, 10);\n        return isNaN(value) ? acc : acc + value;\n      }, 0);\n    };\n\n    var max = function max(element, value, properties) {\n      var cumulativeInclusions = aggregate(element, properties);\n      var absoluteMax = value > cumulativeInclusions ? value - cumulativeInclusions : 0;\n      return absoluteMax;\n    };\n\n    return {\n      set: set,\n      get: get,\n      getOuter: getOuter,\n      aggregate: aggregate,\n      max: max\n    };\n  }\n\n  var api$1 = Dimension('height', function (element) {\n    var dom = element.dom();\n    return inBody(element) ? dom.getBoundingClientRect().height : dom.offsetHeight;\n  });\n\n  var get$4 = function get$4(element) {\n    return api$1.get(element);\n  };\n\n  var getOuter = function getOuter(element) {\n    return api$1.getOuter(element);\n  };\n\n  var api$2 = Dimension('width', function (element) {\n    return element.dom().offsetWidth;\n  });\n\n  var get$5 = function get$5(element) {\n    return api$2.get(element);\n  };\n\n  var getOuter$1 = function getOuter$1(element) {\n    return api$2.getOuter(element);\n  };\n\n  var platform$1 = detect$3();\n\n  var needManualCalc = function needManualCalc() {\n    return platform$1.browser.isIE() || platform$1.browser.isEdge();\n  };\n\n  var toNumber = function toNumber(px, fallback) {\n    var num = parseFloat(px);\n    return isNaN(num) ? fallback : num;\n  };\n\n  var getProp = function getProp(elm, name, fallback) {\n    return toNumber(get$2(elm, name), fallback);\n  };\n\n  var getCalculatedHeight = function getCalculatedHeight(cell) {\n    var paddingTop = getProp(cell, 'padding-top', 0);\n    var paddingBottom = getProp(cell, 'padding-bottom', 0);\n    var borderTop = getProp(cell, 'border-top-width', 0);\n    var borderBottom = getProp(cell, 'border-bottom-width', 0);\n    var height = cell.dom().getBoundingClientRect().height;\n    var boxSizing = get$2(cell, 'box-sizing');\n    var borders = borderTop + borderBottom;\n    return boxSizing === 'border-box' ? height : height - paddingTop - paddingBottom - borders;\n  };\n\n  var getWidth = function getWidth(cell) {\n    return getProp(cell, 'width', get$5(cell));\n  };\n\n  var getHeight = function getHeight(cell) {\n    return needManualCalc() ? getCalculatedHeight(cell) : getProp(cell, 'height', get$4(cell));\n  };\n\n  var RuntimeSize = {\n    getWidth: getWidth,\n    getHeight: getHeight\n  };\n  var genericSizeRegex = /(\\d+(\\.\\d+)?)(\\w|%)*/;\n  var percentageBasedSizeRegex = /(\\d+(\\.\\d+)?)%/;\n  var pixelBasedSizeRegex = /(\\d+(\\.\\d+)?)px|em/;\n\n  var setPixelWidth = function setPixelWidth(cell, amount) {\n    set$1(cell, 'width', amount + 'px');\n  };\n\n  var setPercentageWidth = function setPercentageWidth(cell, amount) {\n    set$1(cell, 'width', amount + '%');\n  };\n\n  var setHeight = function setHeight(cell, amount) {\n    set$1(cell, 'height', amount + 'px');\n  };\n\n  var getHeightValue = function getHeightValue(cell) {\n    return getRaw(cell, 'height').getOrThunk(function () {\n      return RuntimeSize.getHeight(cell) + 'px';\n    });\n  };\n\n  var convert = function convert(cell, number, getter, setter) {\n    var newSize = TableLookup.table(cell).map(function (table) {\n      var total = getter(table);\n      return Math.floor(number / 100 * total);\n    }).getOr(number);\n    setter(cell, newSize);\n    return newSize;\n  };\n\n  var normalizePixelSize = function normalizePixelSize(value, cell, getter, setter) {\n    var number = parseInt(value, 10);\n    return endsWith(value, '%') && name(cell) !== 'table' ? convert(cell, number, getter, setter) : number;\n  };\n\n  var getTotalHeight = function getTotalHeight(cell) {\n    var value = getHeightValue(cell);\n\n    if (!value) {\n      return get$4(cell);\n    }\n\n    return normalizePixelSize(value, cell, get$4, setHeight);\n  };\n\n  var get$6 = function get$6(cell, type, f) {\n    var v = f(cell);\n    var span = getSpan(cell, type);\n    return v / span;\n  };\n\n  var getSpan = function getSpan(cell, type) {\n    return has$1(cell, type) ? parseInt(get$1(cell, type), 10) : 1;\n  };\n\n  var getRawWidth = function getRawWidth(element) {\n    var cssWidth = getRaw(element, 'width');\n    return cssWidth.fold(function () {\n      return Option.from(get$1(element, 'width'));\n    }, function (width) {\n      return Option.some(width);\n    });\n  };\n\n  var normalizePercentageWidth = function normalizePercentageWidth(cellWidth, tableSize) {\n    return cellWidth / tableSize.pixelWidth() * 100;\n  };\n\n  var choosePercentageSize = function choosePercentageSize(element, width, tableSize) {\n    var percentMatch = percentageBasedSizeRegex.exec(width);\n\n    if (percentMatch !== null) {\n      return parseFloat(percentMatch[1]);\n    } else {\n      var intWidth = get$5(element);\n      return normalizePercentageWidth(intWidth, tableSize);\n    }\n  };\n\n  var getPercentageWidth = function getPercentageWidth(cell, tableSize) {\n    var width = getRawWidth(cell);\n    return width.fold(function () {\n      var intWidth = get$5(cell);\n      return normalizePercentageWidth(intWidth, tableSize);\n    }, function (w) {\n      return choosePercentageSize(cell, w, tableSize);\n    });\n  };\n\n  var normalizePixelWidth = function normalizePixelWidth(cellWidth, tableSize) {\n    return cellWidth / 100 * tableSize.pixelWidth();\n  };\n\n  var choosePixelSize = function choosePixelSize(element, width, tableSize) {\n    var pixelMatch = pixelBasedSizeRegex.exec(width);\n\n    if (pixelMatch !== null) {\n      return parseInt(pixelMatch[1], 10);\n    }\n\n    var percentMatch = percentageBasedSizeRegex.exec(width);\n\n    if (percentMatch !== null) {\n      var floatWidth = parseFloat(percentMatch[1]);\n      return normalizePixelWidth(floatWidth, tableSize);\n    }\n\n    return get$5(element);\n  };\n\n  var getPixelWidth = function getPixelWidth(cell, tableSize) {\n    var width = getRawWidth(cell);\n    return width.fold(function () {\n      return get$5(cell);\n    }, function (w) {\n      return choosePixelSize(cell, w, tableSize);\n    });\n  };\n\n  var getHeight$1 = function getHeight$1(cell) {\n    return get$6(cell, 'rowspan', getTotalHeight);\n  };\n\n  var getGenericWidth = function getGenericWidth(cell) {\n    var width = getRawWidth(cell);\n    return width.bind(function (w) {\n      var match = genericSizeRegex.exec(w);\n\n      if (match !== null) {\n        return Option.some({\n          width: constant(parseFloat(match[1])),\n          unit: constant(match[3])\n        });\n      } else {\n        return Option.none();\n      }\n    });\n  };\n\n  var setGenericWidth = function setGenericWidth(cell, amount, unit) {\n    set$1(cell, 'width', amount + unit);\n  };\n\n  var Sizes = {\n    percentageBasedSizeRegex: constant(percentageBasedSizeRegex),\n    pixelBasedSizeRegex: constant(pixelBasedSizeRegex),\n    setPixelWidth: setPixelWidth,\n    setPercentageWidth: setPercentageWidth,\n    setHeight: setHeight,\n    getPixelWidth: getPixelWidth,\n    getPercentageWidth: getPercentageWidth,\n    getGenericWidth: getGenericWidth,\n    setGenericWidth: setGenericWidth,\n    getHeight: getHeight$1,\n    getRawWidth: getRawWidth\n  };\n\n  var halve = function halve(main, other) {\n    var width = Sizes.getGenericWidth(main);\n    width.each(function (w) {\n      var newWidth = w.width() / 2;\n      Sizes.setGenericWidth(main, newWidth, w.unit());\n      Sizes.setGenericWidth(other, newWidth, w.unit());\n    });\n  };\n\n  var CellMutations = {\n    halve: halve\n  };\n\n  var r = function r(left, top) {\n    var translate = function translate(x, y) {\n      return r(left + x, top + y);\n    };\n\n    return {\n      left: constant(left),\n      top: constant(top),\n      translate: translate\n    };\n  };\n\n  var Position = r;\n\n  var boxPosition = function boxPosition(dom) {\n    var box = dom.getBoundingClientRect();\n    return Position(box.left, box.top);\n  };\n\n  var firstDefinedOrZero = function firstDefinedOrZero(a, b) {\n    return a !== undefined ? a : b !== undefined ? b : 0;\n  };\n\n  var absolute = function absolute(element) {\n    var doc = element.dom().ownerDocument;\n    var body = doc.body;\n    var win = doc.defaultView;\n    var html = doc.documentElement;\n\n    if (body === element.dom()) {\n      return Position(body.offsetLeft, body.offsetTop);\n    }\n\n    var scrollTop = firstDefinedOrZero(win.pageYOffset, html.scrollTop);\n    var scrollLeft = firstDefinedOrZero(win.pageXOffset, html.scrollLeft);\n    var clientTop = firstDefinedOrZero(html.clientTop, body.clientTop);\n    var clientLeft = firstDefinedOrZero(html.clientLeft, body.clientLeft);\n    return viewport(element).translate(scrollLeft - clientLeft, scrollTop - clientTop);\n  };\n\n  var viewport = function viewport(element) {\n    var dom = element.dom();\n    var doc = dom.ownerDocument;\n    var body = doc.body;\n\n    if (body === dom) {\n      return Position(body.offsetLeft, body.offsetTop);\n    }\n\n    if (!inBody(element)) {\n      return Position(0, 0);\n    }\n\n    return boxPosition(dom);\n  };\n\n  var rowInfo = Immutable('row', 'y');\n  var colInfo = Immutable('col', 'x');\n\n  var rtlEdge = function rtlEdge(cell) {\n    var pos = absolute(cell);\n    return pos.left() + getOuter$1(cell);\n  };\n\n  var ltrEdge = function ltrEdge(cell) {\n    return absolute(cell).left();\n  };\n\n  var getLeftEdge = function getLeftEdge(index, cell) {\n    return colInfo(index, ltrEdge(cell));\n  };\n\n  var getRightEdge = function getRightEdge(index, cell) {\n    return colInfo(index, rtlEdge(cell));\n  };\n\n  var getTop = function getTop(cell) {\n    return absolute(cell).top();\n  };\n\n  var getTopEdge = function getTopEdge(index, cell) {\n    return rowInfo(index, getTop(cell));\n  };\n\n  var getBottomEdge = function getBottomEdge(index, cell) {\n    return rowInfo(index, getTop(cell) + getOuter(cell));\n  };\n\n  var findPositions = function findPositions(getInnerEdge, getOuterEdge, array) {\n    if (array.length === 0) {\n      return [];\n    }\n\n    var lines = map(array.slice(1), function (cellOption, index) {\n      return cellOption.map(function (cell) {\n        return getInnerEdge(index, cell);\n      });\n    });\n    var lastLine = array[array.length - 1].map(function (cell) {\n      return getOuterEdge(array.length - 1, cell);\n    });\n    return lines.concat([lastLine]);\n  };\n\n  var negate = function negate(step) {\n    return -step;\n  };\n\n  var height = {\n    delta: identity,\n    positions: function positions(optElements) {\n      return findPositions(getTopEdge, getBottomEdge, optElements);\n    },\n    edge: getTop\n  };\n  var ltr = {\n    delta: identity,\n    edge: ltrEdge,\n    positions: function positions(optElements) {\n      return findPositions(getLeftEdge, getRightEdge, optElements);\n    }\n  };\n  var rtl = {\n    delta: negate,\n    edge: rtlEdge,\n    positions: function positions(optElements) {\n      return findPositions(getRightEdge, getLeftEdge, optElements);\n    }\n  };\n  var BarPositions = {\n    height: height,\n    rtl: rtl,\n    ltr: ltr\n  };\n  var ResizeDirection = {\n    ltr: BarPositions.ltr,\n    rtl: BarPositions.rtl\n  };\n\n  function TableDirection(directionAt) {\n    var auto = function auto(table) {\n      return directionAt(table).isRtl() ? ResizeDirection.rtl : ResizeDirection.ltr;\n    };\n\n    var delta = function delta(amount, table) {\n      return auto(table).delta(amount, table);\n    };\n\n    var positions = function positions(cols, table) {\n      return auto(table).positions(cols, table);\n    };\n\n    var edge = function edge(cell) {\n      return auto(cell).edge(cell);\n    };\n\n    return {\n      delta: delta,\n      edge: edge,\n      positions: positions\n    };\n  }\n\n  var getGridSize = function getGridSize(table) {\n    var input = DetailsList.fromTable(table);\n    var warehouse = Warehouse.generate(input);\n    return warehouse.grid();\n  };\n\n  var TableGridSize = {\n    getGridSize: getGridSize\n  };\n\n  var cat = function cat(arr) {\n    var r = [];\n\n    var push = function push(x) {\n      r.push(x);\n    };\n\n    for (var i = 0; i < arr.length; i++) {\n      arr[i].each(push);\n    }\n\n    return r;\n  };\n\n  var findMap = function findMap(arr, f) {\n    for (var i = 0; i < arr.length; i++) {\n      var r = f(arr[i], i);\n\n      if (r.isSome()) {\n        return r;\n      }\n    }\n\n    return Option.none();\n  };\n\n  var setIfNot = function setIfNot(element, property, value, ignore) {\n    if (value === ignore) {\n      remove(element, property);\n    } else {\n      set(element, property, value);\n    }\n  };\n\n  var render = function render(table, grid) {\n    var newRows = [];\n    var newCells = [];\n\n    var renderSection = function renderSection(gridSection, sectionName) {\n      var section = child$2(table, sectionName).getOrThunk(function () {\n        var tb = Element.fromTag(sectionName, owner(table).dom());\n        append(table, tb);\n        return tb;\n      });\n      empty(section);\n      var rows = map(gridSection, function (row) {\n        if (row.isNew()) {\n          newRows.push(row.element());\n        }\n\n        var tr = row.element();\n        empty(tr);\n        each(row.cells(), function (cell) {\n          if (cell.isNew()) {\n            newCells.push(cell.element());\n          }\n\n          setIfNot(cell.element(), 'colspan', cell.colspan(), 1);\n          setIfNot(cell.element(), 'rowspan', cell.rowspan(), 1);\n          append(tr, cell.element());\n        });\n        return tr;\n      });\n      append$1(section, rows);\n    };\n\n    var removeSection = function removeSection(sectionName) {\n      child$2(table, sectionName).each(remove$2);\n    };\n\n    var renderOrRemoveSection = function renderOrRemoveSection(gridSection, sectionName) {\n      if (gridSection.length > 0) {\n        renderSection(gridSection, sectionName);\n      } else {\n        removeSection(sectionName);\n      }\n    };\n\n    var headSection = [];\n    var bodySection = [];\n    var footSection = [];\n    each(grid, function (row) {\n      switch (row.section()) {\n        case 'thead':\n          headSection.push(row);\n          break;\n\n        case 'tbody':\n          bodySection.push(row);\n          break;\n\n        case 'tfoot':\n          footSection.push(row);\n          break;\n      }\n    });\n    renderOrRemoveSection(headSection, 'thead');\n    renderOrRemoveSection(bodySection, 'tbody');\n    renderOrRemoveSection(footSection, 'tfoot');\n    return {\n      newRows: constant(newRows),\n      newCells: constant(newCells)\n    };\n  };\n\n  var copy$2 = function copy$2(grid) {\n    var rows = map(grid, function (row) {\n      var tr = shallow(row.element());\n      each(row.cells(), function (cell) {\n        var clonedCell = deep(cell.element());\n        setIfNot(clonedCell, 'colspan', cell.colspan(), 1);\n        setIfNot(clonedCell, 'rowspan', cell.rowspan(), 1);\n        append(tr, clonedCell);\n      });\n      return tr;\n    });\n    return rows;\n  };\n\n  var Redraw = {\n    render: render,\n    copy: copy$2\n  };\n\n  var read = function read(element, attr) {\n    var value = get$1(element, attr);\n    return value === undefined || value === '' ? [] : value.split(' ');\n  };\n\n  var add = function add(element, attr, id) {\n    var old = read(element, attr);\n    var nu = old.concat([id]);\n    set(element, attr, nu.join(' '));\n    return true;\n  };\n\n  var remove$3 = function remove$3(element, attr, id) {\n    var nu = filter(read(element, attr), function (v) {\n      return v !== id;\n    });\n\n    if (nu.length > 0) {\n      set(element, attr, nu.join(' '));\n    } else {\n      remove(element, attr);\n    }\n\n    return false;\n  };\n\n  var supports = function supports(element) {\n    return element.dom().classList !== undefined;\n  };\n\n  var get$7 = function get$7(element) {\n    return read(element, 'class');\n  };\n\n  var add$1 = function add$1(element, clazz) {\n    return add(element, 'class', clazz);\n  };\n\n  var remove$4 = function remove$4(element, clazz) {\n    return remove$3(element, 'class', clazz);\n  };\n\n  var add$2 = function add$2(element, clazz) {\n    if (supports(element)) {\n      element.dom().classList.add(clazz);\n    } else {\n      add$1(element, clazz);\n    }\n  };\n\n  var cleanClass = function cleanClass(element) {\n    var classList = supports(element) ? element.dom().classList : get$7(element);\n\n    if (classList.length === 0) {\n      remove(element, 'class');\n    }\n  };\n\n  var remove$5 = function remove$5(element, clazz) {\n    if (supports(element)) {\n      var classList = element.dom().classList;\n      classList.remove(clazz);\n    } else {\n      remove$4(element, clazz);\n    }\n\n    cleanClass(element);\n  };\n\n  var has$2 = function has$2(element, clazz) {\n    return supports(element) && element.dom().classList.contains(clazz);\n  };\n\n  var repeat = function repeat(repititions, f) {\n    var r = [];\n\n    for (var i = 0; i < repititions; i++) {\n      r.push(f(i));\n    }\n\n    return r;\n  };\n\n  var range = function range(start, end) {\n    var r = [];\n\n    for (var i = start; i < end; i++) {\n      r.push(i);\n    }\n\n    return r;\n  };\n\n  var deduce = function deduce(xs, index) {\n    if (index < 0 || index >= xs.length - 1) {\n      return Option.none();\n    }\n\n    var current = xs[index].fold(function () {\n      var rest = reverse(xs.slice(0, index));\n      return findMap(rest, function (a, i) {\n        return a.map(function (aa) {\n          return {\n            value: aa,\n            delta: i + 1\n          };\n        });\n      });\n    }, function (c) {\n      return Option.some({\n        value: c,\n        delta: 0\n      });\n    });\n    var next = xs[index + 1].fold(function () {\n      var rest = xs.slice(index + 1);\n      return findMap(rest, function (a, i) {\n        return a.map(function (aa) {\n          return {\n            value: aa,\n            delta: i + 1\n          };\n        });\n      });\n    }, function (n) {\n      return Option.some({\n        value: n,\n        delta: 1\n      });\n    });\n    return current.bind(function (c) {\n      return next.map(function (n) {\n        var extras = n.delta + c.delta;\n        return Math.abs(n.value - c.value) / extras;\n      });\n    });\n  };\n\n  var columns = function columns(warehouse) {\n    var grid = warehouse.grid();\n    var cols = range(0, grid.columns());\n    var rowsArr = range(0, grid.rows());\n    return map(cols, function (col) {\n      var getBlock = function getBlock() {\n        return bind(rowsArr, function (r) {\n          return Warehouse.getAt(warehouse, r, col).filter(function (detail) {\n            return detail.column() === col;\n          }).fold(constant([]), function (detail) {\n            return [detail];\n          });\n        });\n      };\n\n      var isSingle = function isSingle(detail) {\n        return detail.colspan() === 1;\n      };\n\n      var getFallback = function getFallback() {\n        return Warehouse.getAt(warehouse, 0, col);\n      };\n\n      return decide(getBlock, isSingle, getFallback);\n    });\n  };\n\n  var decide = function decide(getBlock, isSingle, getFallback) {\n    var inBlock = getBlock();\n    var singleInBlock = find(inBlock, isSingle);\n    var detailOption = singleInBlock.orThunk(function () {\n      return Option.from(inBlock[0]).orThunk(getFallback);\n    });\n    return detailOption.map(function (detail) {\n      return detail.element();\n    });\n  };\n\n  var rows$1 = function rows$1(warehouse) {\n    var grid = warehouse.grid();\n    var rowsArr = range(0, grid.rows());\n    var cols = range(0, grid.columns());\n    return map(rowsArr, function (row) {\n      var getBlock = function getBlock() {\n        return bind(cols, function (c) {\n          return Warehouse.getAt(warehouse, row, c).filter(function (detail) {\n            return detail.row() === row;\n          }).fold(constant([]), function (detail) {\n            return [detail];\n          });\n        });\n      };\n\n      var isSingle = function isSingle(detail) {\n        return detail.rowspan() === 1;\n      };\n\n      var getFallback = function getFallback() {\n        return Warehouse.getAt(warehouse, row, 0);\n      };\n\n      return decide(getBlock, isSingle, getFallback);\n    });\n  };\n\n  var Blocks = {\n    columns: columns,\n    rows: rows$1\n  };\n\n  var css = function css(namespace) {\n    var dashNamespace = namespace.replace(/\\./g, '-');\n\n    var resolve = function resolve(str) {\n      return dashNamespace + '-' + str;\n    };\n\n    return {\n      resolve: resolve\n    };\n  };\n\n  var styles = css('ephox-snooker');\n  var Styles = {\n    resolve: styles.resolve\n  };\n\n  var col = function col(column, x, y, w, h) {\n    var blocker = Element.fromTag('div');\n    setAll$1(blocker, {\n      position: 'absolute',\n      left: x - w / 2 + 'px',\n      top: y + 'px',\n      height: h + 'px',\n      width: w + 'px'\n    });\n    setAll(blocker, {\n      'data-column': column,\n      'role': 'presentation'\n    });\n    return blocker;\n  };\n\n  var row$1 = function row$1(r, x, y, w, h) {\n    var blocker = Element.fromTag('div');\n    setAll$1(blocker, {\n      position: 'absolute',\n      left: x + 'px',\n      top: y - h / 2 + 'px',\n      height: h + 'px',\n      width: w + 'px'\n    });\n    setAll(blocker, {\n      'data-row': r,\n      'role': 'presentation'\n    });\n    return blocker;\n  };\n\n  var Bar = {\n    col: col,\n    row: row$1\n  };\n  var resizeBar = Styles.resolve('resizer-bar');\n  var resizeRowBar = Styles.resolve('resizer-rows');\n  var resizeColBar = Styles.resolve('resizer-cols');\n  var BAR_THICKNESS = 7;\n\n  var destroy = function destroy(wire) {\n    var previous = descendants$1(wire.parent(), '.' + resizeBar);\n    each(previous, remove$2);\n  };\n\n  var drawBar = function drawBar(wire, positions, create) {\n    var origin = wire.origin();\n    each(positions, function (cpOption, i) {\n      cpOption.each(function (cp) {\n        var bar = create(origin, cp);\n        add$2(bar, resizeBar);\n        append(wire.parent(), bar);\n      });\n    });\n  };\n\n  var refreshCol = function refreshCol(wire, colPositions, position, tableHeight) {\n    drawBar(wire, colPositions, function (origin, cp) {\n      var colBar = Bar.col(cp.col(), cp.x() - origin.left(), position.top() - origin.top(), BAR_THICKNESS, tableHeight);\n      add$2(colBar, resizeColBar);\n      return colBar;\n    });\n  };\n\n  var refreshRow = function refreshRow(wire, rowPositions, position, tableWidth) {\n    drawBar(wire, rowPositions, function (origin, cp) {\n      var rowBar = Bar.row(cp.row(), position.left() - origin.left(), cp.y() - origin.top(), tableWidth, BAR_THICKNESS);\n      add$2(rowBar, resizeRowBar);\n      return rowBar;\n    });\n  };\n\n  var refreshGrid = function refreshGrid(wire, table, rows, cols, hdirection, vdirection) {\n    var position = absolute(table);\n    var rowPositions = rows.length > 0 ? hdirection.positions(rows, table) : [];\n    refreshRow(wire, rowPositions, position, getOuter$1(table));\n    var colPositions = cols.length > 0 ? vdirection.positions(cols, table) : [];\n    refreshCol(wire, colPositions, position, getOuter(table));\n  };\n\n  var refresh = function refresh(wire, table, hdirection, vdirection) {\n    destroy(wire);\n    var list = DetailsList.fromTable(table);\n    var warehouse = Warehouse.generate(list);\n    var rows = Blocks.rows(warehouse);\n    var cols = Blocks.columns(warehouse);\n    refreshGrid(wire, table, rows, cols, hdirection, vdirection);\n  };\n\n  var each$2 = function each$2(wire, f) {\n    var bars = descendants$1(wire.parent(), '.' + resizeBar);\n    each(bars, f);\n  };\n\n  var hide = function hide(wire) {\n    each$2(wire, function (bar) {\n      set$1(bar, 'display', 'none');\n    });\n  };\n\n  var show = function show(wire) {\n    each$2(wire, function (bar) {\n      set$1(bar, 'display', 'block');\n    });\n  };\n\n  var isRowBar = function isRowBar(element) {\n    return has$2(element, resizeRowBar);\n  };\n\n  var isColBar = function isColBar(element) {\n    return has$2(element, resizeColBar);\n  };\n\n  var Bars = {\n    refresh: refresh,\n    hide: hide,\n    show: show,\n    destroy: destroy,\n    isRowBar: isRowBar,\n    isColBar: isColBar\n  };\n\n  var addCell = function addCell(gridRow, index, cell) {\n    var cells = gridRow.cells();\n    var before = cells.slice(0, index);\n    var after = cells.slice(index);\n    var newCells = before.concat([cell]).concat(after);\n    return setCells(gridRow, newCells);\n  };\n\n  var mutateCell = function mutateCell(gridRow, index, cell) {\n    var cells = gridRow.cells();\n    cells[index] = cell;\n  };\n\n  var setCells = function setCells(gridRow, cells) {\n    return rowcells(cells, gridRow.section());\n  };\n\n  var mapCells = function mapCells(gridRow, f) {\n    var cells = gridRow.cells();\n    var r = map(cells, f);\n    return rowcells(r, gridRow.section());\n  };\n\n  var getCell = function getCell(gridRow, index) {\n    return gridRow.cells()[index];\n  };\n\n  var getCellElement = function getCellElement(gridRow, index) {\n    return getCell(gridRow, index).element();\n  };\n\n  var cellLength = function cellLength(gridRow) {\n    return gridRow.cells().length;\n  };\n\n  var GridRow = {\n    addCell: addCell,\n    setCells: setCells,\n    mutateCell: mutateCell,\n    getCell: getCell,\n    getCellElement: getCellElement,\n    mapCells: mapCells,\n    cellLength: cellLength\n  };\n\n  var getColumn = function getColumn(grid, index) {\n    return map(grid, function (row) {\n      return GridRow.getCell(row, index);\n    });\n  };\n\n  var getRow = function getRow(grid, index) {\n    return grid[index];\n  };\n\n  var findDiff = function findDiff(xs, comp) {\n    if (xs.length === 0) {\n      return 0;\n    }\n\n    var first = xs[0];\n    var index = findIndex(xs, function (x) {\n      return !comp(first.element(), x.element());\n    });\n    return index.fold(function () {\n      return xs.length;\n    }, function (ind) {\n      return ind;\n    });\n  };\n\n  var subgrid = function subgrid(grid, row, column, comparator) {\n    var restOfRow = getRow(grid, row).cells().slice(column);\n    var endColIndex = findDiff(restOfRow, comparator);\n    var restOfColumn = getColumn(grid, column).slice(row);\n    var endRowIndex = findDiff(restOfColumn, comparator);\n    return {\n      colspan: constant(endColIndex),\n      rowspan: constant(endRowIndex)\n    };\n  };\n\n  var TableGrid = {\n    subgrid: subgrid\n  };\n\n  var toDetails = function toDetails(grid, comparator) {\n    var seen = map(grid, function (row, ri) {\n      return map(row.cells(), function (col, ci) {\n        return false;\n      });\n    });\n\n    var updateSeen = function updateSeen(ri, ci, rowspan, colspan) {\n      for (var r = ri; r < ri + rowspan; r++) {\n        for (var c = ci; c < ci + colspan; c++) {\n          seen[r][c] = true;\n        }\n      }\n    };\n\n    return map(grid, function (row, ri) {\n      var details = bind(row.cells(), function (cell, ci) {\n        if (seen[ri][ci] === false) {\n          var result = TableGrid.subgrid(grid, ri, ci, comparator);\n          updateSeen(ri, ci, result.rowspan(), result.colspan());\n          return [detailnew(cell.element(), result.rowspan(), result.colspan(), cell.isNew())];\n        } else {\n          return [];\n        }\n      });\n      return rowdetails(details, row.section());\n    });\n  };\n\n  var toGrid = function toGrid(warehouse, generators, isNew) {\n    var grid = [];\n\n    for (var i = 0; i < warehouse.grid().rows(); i++) {\n      var rowCells = [];\n\n      for (var j = 0; j < warehouse.grid().columns(); j++) {\n        var element = Warehouse.getAt(warehouse, i, j).map(function (item) {\n          return elementnew(item.element(), isNew);\n        }).getOrThunk(function () {\n          return elementnew(generators.gap(), true);\n        });\n        rowCells.push(element);\n      }\n\n      var row = rowcells(rowCells, warehouse.all()[i].section());\n      grid.push(row);\n    }\n\n    return grid;\n  };\n\n  var Transitions = {\n    toDetails: toDetails,\n    toGrid: toGrid\n  };\n\n  var fromWarehouse = function fromWarehouse(warehouse, generators) {\n    return Transitions.toGrid(warehouse, generators, false);\n  };\n\n  var deriveRows = function deriveRows(rendered, generators) {\n    var findRow = function findRow(details) {\n      var rowOfCells = findMap(details, function (detail) {\n        return parent(detail.element()).map(function (row) {\n          var isNew = parent(row).isNone();\n          return elementnew(row, isNew);\n        });\n      });\n      return rowOfCells.getOrThunk(function () {\n        return elementnew(generators.row(), true);\n      });\n    };\n\n    return map(rendered, function (details) {\n      var row = findRow(details.details());\n      return rowdatanew(row.element(), details.details(), details.section(), row.isNew());\n    });\n  };\n\n  var toDetailList = function toDetailList(grid, generators) {\n    var rendered = Transitions.toDetails(grid, eq);\n    return deriveRows(rendered, generators);\n  };\n\n  var findInWarehouse = function findInWarehouse(warehouse, element) {\n    var all = flatten(map(warehouse.all(), function (r) {\n      return r.cells();\n    }));\n    return find(all, function (e) {\n      return eq(element, e.element());\n    });\n  };\n\n  var run = function run(operation, extract, adjustment, postAction, genWrappers) {\n    return function (wire, table, target, generators, direction) {\n      var input = DetailsList.fromTable(table);\n      var warehouse = Warehouse.generate(input);\n      var output = extract(warehouse, target).map(function (info) {\n        var model = fromWarehouse(warehouse, generators);\n        var result = operation(model, info, eq, genWrappers(generators));\n        var grid = toDetailList(result.grid(), generators);\n        return {\n          grid: constant(grid),\n          cursor: result.cursor\n        };\n      });\n      return output.fold(function () {\n        return Option.none();\n      }, function (out) {\n        var newElements = Redraw.render(table, out.grid());\n        adjustment(table, out.grid(), direction);\n        postAction(table);\n        Bars.refresh(wire, table, BarPositions.height, direction);\n        return Option.some({\n          cursor: out.cursor,\n          newRows: newElements.newRows,\n          newCells: newElements.newCells\n        });\n      });\n    };\n  };\n\n  var onCell = function onCell(warehouse, target) {\n    return TableLookup.cell(target.element()).bind(function (cell) {\n      return findInWarehouse(warehouse, cell);\n    });\n  };\n\n  var onPaste = function onPaste(warehouse, target) {\n    return TableLookup.cell(target.element()).bind(function (cell) {\n      return findInWarehouse(warehouse, cell).map(function (details) {\n        var value = _assign(_assign({}, details), {\n          generators: target.generators,\n          clipboard: target.clipboard\n        });\n\n        return value;\n      });\n    });\n  };\n\n  var onPasteRows = function onPasteRows(warehouse, target) {\n    var details = map(target.selection(), function (cell) {\n      return TableLookup.cell(cell).bind(function (lc) {\n        return findInWarehouse(warehouse, lc);\n      });\n    });\n    var cells = cat(details);\n    return cells.length > 0 ? Option.some({\n      cells: cells,\n      generators: target.generators,\n      clipboard: target.clipboard\n    }) : Option.none();\n  };\n\n  var onMergable = function onMergable(_warehouse, target) {\n    return target.mergable();\n  };\n\n  var onUnmergable = function onUnmergable(_warehouse, target) {\n    return target.unmergable();\n  };\n\n  var onCells = function onCells(warehouse, target) {\n    var details = map(target.selection(), function (cell) {\n      return TableLookup.cell(cell).bind(function (lc) {\n        return findInWarehouse(warehouse, lc);\n      });\n    });\n    var cells = cat(details);\n    return cells.length > 0 ? Option.some(cells) : Option.none();\n  };\n\n  var value = function value(o) {\n    var is = function is(v) {\n      return o === v;\n    };\n\n    var or = function or(opt) {\n      return value(o);\n    };\n\n    var orThunk = function orThunk(f) {\n      return value(o);\n    };\n\n    var map = function map(f) {\n      return value(f(o));\n    };\n\n    var mapError = function mapError(f) {\n      return value(o);\n    };\n\n    var each = function each(f) {\n      f(o);\n    };\n\n    var bind = function bind(f) {\n      return f(o);\n    };\n\n    var fold = function fold(_, onValue) {\n      return onValue(o);\n    };\n\n    var exists = function exists(f) {\n      return f(o);\n    };\n\n    var forall = function forall(f) {\n      return f(o);\n    };\n\n    var toOption = function toOption() {\n      return Option.some(o);\n    };\n\n    return {\n      is: is,\n      isValue: always,\n      isError: never,\n      getOr: constant(o),\n      getOrThunk: constant(o),\n      getOrDie: constant(o),\n      or: or,\n      orThunk: orThunk,\n      fold: fold,\n      map: map,\n      mapError: mapError,\n      each: each,\n      bind: bind,\n      exists: exists,\n      forall: forall,\n      toOption: toOption\n    };\n  };\n\n  var error = function error(message) {\n    var getOrThunk = function getOrThunk(f) {\n      return f();\n    };\n\n    var getOrDie = function getOrDie() {\n      return die(String(message))();\n    };\n\n    var or = function or(opt) {\n      return opt;\n    };\n\n    var orThunk = function orThunk(f) {\n      return f();\n    };\n\n    var map = function map(f) {\n      return error(message);\n    };\n\n    var mapError = function mapError(f) {\n      return error(f(message));\n    };\n\n    var bind = function bind(f) {\n      return error(message);\n    };\n\n    var fold = function fold(onError, _) {\n      return onError(message);\n    };\n\n    return {\n      is: never,\n      isValue: never,\n      isError: always,\n      getOr: identity,\n      getOrThunk: getOrThunk,\n      getOrDie: getOrDie,\n      or: or,\n      orThunk: orThunk,\n      fold: fold,\n      map: map,\n      mapError: mapError,\n      each: noop,\n      bind: bind,\n      exists: never,\n      forall: always,\n      toOption: Option.none\n    };\n  };\n\n  var fromOption = function fromOption(opt, err) {\n    return opt.fold(function () {\n      return error(err);\n    }, value);\n  };\n\n  var Result = {\n    value: value,\n    error: error,\n    fromOption: fromOption\n  };\n\n  var measure = function measure(startAddress, gridA, gridB) {\n    if (startAddress.row() >= gridA.length || startAddress.column() > GridRow.cellLength(gridA[0])) {\n      return Result.error('invalid start address out of table bounds, row: ' + startAddress.row() + ', column: ' + startAddress.column());\n    }\n\n    var rowRemainder = gridA.slice(startAddress.row());\n    var colRemainder = rowRemainder[0].cells().slice(startAddress.column());\n    var colRequired = GridRow.cellLength(gridB[0]);\n    var rowRequired = gridB.length;\n    return Result.value({\n      rowDelta: constant(rowRemainder.length - rowRequired),\n      colDelta: constant(colRemainder.length - colRequired)\n    });\n  };\n\n  var measureWidth = function measureWidth(gridA, gridB) {\n    var colLengthA = GridRow.cellLength(gridA[0]);\n    var colLengthB = GridRow.cellLength(gridB[0]);\n    return {\n      rowDelta: constant(0),\n      colDelta: constant(colLengthA - colLengthB)\n    };\n  };\n\n  var fill = function fill(cells, generator) {\n    return map(cells, function () {\n      return elementnew(generator.cell(), true);\n    });\n  };\n\n  var rowFill = function rowFill(grid, amount, generator) {\n    return grid.concat(repeat(amount, function (_row) {\n      return GridRow.setCells(grid[grid.length - 1], fill(grid[grid.length - 1].cells(), generator));\n    }));\n  };\n\n  var colFill = function colFill(grid, amount, generator) {\n    return map(grid, function (row) {\n      return GridRow.setCells(row, row.cells().concat(fill(range(0, amount), generator)));\n    });\n  };\n\n  var tailor = function tailor(gridA, delta, generator) {\n    var fillCols = delta.colDelta() < 0 ? colFill : identity;\n    var fillRows = delta.rowDelta() < 0 ? rowFill : identity;\n    var modifiedCols = fillCols(gridA, Math.abs(delta.colDelta()), generator);\n    var tailoredGrid = fillRows(modifiedCols, Math.abs(delta.rowDelta()), generator);\n    return tailoredGrid;\n  };\n\n  var Fitment = {\n    measure: measure,\n    measureWidth: measureWidth,\n    tailor: tailor\n  };\n\n  var merge = function merge(grid, bounds, comparator, substitution) {\n    if (grid.length === 0) {\n      return grid;\n    }\n\n    for (var i = bounds.startRow(); i <= bounds.finishRow(); i++) {\n      for (var j = bounds.startCol(); j <= bounds.finishCol(); j++) {\n        GridRow.mutateCell(grid[i], j, elementnew(substitution(), false));\n      }\n    }\n\n    return grid;\n  };\n\n  var unmerge = function unmerge(grid, target, comparator, substitution) {\n    var first = true;\n\n    for (var i = 0; i < grid.length; i++) {\n      for (var j = 0; j < GridRow.cellLength(grid[0]); j++) {\n        var current = GridRow.getCellElement(grid[i], j);\n        var isToReplace = comparator(current, target);\n\n        if (isToReplace === true && first === false) {\n          GridRow.mutateCell(grid[i], j, elementnew(substitution(), true));\n        } else if (isToReplace === true) {\n          first = false;\n        }\n      }\n    }\n\n    return grid;\n  };\n\n  var uniqueCells = function uniqueCells(row, comparator) {\n    return foldl(row, function (rest, cell) {\n      return exists(rest, function (currentCell) {\n        return comparator(currentCell.element(), cell.element());\n      }) ? rest : rest.concat([cell]);\n    }, []);\n  };\n\n  var splitRows = function splitRows(grid, index, comparator, substitution) {\n    if (index > 0 && index < grid.length) {\n      var rowPrevCells = grid[index - 1].cells();\n      var cells = uniqueCells(rowPrevCells, comparator);\n      each(cells, function (cell) {\n        var replacement = Option.none();\n\n        var _loop_1 = function _loop_1(i) {\n          var _loop_2 = function _loop_2(j) {\n            var current = grid[i].cells()[j];\n            var isToReplace = comparator(current.element(), cell.element());\n\n            if (isToReplace) {\n              if (replacement.isNone()) {\n                replacement = Option.some(substitution());\n              }\n\n              replacement.each(function (sub) {\n                GridRow.mutateCell(grid[i], j, elementnew(sub, true));\n              });\n            }\n          };\n\n          for (var j = 0; j < GridRow.cellLength(grid[0]); j++) {\n            _loop_2(j);\n          }\n        };\n\n        for (var i = index; i < grid.length; i++) {\n          _loop_1(i);\n        }\n      });\n    }\n\n    return grid;\n  };\n\n  var MergingOperations = {\n    merge: merge,\n    unmerge: unmerge,\n    splitRows: splitRows\n  };\n\n  var isSpanning = function isSpanning(grid, row, col, comparator) {\n    var candidate = GridRow.getCell(grid[row], col);\n    var matching = curry(comparator, candidate.element());\n    var currentRow = grid[row];\n    return grid.length > 1 && GridRow.cellLength(currentRow) > 1 && (col > 0 && matching(GridRow.getCellElement(currentRow, col - 1)) || col < currentRow.cells().length - 1 && matching(GridRow.getCellElement(currentRow, col + 1)) || row > 0 && matching(GridRow.getCellElement(grid[row - 1], col)) || row < grid.length - 1 && matching(GridRow.getCellElement(grid[row + 1], col)));\n  };\n\n  var mergeTables = function mergeTables(startAddress, gridA, gridB, generator, comparator) {\n    var startRow = startAddress.row();\n    var startCol = startAddress.column();\n    var mergeHeight = gridB.length;\n    var mergeWidth = GridRow.cellLength(gridB[0]);\n    var endRow = startRow + mergeHeight;\n    var endCol = startCol + mergeWidth;\n\n    for (var r = startRow; r < endRow; r++) {\n      for (var c = startCol; c < endCol; c++) {\n        if (isSpanning(gridA, r, c, comparator)) {\n          MergingOperations.unmerge(gridA, GridRow.getCellElement(gridA[r], c), comparator, generator.cell);\n        }\n\n        var newCell = GridRow.getCellElement(gridB[r - startRow], c - startCol);\n        var replacement = generator.replace(newCell);\n        GridRow.mutateCell(gridA[r], c, elementnew(replacement, true));\n      }\n    }\n\n    return gridA;\n  };\n\n  var merge$1 = function merge$1(startAddress, gridA, gridB, generator, comparator) {\n    var result = Fitment.measure(startAddress, gridA, gridB);\n    return result.map(function (delta) {\n      var fittedGrid = Fitment.tailor(gridA, delta, generator);\n      return mergeTables(startAddress, fittedGrid, gridB, generator, comparator);\n    });\n  };\n\n  var insert = function insert(index, gridA, gridB, generator, comparator) {\n    MergingOperations.splitRows(gridA, index, comparator, generator.cell);\n    var delta = Fitment.measureWidth(gridB, gridA);\n    var fittedNewGrid = Fitment.tailor(gridB, delta, generator);\n    var secondDelta = Fitment.measureWidth(gridA, fittedNewGrid);\n    var fittedOldGrid = Fitment.tailor(gridA, secondDelta, generator);\n    return fittedOldGrid.slice(0, index).concat(fittedNewGrid).concat(fittedOldGrid.slice(index, fittedOldGrid.length));\n  };\n\n  var TableMerge = {\n    merge: merge$1,\n    insert: insert\n  };\n\n  var insertRowAt = function insertRowAt(grid, index, example, comparator, substitution) {\n    var before = grid.slice(0, index);\n    var after = grid.slice(index);\n    var between = GridRow.mapCells(grid[example], function (ex, c) {\n      var withinSpan = index > 0 && index < grid.length && comparator(GridRow.getCellElement(grid[index - 1], c), GridRow.getCellElement(grid[index], c));\n      var ret = withinSpan ? GridRow.getCell(grid[index], c) : elementnew(substitution(ex.element(), comparator), true);\n      return ret;\n    });\n    return before.concat([between]).concat(after);\n  };\n\n  var insertColumnAt = function insertColumnAt(grid, index, example, comparator, substitution) {\n    return map(grid, function (row) {\n      var withinSpan = index > 0 && index < GridRow.cellLength(row) && comparator(GridRow.getCellElement(row, index - 1), GridRow.getCellElement(row, index));\n      var sub = withinSpan ? GridRow.getCell(row, index) : elementnew(substitution(GridRow.getCellElement(row, example), comparator), true);\n      return GridRow.addCell(row, index, sub);\n    });\n  };\n\n  var splitCellIntoColumns = function splitCellIntoColumns(grid, exampleRow, exampleCol, comparator, substitution) {\n    var index = exampleCol + 1;\n    return map(grid, function (row, i) {\n      var isTargetCell = i === exampleRow;\n      var sub = isTargetCell ? elementnew(substitution(GridRow.getCellElement(row, exampleCol), comparator), true) : GridRow.getCell(row, exampleCol);\n      return GridRow.addCell(row, index, sub);\n    });\n  };\n\n  var splitCellIntoRows = function splitCellIntoRows(grid, exampleRow, exampleCol, comparator, substitution) {\n    var index = exampleRow + 1;\n    var before = grid.slice(0, index);\n    var after = grid.slice(index);\n    var between = GridRow.mapCells(grid[exampleRow], function (ex, i) {\n      var isTargetCell = i === exampleCol;\n      return isTargetCell ? elementnew(substitution(ex.element(), comparator), true) : ex;\n    });\n    return before.concat([between]).concat(after);\n  };\n\n  var deleteColumnsAt = function deleteColumnsAt(grid, start, finish) {\n    var rows = map(grid, function (row) {\n      var cells = row.cells().slice(0, start).concat(row.cells().slice(finish + 1));\n      return rowcells(cells, row.section());\n    });\n    return filter(rows, function (row) {\n      return row.cells().length > 0;\n    });\n  };\n\n  var deleteRowsAt = function deleteRowsAt(grid, start, finish) {\n    return grid.slice(0, start).concat(grid.slice(finish + 1));\n  };\n\n  var ModificationOperations = {\n    insertRowAt: insertRowAt,\n    insertColumnAt: insertColumnAt,\n    splitCellIntoColumns: splitCellIntoColumns,\n    splitCellIntoRows: splitCellIntoRows,\n    deleteRowsAt: deleteRowsAt,\n    deleteColumnsAt: deleteColumnsAt\n  };\n\n  var replaceIn = function replaceIn(grid, targets, comparator, substitution) {\n    var isTarget = function isTarget(cell) {\n      return exists(targets, function (target) {\n        return comparator(cell.element(), target.element());\n      });\n    };\n\n    return map(grid, function (row) {\n      return GridRow.mapCells(row, function (cell) {\n        return isTarget(cell) ? elementnew(substitution(cell.element(), comparator), true) : cell;\n      });\n    });\n  };\n\n  var notStartRow = function notStartRow(grid, rowIndex, colIndex, comparator) {\n    return GridRow.getCellElement(grid[rowIndex], colIndex) !== undefined && rowIndex > 0 && comparator(GridRow.getCellElement(grid[rowIndex - 1], colIndex), GridRow.getCellElement(grid[rowIndex], colIndex));\n  };\n\n  var notStartColumn = function notStartColumn(row, index, comparator) {\n    return index > 0 && comparator(GridRow.getCellElement(row, index - 1), GridRow.getCellElement(row, index));\n  };\n\n  var replaceColumn = function replaceColumn(grid, index, comparator, substitution) {\n    var targets = bind(grid, function (row, i) {\n      var alreadyAdded = notStartRow(grid, i, index, comparator) || notStartColumn(row, index, comparator);\n      return alreadyAdded ? [] : [GridRow.getCell(row, index)];\n    });\n    return replaceIn(grid, targets, comparator, substitution);\n  };\n\n  var replaceRow = function replaceRow(grid, index, comparator, substitution) {\n    var targetRow = grid[index];\n    var targets = bind(targetRow.cells(), function (item, i) {\n      var alreadyAdded = notStartRow(grid, index, i, comparator) || notStartColumn(targetRow, i, comparator);\n      return alreadyAdded ? [] : [item];\n    });\n    return replaceIn(grid, targets, comparator, substitution);\n  };\n\n  var TransformOperations = {\n    replaceColumn: replaceColumn,\n    replaceRow: replaceRow\n  };\n  var adt = Adt.generate([{\n    none: []\n  }, {\n    only: ['index']\n  }, {\n    left: ['index', 'next']\n  }, {\n    middle: ['prev', 'index', 'next']\n  }, {\n    right: ['prev', 'index']\n  }]);\n\n  var ColumnContext = _assign({}, adt);\n\n  var neighbours$1 = function neighbours$1(input, index) {\n    if (input.length === 0) {\n      return ColumnContext.none();\n    }\n\n    if (input.length === 1) {\n      return ColumnContext.only(0);\n    }\n\n    if (index === 0) {\n      return ColumnContext.left(0, 1);\n    }\n\n    if (index === input.length - 1) {\n      return ColumnContext.right(index - 1, index);\n    }\n\n    if (index > 0 && index < input.length - 1) {\n      return ColumnContext.middle(index - 1, index, index + 1);\n    }\n\n    return ColumnContext.none();\n  };\n\n  var determine = function determine(input, column, step, tableSize) {\n    var result = input.slice(0);\n    var context = neighbours$1(input, column);\n\n    var zero = function zero(array) {\n      return map(array, constant(0));\n    };\n\n    var onNone = constant(zero(result));\n\n    var onOnly = function onOnly(index) {\n      return tableSize.singleColumnWidth(result[index], step);\n    };\n\n    var onChange = function onChange(index, next) {\n      if (step >= 0) {\n        var newNext = Math.max(tableSize.minCellWidth(), result[next] - step);\n        return zero(result.slice(0, index)).concat([step, newNext - result[next]]).concat(zero(result.slice(next + 1)));\n      } else {\n        var newThis = Math.max(tableSize.minCellWidth(), result[index] + step);\n        var diffx = result[index] - newThis;\n        return zero(result.slice(0, index)).concat([newThis - result[index], diffx]).concat(zero(result.slice(next + 1)));\n      }\n    };\n\n    var onLeft = onChange;\n\n    var onMiddle = function onMiddle(_prev, index, next) {\n      return onChange(index, next);\n    };\n\n    var onRight = function onRight(_prev, index) {\n      if (step >= 0) {\n        return zero(result.slice(0, index)).concat([step]);\n      } else {\n        var size = Math.max(tableSize.minCellWidth(), result[index] + step);\n        return zero(result.slice(0, index)).concat([size - result[index]]);\n      }\n    };\n\n    return context.fold(onNone, onOnly, onLeft, onMiddle, onRight);\n  };\n\n  var Deltas = {\n    determine: determine\n  };\n\n  var getSpan$1 = function getSpan$1(cell, type) {\n    return has$1(cell, type) && parseInt(get$1(cell, type), 10) > 1;\n  };\n\n  var hasColspan = function hasColspan(cell) {\n    return getSpan$1(cell, 'colspan');\n  };\n\n  var hasRowspan = function hasRowspan(cell) {\n    return getSpan$1(cell, 'rowspan');\n  };\n\n  var getInt = function getInt(element, property) {\n    return parseInt(get$2(element, property), 10);\n  };\n\n  var CellUtils = {\n    hasColspan: hasColspan,\n    hasRowspan: hasRowspan,\n    minWidth: constant(10),\n    minHeight: constant(10),\n    getInt: getInt\n  };\n\n  var getRaw$1 = function getRaw$1(cell, property, getter) {\n    return getRaw(cell, property).fold(function () {\n      return getter(cell) + 'px';\n    }, function (raw) {\n      return raw;\n    });\n  };\n\n  var getRawW = function getRawW(cell, tableSize) {\n    return getRaw$1(cell, 'width', function (e) {\n      return Sizes.getPixelWidth(e, tableSize);\n    });\n  };\n\n  var getRawH = function getRawH(cell) {\n    return getRaw$1(cell, 'height', Sizes.getHeight);\n  };\n\n  var getWidthFrom = function getWidthFrom(warehouse, direction, getWidth, fallback, tableSize) {\n    var columns = Blocks.columns(warehouse);\n    var backups = map(columns, function (cellOption) {\n      return cellOption.map(direction.edge);\n    });\n    return map(columns, function (cellOption, c) {\n      var columnCell = cellOption.filter(not(CellUtils.hasColspan));\n      return columnCell.fold(function () {\n        var deduced = deduce(backups, c);\n        return fallback(deduced);\n      }, function (cell) {\n        return getWidth(cell, tableSize);\n      });\n    });\n  };\n\n  var getDeduced = function getDeduced(deduced) {\n    return deduced.map(function (d) {\n      return d + 'px';\n    }).getOr('');\n  };\n\n  var getRawWidths = function getRawWidths(warehouse, direction, tableSize) {\n    return getWidthFrom(warehouse, direction, getRawW, getDeduced, tableSize);\n  };\n\n  var getPercentageWidths = function getPercentageWidths(warehouse, direction, tableSize) {\n    return getWidthFrom(warehouse, direction, Sizes.getPercentageWidth, function (deduced) {\n      return deduced.fold(function () {\n        return tableSize.minCellWidth();\n      }, function (cellWidth) {\n        return cellWidth / tableSize.pixelWidth() * 100;\n      });\n    }, tableSize);\n  };\n\n  var getPixelWidths = function getPixelWidths(warehouse, direction, tableSize) {\n    return getWidthFrom(warehouse, direction, Sizes.getPixelWidth, function (deduced) {\n      return deduced.getOrThunk(tableSize.minCellWidth);\n    }, tableSize);\n  };\n\n  var getHeightFrom = function getHeightFrom(warehouse, direction, getHeight, fallback) {\n    var rows = Blocks.rows(warehouse);\n    var backups = map(rows, function (cellOption) {\n      return cellOption.map(direction.edge);\n    });\n    return map(rows, function (cellOption, c) {\n      var rowCell = cellOption.filter(not(CellUtils.hasRowspan));\n      return rowCell.fold(function () {\n        var deduced = deduce(backups, c);\n        return fallback(deduced);\n      }, function (cell) {\n        return getHeight(cell);\n      });\n    });\n  };\n\n  var getPixelHeights = function getPixelHeights(warehouse, direction) {\n    return getHeightFrom(warehouse, direction, Sizes.getHeight, function (deduced) {\n      return deduced.getOrThunk(CellUtils.minHeight);\n    });\n  };\n\n  var getRawHeights = function getRawHeights(warehouse, direction) {\n    return getHeightFrom(warehouse, direction, getRawH, getDeduced);\n  };\n\n  var ColumnSizes = {\n    getRawWidths: getRawWidths,\n    getPixelWidths: getPixelWidths,\n    getPercentageWidths: getPercentageWidths,\n    getPixelHeights: getPixelHeights,\n    getRawHeights: getRawHeights\n  };\n\n  var total = function total(start, end, measures) {\n    var r = 0;\n\n    for (var i = start; i < end; i++) {\n      r += measures[i] !== undefined ? measures[i] : 0;\n    }\n\n    return r;\n  };\n\n  var recalculateWidth = function recalculateWidth(warehouse, widths) {\n    var all = Warehouse.justCells(warehouse);\n    return map(all, function (cell) {\n      var width = total(cell.column(), cell.column() + cell.colspan(), widths);\n      return {\n        element: cell.element,\n        width: constant(width),\n        colspan: cell.colspan\n      };\n    });\n  };\n\n  var recalculateHeight = function recalculateHeight(warehouse, heights) {\n    var all = Warehouse.justCells(warehouse);\n    return map(all, function (cell) {\n      var height = total(cell.row(), cell.row() + cell.rowspan(), heights);\n      return {\n        element: cell.element,\n        height: constant(height),\n        rowspan: cell.rowspan\n      };\n    });\n  };\n\n  var matchRowHeight = function matchRowHeight(warehouse, heights) {\n    return map(warehouse.all(), function (row, i) {\n      return {\n        element: row.element,\n        height: constant(heights[i])\n      };\n    });\n  };\n\n  var Recalculations = {\n    recalculateWidth: recalculateWidth,\n    recalculateHeight: recalculateHeight,\n    matchRowHeight: matchRowHeight\n  };\n\n  var percentageSize = function percentageSize(width, element) {\n    var floatWidth = parseFloat(width);\n    var pixelWidth = get$5(element);\n\n    var getCellDelta = function getCellDelta(delta) {\n      return delta / pixelWidth * 100;\n    };\n\n    var singleColumnWidth = function singleColumnWidth(w, _delta) {\n      return [100 - w];\n    };\n\n    var minCellWidth = function minCellWidth() {\n      return CellUtils.minWidth() / pixelWidth * 100;\n    };\n\n    var setTableWidth = function setTableWidth(table, _newWidths, delta) {\n      var ratio = delta / 100;\n      var change = ratio * floatWidth;\n      Sizes.setPercentageWidth(table, floatWidth + change);\n    };\n\n    return {\n      width: constant(floatWidth),\n      pixelWidth: constant(pixelWidth),\n      getWidths: ColumnSizes.getPercentageWidths,\n      getCellDelta: getCellDelta,\n      singleColumnWidth: singleColumnWidth,\n      minCellWidth: minCellWidth,\n      setElementWidth: Sizes.setPercentageWidth,\n      setTableWidth: setTableWidth\n    };\n  };\n\n  var pixelSize = function pixelSize(width) {\n    var getCellDelta = identity;\n\n    var singleColumnWidth = function singleColumnWidth(w, delta) {\n      var newNext = Math.max(CellUtils.minWidth(), w + delta);\n      return [newNext - w];\n    };\n\n    var setTableWidth = function setTableWidth(table, newWidths, _delta) {\n      var total = foldr(newWidths, function (b, a) {\n        return b + a;\n      }, 0);\n      Sizes.setPixelWidth(table, total);\n    };\n\n    return {\n      width: constant(width),\n      pixelWidth: constant(width),\n      getWidths: ColumnSizes.getPixelWidths,\n      getCellDelta: getCellDelta,\n      singleColumnWidth: singleColumnWidth,\n      minCellWidth: CellUtils.minWidth,\n      setElementWidth: Sizes.setPixelWidth,\n      setTableWidth: setTableWidth\n    };\n  };\n\n  var chooseSize = function chooseSize(element, width) {\n    var percentMatch = Sizes.percentageBasedSizeRegex().exec(width);\n\n    if (percentMatch !== null) {\n      return percentageSize(percentMatch[1], element);\n    }\n\n    var pixelMatch = Sizes.pixelBasedSizeRegex().exec(width);\n\n    if (pixelMatch !== null) {\n      var intWidth = parseInt(pixelMatch[1], 10);\n      return pixelSize(intWidth);\n    }\n\n    var fallbackWidth = get$5(element);\n    return pixelSize(fallbackWidth);\n  };\n\n  var getTableSize = function getTableSize(element) {\n    var width = Sizes.getRawWidth(element);\n    return width.fold(function () {\n      var fallbackWidth = get$5(element);\n      return pixelSize(fallbackWidth);\n    }, function (w) {\n      return chooseSize(element, w);\n    });\n  };\n\n  var TableSize = {\n    getTableSize: getTableSize\n  };\n\n  var getWarehouse$1 = function getWarehouse$1(list) {\n    return Warehouse.generate(list);\n  };\n\n  var sumUp = function sumUp(newSize) {\n    return foldr(newSize, function (b, a) {\n      return b + a;\n    }, 0);\n  };\n\n  var getTableWarehouse = function getTableWarehouse(table) {\n    var list = DetailsList.fromTable(table);\n    return getWarehouse$1(list);\n  };\n\n  var adjustWidth = function adjustWidth(table, delta, index, direction) {\n    var tableSize = TableSize.getTableSize(table);\n    var step = tableSize.getCellDelta(delta);\n    var warehouse = getTableWarehouse(table);\n    var widths = tableSize.getWidths(warehouse, direction, tableSize);\n    var deltas = Deltas.determine(widths, index, step, tableSize);\n    var newWidths = map(deltas, function (dx, i) {\n      return dx + widths[i];\n    });\n    var newSizes = Recalculations.recalculateWidth(warehouse, newWidths);\n    each(newSizes, function (cell) {\n      tableSize.setElementWidth(cell.element(), cell.width());\n    });\n\n    if (index === warehouse.grid().columns() - 1) {\n      tableSize.setTableWidth(table, newWidths, step);\n    }\n  };\n\n  var adjustHeight = function adjustHeight(table, delta, index, direction) {\n    var warehouse = getTableWarehouse(table);\n    var heights = ColumnSizes.getPixelHeights(warehouse, direction);\n    var newHeights = map(heights, function (dy, i) {\n      return index === i ? Math.max(delta + dy, CellUtils.minHeight()) : dy;\n    });\n    var newCellSizes = Recalculations.recalculateHeight(warehouse, newHeights);\n    var newRowSizes = Recalculations.matchRowHeight(warehouse, newHeights);\n    each(newRowSizes, function (row) {\n      Sizes.setHeight(row.element(), row.height());\n    });\n    each(newCellSizes, function (cell) {\n      Sizes.setHeight(cell.element(), cell.height());\n    });\n    var total = sumUp(newHeights);\n    Sizes.setHeight(table, total);\n  };\n\n  var adjustWidthTo = function adjustWidthTo(table, list, direction) {\n    var tableSize = TableSize.getTableSize(table);\n    var warehouse = getWarehouse$1(list);\n    var widths = tableSize.getWidths(warehouse, direction, tableSize);\n    var newSizes = Recalculations.recalculateWidth(warehouse, widths);\n    each(newSizes, function (cell) {\n      tableSize.setElementWidth(cell.element(), cell.width());\n    });\n\n    if (newSizes.length > 0) {\n      tableSize.setTableWidth(table, widths, tableSize.getCellDelta(0));\n    }\n  };\n\n  var Adjustments = {\n    adjustWidth: adjustWidth,\n    adjustHeight: adjustHeight,\n    adjustWidthTo: adjustWidthTo\n  };\n\n  var base = function base(handleUnsupported, required) {\n    return baseWith(handleUnsupported, required, {\n      validate: isFunction,\n      label: 'function'\n    });\n  };\n\n  var baseWith = function baseWith(handleUnsupported, required, pred) {\n    if (required.length === 0) {\n      throw new Error('You must specify at least one required field.');\n    }\n\n    validateStrArr('required', required);\n    checkDupes(required);\n    return function (obj) {\n      var keys$1 = keys(obj);\n      var allReqd = forall(required, function (req) {\n        return contains(keys$1, req);\n      });\n\n      if (!allReqd) {\n        reqMessage(required, keys$1);\n      }\n\n      handleUnsupported(required, keys$1);\n      var invalidKeys = filter(required, function (key) {\n        return !pred.validate(obj[key], key);\n      });\n\n      if (invalidKeys.length > 0) {\n        invalidTypeMessage(invalidKeys, pred.label);\n      }\n\n      return obj;\n    };\n  };\n\n  var handleExact = function handleExact(required, keys) {\n    var unsupported = filter(keys, function (key) {\n      return !contains(required, key);\n    });\n\n    if (unsupported.length > 0) {\n      unsuppMessage(unsupported);\n    }\n  };\n\n  var exactly = function exactly(required) {\n    return base(handleExact, required);\n  };\n\n  var verifyGenerators = exactly(['cell', 'row', 'replace', 'gap']);\n\n  var elementToData = function elementToData(element) {\n    var colspan = has$1(element, 'colspan') ? parseInt(get$1(element, 'colspan'), 10) : 1;\n    var rowspan = has$1(element, 'rowspan') ? parseInt(get$1(element, 'rowspan'), 10) : 1;\n    return {\n      element: constant(element),\n      colspan: constant(colspan),\n      rowspan: constant(rowspan)\n    };\n  };\n\n  var modification = function modification(generators, toData) {\n    if (toData === void 0) {\n      toData = elementToData;\n    }\n\n    verifyGenerators(generators);\n    var position = Cell(Option.none());\n\n    var nu = function nu(data) {\n      return generators.cell(data);\n    };\n\n    var nuFrom = function nuFrom(element) {\n      var data = toData(element);\n      return nu(data);\n    };\n\n    var add = function add(element) {\n      var replacement = nuFrom(element);\n\n      if (position.get().isNone()) {\n        position.set(Option.some(replacement));\n      }\n\n      recent = Option.some({\n        item: element,\n        replacement: replacement\n      });\n      return replacement;\n    };\n\n    var recent = Option.none();\n\n    var getOrInit = function getOrInit(element, comparator) {\n      return recent.fold(function () {\n        return add(element);\n      }, function (p) {\n        return comparator(element, p.item) ? p.replacement : add(element);\n      });\n    };\n\n    return {\n      getOrInit: getOrInit,\n      cursor: position.get\n    };\n  };\n\n  var transform = function transform(scope, tag) {\n    return function (generators) {\n      var position = Cell(Option.none());\n      verifyGenerators(generators);\n      var list = [];\n\n      var find$1 = function find$1(element, comparator) {\n        return find(list, function (x) {\n          return comparator(x.item, element);\n        });\n      };\n\n      var makeNew = function makeNew(element) {\n        var attrs = {\n          scope: scope\n        };\n        var cell = generators.replace(element, tag, attrs);\n        list.push({\n          item: element,\n          sub: cell\n        });\n\n        if (position.get().isNone()) {\n          position.set(Option.some(cell));\n        }\n\n        return cell;\n      };\n\n      var replaceOrInit = function replaceOrInit(element, comparator) {\n        return find$1(element, comparator).fold(function () {\n          return makeNew(element);\n        }, function (p) {\n          return comparator(element, p.item) ? p.sub : makeNew(element);\n        });\n      };\n\n      return {\n        replaceOrInit: replaceOrInit,\n        cursor: position.get\n      };\n    };\n  };\n\n  var merging = function merging(generators) {\n    verifyGenerators(generators);\n    var position = Cell(Option.none());\n\n    var combine = function combine(cell) {\n      if (position.get().isNone()) {\n        position.set(Option.some(cell));\n      }\n\n      return function () {\n        var raw = generators.cell({\n          element: constant(cell),\n          colspan: constant(1),\n          rowspan: constant(1)\n        });\n        remove$1(raw, 'width');\n        remove$1(cell, 'width');\n        return raw;\n      };\n    };\n\n    return {\n      combine: combine,\n      cursor: position.get\n    };\n  };\n\n  var Generators = {\n    modification: modification,\n    transform: transform,\n    merging: merging\n  };\n  var blockList = ['body', 'p', 'div', 'article', 'aside', 'figcaption', 'figure', 'footer', 'header', 'nav', 'section', 'ol', 'ul', 'table', 'thead', 'tfoot', 'tbody', 'caption', 'tr', 'td', 'th', 'h1', 'h2', 'h3', 'h4', 'h5', 'h6', 'blockquote', 'pre', 'address'];\n\n  var isList = function isList(universe, item) {\n    var tagName = universe.property().name(item);\n    return contains(['ol', 'ul'], tagName);\n  };\n\n  var isBlock = function isBlock(universe, item) {\n    var tagName = universe.property().name(item);\n    return contains(blockList, tagName);\n  };\n\n  var isFormatting = function isFormatting(universe, item) {\n    var tagName = universe.property().name(item);\n    return contains(['address', 'pre', 'p', 'h1', 'h2', 'h3', 'h4', 'h5', 'h6'], tagName);\n  };\n\n  var isHeading = function isHeading(universe, item) {\n    var tagName = universe.property().name(item);\n    return contains(['h1', 'h2', 'h3', 'h4', 'h5', 'h6'], tagName);\n  };\n\n  var isContainer = function isContainer(universe, item) {\n    return contains(['div', 'li', 'td', 'th', 'blockquote', 'body', 'caption'], universe.property().name(item));\n  };\n\n  var isEmptyTag = function isEmptyTag(universe, item) {\n    return contains(['br', 'img', 'hr', 'input'], universe.property().name(item));\n  };\n\n  var isFrame = function isFrame(universe, item) {\n    return universe.property().name(item) === 'iframe';\n  };\n\n  var isInline = function isInline(universe, item) {\n    return !(isBlock(universe, item) || isEmptyTag(universe, item)) && universe.property().name(item) !== 'li';\n  };\n\n  var Structure = {\n    isBlock: isBlock,\n    isList: isList,\n    isFormatting: isFormatting,\n    isHeading: isHeading,\n    isContainer: isContainer,\n    isEmptyTag: isEmptyTag,\n    isFrame: isFrame,\n    isInline: isInline\n  };\n  var universe$1 = DomUniverse();\n\n  var isBlock$1 = function isBlock$1(element) {\n    return Structure.isBlock(universe$1, element);\n  };\n\n  var isList$1 = function isList$1(element) {\n    return Structure.isList(universe$1, element);\n  };\n\n  var isFormatting$1 = function isFormatting$1(element) {\n    return Structure.isFormatting(universe$1, element);\n  };\n\n  var isHeading$1 = function isHeading$1(element) {\n    return Structure.isHeading(universe$1, element);\n  };\n\n  var isContainer$1 = function isContainer$1(element) {\n    return Structure.isContainer(universe$1, element);\n  };\n\n  var isEmptyTag$1 = function isEmptyTag$1(element) {\n    return Structure.isEmptyTag(universe$1, element);\n  };\n\n  var isFrame$1 = function isFrame$1(element) {\n    return Structure.isFrame(universe$1, element);\n  };\n\n  var isInline$1 = function isInline$1(element) {\n    return Structure.isInline(universe$1, element);\n  };\n\n  var DomStructure = {\n    isBlock: isBlock$1,\n    isList: isList$1,\n    isFormatting: isFormatting$1,\n    isHeading: isHeading$1,\n    isContainer: isContainer$1,\n    isEmptyTag: isEmptyTag$1,\n    isFrame: isFrame$1,\n    isInline: isInline$1\n  };\n\n  var merge$2 = function merge$2(cells) {\n    var isBr = function isBr(el) {\n      return name(el) === 'br';\n    };\n\n    var advancedBr = function advancedBr(children) {\n      return forall(children, function (c) {\n        return isBr(c) || isText(c) && get$3(c).trim().length === 0;\n      });\n    };\n\n    var isListItem = function isListItem(el) {\n      return name(el) === 'li' || ancestor(el, DomStructure.isList).isSome();\n    };\n\n    var siblingIsBlock = function siblingIsBlock(el) {\n      return nextSibling(el).map(function (rightSibling) {\n        if (DomStructure.isBlock(rightSibling)) {\n          return true;\n        }\n\n        if (DomStructure.isEmptyTag(rightSibling)) {\n          return name(rightSibling) === 'img' ? false : true;\n        }\n\n        return false;\n      }).getOr(false);\n    };\n\n    var markCell = function markCell(cell) {\n      return last$1(cell).bind(function (rightEdge) {\n        var rightSiblingIsBlock = siblingIsBlock(rightEdge);\n        return parent(rightEdge).map(function (parent) {\n          return rightSiblingIsBlock === true || isListItem(parent) || isBr(rightEdge) || DomStructure.isBlock(parent) && !eq(cell, parent) ? [] : [Element.fromTag('br')];\n        });\n      }).getOr([]);\n    };\n\n    var markContent = function markContent() {\n      var content = bind(cells, function (cell) {\n        var children$1 = children(cell);\n        return advancedBr(children$1) ? [] : children$1.concat(markCell(cell));\n      });\n      return content.length === 0 ? [Element.fromTag('br')] : content;\n    };\n\n    var contents = markContent();\n    empty(cells[0]);\n    append$1(cells[0], contents);\n  };\n\n  var TableContent = {\n    merge: merge$2\n  };\n\n  var prune = function prune(table) {\n    var cells = TableLookup.cells(table);\n\n    if (cells.length === 0) {\n      remove$2(table);\n    }\n  };\n\n  var outcome = Immutable('grid', 'cursor');\n\n  var elementFromGrid = function elementFromGrid(grid, row, column) {\n    return findIn(grid, row, column).orThunk(function () {\n      return findIn(grid, 0, 0);\n    });\n  };\n\n  var findIn = function findIn(grid, row, column) {\n    return Option.from(grid[row]).bind(function (r) {\n      return Option.from(r.cells()[column]).bind(function (c) {\n        return Option.from(c.element());\n      });\n    });\n  };\n\n  var bundle = function bundle(grid, row, column) {\n    return outcome(grid, findIn(grid, row, column));\n  };\n\n  var uniqueRows = function uniqueRows(details) {\n    return foldl(details, function (rest, detail) {\n      return exists(rest, function (currentDetail) {\n        return currentDetail.row() === detail.row();\n      }) ? rest : rest.concat([detail]);\n    }, []).sort(function (detailA, detailB) {\n      return detailA.row() - detailB.row();\n    });\n  };\n\n  var uniqueColumns = function uniqueColumns(details) {\n    return foldl(details, function (rest, detail) {\n      return exists(rest, function (currentDetail) {\n        return currentDetail.column() === detail.column();\n      }) ? rest : rest.concat([detail]);\n    }, []).sort(function (detailA, detailB) {\n      return detailA.column() - detailB.column();\n    });\n  };\n\n  var insertRowBefore = function insertRowBefore(grid, detail, comparator, genWrappers) {\n    var example = detail.row();\n    var targetIndex = detail.row();\n    var newGrid = ModificationOperations.insertRowAt(grid, targetIndex, example, comparator, genWrappers.getOrInit);\n    return bundle(newGrid, targetIndex, detail.column());\n  };\n\n  var insertRowsBefore = function insertRowsBefore(grid, details, comparator, genWrappers) {\n    var example = details[0].row();\n    var targetIndex = details[0].row();\n    var rows = uniqueRows(details);\n    var newGrid = foldl(rows, function (newG, _row) {\n      return ModificationOperations.insertRowAt(newG, targetIndex, example, comparator, genWrappers.getOrInit);\n    }, grid);\n    return bundle(newGrid, targetIndex, details[0].column());\n  };\n\n  var insertRowAfter = function insertRowAfter(grid, detail, comparator, genWrappers) {\n    var example = detail.row();\n    var targetIndex = detail.row() + detail.rowspan();\n    var newGrid = ModificationOperations.insertRowAt(grid, targetIndex, example, comparator, genWrappers.getOrInit);\n    return bundle(newGrid, targetIndex, detail.column());\n  };\n\n  var insertRowsAfter = function insertRowsAfter(grid, details, comparator, genWrappers) {\n    var rows = uniqueRows(details);\n    var example = rows[rows.length - 1].row();\n    var targetIndex = rows[rows.length - 1].row() + rows[rows.length - 1].rowspan();\n    var newGrid = foldl(rows, function (newG, _row) {\n      return ModificationOperations.insertRowAt(newG, targetIndex, example, comparator, genWrappers.getOrInit);\n    }, grid);\n    return bundle(newGrid, targetIndex, details[0].column());\n  };\n\n  var insertColumnBefore = function insertColumnBefore(grid, detail, comparator, genWrappers) {\n    var example = detail.column();\n    var targetIndex = detail.column();\n    var newGrid = ModificationOperations.insertColumnAt(grid, targetIndex, example, comparator, genWrappers.getOrInit);\n    return bundle(newGrid, detail.row(), targetIndex);\n  };\n\n  var insertColumnsBefore = function insertColumnsBefore(grid, details, comparator, genWrappers) {\n    var columns = uniqueColumns(details);\n    var example = columns[0].column();\n    var targetIndex = columns[0].column();\n    var newGrid = foldl(columns, function (newG, _row) {\n      return ModificationOperations.insertColumnAt(newG, targetIndex, example, comparator, genWrappers.getOrInit);\n    }, grid);\n    return bundle(newGrid, details[0].row(), targetIndex);\n  };\n\n  var insertColumnAfter = function insertColumnAfter(grid, detail, comparator, genWrappers) {\n    var example = detail.column();\n    var targetIndex = detail.column() + detail.colspan();\n    var newGrid = ModificationOperations.insertColumnAt(grid, targetIndex, example, comparator, genWrappers.getOrInit);\n    return bundle(newGrid, detail.row(), targetIndex);\n  };\n\n  var insertColumnsAfter = function insertColumnsAfter(grid, details, comparator, genWrappers) {\n    var example = details[details.length - 1].column();\n    var targetIndex = details[details.length - 1].column() + details[details.length - 1].colspan();\n    var columns = uniqueColumns(details);\n    var newGrid = foldl(columns, function (newG, _row) {\n      return ModificationOperations.insertColumnAt(newG, targetIndex, example, comparator, genWrappers.getOrInit);\n    }, grid);\n    return bundle(newGrid, details[0].row(), targetIndex);\n  };\n\n  var makeRowHeader = function makeRowHeader(grid, detail, comparator, genWrappers) {\n    var newGrid = TransformOperations.replaceRow(grid, detail.row(), comparator, genWrappers.replaceOrInit);\n    return bundle(newGrid, detail.row(), detail.column());\n  };\n\n  var makeColumnHeader = function makeColumnHeader(grid, detail, comparator, genWrappers) {\n    var newGrid = TransformOperations.replaceColumn(grid, detail.column(), comparator, genWrappers.replaceOrInit);\n    return bundle(newGrid, detail.row(), detail.column());\n  };\n\n  var unmakeRowHeader = function unmakeRowHeader(grid, detail, comparator, genWrappers) {\n    var newGrid = TransformOperations.replaceRow(grid, detail.row(), comparator, genWrappers.replaceOrInit);\n    return bundle(newGrid, detail.row(), detail.column());\n  };\n\n  var unmakeColumnHeader = function unmakeColumnHeader(grid, detail, comparator, genWrappers) {\n    var newGrid = TransformOperations.replaceColumn(grid, detail.column(), comparator, genWrappers.replaceOrInit);\n    return bundle(newGrid, detail.row(), detail.column());\n  };\n\n  var splitCellIntoColumns$1 = function splitCellIntoColumns$1(grid, detail, comparator, genWrappers) {\n    var newGrid = ModificationOperations.splitCellIntoColumns(grid, detail.row(), detail.column(), comparator, genWrappers.getOrInit);\n    return bundle(newGrid, detail.row(), detail.column());\n  };\n\n  var splitCellIntoRows$1 = function splitCellIntoRows$1(grid, detail, comparator, genWrappers) {\n    var newGrid = ModificationOperations.splitCellIntoRows(grid, detail.row(), detail.column(), comparator, genWrappers.getOrInit);\n    return bundle(newGrid, detail.row(), detail.column());\n  };\n\n  var eraseColumns = function eraseColumns(grid, details, _comparator, _genWrappers) {\n    var columns = uniqueColumns(details);\n    var newGrid = ModificationOperations.deleteColumnsAt(grid, columns[0].column(), columns[columns.length - 1].column());\n    var cursor = elementFromGrid(newGrid, details[0].row(), details[0].column());\n    return outcome(newGrid, cursor);\n  };\n\n  var eraseRows = function eraseRows(grid, details, _comparator, _genWrappers) {\n    var rows = uniqueRows(details);\n    var newGrid = ModificationOperations.deleteRowsAt(grid, rows[0].row(), rows[rows.length - 1].row());\n    var cursor = elementFromGrid(newGrid, details[0].row(), details[0].column());\n    return outcome(newGrid, cursor);\n  };\n\n  var mergeCells = function mergeCells(grid, mergable, comparator, _genWrappers) {\n    var cells = mergable.cells();\n    TableContent.merge(cells);\n    var newGrid = MergingOperations.merge(grid, mergable.bounds(), comparator, constant(cells[0]));\n    return outcome(newGrid, Option.from(cells[0]));\n  };\n\n  var unmergeCells = function unmergeCells(grid, unmergable, comparator, genWrappers) {\n    var newGrid = foldr(unmergable, function (b, cell) {\n      return MergingOperations.unmerge(b, cell, comparator, genWrappers.combine(cell));\n    }, grid);\n    return outcome(newGrid, Option.from(unmergable[0]));\n  };\n\n  var pasteCells = function pasteCells(grid, pasteDetails, comparator, _genWrappers) {\n    var gridify = function gridify(table, generators) {\n      var list = DetailsList.fromTable(table);\n      var wh = Warehouse.generate(list);\n      return Transitions.toGrid(wh, generators, true);\n    };\n\n    var gridB = gridify(pasteDetails.clipboard(), pasteDetails.generators());\n    var startAddress = address(pasteDetails.row(), pasteDetails.column());\n    var mergedGrid = TableMerge.merge(startAddress, grid, gridB, pasteDetails.generators(), comparator);\n    return mergedGrid.fold(function () {\n      return outcome(grid, Option.some(pasteDetails.element()));\n    }, function (nuGrid) {\n      var cursor = elementFromGrid(nuGrid, pasteDetails.row(), pasteDetails.column());\n      return outcome(nuGrid, cursor);\n    });\n  };\n\n  var gridifyRows = function gridifyRows(rows, generators, example) {\n    var pasteDetails = DetailsList.fromPastedRows(rows, example);\n    var wh = Warehouse.generate(pasteDetails);\n    return Transitions.toGrid(wh, generators, true);\n  };\n\n  var pasteRowsBefore = function pasteRowsBefore(grid, pasteDetails, comparator, _genWrappers) {\n    var example = grid[pasteDetails.cells[0].row()];\n    var index = pasteDetails.cells[0].row();\n    var gridB = gridifyRows(pasteDetails.clipboard(), pasteDetails.generators(), example);\n    var mergedGrid = TableMerge.insert(index, grid, gridB, pasteDetails.generators(), comparator);\n    var cursor = elementFromGrid(mergedGrid, pasteDetails.cells[0].row(), pasteDetails.cells[0].column());\n    return outcome(mergedGrid, cursor);\n  };\n\n  var pasteRowsAfter = function pasteRowsAfter(grid, pasteDetails, comparator, _genWrappers) {\n    var example = grid[pasteDetails.cells[0].row()];\n    var index = pasteDetails.cells[pasteDetails.cells.length - 1].row() + pasteDetails.cells[pasteDetails.cells.length - 1].rowspan();\n    var gridB = gridifyRows(pasteDetails.clipboard(), pasteDetails.generators(), example);\n    var mergedGrid = TableMerge.insert(index, grid, gridB, pasteDetails.generators(), comparator);\n    var cursor = elementFromGrid(mergedGrid, pasteDetails.cells[0].row(), pasteDetails.cells[0].column());\n    return outcome(mergedGrid, cursor);\n  };\n\n  var resize = Adjustments.adjustWidthTo;\n  var TableOperations = {\n    insertRowBefore: run(insertRowBefore, onCell, noop, noop, Generators.modification),\n    insertRowsBefore: run(insertRowsBefore, onCells, noop, noop, Generators.modification),\n    insertRowAfter: run(insertRowAfter, onCell, noop, noop, Generators.modification),\n    insertRowsAfter: run(insertRowsAfter, onCells, noop, noop, Generators.modification),\n    insertColumnBefore: run(insertColumnBefore, onCell, resize, noop, Generators.modification),\n    insertColumnsBefore: run(insertColumnsBefore, onCells, resize, noop, Generators.modification),\n    insertColumnAfter: run(insertColumnAfter, onCell, resize, noop, Generators.modification),\n    insertColumnsAfter: run(insertColumnsAfter, onCells, resize, noop, Generators.modification),\n    splitCellIntoColumns: run(splitCellIntoColumns$1, onCell, resize, noop, Generators.modification),\n    splitCellIntoRows: run(splitCellIntoRows$1, onCell, noop, noop, Generators.modification),\n    eraseColumns: run(eraseColumns, onCells, resize, prune, Generators.modification),\n    eraseRows: run(eraseRows, onCells, noop, prune, Generators.modification),\n    makeColumnHeader: run(makeColumnHeader, onCell, noop, noop, Generators.transform('row', 'th')),\n    unmakeColumnHeader: run(unmakeColumnHeader, onCell, noop, noop, Generators.transform(null, 'td')),\n    makeRowHeader: run(makeRowHeader, onCell, noop, noop, Generators.transform('col', 'th')),\n    unmakeRowHeader: run(unmakeRowHeader, onCell, noop, noop, Generators.transform(null, 'td')),\n    mergeCells: run(mergeCells, onMergable, noop, noop, Generators.merging),\n    unmergeCells: run(unmergeCells, onUnmergable, resize, noop, Generators.merging),\n    pasteCells: run(pasteCells, onPaste, resize, noop, Generators.modification),\n    pasteRowsBefore: run(pasteRowsBefore, onPasteRows, noop, noop, Generators.modification),\n    pasteRowsAfter: run(pasteRowsAfter, onPasteRows, noop, noop, Generators.modification)\n  };\n\n  var getBody$1 = function getBody$1(editor) {\n    return Element.fromDom(editor.getBody());\n  };\n\n  var getPixelWidth$1 = function getPixelWidth$1(elm) {\n    return elm.getBoundingClientRect().width;\n  };\n\n  var getPixelHeight = function getPixelHeight(elm) {\n    return elm.getBoundingClientRect().height;\n  };\n\n  var getIsRoot = function getIsRoot(editor) {\n    return function (element) {\n      return eq(element, getBody$1(editor));\n    };\n  };\n\n  var removePxSuffix = function removePxSuffix(size) {\n    return size ? size.replace(/px$/, '') : '';\n  };\n\n  var addSizeSuffix = function addSizeSuffix(size) {\n    if (/^[0-9]+$/.test(size)) {\n      size += 'px';\n    }\n\n    return size;\n  };\n\n  var removeDataStyle = function removeDataStyle(table) {\n    var dataStyleCells = descendants$1(table, 'td[data-mce-style],th[data-mce-style]');\n    remove(table, 'data-mce-style');\n    each(dataStyleCells, function (cell) {\n      remove(cell, 'data-mce-style');\n    });\n  };\n\n  var getDirection = function getDirection(element) {\n    return get$2(element, 'direction') === 'rtl' ? 'rtl' : 'ltr';\n  };\n\n  var ltr$1 = {\n    isRtl: constant(false)\n  };\n  var rtl$1 = {\n    isRtl: constant(true)\n  };\n\n  var directionAt = function directionAt(element) {\n    var dir = getDirection(element);\n    return dir === 'rtl' ? rtl$1 : ltr$1;\n  };\n\n  var Direction = {\n    directionAt: directionAt\n  };\n  var defaultTableToolbar = 'tableprops tabledelete | tableinsertrowbefore tableinsertrowafter tabledeleterow | tableinsertcolbefore tableinsertcolafter tabledeletecol';\n  var defaultStyles = {\n    'border-collapse': 'collapse',\n    'width': '100%'\n  };\n  var defaultAttributes = {\n    border: '1'\n  };\n\n  var getDefaultAttributes = function getDefaultAttributes(editor) {\n    return editor.getParam('table_default_attributes', defaultAttributes, 'object');\n  };\n\n  var getDefaultStyles = function getDefaultStyles(editor) {\n    return editor.getParam('table_default_styles', defaultStyles, 'object');\n  };\n\n  var hasTableResizeBars = function hasTableResizeBars(editor) {\n    return editor.getParam('table_resize_bars', true, 'boolean');\n  };\n\n  var hasTabNavigation = function hasTabNavigation(editor) {\n    return editor.getParam('table_tab_navigation', true, 'boolean');\n  };\n\n  var hasAdvancedCellTab = function hasAdvancedCellTab(editor) {\n    return editor.getParam('table_cell_advtab', true, 'boolean');\n  };\n\n  var hasAdvancedRowTab = function hasAdvancedRowTab(editor) {\n    return editor.getParam('table_row_advtab', true, 'boolean');\n  };\n\n  var hasAdvancedTableTab = function hasAdvancedTableTab(editor) {\n    return editor.getParam('table_advtab', true, 'boolean');\n  };\n\n  var hasAppearanceOptions = function hasAppearanceOptions(editor) {\n    return editor.getParam('table_appearance_options', true, 'boolean');\n  };\n\n  var hasTableGrid = function hasTableGrid(editor) {\n    return editor.getParam('table_grid', true, 'boolean');\n  };\n\n  var shouldStyleWithCss = function shouldStyleWithCss(editor) {\n    return editor.getParam('table_style_by_css', false, 'boolean');\n  };\n\n  var getCellClassList = function getCellClassList(editor) {\n    return editor.getParam('table_cell_class_list', [], 'array');\n  };\n\n  var getRowClassList = function getRowClassList(editor) {\n    return editor.getParam('table_row_class_list', [], 'array');\n  };\n\n  var getTableClassList = function getTableClassList(editor) {\n    return editor.getParam('table_class_list', [], 'array');\n  };\n\n  var isPercentagesForced = function isPercentagesForced(editor) {\n    return editor.getParam('table_responsive_width') === true;\n  };\n\n  var isPixelsForced = function isPixelsForced(editor) {\n    return editor.getParam('table_responsive_width') === false;\n  };\n\n  var getToolbar = function getToolbar(editor) {\n    return editor.getParam('table_toolbar', defaultTableToolbar);\n  };\n\n  var getCloneElements = function getCloneElements(editor) {\n    var cloneElements = editor.getParam('table_clone_elements');\n\n    if (isString(cloneElements)) {\n      return Option.some(cloneElements.split(/[ ,]/));\n    } else if (Array.isArray(cloneElements)) {\n      return Option.some(cloneElements);\n    } else {\n      return Option.none();\n    }\n  };\n\n  var hasObjectResizing = function hasObjectResizing(editor) {\n    var objectResizing = editor.getParam('object_resizing', true);\n    return isString(objectResizing) ? objectResizing === 'table' : objectResizing;\n  };\n\n  var fireNewRow = function fireNewRow(editor, row) {\n    return editor.fire('newrow', {\n      node: row\n    });\n  };\n\n  var fireNewCell = function fireNewCell(editor, cell) {\n    return editor.fire('newcell', {\n      node: cell\n    });\n  };\n\n  var fireObjectResizeStart = function fireObjectResizeStart(editor, target, width, height) {\n    editor.fire('ObjectResizeStart', {\n      target: target,\n      width: width,\n      height: height\n    });\n  };\n\n  var fireObjectResized = function fireObjectResized(editor, target, width, height) {\n    editor.fire('ObjectResized', {\n      target: target,\n      width: width,\n      height: height\n    });\n  };\n\n  var fireTableSelectionChange = function fireTableSelectionChange(editor, cells, start, finish, otherCells) {\n    editor.fire('TableSelectionChange', {\n      cells: cells,\n      start: start,\n      finish: finish,\n      otherCells: otherCells\n    });\n  };\n\n  var fireTableSelectionClear = function fireTableSelectionClear(editor) {\n    editor.fire('TableSelectionClear');\n  };\n\n  var TableActions = function TableActions(editor, lazyWire) {\n    var isTableBody = function isTableBody(editor) {\n      return name(getBody$1(editor)) === 'table';\n    };\n\n    var lastRowGuard = function lastRowGuard(table) {\n      var size = TableGridSize.getGridSize(table);\n      return isTableBody(editor) === false || size.rows() > 1;\n    };\n\n    var lastColumnGuard = function lastColumnGuard(table) {\n      var size = TableGridSize.getGridSize(table);\n      return isTableBody(editor) === false || size.columns() > 1;\n    };\n\n    var cloneFormats = getCloneElements(editor);\n\n    var execute = function execute(operation, guard, mutate, lazyWire) {\n      return function (table, target) {\n        removeDataStyle(table);\n        var wire = lazyWire();\n        var doc = Element.fromDom(editor.getDoc());\n        var direction = TableDirection(Direction.directionAt);\n        var generators = TableFill.cellOperations(mutate, doc, cloneFormats);\n        return guard(table) ? operation(wire, table, target, generators, direction).bind(function (result) {\n          each(result.newRows(), function (row) {\n            fireNewRow(editor, row.dom());\n          });\n          each(result.newCells(), function (cell) {\n            fireNewCell(editor, cell.dom());\n          });\n          return result.cursor().map(function (cell) {\n            var rng = editor.dom.createRng();\n            rng.setStart(cell.dom(), 0);\n            rng.setEnd(cell.dom(), 0);\n            return rng;\n          });\n        }) : Option.none();\n      };\n    };\n\n    var deleteRow = execute(TableOperations.eraseRows, lastRowGuard, noop, lazyWire);\n    var deleteColumn = execute(TableOperations.eraseColumns, lastColumnGuard, noop, lazyWire);\n    var insertRowsBefore = execute(TableOperations.insertRowsBefore, always, noop, lazyWire);\n    var insertRowsAfter = execute(TableOperations.insertRowsAfter, always, noop, lazyWire);\n    var insertColumnsBefore = execute(TableOperations.insertColumnsBefore, always, CellMutations.halve, lazyWire);\n    var insertColumnsAfter = execute(TableOperations.insertColumnsAfter, always, CellMutations.halve, lazyWire);\n    var mergeCells = execute(TableOperations.mergeCells, always, noop, lazyWire);\n    var unmergeCells = execute(TableOperations.unmergeCells, always, noop, lazyWire);\n    var pasteRowsBefore = execute(TableOperations.pasteRowsBefore, always, noop, lazyWire);\n    var pasteRowsAfter = execute(TableOperations.pasteRowsAfter, always, noop, lazyWire);\n    var pasteCells = execute(TableOperations.pasteCells, always, noop, lazyWire);\n    return {\n      deleteRow: deleteRow,\n      deleteColumn: deleteColumn,\n      insertRowsBefore: insertRowsBefore,\n      insertRowsAfter: insertRowsAfter,\n      insertColumnsBefore: insertColumnsBefore,\n      insertColumnsAfter: insertColumnsAfter,\n      mergeCells: mergeCells,\n      unmergeCells: unmergeCells,\n      pasteRowsBefore: pasteRowsBefore,\n      pasteRowsAfter: pasteRowsAfter,\n      pasteCells: pasteCells\n    };\n  };\n\n  var copyRows = function copyRows(table, target, generators) {\n    var list = DetailsList.fromTable(table);\n    var house = Warehouse.generate(list);\n    var details = onCells(house, target);\n    return details.map(function (selectedCells) {\n      var grid = Transitions.toGrid(house, generators, false);\n      var slicedGrid = grid.slice(selectedCells[0].row(), selectedCells[selectedCells.length - 1].row() + selectedCells[selectedCells.length - 1].rowspan());\n      var slicedDetails = toDetailList(slicedGrid, generators);\n      return Redraw.copy(slicedDetails);\n    });\n  };\n\n  var CopyRows = {\n    copyRows: copyRows\n  };\n  var global$1 = tinymce.util.Tools.resolve('tinymce.util.Tools');\n\n  var getTDTHOverallStyle = function getTDTHOverallStyle(dom, elm, name) {\n    var cells = dom.select('td,th', elm);\n    var firstChildStyle;\n\n    var checkChildren = function checkChildren(firstChildStyle, elms) {\n      for (var i = 0; i < elms.length; i++) {\n        var currentStyle = dom.getStyle(elms[i], name);\n\n        if (typeof firstChildStyle === 'undefined') {\n          firstChildStyle = currentStyle;\n        }\n\n        if (firstChildStyle !== currentStyle) {\n          return '';\n        }\n      }\n\n      return firstChildStyle;\n    };\n\n    firstChildStyle = checkChildren(firstChildStyle, cells);\n    return firstChildStyle;\n  };\n\n  var applyAlign = function applyAlign(editor, elm, name) {\n    if (name) {\n      editor.formatter.apply('align' + name, {}, elm);\n    }\n  };\n\n  var applyVAlign = function applyVAlign(editor, elm, name) {\n    if (name) {\n      editor.formatter.apply('valign' + name, {}, elm);\n    }\n  };\n\n  var unApplyAlign = function unApplyAlign(editor, elm) {\n    global$1.each('left center right'.split(' '), function (name) {\n      editor.formatter.remove('align' + name, {}, elm);\n    });\n  };\n\n  var unApplyVAlign = function unApplyVAlign(editor, elm) {\n    global$1.each('top middle bottom'.split(' '), function (name) {\n      editor.formatter.remove('valign' + name, {}, elm);\n    });\n  };\n\n  var Styles$1 = {\n    applyAlign: applyAlign,\n    applyVAlign: applyVAlign,\n    unApplyAlign: unApplyAlign,\n    unApplyVAlign: unApplyVAlign,\n    getTDTHOverallStyle: getTDTHOverallStyle\n  };\n\n  var buildListItems = function buildListItems(inputList, itemCallback, startItems) {\n    var appendItems = function appendItems(values, output) {\n      output = output || [];\n      global$1.each(values, function (item) {\n        var menuItem = {\n          text: item.text || item.title\n        };\n\n        if (item.menu) {\n          menuItem.menu = appendItems(item.menu);\n        } else {\n          menuItem.value = item.value;\n\n          if (itemCallback) {\n            itemCallback(menuItem);\n          }\n        }\n\n        output.push(menuItem);\n      });\n      return output;\n    };\n\n    return appendItems(inputList, startItems || []);\n  };\n\n  var extractAdvancedStyles = function extractAdvancedStyles(dom, elm) {\n    var rgbToHex = function rgbToHex(value) {\n      return startsWith(value, 'rgb') ? dom.toHex(value) : value;\n    };\n\n    var borderWidth = getRaw(Element.fromDom(elm), 'border-width').getOr('');\n    var borderStyle = getRaw(Element.fromDom(elm), 'border-style').getOr('');\n    var borderColor = getRaw(Element.fromDom(elm), 'border-color').map(rgbToHex).getOr('');\n    var bgColor = getRaw(Element.fromDom(elm), 'background-color').map(rgbToHex).getOr('');\n    return {\n      borderwidth: borderWidth,\n      borderstyle: borderStyle,\n      bordercolor: borderColor,\n      backgroundcolor: bgColor\n    };\n  };\n\n  var getSharedValues = function getSharedValues(data) {\n    var baseData = data[0];\n    var comparisonData = data.slice(1);\n    var keys$1 = keys(baseData);\n    each(comparisonData, function (items) {\n      each(keys$1, function (key) {\n        each$1(items, function (itemValue, itemKey) {\n          var comparisonValue = baseData[key];\n\n          if (comparisonValue !== '' && key === itemKey) {\n            if (comparisonValue !== itemValue) {\n              baseData[key] = '';\n            }\n          }\n        });\n      });\n    });\n    return baseData;\n  };\n\n  var getAdvancedTab = function getAdvancedTab(dialogName) {\n    var advTabItems = [{\n      name: 'borderstyle',\n      type: 'selectbox',\n      label: 'Border style',\n      items: [{\n        text: 'Select...',\n        value: ''\n      }, {\n        text: 'Solid',\n        value: 'solid'\n      }, {\n        text: 'Dotted',\n        value: 'dotted'\n      }, {\n        text: 'Dashed',\n        value: 'dashed'\n      }, {\n        text: 'Double',\n        value: 'double'\n      }, {\n        text: 'Groove',\n        value: 'groove'\n      }, {\n        text: 'Ridge',\n        value: 'ridge'\n      }, {\n        text: 'Inset',\n        value: 'inset'\n      }, {\n        text: 'Outset',\n        value: 'outset'\n      }, {\n        text: 'None',\n        value: 'none'\n      }, {\n        text: 'Hidden',\n        value: 'hidden'\n      }]\n    }, {\n      name: 'bordercolor',\n      type: 'colorinput',\n      label: 'Border color'\n    }, {\n      name: 'backgroundcolor',\n      type: 'colorinput',\n      label: 'Background color'\n    }];\n    var borderWidth = {\n      name: 'borderwidth',\n      type: 'input',\n      label: 'Border width'\n    };\n    var items = dialogName === 'cell' ? [borderWidth].concat(advTabItems) : advTabItems;\n    return {\n      title: 'Advanced',\n      name: 'advanced',\n      items: items\n    };\n  };\n\n  var getAlignment = function getAlignment(alignments, formatName, dataName, editor, elm) {\n    var alignmentData = {};\n    global$1.each(alignments.split(' '), function (name) {\n      if (editor.formatter.matchNode(elm, formatName + name)) {\n        alignmentData[dataName] = name;\n      }\n    });\n\n    if (!alignmentData[dataName]) {\n      alignmentData[dataName] = '';\n    }\n\n    return alignmentData;\n  };\n\n  var getHAlignment = curry(getAlignment, 'left center right');\n  var getVAlignment = curry(getAlignment, 'top middle bottom');\n\n  var extractDataFromSettings = function extractDataFromSettings(editor, hasAdvTableTab) {\n    var style = getDefaultStyles(editor);\n    var attrs = getDefaultAttributes(editor);\n\n    var extractAdvancedStyleData = function extractAdvancedStyleData(dom) {\n      var rgbToHex = function rgbToHex(value) {\n        return startsWith(value, 'rgb') ? dom.toHex(value) : value;\n      };\n\n      var borderStyle = get(style, 'border-style').getOr('');\n      var borderColor = get(style, 'border-color').getOr('');\n      var bgColor = get(style, 'background-color').getOr('');\n      return {\n        borderstyle: borderStyle,\n        bordercolor: rgbToHex(borderColor),\n        backgroundcolor: rgbToHex(bgColor)\n      };\n    };\n\n    var defaultData = {\n      height: '',\n      width: '100%',\n      cellspacing: '',\n      cellpadding: '',\n      caption: false,\n      \"class\": '',\n      align: '',\n      border: ''\n    };\n\n    var getBorder = function getBorder() {\n      var borderWidth = style['border-width'];\n\n      if (shouldStyleWithCss(editor) && borderWidth) {\n        return {\n          border: borderWidth\n        };\n      }\n\n      return get(attrs, 'border').fold(function () {\n        return {};\n      }, function (border) {\n        return {\n          border: border\n        };\n      });\n    };\n\n    var dom = editor.dom;\n    var advStyle = hasAdvTableTab ? extractAdvancedStyleData(dom) : {};\n\n    var getCellPaddingCellSpacing = function getCellPaddingCellSpacing() {\n      var spacing = get(style, 'border-spacing').or(get(attrs, 'cellspacing')).fold(function () {\n        return {};\n      }, function (cellspacing) {\n        return {\n          cellspacing: cellspacing\n        };\n      });\n      var padding = get(style, 'border-padding').or(get(attrs, 'cellpadding')).fold(function () {\n        return {};\n      }, function (cellpadding) {\n        return {\n          cellpadding: cellpadding\n        };\n      });\n      return _assign(_assign({}, spacing), padding);\n    };\n\n    var data = _assign(_assign(_assign(_assign(_assign(_assign({}, defaultData), style), attrs), advStyle), getBorder()), getCellPaddingCellSpacing());\n\n    return data;\n  };\n\n  var extractDataFromTableElement = function extractDataFromTableElement(editor, elm, hasAdvTableTab) {\n    var getBorder = function getBorder(dom, elm) {\n      var optBorderWidth = getRaw(Element.fromDom(elm), 'border-width');\n\n      if (shouldStyleWithCss(editor) && optBorderWidth.isSome()) {\n        return optBorderWidth.getOr('');\n      }\n\n      return dom.getAttrib(elm, 'border') || Styles$1.getTDTHOverallStyle(editor.dom, elm, 'border-width') || Styles$1.getTDTHOverallStyle(editor.dom, elm, 'border');\n    };\n\n    var dom = editor.dom;\n\n    var data = _assign(_assign({\n      width: dom.getStyle(elm, 'width') || dom.getAttrib(elm, 'width'),\n      height: dom.getStyle(elm, 'height') || dom.getAttrib(elm, 'height'),\n      cellspacing: dom.getStyle(elm, 'border-spacing') || dom.getAttrib(elm, 'cellspacing'),\n      cellpadding: dom.getAttrib(elm, 'cellpadding') || Styles$1.getTDTHOverallStyle(editor.dom, elm, 'padding'),\n      border: getBorder(dom, elm),\n      caption: !!dom.select('caption', elm)[0],\n      \"class\": dom.getAttrib(elm, 'class', '')\n    }, getHAlignment('align', 'align', editor, elm)), hasAdvTableTab ? extractAdvancedStyles(dom, elm) : {});\n\n    return data;\n  };\n\n  var extractDataFromRowElement = function extractDataFromRowElement(editor, elm, hasAdvancedRowTab) {\n    var dom = editor.dom;\n\n    var data = _assign(_assign({\n      height: dom.getStyle(elm, 'height') || dom.getAttrib(elm, 'height'),\n      scope: dom.getAttrib(elm, 'scope'),\n      \"class\": dom.getAttrib(elm, 'class', ''),\n      align: '',\n      type: elm.parentNode.nodeName.toLowerCase()\n    }, getHAlignment('align', 'align', editor, elm)), hasAdvancedRowTab ? extractAdvancedStyles(dom, elm) : {});\n\n    return data;\n  };\n\n  var extractDataFromCellElement = function extractDataFromCellElement(editor, elm, hasAdvancedCellTab) {\n    var dom = editor.dom;\n\n    var data = _assign(_assign(_assign({\n      width: dom.getStyle(elm, 'width') || dom.getAttrib(elm, 'width'),\n      height: dom.getStyle(elm, 'height') || dom.getAttrib(elm, 'height'),\n      scope: dom.getAttrib(elm, 'scope'),\n      celltype: elm.nodeName.toLowerCase(),\n      \"class\": dom.getAttrib(elm, 'class', '')\n    }, getHAlignment('align', 'halign', editor, elm)), getVAlignment('valign', 'valign', editor, elm)), hasAdvancedCellTab ? extractAdvancedStyles(dom, elm) : {});\n\n    return data;\n  };\n\n  var Helpers = {\n    buildListItems: buildListItems,\n    extractAdvancedStyles: extractAdvancedStyles,\n    getSharedValues: getSharedValues,\n    getAdvancedTab: getAdvancedTab,\n    extractDataFromTableElement: extractDataFromTableElement,\n    extractDataFromRowElement: extractDataFromRowElement,\n    extractDataFromCellElement: extractDataFromCellElement,\n    extractDataFromSettings: extractDataFromSettings\n  };\n\n  var getClassList = function getClassList(editor) {\n    var rowClassList = getCellClassList(editor);\n    var classes = Helpers.buildListItems(rowClassList, function (item) {\n      if (item.value) {\n        item.textStyle = function () {\n          return editor.formatter.getCssText({\n            block: 'tr',\n            classes: [item.value]\n          });\n        };\n      }\n    });\n\n    if (rowClassList.length > 0) {\n      return Option.some({\n        name: 'class',\n        type: 'selectbox',\n        label: 'Class',\n        items: classes\n      });\n    }\n\n    return Option.none();\n  };\n\n  var children$3 = [{\n    name: 'width',\n    type: 'input',\n    label: 'Width'\n  }, {\n    name: 'height',\n    type: 'input',\n    label: 'Height'\n  }, {\n    name: 'celltype',\n    type: 'selectbox',\n    label: 'Cell type',\n    items: [{\n      text: 'Cell',\n      value: 'td'\n    }, {\n      text: 'Header cell',\n      value: 'th'\n    }]\n  }, {\n    name: 'scope',\n    type: 'selectbox',\n    label: 'Scope',\n    items: [{\n      text: 'None',\n      value: ''\n    }, {\n      text: 'Row',\n      value: 'row'\n    }, {\n      text: 'Column',\n      value: 'col'\n    }, {\n      text: 'Row group',\n      value: 'rowgroup'\n    }, {\n      text: 'Column group',\n      value: 'colgroup'\n    }]\n  }, {\n    name: 'halign',\n    type: 'selectbox',\n    label: 'H Align',\n    items: [{\n      text: 'None',\n      value: ''\n    }, {\n      text: 'Left',\n      value: 'left'\n    }, {\n      text: 'Center',\n      value: 'center'\n    }, {\n      text: 'Right',\n      value: 'right'\n    }]\n  }, {\n    name: 'valign',\n    type: 'selectbox',\n    label: 'V Align',\n    items: [{\n      text: 'None',\n      value: ''\n    }, {\n      text: 'Top',\n      value: 'top'\n    }, {\n      text: 'Middle',\n      value: 'middle'\n    }, {\n      text: 'Bottom',\n      value: 'bottom'\n    }]\n  }];\n\n  var getItems = function getItems(editor) {\n    return getClassList(editor).fold(function () {\n      return children$3;\n    }, function (classlist) {\n      return children$3.concat(classlist);\n    });\n  };\n\n  var CellDialogGeneralTab = {\n    getItems: getItems\n  };\n\n  var normal = function normal(dom, node) {\n    var setAttrib = function setAttrib(attr, value) {\n      dom.setAttrib(node, attr, value);\n    };\n\n    var setStyle = function setStyle(prop, value) {\n      dom.setStyle(node, prop, value);\n    };\n\n    return {\n      setAttrib: setAttrib,\n      setStyle: setStyle\n    };\n  };\n\n  var ifTruthy = function ifTruthy(dom, node) {\n    var setAttrib = function setAttrib(attr, value) {\n      if (value) {\n        dom.setAttrib(node, attr, value);\n      }\n    };\n\n    var setStyle = function setStyle(prop, value) {\n      if (value) {\n        dom.setStyle(node, prop, value);\n      }\n    };\n\n    return {\n      setAttrib: setAttrib,\n      setStyle: setStyle\n    };\n  };\n\n  var DomModifier = {\n    normal: normal,\n    ifTruthy: ifTruthy\n  };\n\n  var updateSimpleProps = function updateSimpleProps(modifiers, data) {\n    modifiers.setAttrib('scope', data.scope);\n    modifiers.setAttrib('class', data[\"class\"]);\n    modifiers.setStyle('width', addSizeSuffix(data.width));\n    modifiers.setStyle('height', addSizeSuffix(data.height));\n  };\n\n  var updateAdvancedProps = function updateAdvancedProps(modifiers, data) {\n    modifiers.setStyle('background-color', data.backgroundcolor);\n    modifiers.setStyle('border-color', data.bordercolor);\n    modifiers.setStyle('border-style', data.borderstyle);\n    modifiers.setStyle('border-width', addSizeSuffix(data.borderwidth));\n  };\n\n  var applyToSingle = function applyToSingle(editor, cells, data) {\n    var dom = editor.dom;\n    var cellElm = data.celltype && cells[0].nodeName.toLowerCase() !== data.celltype ? dom.rename(cells[0], data.celltype) : cells[0];\n    var modifiers = DomModifier.normal(dom, cellElm);\n    updateSimpleProps(modifiers, data);\n\n    if (hasAdvancedCellTab(editor)) {\n      updateAdvancedProps(modifiers, data);\n    }\n\n    Styles$1.unApplyAlign(editor, cellElm);\n    Styles$1.unApplyVAlign(editor, cellElm);\n\n    if (data.halign) {\n      Styles$1.applyAlign(editor, cellElm, data.halign);\n    }\n\n    if (data.valign) {\n      Styles$1.applyVAlign(editor, cellElm, data.valign);\n    }\n  };\n\n  var applyToMultiple = function applyToMultiple(editor, cells, data) {\n    var dom = editor.dom;\n    global$1.each(cells, function (cellElm) {\n      if (data.celltype && cellElm.nodeName.toLowerCase() !== data.celltype) {\n        cellElm = dom.rename(cellElm, data.celltype);\n      }\n\n      var modifiers = DomModifier.ifTruthy(dom, cellElm);\n      updateSimpleProps(modifiers, data);\n\n      if (hasAdvancedCellTab(editor)) {\n        updateAdvancedProps(modifiers, data);\n      }\n\n      if (data.halign) {\n        Styles$1.applyAlign(editor, cellElm, data.halign);\n      }\n\n      if (data.valign) {\n        Styles$1.applyVAlign(editor, cellElm, data.valign);\n      }\n    });\n  };\n\n  var onSubmitCellForm = function onSubmitCellForm(editor, cells, api) {\n    var data = api.getData();\n    api.close();\n    editor.undoManager.transact(function () {\n      var applicator = cells.length === 1 ? applyToSingle : applyToMultiple;\n      applicator(editor, cells, data);\n      editor.focus();\n    });\n  };\n\n  var open = function open(editor) {\n    var cellElm,\n        cells = [];\n    cells = editor.dom.select('td[data-mce-selected],th[data-mce-selected]');\n    cellElm = editor.dom.getParent(editor.selection.getStart(), 'td,th');\n\n    if (!cells.length && cellElm) {\n      cells.push(cellElm);\n    }\n\n    cellElm = cellElm || cells[0];\n\n    if (!cellElm) {\n      return;\n    }\n\n    var cellsData = global$1.map(cells, function (cellElm) {\n      return Helpers.extractDataFromCellElement(editor, cellElm, hasAdvancedCellTab(editor));\n    });\n    var data = Helpers.getSharedValues(cellsData);\n    var dialogTabPanel = {\n      type: 'tabpanel',\n      tabs: [{\n        title: 'General',\n        name: 'general',\n        items: CellDialogGeneralTab.getItems(editor)\n      }, Helpers.getAdvancedTab('cell')]\n    };\n    var dialogPanel = {\n      type: 'panel',\n      items: [{\n        type: 'grid',\n        columns: 2,\n        items: CellDialogGeneralTab.getItems(editor)\n      }]\n    };\n    editor.windowManager.open({\n      title: 'Cell Properties',\n      size: 'normal',\n      body: hasAdvancedCellTab(editor) ? dialogTabPanel : dialogPanel,\n      buttons: [{\n        type: 'cancel',\n        name: 'cancel',\n        text: 'Cancel'\n      }, {\n        type: 'submit',\n        name: 'save',\n        text: 'Save',\n        primary: true\n      }],\n      initialData: data,\n      onSubmit: curry(onSubmitCellForm, editor, cells)\n    });\n  };\n\n  var CellDialog = {\n    open: open\n  };\n\n  var getClassList$1 = function getClassList$1(editor) {\n    var rowClassList = getRowClassList(editor);\n    var classes = Helpers.buildListItems(rowClassList, function (item) {\n      if (item.value) {\n        item.textStyle = function () {\n          return editor.formatter.getCssText({\n            block: 'tr',\n            classes: [item.value]\n          });\n        };\n      }\n    });\n\n    if (rowClassList.length > 0) {\n      return Option.some({\n        name: 'class',\n        type: 'selectbox',\n        label: 'Class',\n        items: classes\n      });\n    }\n\n    return Option.none();\n  };\n\n  var formChildren = [{\n    type: 'selectbox',\n    name: 'type',\n    label: 'Row type',\n    items: [{\n      text: 'Header',\n      value: 'thead'\n    }, {\n      text: 'Body',\n      value: 'tbody'\n    }, {\n      text: 'Footer',\n      value: 'tfoot'\n    }]\n  }, {\n    type: 'selectbox',\n    name: 'align',\n    label: 'Alignment',\n    items: [{\n      text: 'None',\n      value: ''\n    }, {\n      text: 'Left',\n      value: 'left'\n    }, {\n      text: 'Center',\n      value: 'center'\n    }, {\n      text: 'Right',\n      value: 'right'\n    }]\n  }, {\n    label: 'Height',\n    name: 'height',\n    type: 'input'\n  }];\n\n  var getItems$1 = function getItems$1(editor) {\n    return getClassList$1(editor).fold(function () {\n      return formChildren;\n    }, function (classes) {\n      return formChildren.concat(classes);\n    });\n  };\n\n  var RowDialogGeneralTab = {\n    getItems: getItems$1\n  };\n\n  var switchRowType = function switchRowType(dom, rowElm, toType) {\n    var tableElm = dom.getParent(rowElm, 'table');\n    var oldParentElm = rowElm.parentNode;\n    var parentElm = dom.select(toType, tableElm)[0];\n\n    if (!parentElm) {\n      parentElm = dom.create(toType);\n\n      if (tableElm.firstChild) {\n        if (tableElm.firstChild.nodeName === 'CAPTION') {\n          dom.insertAfter(parentElm, tableElm.firstChild);\n        } else {\n          tableElm.insertBefore(parentElm, tableElm.firstChild);\n        }\n      } else {\n        tableElm.appendChild(parentElm);\n      }\n    }\n\n    parentElm.appendChild(rowElm);\n\n    if (!oldParentElm.hasChildNodes()) {\n      dom.remove(oldParentElm);\n    }\n  };\n\n  var updateAdvancedProps$1 = function updateAdvancedProps$1(modifier, data) {\n    modifier.setStyle('background-color', data.backgroundcolor);\n    modifier.setStyle('border-color', data.bordercolor);\n    modifier.setStyle('border-style', data.borderstyle);\n  };\n\n  var onSubmitRowForm = function onSubmitRowForm(editor, rows, oldData, api) {\n    var dom = editor.dom;\n    var data = api.getData();\n    api.close();\n    var createModifier = rows.length === 1 ? DomModifier.normal : DomModifier.ifTruthy;\n    editor.undoManager.transact(function () {\n      global$1.each(rows, function (rowElm) {\n        if (data.type !== rowElm.parentNode.nodeName.toLowerCase()) {\n          switchRowType(editor.dom, rowElm, data.type);\n        }\n\n        var modifier = createModifier(dom, rowElm);\n        modifier.setAttrib('scope', data.scope);\n        modifier.setAttrib('class', data[\"class\"]);\n        modifier.setStyle('height', addSizeSuffix(data.height));\n\n        if (hasAdvancedRowTab(editor)) {\n          updateAdvancedProps$1(modifier, data);\n        }\n\n        if (data.align !== oldData.align) {\n          Styles$1.unApplyAlign(editor, rowElm);\n          Styles$1.applyAlign(editor, rowElm, data.align);\n        }\n      });\n      editor.focus();\n    });\n  };\n\n  var open$1 = function open$1(editor) {\n    var dom = editor.dom;\n    var tableElm, cellElm, rowElm;\n    var rows = [];\n    tableElm = dom.getParent(editor.selection.getStart(), 'table');\n\n    if (!tableElm) {\n      return;\n    }\n\n    cellElm = dom.getParent(editor.selection.getStart(), 'td,th');\n    global$1.each(tableElm.rows, function (row) {\n      global$1.each(row.cells, function (cell) {\n        if ((dom.getAttrib(cell, 'data-mce-selected') || cell === cellElm) && rows.indexOf(row) < 0) {\n          rows.push(row);\n          return false;\n        }\n      });\n    });\n    rowElm = rows[0];\n\n    if (!rowElm) {\n      return;\n    }\n\n    var rowsData = global$1.map(rows, function (rowElm) {\n      return Helpers.extractDataFromRowElement(editor, rowElm, hasAdvancedRowTab(editor));\n    });\n    var data = Helpers.getSharedValues(rowsData);\n    var dialogTabPanel = {\n      type: 'tabpanel',\n      tabs: [{\n        title: 'General',\n        name: 'general',\n        items: RowDialogGeneralTab.getItems(editor)\n      }, Helpers.getAdvancedTab('row')]\n    };\n    var dialogPanel = {\n      type: 'panel',\n      items: [{\n        type: 'grid',\n        columns: 2,\n        items: RowDialogGeneralTab.getItems(editor)\n      }]\n    };\n    editor.windowManager.open({\n      title: 'Row Properties',\n      size: 'normal',\n      body: hasAdvancedRowTab(editor) ? dialogTabPanel : dialogPanel,\n      buttons: [{\n        type: 'cancel',\n        name: 'cancel',\n        text: 'Cancel'\n      }, {\n        type: 'submit',\n        name: 'save',\n        text: 'Save',\n        primary: true\n      }],\n      initialData: data,\n      onSubmit: curry(onSubmitRowForm, editor, rows, data)\n    });\n  };\n\n  var RowDialog = {\n    open: open$1\n  };\n  var hasOwnProperty$1 = Object.prototype.hasOwnProperty;\n\n  var shallow$1 = function shallow$1(old, nu) {\n    return nu;\n  };\n\n  var baseMerge = function baseMerge(merger) {\n    return function () {\n      var objects = new Array(arguments.length);\n\n      for (var i = 0; i < objects.length; i++) {\n        objects[i] = arguments[i];\n      }\n\n      if (objects.length === 0) {\n        throw new Error('Can\\'t merge zero objects');\n      }\n\n      var ret = {};\n\n      for (var j = 0; j < objects.length; j++) {\n        var curObject = objects[j];\n\n        for (var key in curObject) {\n          if (hasOwnProperty$1.call(curObject, key)) {\n            ret[key] = merger(ret[key], curObject[key]);\n          }\n        }\n      }\n\n      return ret;\n    };\n  };\n\n  var merge$3 = baseMerge(shallow$1);\n  var global$2 = tinymce.util.Tools.resolve('tinymce.Env');\n  var DefaultRenderOptions = {\n    styles: {\n      'border-collapse': 'collapse',\n      'width': '100%'\n    },\n    attributes: {\n      border: '1'\n    },\n    percentages: true\n  };\n\n  var makeTable = function makeTable() {\n    return Element.fromTag('table');\n  };\n\n  var tableBody = function tableBody() {\n    return Element.fromTag('tbody');\n  };\n\n  var tableRow = function tableRow() {\n    return Element.fromTag('tr');\n  };\n\n  var tableHeaderCell = function tableHeaderCell() {\n    return Element.fromTag('th');\n  };\n\n  var tableCell = function tableCell() {\n    return Element.fromTag('td');\n  };\n\n  var render$1 = function render$1(rows, columns, rowHeaders, columnHeaders, renderOpts) {\n    if (renderOpts === void 0) {\n      renderOpts = DefaultRenderOptions;\n    }\n\n    var table = makeTable();\n    setAll$1(table, renderOpts.styles);\n    setAll(table, renderOpts.attributes);\n    var tbody = tableBody();\n    append(table, tbody);\n    var trs = [];\n\n    for (var i = 0; i < rows; i++) {\n      var tr = tableRow();\n\n      for (var j = 0; j < columns; j++) {\n        var td = i < rowHeaders || j < columnHeaders ? tableHeaderCell() : tableCell();\n\n        if (j < columnHeaders) {\n          set(td, 'scope', 'row');\n        }\n\n        if (i < rowHeaders) {\n          set(td, 'scope', 'col');\n        }\n\n        append(td, Element.fromTag('br'));\n\n        if (renderOpts.percentages) {\n          set$1(td, 'width', 100 / columns + '%');\n        }\n\n        append(tr, td);\n      }\n\n      trs.push(tr);\n    }\n\n    append$1(tbody, trs);\n    return table;\n  };\n\n  var get$8 = function get$8(element) {\n    return element.dom().innerHTML;\n  };\n\n  var getOuter$2 = function getOuter$2(element) {\n    var container = Element.fromTag('div');\n    var clone = Element.fromDom(element.dom().cloneNode(true));\n    append(container, clone);\n    return get$8(container);\n  };\n\n  var placeCaretInCell = function placeCaretInCell(editor, cell) {\n    editor.selection.select(cell.dom(), true);\n    editor.selection.collapse(true);\n  };\n\n  var selectFirstCellInTable = function selectFirstCellInTable(editor, tableElm) {\n    descendant$1(tableElm, 'td,th').each(curry(placeCaretInCell, editor));\n  };\n\n  var fireEvents = function fireEvents(editor, table) {\n    each(descendants$1(table, 'tr'), function (row) {\n      fireNewRow(editor, row.dom());\n      each(descendants$1(row, 'th,td'), function (cell) {\n        fireNewCell(editor, cell.dom());\n      });\n    });\n  };\n\n  var isPercentage = function isPercentage(width) {\n    return isString(width) && width.indexOf('%') !== -1;\n  };\n\n  var insert$1 = function insert$1(editor, columns, rows) {\n    var defaultStyles = getDefaultStyles(editor);\n    var options = {\n      styles: defaultStyles,\n      attributes: getDefaultAttributes(editor),\n      percentages: isPercentage(defaultStyles.width) && !isPixelsForced(editor)\n    };\n    var table = render$1(rows, columns, 0, 0, options);\n    set(table, 'data-mce-id', '__mce');\n    var html = getOuter$2(table);\n    editor.insertContent(html);\n    return descendant$1(getBody$1(editor), 'table[data-mce-id=\"__mce\"]').map(function (table) {\n      if (isPixelsForced(editor)) {\n        set$1(table, 'width', get$2(table, 'width'));\n      }\n\n      remove(table, 'data-mce-id');\n      fireEvents(editor, table);\n      selectFirstCellInTable(editor, table);\n      return table.dom();\n    }).getOr(null);\n  };\n\n  var InsertTable = {\n    insert: insert$1\n  };\n\n  var getItems$2 = function getItems$2(editor, hasClasses, insertNewTable) {\n    var rowColCountItems = !insertNewTable ? [] : [{\n      type: 'input',\n      name: 'cols',\n      label: 'Cols',\n      inputMode: 'numeric'\n    }, {\n      type: 'input',\n      name: 'rows',\n      label: 'Rows',\n      inputMode: 'numeric'\n    }];\n    var alwaysItems = [{\n      type: 'input',\n      name: 'width',\n      label: 'Width'\n    }, {\n      type: 'input',\n      name: 'height',\n      label: 'Height'\n    }];\n    var appearanceItems = hasAppearanceOptions(editor) ? [{\n      type: 'input',\n      name: 'cellspacing',\n      label: 'Cell spacing',\n      inputMode: 'numeric'\n    }, {\n      type: 'input',\n      name: 'cellpadding',\n      label: 'Cell padding',\n      inputMode: 'numeric'\n    }, {\n      type: 'input',\n      name: 'border',\n      label: 'Border width'\n    }, {\n      type: 'label',\n      label: 'Caption',\n      items: [{\n        type: 'checkbox',\n        name: 'caption',\n        label: 'Show caption'\n      }]\n    }] : [];\n    var alignmentItem = [{\n      type: 'selectbox',\n      name: 'align',\n      label: 'Alignment',\n      items: [{\n        text: 'None',\n        value: ''\n      }, {\n        text: 'Left',\n        value: 'left'\n      }, {\n        text: 'Center',\n        value: 'center'\n      }, {\n        text: 'Right',\n        value: 'right'\n      }]\n    }];\n    var classListItem = hasClasses ? [{\n      type: 'selectbox',\n      name: 'class',\n      label: 'Class',\n      items: Helpers.buildListItems(getTableClassList(editor), function (item) {\n        if (item.value) {\n          item.textStyle = function () {\n            return editor.formatter.getCssText({\n              block: 'table',\n              classes: [item.value]\n            });\n          };\n        }\n      })\n    }] : [];\n    return rowColCountItems.concat(alwaysItems).concat(appearanceItems).concat(alignmentItem).concat(classListItem);\n  };\n\n  var TableDialogGeneralTab = {\n    getItems: getItems$2\n  };\n\n  var styleTDTH = function styleTDTH(dom, elm, name, value) {\n    if (elm.tagName === 'TD' || elm.tagName === 'TH') {\n      if (isString(name)) {\n        dom.setStyle(elm, name, value);\n      } else {\n        dom.setStyle(elm, name);\n      }\n    } else {\n      if (elm.children) {\n        for (var i = 0; i < elm.children.length; i++) {\n          styleTDTH(dom, elm.children[i], name, value);\n        }\n      }\n    }\n  };\n\n  var applyDataToElement = function applyDataToElement(editor, tableElm, data) {\n    var dom = editor.dom;\n    var attrs = {};\n    var styles = {};\n    attrs[\"class\"] = data[\"class\"];\n    styles.height = addSizeSuffix(data.height);\n\n    if (dom.getAttrib(tableElm, 'width') && !shouldStyleWithCss(editor)) {\n      attrs.width = removePxSuffix(data.width);\n    } else {\n      styles.width = addSizeSuffix(data.width);\n    }\n\n    if (shouldStyleWithCss(editor)) {\n      styles['border-width'] = addSizeSuffix(data.border);\n      styles['border-spacing'] = addSizeSuffix(data.cellspacing);\n    } else {\n      attrs.border = data.border;\n      attrs.cellpadding = data.cellpadding;\n      attrs.cellspacing = data.cellspacing;\n    }\n\n    if (shouldStyleWithCss(editor) && tableElm.children) {\n      for (var i = 0; i < tableElm.children.length; i++) {\n        styleTDTH(dom, tableElm.children[i], {\n          'border-width': addSizeSuffix(data.border),\n          'padding': addSizeSuffix(data.cellpadding)\n        });\n\n        if (hasAdvancedTableTab(editor)) {\n          styleTDTH(dom, tableElm.children[i], {\n            'border-color': data.bordercolor\n          });\n        }\n      }\n    }\n\n    if (hasAdvancedTableTab(editor)) {\n      styles['background-color'] = data.backgroundcolor;\n      styles['border-color'] = data.bordercolor;\n      styles['border-style'] = data.borderstyle;\n    }\n\n    attrs.style = dom.serializeStyle(merge$3(getDefaultStyles(editor), styles));\n    dom.setAttribs(tableElm, merge$3(getDefaultAttributes(editor), attrs));\n  };\n\n  var onSubmitTableForm = function onSubmitTableForm(editor, tableElm, api) {\n    var dom = editor.dom;\n    var captionElm;\n    var data = api.getData();\n    api.close();\n\n    if (data[\"class\"] === '') {\n      delete data[\"class\"];\n    }\n\n    editor.undoManager.transact(function () {\n      if (!tableElm) {\n        var cols = parseInt(data.cols, 10) || 1;\n        var rows = parseInt(data.rows, 10) || 1;\n        tableElm = InsertTable.insert(editor, cols, rows);\n      }\n\n      applyDataToElement(editor, tableElm, data);\n      captionElm = dom.select('caption', tableElm)[0];\n\n      if (captionElm && !data.caption) {\n        dom.remove(captionElm);\n      }\n\n      if (!captionElm && data.caption) {\n        captionElm = dom.create('caption');\n        captionElm.innerHTML = !global$2.ie ? '<br data-mce-bogus=\"1\"/>' : '\\xA0';\n        tableElm.insertBefore(captionElm, tableElm.firstChild);\n      }\n\n      if (data.align === '') {\n        Styles$1.unApplyAlign(editor, tableElm);\n      } else {\n        Styles$1.applyAlign(editor, tableElm, data.align);\n      }\n\n      editor.focus();\n      editor.addVisual();\n    });\n  };\n\n  var open$2 = function open$2(editor, insertNewTable) {\n    var dom = editor.dom;\n    var tableElm;\n    var data = Helpers.extractDataFromSettings(editor, hasAdvancedTableTab(editor));\n\n    if (insertNewTable === false) {\n      tableElm = dom.getParent(editor.selection.getStart(), 'table');\n\n      if (tableElm) {\n        data = Helpers.extractDataFromTableElement(editor, tableElm, hasAdvancedTableTab(editor));\n      } else {\n        if (hasAdvancedTableTab(editor)) {\n          data.borderstyle = '';\n          data.bordercolor = '';\n          data.backgroundcolor = '';\n        }\n      }\n    } else {\n      data.cols = '1';\n      data.rows = '1';\n\n      if (hasAdvancedTableTab(editor)) {\n        data.borderstyle = '';\n        data.bordercolor = '';\n        data.backgroundcolor = '';\n      }\n    }\n\n    var hasClasses = getTableClassList(editor).length > 0;\n\n    if (hasClasses) {\n      if (data[\"class\"]) {\n        data[\"class\"] = data[\"class\"].replace(/\\s*mce\\-item\\-table\\s*/g, '');\n      }\n    }\n\n    var generalPanel = {\n      type: 'grid',\n      columns: 2,\n      items: TableDialogGeneralTab.getItems(editor, hasClasses, insertNewTable)\n    };\n\n    var nonAdvancedForm = function nonAdvancedForm() {\n      return {\n        type: 'panel',\n        items: [generalPanel]\n      };\n    };\n\n    var advancedForm = function advancedForm() {\n      return {\n        type: 'tabpanel',\n        tabs: [{\n          title: 'General',\n          name: 'general',\n          items: [generalPanel]\n        }, Helpers.getAdvancedTab('table')]\n      };\n    };\n\n    var dialogBody = hasAdvancedTableTab(editor) ? advancedForm() : nonAdvancedForm();\n    editor.windowManager.open({\n      title: 'Table Properties',\n      size: 'normal',\n      body: dialogBody,\n      onSubmit: curry(onSubmitTableForm, editor, tableElm),\n      buttons: [{\n        type: 'cancel',\n        name: 'cancel',\n        text: 'Cancel'\n      }, {\n        type: 'submit',\n        name: 'save',\n        text: 'Save',\n        primary: true\n      }],\n      initialData: data\n    });\n  };\n\n  var TableDialog = {\n    open: open$2\n  };\n\n  var getSelectionStartFromSelector = function getSelectionStartFromSelector(selector) {\n    return function (editor) {\n      return Option.from(editor.dom.getParent(editor.selection.getStart(), selector)).map(Element.fromDom);\n    };\n  };\n\n  var getSelectionStartCell = getSelectionStartFromSelector('th,td');\n  var getSelectionStartCellOrCaption = getSelectionStartFromSelector('th,td,caption');\n  var each$3 = global$1.each;\n\n  var registerCommands = function registerCommands(editor, actions, cellSelection, selections, clipboardRows) {\n    var isRoot = getIsRoot(editor);\n\n    var eraseTable = function eraseTable() {\n      getSelectionStartCellOrCaption(editor).each(function (cellOrCaption) {\n        var tableOpt = TableLookup.table(cellOrCaption, isRoot);\n        tableOpt.filter(not(isRoot)).each(function (table) {\n          var cursor = Element.fromText('');\n          after(table, cursor);\n          remove$2(table);\n\n          if (editor.dom.isEmpty(editor.getBody())) {\n            editor.setContent('');\n            editor.selection.setCursorLocation();\n          } else {\n            var rng = editor.dom.createRng();\n            rng.setStart(cursor.dom(), 0);\n            rng.setEnd(cursor.dom(), 0);\n            editor.selection.setRng(rng);\n            editor.nodeChanged();\n          }\n        });\n      });\n    };\n\n    var getTableFromCell = function getTableFromCell(cell) {\n      return TableLookup.table(cell, isRoot);\n    };\n\n    var getSize = function getSize(table) {\n      return {\n        width: getPixelWidth$1(table.dom()),\n        height: getPixelWidth$1(table.dom())\n      };\n    };\n\n    var resizeChange = function resizeChange(editor, oldSize, table) {\n      var newSize = getSize(table);\n\n      if (oldSize.width !== newSize.width || oldSize.height !== newSize.height) {\n        fireObjectResizeStart(editor, table.dom(), oldSize.width, oldSize.height);\n        fireObjectResized(editor, table.dom(), newSize.width, newSize.height);\n      }\n    };\n\n    var actOnSelection = function actOnSelection(execute) {\n      getSelectionStartCell(editor).each(function (cell) {\n        getTableFromCell(cell).each(function (table) {\n          var targets = TableTargets.forMenu(selections, table, cell);\n          var beforeSize = getSize(table);\n          execute(table, targets).each(function (rng) {\n            resizeChange(editor, beforeSize, table);\n            editor.selection.setRng(rng);\n            editor.focus();\n            cellSelection.clear(table);\n            removeDataStyle(table);\n          });\n        });\n      });\n    };\n\n    var copyRowSelection = function copyRowSelection(execute) {\n      return getSelectionStartCell(editor).map(function (cell) {\n        return getTableFromCell(cell).bind(function (table) {\n          var doc = Element.fromDom(editor.getDoc());\n          var targets = TableTargets.forMenu(selections, table, cell);\n          var generators = TableFill.cellOperations(noop, doc, Option.none());\n          return CopyRows.copyRows(table, targets, generators);\n        });\n      });\n    };\n\n    var pasteOnSelection = function pasteOnSelection(execute) {\n      clipboardRows.get().each(function (rows) {\n        var clonedRows = map(rows, function (row) {\n          return deep(row);\n        });\n        getSelectionStartCell(editor).each(function (cell) {\n          getTableFromCell(cell).each(function (table) {\n            var doc = Element.fromDom(editor.getDoc());\n            var generators = TableFill.paste(doc);\n            var targets = TableTargets.pasteRows(selections, table, cell, clonedRows, generators);\n            execute(table, targets).each(function (rng) {\n              editor.selection.setRng(rng);\n              editor.focus();\n              cellSelection.clear(table);\n            });\n          });\n        });\n      });\n    };\n\n    each$3({\n      mceTableSplitCells: function mceTableSplitCells() {\n        actOnSelection(actions.unmergeCells);\n      },\n      mceTableMergeCells: function mceTableMergeCells() {\n        actOnSelection(actions.mergeCells);\n      },\n      mceTableInsertRowBefore: function mceTableInsertRowBefore() {\n        actOnSelection(actions.insertRowsBefore);\n      },\n      mceTableInsertRowAfter: function mceTableInsertRowAfter() {\n        actOnSelection(actions.insertRowsAfter);\n      },\n      mceTableInsertColBefore: function mceTableInsertColBefore() {\n        actOnSelection(actions.insertColumnsBefore);\n      },\n      mceTableInsertColAfter: function mceTableInsertColAfter() {\n        actOnSelection(actions.insertColumnsAfter);\n      },\n      mceTableDeleteCol: function mceTableDeleteCol() {\n        actOnSelection(actions.deleteColumn);\n      },\n      mceTableDeleteRow: function mceTableDeleteRow() {\n        actOnSelection(actions.deleteRow);\n      },\n      mceTableCutRow: function mceTableCutRow(grid) {\n        copyRowSelection().each(function (selection) {\n          clipboardRows.set(selection);\n          actOnSelection(actions.deleteRow);\n        });\n      },\n      mceTableCopyRow: function mceTableCopyRow(grid) {\n        copyRowSelection().each(function (selection) {\n          clipboardRows.set(selection);\n        });\n      },\n      mceTablePasteRowBefore: function mceTablePasteRowBefore(grid) {\n        pasteOnSelection(actions.pasteRowsBefore);\n      },\n      mceTablePasteRowAfter: function mceTablePasteRowAfter(grid) {\n        pasteOnSelection(actions.pasteRowsAfter);\n      },\n      mceTableDelete: eraseTable\n    }, function (func, name) {\n      editor.addCommand(name, func);\n    });\n    each$3({\n      mceInsertTable: curry(TableDialog.open, editor, true),\n      mceTableProps: curry(TableDialog.open, editor, false),\n      mceTableRowProps: curry(RowDialog.open, editor),\n      mceTableCellProps: curry(CellDialog.open, editor)\n    }, function (func, name) {\n      editor.addCommand(name, function () {\n        func();\n      });\n    });\n  };\n\n  var Commands = {\n    registerCommands: registerCommands\n  };\n\n  var only = function only(element) {\n    var parent = Option.from(element.dom().documentElement).map(Element.fromDom).getOr(element);\n    return {\n      parent: constant(parent),\n      view: constant(element),\n      origin: constant(Position(0, 0))\n    };\n  };\n\n  var detached = function detached(editable, chrome) {\n    var origin = function origin() {\n      return absolute(chrome);\n    };\n\n    return {\n      parent: constant(chrome),\n      view: constant(editable),\n      origin: origin\n    };\n  };\n\n  var body$1 = function body$1(editable, chrome) {\n    return {\n      parent: constant(chrome),\n      view: constant(editable),\n      origin: constant(Position(0, 0))\n    };\n  };\n\n  var ResizeWire = {\n    only: only,\n    detached: detached,\n    body: body$1\n  };\n\n  var Event = function Event(fields) {\n    var struct = Immutable.apply(null, fields);\n    var handlers = [];\n\n    var bind = function bind(handler) {\n      if (handler === undefined) {\n        throw new Error('Event bind error: undefined handler');\n      }\n\n      handlers.push(handler);\n    };\n\n    var unbind = function unbind(handler) {\n      handlers = filter(handlers, function (h) {\n        return h !== handler;\n      });\n    };\n\n    var trigger = function trigger() {\n      var args = [];\n\n      for (var _i = 0; _i < arguments.length; _i++) {\n        args[_i] = arguments[_i];\n      }\n\n      var event = struct.apply(null, args);\n      each(handlers, function (handler) {\n        handler(event);\n      });\n    };\n\n    return {\n      bind: bind,\n      unbind: unbind,\n      trigger: trigger\n    };\n  };\n\n  var create$1 = function create$1(typeDefs) {\n    var registry = map$1(typeDefs, function (event) {\n      return {\n        bind: event.bind,\n        unbind: event.unbind\n      };\n    });\n    var trigger = map$1(typeDefs, function (event) {\n      return event.trigger;\n    });\n    return {\n      registry: registry,\n      trigger: trigger\n    };\n  };\n\n  var Events = {\n    create: create$1\n  };\n\n  var mkEvent = function mkEvent(target, x, y, stop, prevent, kill, raw) {\n    return {\n      target: constant(target),\n      x: constant(x),\n      y: constant(y),\n      stop: stop,\n      prevent: prevent,\n      kill: kill,\n      raw: constant(raw)\n    };\n  };\n\n  var fromRawEvent = function fromRawEvent(rawEvent) {\n    var target = Element.fromDom(rawEvent.target);\n\n    var stop = function stop() {\n      rawEvent.stopPropagation();\n    };\n\n    var prevent = function prevent() {\n      rawEvent.preventDefault();\n    };\n\n    var kill = compose(prevent, stop);\n    return mkEvent(target, rawEvent.clientX, rawEvent.clientY, stop, prevent, kill, rawEvent);\n  };\n\n  var handle = function handle(filter, handler) {\n    return function (rawEvent) {\n      if (!filter(rawEvent)) {\n        return;\n      }\n\n      handler(fromRawEvent(rawEvent));\n    };\n  };\n\n  var binder = function binder(element, event, filter, handler, useCapture) {\n    var wrapped = handle(filter, handler);\n    element.dom().addEventListener(event, wrapped, useCapture);\n    return {\n      unbind: curry(unbind, element, event, wrapped, useCapture)\n    };\n  };\n\n  var bind$1 = function bind$1(element, event, filter, handler) {\n    return binder(element, event, filter, handler, false);\n  };\n\n  var unbind = function unbind(element, event, handler, useCapture) {\n    element.dom().removeEventListener(event, handler, useCapture);\n  };\n\n  var filter$1 = constant(true);\n\n  var bind$2 = function bind$2(element, event, handler) {\n    return bind$1(element, event, filter$1, handler);\n  };\n\n  var styles$1 = css('ephox-dragster');\n  var Styles$2 = {\n    resolve: styles$1.resolve\n  };\n\n  var Blocker = function Blocker(options) {\n    var settings = merge$3({\n      layerClass: Styles$2.resolve('blocker')\n    }, options);\n    var div = Element.fromTag('div');\n    set(div, 'role', 'presentation');\n    setAll$1(div, {\n      position: 'fixed',\n      left: '0px',\n      top: '0px',\n      width: '100%',\n      height: '100%'\n    });\n    add$2(div, Styles$2.resolve('blocker'));\n    add$2(div, settings.layerClass);\n\n    var element = function element() {\n      return div;\n    };\n\n    var destroy = function destroy() {\n      remove$2(div);\n    };\n\n    return {\n      element: element,\n      destroy: destroy\n    };\n  };\n\n  var DragMode = exactly(['compare', 'extract', 'mutate', 'sink']);\n  var DragSink = exactly(['element', 'start', 'stop', 'destroy']);\n  var DragApi = exactly(['forceDrop', 'drop', 'move', 'delayDrop']);\n\n  var compare = function compare(old, nu) {\n    return Position(nu.left() - old.left(), nu.top() - old.top());\n  };\n\n  var extract$1 = function extract$1(event) {\n    return Option.some(Position(event.x(), event.y()));\n  };\n\n  var mutate = function mutate(mutation, info) {\n    mutation.mutate(info.left(), info.top());\n  };\n\n  var sink = function sink(dragApi, settings) {\n    var blocker = Blocker(settings);\n    var mdown = bind$2(blocker.element(), 'mousedown', dragApi.forceDrop);\n    var mup = bind$2(blocker.element(), 'mouseup', dragApi.drop);\n    var mmove = bind$2(blocker.element(), 'mousemove', dragApi.move);\n    var mout = bind$2(blocker.element(), 'mouseout', dragApi.delayDrop);\n\n    var destroy = function destroy() {\n      blocker.destroy();\n      mup.unbind();\n      mmove.unbind();\n      mout.unbind();\n      mdown.unbind();\n    };\n\n    var start = function start(parent) {\n      append(parent, blocker.element());\n    };\n\n    var stop = function stop() {\n      remove$2(blocker.element());\n    };\n\n    return DragSink({\n      element: blocker.element,\n      start: start,\n      stop: stop,\n      destroy: destroy\n    });\n  };\n\n  var MouseDrag = DragMode({\n    compare: compare,\n    extract: extract$1,\n    sink: sink,\n    mutate: mutate\n  });\n\n  var last$2 = function last$2(fn, rate) {\n    var timer = null;\n\n    var cancel = function cancel() {\n      if (timer !== null) {\n        domGlobals.clearTimeout(timer);\n        timer = null;\n      }\n    };\n\n    var throttle = function throttle() {\n      var args = [];\n\n      for (var _i = 0; _i < arguments.length; _i++) {\n        args[_i] = arguments[_i];\n      }\n\n      if (timer !== null) {\n        domGlobals.clearTimeout(timer);\n      }\n\n      timer = domGlobals.setTimeout(function () {\n        fn.apply(null, args);\n        timer = null;\n      }, rate);\n    };\n\n    return {\n      cancel: cancel,\n      throttle: throttle\n    };\n  };\n\n  function InDrag() {\n    var previous = Option.none();\n\n    var reset = function reset() {\n      previous = Option.none();\n    };\n\n    var update = function update(mode, nu) {\n      var result = previous.map(function (old) {\n        return mode.compare(old, nu);\n      });\n      previous = Option.some(nu);\n      return result;\n    };\n\n    var onEvent = function onEvent(event, mode) {\n      var dataOption = mode.extract(event);\n      dataOption.each(function (data) {\n        var offset = update(mode, data);\n        offset.each(function (d) {\n          events.trigger.move(d);\n        });\n      });\n    };\n\n    var events = Events.create({\n      move: Event(['info'])\n    });\n    return {\n      onEvent: onEvent,\n      reset: reset,\n      events: events.registry\n    };\n  }\n\n  function NoDrag() {\n    return {\n      onEvent: noop,\n      reset: noop\n    };\n  }\n\n  function Movement() {\n    var noDragState = NoDrag();\n    var inDragState = InDrag();\n    var dragState = noDragState;\n\n    var on = function on() {\n      dragState.reset();\n      dragState = inDragState;\n    };\n\n    var off = function off() {\n      dragState.reset();\n      dragState = noDragState;\n    };\n\n    var onEvent = function onEvent(event, mode) {\n      dragState.onEvent(event, mode);\n    };\n\n    var isOn = function isOn() {\n      return dragState === inDragState;\n    };\n\n    return {\n      on: on,\n      off: off,\n      isOn: isOn,\n      onEvent: onEvent,\n      events: inDragState.events\n    };\n  }\n\n  var setup = function setup(mutation, mode, settings) {\n    var active = false;\n    var events = Events.create({\n      start: Event([]),\n      stop: Event([])\n    });\n    var movement = Movement();\n\n    var drop = function drop() {\n      sink.stop();\n\n      if (movement.isOn()) {\n        movement.off();\n        events.trigger.stop();\n      }\n    };\n\n    var throttledDrop = last$2(drop, 200);\n\n    var go = function go(parent) {\n      sink.start(parent);\n      movement.on();\n      events.trigger.start();\n    };\n\n    var mousemove = function mousemove(event) {\n      throttledDrop.cancel();\n      movement.onEvent(event, mode);\n    };\n\n    movement.events.move.bind(function (event) {\n      mode.mutate(mutation, event.info());\n    });\n\n    var on = function on() {\n      active = true;\n    };\n\n    var off = function off() {\n      active = false;\n    };\n\n    var runIfActive = function runIfActive(f) {\n      return function () {\n        var args = [];\n\n        for (var _i = 0; _i < arguments.length; _i++) {\n          args[_i] = arguments[_i];\n        }\n\n        if (active) {\n          f.apply(null, args);\n        }\n      };\n    };\n\n    var sink = mode.sink(DragApi({\n      forceDrop: drop,\n      drop: runIfActive(drop),\n      move: runIfActive(mousemove),\n      delayDrop: runIfActive(throttledDrop.throttle)\n    }), settings);\n\n    var destroy = function destroy() {\n      sink.destroy();\n    };\n\n    return {\n      element: sink.element,\n      go: go,\n      on: on,\n      off: off,\n      destroy: destroy,\n      events: events.registry\n    };\n  };\n\n  var Dragging = {\n    setup: setup\n  };\n\n  var transform$1 = function transform$1(mutation, settings) {\n    if (settings === void 0) {\n      settings = {};\n    }\n\n    var mode = settings.mode !== undefined ? settings.mode : MouseDrag;\n    return Dragging.setup(mutation, mode, settings);\n  };\n\n  var Dragger = {\n    transform: transform$1\n  };\n\n  var Mutation = function Mutation() {\n    var events = Events.create({\n      drag: Event(['xDelta', 'yDelta'])\n    });\n\n    var mutate = function mutate(x, y) {\n      events.trigger.drag(x, y);\n    };\n\n    return {\n      mutate: mutate,\n      events: events.registry\n    };\n  };\n\n  var BarMutation = function BarMutation() {\n    var events = Events.create({\n      drag: Event(['xDelta', 'yDelta', 'target'])\n    });\n    var target = Option.none();\n    var delegate = Mutation();\n    delegate.events.drag.bind(function (event) {\n      target.each(function (t) {\n        events.trigger.drag(event.xDelta(), event.yDelta(), t);\n      });\n    });\n\n    var assign = function assign(t) {\n      target = Option.some(t);\n    };\n\n    var get = function get() {\n      return target;\n    };\n\n    return {\n      assign: assign,\n      get: get,\n      mutate: delegate.mutate,\n      events: events.registry\n    };\n  };\n\n  var isContentEditableTrue = function isContentEditableTrue(elm) {\n    return get$1(elm, 'contenteditable') === 'true';\n  };\n\n  var findClosestContentEditable = function findClosestContentEditable(target, isRoot) {\n    return closest$1(target, '[contenteditable]', isRoot);\n  };\n\n  var resizeBarDragging = Styles.resolve('resizer-bar-dragging');\n\n  var BarManager = function BarManager(wire, direction, hdirection) {\n    var mutation = BarMutation();\n    var resizing = Dragger.transform(mutation, {});\n    var hoverTable = Option.none();\n\n    var getResizer = function getResizer(element, type) {\n      return Option.from(get$1(element, type));\n    };\n\n    mutation.events.drag.bind(function (event) {\n      getResizer(event.target(), 'data-row').each(function (_dataRow) {\n        var currentRow = CellUtils.getInt(event.target(), 'top');\n        set$1(event.target(), 'top', currentRow + event.yDelta() + 'px');\n      });\n      getResizer(event.target(), 'data-column').each(function (_dataCol) {\n        var currentCol = CellUtils.getInt(event.target(), 'left');\n        set$1(event.target(), 'left', currentCol + event.xDelta() + 'px');\n      });\n    });\n\n    var getDelta = function getDelta(target, dir) {\n      var newX = CellUtils.getInt(target, dir);\n      var oldX = parseInt(get$1(target, 'data-initial-' + dir), 10);\n      return newX - oldX;\n    };\n\n    resizing.events.stop.bind(function () {\n      mutation.get().each(function (target) {\n        hoverTable.each(function (table) {\n          getResizer(target, 'data-row').each(function (row) {\n            var delta = getDelta(target, 'top');\n            remove(target, 'data-initial-top');\n            events.trigger.adjustHeight(table, delta, parseInt(row, 10));\n          });\n          getResizer(target, 'data-column').each(function (column) {\n            var delta = getDelta(target, 'left');\n            remove(target, 'data-initial-left');\n            events.trigger.adjustWidth(table, delta, parseInt(column, 10));\n          });\n          Bars.refresh(wire, table, hdirection, direction);\n        });\n      });\n    });\n\n    var handler = function handler(target, dir) {\n      events.trigger.startAdjust();\n      mutation.assign(target);\n      set(target, 'data-initial-' + dir, parseInt(get$2(target, dir), 10));\n      add$2(target, resizeBarDragging);\n      set$1(target, 'opacity', '0.2');\n      resizing.go(wire.parent());\n    };\n\n    var mousedown = bind$2(wire.parent(), 'mousedown', function (event) {\n      if (Bars.isRowBar(event.target())) {\n        handler(event.target(), 'top');\n      }\n\n      if (Bars.isColBar(event.target())) {\n        handler(event.target(), 'left');\n      }\n    });\n\n    var isRoot = function isRoot(e) {\n      return eq(e, wire.view());\n    };\n\n    var findClosestEditableTable = function findClosestEditableTable(target) {\n      return closest$1(target, 'table', isRoot).filter(function (table) {\n        return findClosestContentEditable(table, isRoot).exists(isContentEditableTrue);\n      });\n    };\n\n    var mouseover = bind$2(wire.view(), 'mouseover', function (event) {\n      findClosestEditableTable(event.target()).fold(function () {\n        if (inBody(event.target())) {\n          Bars.destroy(wire);\n        }\n      }, function (table) {\n        hoverTable = Option.some(table);\n        Bars.refresh(wire, table, hdirection, direction);\n      });\n    });\n\n    var destroy = function destroy() {\n      mousedown.unbind();\n      mouseover.unbind();\n      resizing.destroy();\n      Bars.destroy(wire);\n    };\n\n    var refresh = function refresh(tbl) {\n      Bars.refresh(wire, tbl, hdirection, direction);\n    };\n\n    var events = Events.create({\n      adjustHeight: Event(['table', 'delta', 'row']),\n      adjustWidth: Event(['table', 'delta', 'column']),\n      startAdjust: Event([])\n    });\n    return {\n      destroy: destroy,\n      refresh: refresh,\n      on: resizing.on,\n      off: resizing.off,\n      hideBars: curry(Bars.hide, wire),\n      showBars: curry(Bars.show, wire),\n      events: events.registry\n    };\n  };\n\n  var create$2 = function create$2(wire, vdirection) {\n    var hdirection = BarPositions.height;\n    var manager = BarManager(wire, vdirection, hdirection);\n    var events = Events.create({\n      beforeResize: Event(['table']),\n      afterResize: Event(['table']),\n      startDrag: Event([])\n    });\n    manager.events.adjustHeight.bind(function (event) {\n      events.trigger.beforeResize(event.table());\n      var delta = hdirection.delta(event.delta(), event.table());\n      Adjustments.adjustHeight(event.table(), delta, event.row(), hdirection);\n      events.trigger.afterResize(event.table());\n    });\n    manager.events.startAdjust.bind(function (event) {\n      events.trigger.startDrag();\n    });\n    manager.events.adjustWidth.bind(function (event) {\n      events.trigger.beforeResize(event.table());\n      var delta = vdirection.delta(event.delta(), event.table());\n      Adjustments.adjustWidth(event.table(), delta, event.column(), vdirection);\n      events.trigger.afterResize(event.table());\n    });\n    return {\n      on: manager.on,\n      off: manager.off,\n      hideBars: manager.hideBars,\n      showBars: manager.showBars,\n      destroy: manager.destroy,\n      events: events.registry\n    };\n  };\n\n  var TableResize = {\n    create: create$2\n  };\n\n  var createContainer = function createContainer() {\n    var container = Element.fromTag('div');\n    setAll$1(container, {\n      position: 'static',\n      height: '0',\n      width: '0',\n      padding: '0',\n      margin: '0',\n      border: '0'\n    });\n    append(body(), container);\n    return container;\n  };\n\n  var get$9 = function get$9(editor, container) {\n    return editor.inline ? ResizeWire.body(getBody$1(editor), createContainer()) : ResizeWire.only(Element.fromDom(editor.getDoc()));\n  };\n\n  var remove$6 = function remove$6(editor, wire) {\n    if (editor.inline) {\n      remove$2(wire.parent());\n    }\n  };\n\n  var TableWire = {\n    get: get$9,\n    remove: remove$6\n  };\n\n  var calculatePercentageWidth = function calculatePercentageWidth(element, parent) {\n    return getPixelWidth$1(element.dom()) / getPixelWidth$1(parent.dom()) * 100 + '%';\n  };\n\n  var enforcePercentage = function enforcePercentage(rawTable) {\n    var table = Element.fromDom(rawTable);\n    parent(table).map(function (parent) {\n      return calculatePercentageWidth(table, parent);\n    }).each(function (tablePercentage) {\n      set$1(table, 'width', tablePercentage);\n      each(descendants$1(table, 'tr'), function (tr) {\n        each(children(tr), function (td) {\n          set$1(td, 'width', calculatePercentageWidth(td, tr));\n        });\n      });\n    });\n  };\n\n  var enforcePixels = function enforcePixels(table) {\n    set$1(Element.fromDom(table), 'width', getPixelWidth$1(table).toString() + 'px');\n  };\n\n  var getResizeHandler = function getResizeHandler(editor) {\n    var selectionRng = Option.none();\n    var resize = Option.none();\n    var wire = Option.none();\n    var percentageBasedSizeRegex = /(\\d+(\\.\\d+)?)%/;\n    var startW;\n    var startRawW;\n\n    var isTable = function isTable(elm) {\n      return elm.nodeName === 'TABLE';\n    };\n\n    var getRawWidth = function getRawWidth(elm) {\n      var raw = editor.dom.getStyle(elm, 'width') || editor.dom.getAttrib(elm, 'width');\n      return Option.from(raw).filter(function (s) {\n        return s.length > 0;\n      });\n    };\n\n    var lazyResize = function lazyResize() {\n      return resize;\n    };\n\n    var lazyWire = function lazyWire() {\n      return wire.getOr(ResizeWire.only(Element.fromDom(editor.getBody())));\n    };\n\n    var destroy = function destroy() {\n      resize.each(function (sz) {\n        sz.destroy();\n      });\n      wire.each(function (w) {\n        TableWire.remove(editor, w);\n      });\n    };\n\n    editor.on('init', function () {\n      var direction = TableDirection(Direction.directionAt);\n      var rawWire = TableWire.get(editor);\n      wire = Option.some(rawWire);\n\n      if (hasObjectResizing(editor) && hasTableResizeBars(editor)) {\n        var sz = TableResize.create(rawWire, direction);\n        sz.on();\n        sz.events.startDrag.bind(function (event) {\n          selectionRng = Option.some(editor.selection.getRng());\n        });\n        sz.events.beforeResize.bind(function (event) {\n          var rawTable = event.table().dom();\n          fireObjectResizeStart(editor, rawTable, getPixelWidth$1(rawTable), getPixelHeight(rawTable));\n        });\n        sz.events.afterResize.bind(function (event) {\n          var table = event.table();\n          var rawTable = table.dom();\n          removeDataStyle(table);\n          selectionRng.each(function (rng) {\n            editor.selection.setRng(rng);\n            editor.focus();\n          });\n          fireObjectResized(editor, rawTable, getPixelWidth$1(rawTable), getPixelHeight(rawTable));\n          editor.undoManager.add();\n        });\n        resize = Option.some(sz);\n      }\n    });\n    editor.on('ObjectResizeStart', function (e) {\n      var targetElm = e.target;\n\n      if (isTable(targetElm)) {\n        var tableHasPercentage = getRawWidth(targetElm).map(function (w) {\n          return percentageBasedSizeRegex.test(w);\n        }).getOr(false);\n\n        if (tableHasPercentage && isPixelsForced(editor)) {\n          enforcePixels(targetElm);\n        } else if (!tableHasPercentage && isPercentagesForced(editor)) {\n          enforcePercentage(targetElm);\n        }\n\n        startW = e.width;\n        startRawW = getRawWidth(targetElm).getOr('');\n      }\n    });\n    editor.on('ObjectResized', function (e) {\n      var targetElm = e.target;\n\n      if (isTable(targetElm)) {\n        var table = targetElm;\n\n        if (percentageBasedSizeRegex.test(startRawW)) {\n          var percentW = parseFloat(percentageBasedSizeRegex.exec(startRawW)[1]);\n          var targetPercentW = e.width * percentW / startW;\n          editor.dom.setStyle(table, 'width', targetPercentW + '%');\n        } else {\n          var newCellSizes_1 = [];\n          global$1.each(table.rows, function (row) {\n            global$1.each(row.cells, function (cell) {\n              var width = editor.dom.getStyle(cell, 'width', true);\n              newCellSizes_1.push({\n                cell: cell,\n                width: width\n              });\n            });\n          });\n          global$1.each(newCellSizes_1, function (newCellSize) {\n            editor.dom.setStyle(newCellSize.cell, 'width', newCellSize.width);\n            editor.dom.setAttrib(newCellSize.cell, 'width', null);\n          });\n        }\n      }\n    });\n    editor.on('SwitchMode', function () {\n      lazyResize().each(function (resize) {\n        if (editor.readonly) {\n          resize.hideBars();\n        } else {\n          resize.showBars();\n        }\n      });\n    });\n    return {\n      lazyResize: lazyResize,\n      lazyWire: lazyWire,\n      destroy: destroy\n    };\n  };\n\n  var adt$1 = Adt.generate([{\n    none: ['current']\n  }, {\n    first: ['current']\n  }, {\n    middle: ['current', 'target']\n  }, {\n    last: ['current']\n  }]);\n\n  var none$1 = function none$1(current) {\n    if (current === void 0) {\n      current = undefined;\n    }\n\n    return adt$1.none(current);\n  };\n\n  var CellLocation = _assign(_assign({}, adt$1), {\n    none: none$1\n  });\n\n  var detect$4 = function detect$4(current, isRoot) {\n    return TableLookup.table(current, isRoot).bind(function (table) {\n      var all = TableLookup.cells(table);\n      var index = findIndex(all, function (x) {\n        return eq(current, x);\n      });\n      return index.map(function (ind) {\n        return {\n          index: constant(ind),\n          all: constant(all)\n        };\n      });\n    });\n  };\n\n  var next = function next(current, isRoot) {\n    var detection = detect$4(current, isRoot);\n    return detection.fold(function () {\n      return CellLocation.none(current);\n    }, function (info) {\n      return info.index() + 1 < info.all().length ? CellLocation.middle(current, info.all()[info.index() + 1]) : CellLocation.last(current);\n    });\n  };\n\n  var prev = function prev(current, isRoot) {\n    var detection = detect$4(current, isRoot);\n    return detection.fold(function () {\n      return CellLocation.none();\n    }, function (info) {\n      return info.index() - 1 >= 0 ? CellLocation.middle(current, info.all()[info.index() - 1]) : CellLocation.first(current);\n    });\n  };\n\n  var CellNavigation = {\n    next: next,\n    prev: prev\n  };\n  var create$3 = Immutable('start', 'soffset', 'finish', 'foffset');\n  var SimRange = {\n    create: create$3\n  };\n  var adt$2 = Adt.generate([{\n    before: ['element']\n  }, {\n    on: ['element', 'offset']\n  }, {\n    after: ['element']\n  }]);\n\n  var cata$1 = function cata$1(subject, onBefore, onOn, onAfter) {\n    return subject.fold(onBefore, onOn, onAfter);\n  };\n\n  var getStart = function getStart(situ) {\n    return situ.fold(identity, identity, identity);\n  };\n\n  var before$2 = adt$2.before;\n  var on = adt$2.on;\n  var after$2 = adt$2.after;\n  var Situ = {\n    before: before$2,\n    on: on,\n    after: after$2,\n    cata: cata$1,\n    getStart: getStart\n  };\n  var adt$3 = Adt.generate([{\n    domRange: ['rng']\n  }, {\n    relative: ['startSitu', 'finishSitu']\n  }, {\n    exact: ['start', 'soffset', 'finish', 'foffset']\n  }]);\n\n  var exactFromRange = function exactFromRange(simRange) {\n    return adt$3.exact(simRange.start(), simRange.soffset(), simRange.finish(), simRange.foffset());\n  };\n\n  var getStart$1 = function getStart$1(selection) {\n    return selection.match({\n      domRange: function domRange(rng) {\n        return Element.fromDom(rng.startContainer);\n      },\n      relative: function relative(startSitu, finishSitu) {\n        return Situ.getStart(startSitu);\n      },\n      exact: function exact(start, soffset, finish, foffset) {\n        return start;\n      }\n    });\n  };\n\n  var domRange = adt$3.domRange;\n  var relative = adt$3.relative;\n  var exact = adt$3.exact;\n\n  var getWin = function getWin(selection) {\n    var start = getStart$1(selection);\n    return defaultView(start);\n  };\n\n  var range$1 = SimRange.create;\n  var Selection = {\n    domRange: domRange,\n    relative: relative,\n    exact: exact,\n    exactFromRange: exactFromRange,\n    getWin: getWin,\n    range: range$1\n  };\n\n  var selectNodeContents = function selectNodeContents(win, element) {\n    var rng = win.document.createRange();\n    selectNodeContentsUsing(rng, element);\n    return rng;\n  };\n\n  var selectNodeContentsUsing = function selectNodeContentsUsing(rng, element) {\n    rng.selectNodeContents(element.dom());\n  };\n\n  var setStart = function setStart(rng, situ) {\n    situ.fold(function (e) {\n      rng.setStartBefore(e.dom());\n    }, function (e, o) {\n      rng.setStart(e.dom(), o);\n    }, function (e) {\n      rng.setStartAfter(e.dom());\n    });\n  };\n\n  var setFinish = function setFinish(rng, situ) {\n    situ.fold(function (e) {\n      rng.setEndBefore(e.dom());\n    }, function (e, o) {\n      rng.setEnd(e.dom(), o);\n    }, function (e) {\n      rng.setEndAfter(e.dom());\n    });\n  };\n\n  var relativeToNative = function relativeToNative(win, startSitu, finishSitu) {\n    var range = win.document.createRange();\n    setStart(range, startSitu);\n    setFinish(range, finishSitu);\n    return range;\n  };\n\n  var exactToNative = function exactToNative(win, start, soffset, finish, foffset) {\n    var rng = win.document.createRange();\n    rng.setStart(start.dom(), soffset);\n    rng.setEnd(finish.dom(), foffset);\n    return rng;\n  };\n\n  var toRect = function toRect(rect) {\n    return {\n      left: constant(rect.left),\n      top: constant(rect.top),\n      right: constant(rect.right),\n      bottom: constant(rect.bottom),\n      width: constant(rect.width),\n      height: constant(rect.height)\n    };\n  };\n\n  var getFirstRect = function getFirstRect(rng) {\n    var rects = rng.getClientRects();\n    var rect = rects.length > 0 ? rects[0] : rng.getBoundingClientRect();\n    return rect.width > 0 || rect.height > 0 ? Option.some(rect).map(toRect) : Option.none();\n  };\n\n  var adt$4 = Adt.generate([{\n    ltr: ['start', 'soffset', 'finish', 'foffset']\n  }, {\n    rtl: ['start', 'soffset', 'finish', 'foffset']\n  }]);\n\n  var fromRange = function fromRange(win, type, range) {\n    return type(Element.fromDom(range.startContainer), range.startOffset, Element.fromDom(range.endContainer), range.endOffset);\n  };\n\n  var getRanges = function getRanges(win, selection) {\n    return selection.match({\n      domRange: function domRange(rng) {\n        return {\n          ltr: constant(rng),\n          rtl: Option.none\n        };\n      },\n      relative: function relative(startSitu, finishSitu) {\n        return {\n          ltr: cached(function () {\n            return relativeToNative(win, startSitu, finishSitu);\n          }),\n          rtl: cached(function () {\n            return Option.some(relativeToNative(win, finishSitu, startSitu));\n          })\n        };\n      },\n      exact: function exact(start, soffset, finish, foffset) {\n        return {\n          ltr: cached(function () {\n            return exactToNative(win, start, soffset, finish, foffset);\n          }),\n          rtl: cached(function () {\n            return Option.some(exactToNative(win, finish, foffset, start, soffset));\n          })\n        };\n      }\n    });\n  };\n\n  var doDiagnose = function doDiagnose(win, ranges) {\n    var rng = ranges.ltr();\n\n    if (rng.collapsed) {\n      var reversed = ranges.rtl().filter(function (rev) {\n        return rev.collapsed === false;\n      });\n      return reversed.map(function (rev) {\n        return adt$4.rtl(Element.fromDom(rev.endContainer), rev.endOffset, Element.fromDom(rev.startContainer), rev.startOffset);\n      }).getOrThunk(function () {\n        return fromRange(win, adt$4.ltr, rng);\n      });\n    } else {\n      return fromRange(win, adt$4.ltr, rng);\n    }\n  };\n\n  var diagnose = function diagnose(win, selection) {\n    var ranges = getRanges(win, selection);\n    return doDiagnose(win, ranges);\n  };\n\n  var asLtrRange = function asLtrRange(win, selection) {\n    var diagnosis = diagnose(win, selection);\n    return diagnosis.match({\n      ltr: function ltr(start, soffset, finish, foffset) {\n        var rng = win.document.createRange();\n        rng.setStart(start.dom(), soffset);\n        rng.setEnd(finish.dom(), foffset);\n        return rng;\n      },\n      rtl: function rtl(start, soffset, finish, foffset) {\n        var rng = win.document.createRange();\n        rng.setStart(finish.dom(), foffset);\n        rng.setEnd(start.dom(), soffset);\n        return rng;\n      }\n    });\n  };\n\n  var searchForPoint = function searchForPoint(rectForOffset, x, y, maxX, length) {\n    if (length === 0) {\n      return 0;\n    } else if (x === maxX) {\n      return length - 1;\n    }\n\n    var xDelta = maxX;\n\n    for (var i = 1; i < length; i++) {\n      var rect = rectForOffset(i);\n      var curDeltaX = Math.abs(x - rect.left);\n\n      if (y <= rect.bottom) {\n        if (y < rect.top || curDeltaX > xDelta) {\n          return i - 1;\n        } else {\n          xDelta = curDeltaX;\n        }\n      }\n    }\n\n    return 0;\n  };\n\n  var inRect = function inRect(rect, x, y) {\n    return x >= rect.left && x <= rect.right && y >= rect.top && y <= rect.bottom;\n  };\n\n  var locateOffset = function locateOffset(doc, textnode, x, y, rect) {\n    var rangeForOffset = function rangeForOffset(o) {\n      var r = doc.dom().createRange();\n      r.setStart(textnode.dom(), o);\n      r.collapse(true);\n      return r;\n    };\n\n    var rectForOffset = function rectForOffset(o) {\n      var r = rangeForOffset(o);\n      return r.getBoundingClientRect();\n    };\n\n    var length = get$3(textnode).length;\n    var offset = searchForPoint(rectForOffset, x, y, rect.right, length);\n    return rangeForOffset(offset);\n  };\n\n  var locate = function locate(doc, node, x, y) {\n    var r = doc.dom().createRange();\n    r.selectNode(node.dom());\n    var rects = r.getClientRects();\n    var foundRect = findMap(rects, function (rect) {\n      return inRect(rect, x, y) ? Option.some(rect) : Option.none();\n    });\n    return foundRect.map(function (rect) {\n      return locateOffset(doc, node, x, y, rect);\n    });\n  };\n\n  var searchInChildren = function searchInChildren(doc, node, x, y) {\n    var r = doc.dom().createRange();\n    var nodes = children(node);\n    return findMap(nodes, function (n) {\n      r.selectNode(n.dom());\n      return inRect(r.getBoundingClientRect(), x, y) ? locateNode(doc, n, x, y) : Option.none();\n    });\n  };\n\n  var locateNode = function locateNode(doc, node, x, y) {\n    return isText(node) ? locate(doc, node, x, y) : searchInChildren(doc, node, x, y);\n  };\n\n  var locate$1 = function locate$1(doc, node, x, y) {\n    var r = doc.dom().createRange();\n    r.selectNode(node.dom());\n    var rect = r.getBoundingClientRect();\n    var boundedX = Math.max(rect.left, Math.min(rect.right, x));\n    var boundedY = Math.max(rect.top, Math.min(rect.bottom, y));\n    return locateNode(doc, node, boundedX, boundedY);\n  };\n\n  var COLLAPSE_TO_LEFT = true;\n  var COLLAPSE_TO_RIGHT = false;\n\n  var getCollapseDirection = function getCollapseDirection(rect, x) {\n    return x - rect.left < rect.right - x ? COLLAPSE_TO_LEFT : COLLAPSE_TO_RIGHT;\n  };\n\n  var createCollapsedNode = function createCollapsedNode(doc, target, collapseDirection) {\n    var r = doc.dom().createRange();\n    r.selectNode(target.dom());\n    r.collapse(collapseDirection);\n    return r;\n  };\n\n  var locateInElement = function locateInElement(doc, node, x) {\n    var cursorRange = doc.dom().createRange();\n    cursorRange.selectNode(node.dom());\n    var rect = cursorRange.getBoundingClientRect();\n    var collapseDirection = getCollapseDirection(rect, x);\n    var f = collapseDirection === COLLAPSE_TO_LEFT ? first : last$1;\n    return f(node).map(function (target) {\n      return createCollapsedNode(doc, target, collapseDirection);\n    });\n  };\n\n  var locateInEmpty = function locateInEmpty(doc, node, x) {\n    var rect = node.dom().getBoundingClientRect();\n    var collapseDirection = getCollapseDirection(rect, x);\n    return Option.some(createCollapsedNode(doc, node, collapseDirection));\n  };\n\n  var search = function search(doc, node, x) {\n    var f = children(node).length === 0 ? locateInEmpty : locateInElement;\n    return f(doc, node, x);\n  };\n\n  var caretPositionFromPoint = function caretPositionFromPoint(doc, x, y) {\n    return Option.from(doc.dom().caretPositionFromPoint(x, y)).bind(function (pos) {\n      if (pos.offsetNode === null) {\n        return Option.none();\n      }\n\n      var r = doc.dom().createRange();\n      r.setStart(pos.offsetNode, pos.offset);\n      r.collapse();\n      return Option.some(r);\n    });\n  };\n\n  var caretRangeFromPoint = function caretRangeFromPoint(doc, x, y) {\n    return Option.from(doc.dom().caretRangeFromPoint(x, y));\n  };\n\n  var searchTextNodes = function searchTextNodes(doc, node, x, y) {\n    var r = doc.dom().createRange();\n    r.selectNode(node.dom());\n    var rect = r.getBoundingClientRect();\n    var boundedX = Math.max(rect.left, Math.min(rect.right, x));\n    var boundedY = Math.max(rect.top, Math.min(rect.bottom, y));\n    return locate$1(doc, node, boundedX, boundedY);\n  };\n\n  var searchFromPoint = function searchFromPoint(doc, x, y) {\n    return Element.fromPoint(doc, x, y).bind(function (elem) {\n      var fallback = function fallback() {\n        return search(doc, elem, x);\n      };\n\n      return children(elem).length === 0 ? fallback() : searchTextNodes(doc, elem, x, y).orThunk(fallback);\n    });\n  };\n\n  var availableSearch = document.caretPositionFromPoint ? caretPositionFromPoint : document.caretRangeFromPoint ? caretRangeFromPoint : searchFromPoint;\n\n  var fromPoint$1 = function fromPoint$1(win, x, y) {\n    var doc = Element.fromDom(win.document);\n    return availableSearch(doc, x, y).map(function (rng) {\n      return SimRange.create(Element.fromDom(rng.startContainer), rng.startOffset, Element.fromDom(rng.endContainer), rng.endOffset);\n    });\n  };\n\n  var beforeSpecial = function beforeSpecial(element, offset) {\n    var name$1 = name(element);\n\n    if ('input' === name$1) {\n      return Situ.after(element);\n    } else if (!contains(['br', 'img'], name$1)) {\n      return Situ.on(element, offset);\n    } else {\n      return offset === 0 ? Situ.before(element) : Situ.after(element);\n    }\n  };\n\n  var preprocessRelative = function preprocessRelative(startSitu, finishSitu) {\n    var start = startSitu.fold(Situ.before, beforeSpecial, Situ.after);\n    var finish = finishSitu.fold(Situ.before, beforeSpecial, Situ.after);\n    return Selection.relative(start, finish);\n  };\n\n  var preprocessExact = function preprocessExact(start, soffset, finish, foffset) {\n    var startSitu = beforeSpecial(start, soffset);\n    var finishSitu = beforeSpecial(finish, foffset);\n    return Selection.relative(startSitu, finishSitu);\n  };\n\n  var preprocess = function preprocess(selection) {\n    return selection.match({\n      domRange: function domRange(rng) {\n        var start = Element.fromDom(rng.startContainer);\n        var finish = Element.fromDom(rng.endContainer);\n        return preprocessExact(start, rng.startOffset, finish, rng.endOffset);\n      },\n      relative: preprocessRelative,\n      exact: preprocessExact\n    });\n  };\n\n  var makeRange = function makeRange(start, soffset, finish, foffset) {\n    var doc = owner(start);\n    var rng = doc.dom().createRange();\n    rng.setStart(start.dom(), soffset);\n    rng.setEnd(finish.dom(), foffset);\n    return rng;\n  };\n\n  var after$3 = function after$3(start, soffset, finish, foffset) {\n    var r = makeRange(start, soffset, finish, foffset);\n    var same = eq(start, finish) && soffset === foffset;\n    return r.collapsed && !same;\n  };\n\n  var doSetNativeRange = function doSetNativeRange(win, rng) {\n    Option.from(win.getSelection()).each(function (selection) {\n      selection.removeAllRanges();\n      selection.addRange(rng);\n    });\n  };\n\n  var doSetRange = function doSetRange(win, start, soffset, finish, foffset) {\n    var rng = exactToNative(win, start, soffset, finish, foffset);\n    doSetNativeRange(win, rng);\n  };\n\n  var setLegacyRtlRange = function setLegacyRtlRange(win, selection, start, soffset, finish, foffset) {\n    selection.collapse(start.dom(), soffset);\n    selection.extend(finish.dom(), foffset);\n  };\n\n  var setRangeFromRelative = function setRangeFromRelative(win, relative) {\n    return diagnose(win, relative).match({\n      ltr: function ltr(start, soffset, finish, foffset) {\n        doSetRange(win, start, soffset, finish, foffset);\n      },\n      rtl: function rtl(start, soffset, finish, foffset) {\n        var selection = win.getSelection();\n\n        if (selection.setBaseAndExtent) {\n          selection.setBaseAndExtent(start.dom(), soffset, finish.dom(), foffset);\n        } else if (selection.extend) {\n          try {\n            setLegacyRtlRange(win, selection, start, soffset, finish, foffset);\n          } catch (e) {\n            doSetRange(win, finish, foffset, start, soffset);\n          }\n        } else {\n          doSetRange(win, finish, foffset, start, soffset);\n        }\n      }\n    });\n  };\n\n  var setExact = function setExact(win, start, soffset, finish, foffset) {\n    var relative = preprocessExact(start, soffset, finish, foffset);\n    setRangeFromRelative(win, relative);\n  };\n\n  var setRelative = function setRelative(win, startSitu, finishSitu) {\n    var relative = preprocessRelative(startSitu, finishSitu);\n    setRangeFromRelative(win, relative);\n  };\n\n  var toNative = function toNative(selection) {\n    var win = Selection.getWin(selection).dom();\n\n    var getDomRange = function getDomRange(start, soffset, finish, foffset) {\n      return exactToNative(win, start, soffset, finish, foffset);\n    };\n\n    var filtered = preprocess(selection);\n    return diagnose(win, filtered).match({\n      ltr: getDomRange,\n      rtl: getDomRange\n    });\n  };\n\n  var readRange = function readRange(selection) {\n    if (selection.rangeCount > 0) {\n      var firstRng = selection.getRangeAt(0);\n      var lastRng = selection.getRangeAt(selection.rangeCount - 1);\n      return Option.some(SimRange.create(Element.fromDom(firstRng.startContainer), firstRng.startOffset, Element.fromDom(lastRng.endContainer), lastRng.endOffset));\n    } else {\n      return Option.none();\n    }\n  };\n\n  var doGetExact = function doGetExact(selection) {\n    var anchor = Element.fromDom(selection.anchorNode);\n    var focus = Element.fromDom(selection.focusNode);\n    return after$3(anchor, selection.anchorOffset, focus, selection.focusOffset) ? Option.some(SimRange.create(anchor, selection.anchorOffset, focus, selection.focusOffset)) : readRange(selection);\n  };\n\n  var setToElement = function setToElement(win, element) {\n    var rng = selectNodeContents(win, element);\n    doSetNativeRange(win, rng);\n  };\n\n  var getExact = function getExact(win) {\n    return Option.from(win.getSelection()).filter(function (sel) {\n      return sel.rangeCount > 0;\n    }).bind(doGetExact);\n  };\n\n  var get$a = function get$a(win) {\n    return getExact(win).map(function (range) {\n      return Selection.exact(range.start(), range.soffset(), range.finish(), range.foffset());\n    });\n  };\n\n  var getFirstRect$1 = function getFirstRect$1(win, selection) {\n    var rng = asLtrRange(win, selection);\n    return getFirstRect(rng);\n  };\n\n  var getAtPoint = function getAtPoint(win, x, y) {\n    return fromPoint$1(win, x, y);\n  };\n\n  var clear = function clear(win) {\n    var selection = win.getSelection();\n    selection.removeAllRanges();\n  };\n\n  var global$3 = tinymce.util.Tools.resolve('tinymce.util.VK');\n\n  var forward = function forward(editor, isRoot, cell, lazyWire) {\n    return go(editor, isRoot, CellNavigation.next(cell), lazyWire);\n  };\n\n  var backward = function backward(editor, isRoot, cell, lazyWire) {\n    return go(editor, isRoot, CellNavigation.prev(cell), lazyWire);\n  };\n\n  var getCellFirstCursorPosition = function getCellFirstCursorPosition(editor, cell) {\n    var selection = Selection.exact(cell, 0, cell, 0);\n    return toNative(selection);\n  };\n\n  var getNewRowCursorPosition = function getNewRowCursorPosition(editor, table) {\n    var rows = descendants$1(table, 'tr');\n    return last(rows).bind(function (last) {\n      return descendant$1(last, 'td,th').map(function (first) {\n        return getCellFirstCursorPosition(editor, first);\n      });\n    });\n  };\n\n  var go = function go(editor, isRoot, cell, actions, lazyWire) {\n    return cell.fold(Option.none, Option.none, function (current, next) {\n      return first(next).map(function (cell) {\n        return getCellFirstCursorPosition(editor, cell);\n      });\n    }, function (current) {\n      return TableLookup.table(current, isRoot).bind(function (table) {\n        var targets = TableTargets.noMenu(current);\n        editor.undoManager.transact(function () {\n          actions.insertRowsAfter(table, targets);\n        });\n        return getNewRowCursorPosition(editor, table);\n      });\n    });\n  };\n\n  var rootElements = ['table', 'li', 'dl'];\n\n  var handle$1 = function handle$1(event, editor, actions, lazyWire) {\n    if (event.keyCode === global$3.TAB) {\n      var body_1 = getBody$1(editor);\n\n      var isRoot_1 = function isRoot_1(element) {\n        var name$1 = name(element);\n        return eq(element, body_1) || contains(rootElements, name$1);\n      };\n\n      var rng = editor.selection.getRng();\n\n      if (rng.collapsed) {\n        var start = Element.fromDom(rng.startContainer);\n        TableLookup.cell(start, isRoot_1).each(function (cell) {\n          event.preventDefault();\n          var navigation = event.shiftKey ? backward : forward;\n          var rng = navigation(editor, isRoot_1, cell, actions, lazyWire);\n          rng.each(function (range) {\n            editor.selection.setRng(range);\n          });\n        });\n      }\n    }\n  };\n\n  var TabContext = {\n    handle: handle$1\n  };\n  var create$4 = Immutable('selection', 'kill');\n  var Response = {\n    create: create$4\n  };\n\n  var create$5 = function create$5(start, soffset, finish, foffset) {\n    return {\n      start: constant(Situ.on(start, soffset)),\n      finish: constant(Situ.on(finish, foffset))\n    };\n  };\n\n  var Situs = {\n    create: create$5\n  };\n\n  var convertToRange = function convertToRange(win, selection) {\n    var rng = asLtrRange(win, selection);\n    return SimRange.create(Element.fromDom(rng.startContainer), rng.startOffset, Element.fromDom(rng.endContainer), rng.endOffset);\n  };\n\n  var makeSitus = Situs.create;\n  var Util = {\n    convertToRange: convertToRange,\n    makeSitus: makeSitus\n  };\n\n  var sync = function sync(container, isRoot, start, soffset, finish, foffset, selectRange) {\n    if (!(eq(start, finish) && soffset === foffset)) {\n      return closest$1(start, 'td,th', isRoot).bind(function (s) {\n        return closest$1(finish, 'td,th', isRoot).bind(function (f) {\n          return detect$5(container, isRoot, s, f, selectRange);\n        });\n      });\n    } else {\n      return Option.none();\n    }\n  };\n\n  var detect$5 = function detect$5(container, isRoot, start, finish, selectRange) {\n    if (!eq(start, finish)) {\n      return CellSelection.identify(start, finish, isRoot).bind(function (cellSel) {\n        var boxes = cellSel.boxes().getOr([]);\n\n        if (boxes.length > 0) {\n          selectRange(container, boxes, cellSel.start(), cellSel.finish());\n          return Option.some(Response.create(Option.some(Util.makeSitus(start, 0, start, getEnd(start))), true));\n        } else {\n          return Option.none();\n        }\n      });\n    } else {\n      return Option.none();\n    }\n  };\n\n  var update = function update(rows, columns, container, selected, annotations) {\n    var updateSelection = function updateSelection(newSels) {\n      annotations.clearBeforeUpdate(container);\n      annotations.selectRange(container, newSels.boxes(), newSels.start(), newSels.finish());\n      return newSels.boxes();\n    };\n\n    return CellSelection.shiftSelection(selected, rows, columns, annotations.firstSelectedSelector(), annotations.lastSelectedSelector()).map(updateSelection);\n  };\n\n  var KeySelection = {\n    sync: sync,\n    detect: detect$5,\n    update: update\n  };\n  var traverse = Immutable('item', 'mode');\n\n  var backtrack = function backtrack(universe, item, _direction, transition) {\n    if (transition === void 0) {\n      transition = sidestep;\n    }\n\n    return universe.property().parent(item).map(function (p) {\n      return traverse(p, transition);\n    });\n  };\n\n  var sidestep = function sidestep(universe, item, direction, transition) {\n    if (transition === void 0) {\n      transition = advance;\n    }\n\n    return direction.sibling(universe, item).map(function (p) {\n      return traverse(p, transition);\n    });\n  };\n\n  var advance = function advance(universe, item, direction, transition) {\n    if (transition === void 0) {\n      transition = advance;\n    }\n\n    var children = universe.property().children(item);\n    var result = direction.first(children);\n    return result.map(function (r) {\n      return traverse(r, transition);\n    });\n  };\n\n  var successors = [{\n    current: backtrack,\n    next: sidestep,\n    fallback: Option.none()\n  }, {\n    current: sidestep,\n    next: advance,\n    fallback: Option.some(backtrack)\n  }, {\n    current: advance,\n    next: advance,\n    fallback: Option.some(sidestep)\n  }];\n\n  var go$1 = function go$1(universe, item, mode, direction, rules) {\n    if (rules === void 0) {\n      rules = successors;\n    }\n\n    var ruleOpt = find(rules, function (succ) {\n      return succ.current === mode;\n    });\n    return ruleOpt.bind(function (rule) {\n      return rule.current(universe, item, direction, rule.next).orThunk(function () {\n        return rule.fallback.bind(function (fb) {\n          return go$1(universe, item, fb, direction);\n        });\n      });\n    });\n  };\n\n  var left = function left() {\n    var sibling = function sibling(universe, item) {\n      return universe.query().prevSibling(item);\n    };\n\n    var first = function first(children) {\n      return children.length > 0 ? Option.some(children[children.length - 1]) : Option.none();\n    };\n\n    return {\n      sibling: sibling,\n      first: first\n    };\n  };\n\n  var right = function right() {\n    var sibling = function sibling(universe, item) {\n      return universe.query().nextSibling(item);\n    };\n\n    var first = function first(children) {\n      return children.length > 0 ? Option.some(children[0]) : Option.none();\n    };\n\n    return {\n      sibling: sibling,\n      first: first\n    };\n  };\n\n  var Walkers = {\n    left: left,\n    right: right\n  };\n\n  var hone = function hone(universe, item, predicate, mode, direction, isRoot) {\n    var next = go$1(universe, item, mode, direction);\n    return next.bind(function (n) {\n      if (isRoot(n.item())) {\n        return Option.none();\n      } else {\n        return predicate(n.item()) ? Option.some(n.item()) : hone(universe, n.item(), predicate, n.mode(), direction, isRoot);\n      }\n    });\n  };\n\n  var left$1 = function left$1(universe, item, predicate, isRoot) {\n    return hone(universe, item, predicate, sidestep, Walkers.left(), isRoot);\n  };\n\n  var right$1 = function right$1(universe, item, predicate, isRoot) {\n    return hone(universe, item, predicate, sidestep, Walkers.right(), isRoot);\n  };\n\n  var isLeaf = function isLeaf(universe) {\n    return function (element) {\n      return universe.property().children(element).length === 0;\n    };\n  };\n\n  var before$3 = function before$3(universe, item, isRoot) {\n    return seekLeft(universe, item, isLeaf(universe), isRoot);\n  };\n\n  var after$4 = function after$4(universe, item, isRoot) {\n    return seekRight(universe, item, isLeaf(universe), isRoot);\n  };\n\n  var seekLeft = left$1;\n  var seekRight = right$1;\n  var universe$2 = DomUniverse();\n\n  var before$4 = function before$4(element, isRoot) {\n    return before$3(universe$2, element, isRoot);\n  };\n\n  var after$5 = function after$5(element, isRoot) {\n    return after$4(universe$2, element, isRoot);\n  };\n\n  var seekLeft$1 = function seekLeft$1(element, predicate, isRoot) {\n    return seekLeft(universe$2, element, predicate, isRoot);\n  };\n\n  var seekRight$1 = function seekRight$1(element, predicate, isRoot) {\n    return seekRight(universe$2, element, predicate, isRoot);\n  };\n\n  var ancestor$2 = function ancestor$2(scope, predicate, isRoot) {\n    return ancestor(scope, predicate, isRoot).isSome();\n  };\n\n  var point = Immutable('element', 'offset');\n  var delta = Immutable('element', 'deltaOffset');\n  var range$2 = Immutable('element', 'start', 'finish');\n  var points = Immutable('begin', 'end');\n  var text = Immutable('element', 'text');\n  var adt$5 = Adt.generate([{\n    none: ['message']\n  }, {\n    success: []\n  }, {\n    failedUp: ['cell']\n  }, {\n    failedDown: ['cell']\n  }]);\n\n  var isOverlapping = function isOverlapping(bridge, before, after) {\n    var beforeBounds = bridge.getRect(before);\n    var afterBounds = bridge.getRect(after);\n    return afterBounds.right > beforeBounds.left && afterBounds.left < beforeBounds.right;\n  };\n\n  var isRow = function isRow(elem) {\n    return closest$1(elem, 'tr');\n  };\n\n  var verify = function verify(bridge, before, beforeOffset, after, afterOffset, failure, isRoot) {\n    return closest$1(after, 'td,th', isRoot).bind(function (afterCell) {\n      return closest$1(before, 'td,th', isRoot).map(function (beforeCell) {\n        if (!eq(afterCell, beforeCell)) {\n          return DomParent.sharedOne(isRow, [afterCell, beforeCell]).fold(function () {\n            return isOverlapping(bridge, beforeCell, afterCell) ? adt$5.success() : failure(beforeCell);\n          }, function (_sharedRow) {\n            return failure(beforeCell);\n          });\n        } else {\n          return eq(after, afterCell) && getEnd(afterCell) === afterOffset ? failure(beforeCell) : adt$5.none('in same cell');\n        }\n      });\n    }).getOr(adt$5.none('default'));\n  };\n\n  var cata$2 = function cata$2(subject, onNone, onSuccess, onFailedUp, onFailedDown) {\n    return subject.fold(onNone, onSuccess, onFailedUp, onFailedDown);\n  };\n\n  var BeforeAfter = _assign(_assign({}, adt$5), {\n    verify: verify,\n    cata: cata$2\n  });\n\n  var inAncestor = Immutable('ancestor', 'descendants', 'element', 'index');\n  var inParent = Immutable('parent', 'children', 'element', 'index');\n\n  var indexInParent = function indexInParent(element) {\n    return parent(element).bind(function (parent) {\n      var children$1 = children(parent);\n      return indexOf(children$1, element).map(function (index) {\n        return inParent(parent, children$1, element, index);\n      });\n    });\n  };\n\n  var indexOf = function indexOf(elements, element) {\n    return findIndex(elements, curry(eq, element));\n  };\n\n  var isBr = function isBr(elem) {\n    return name(elem) === 'br';\n  };\n\n  var gatherer = function gatherer(cand, gather, isRoot) {\n    return gather(cand, isRoot).bind(function (target) {\n      return isText(target) && get$3(target).trim().length === 0 ? gatherer(target, gather, isRoot) : Option.some(target);\n    });\n  };\n\n  var handleBr = function handleBr(isRoot, element, direction) {\n    return direction.traverse(element).orThunk(function () {\n      return gatherer(element, direction.gather, isRoot);\n    }).map(direction.relative);\n  };\n\n  var findBr = function findBr(element, offset) {\n    return child(element, offset).filter(isBr).orThunk(function () {\n      return child(element, offset - 1).filter(isBr);\n    });\n  };\n\n  var handleParent = function handleParent(isRoot, element, offset, direction) {\n    return findBr(element, offset).bind(function (br) {\n      return direction.traverse(br).fold(function () {\n        return gatherer(br, direction.gather, isRoot).map(direction.relative);\n      }, function (adjacent) {\n        return indexInParent(adjacent).map(function (info) {\n          return Situ.on(info.parent(), info.index());\n        });\n      });\n    });\n  };\n\n  var tryBr = function tryBr(isRoot, element, offset, direction) {\n    var target = isBr(element) ? handleBr(isRoot, element, direction) : handleParent(isRoot, element, offset, direction);\n    return target.map(function (tgt) {\n      return {\n        start: constant(tgt),\n        finish: constant(tgt)\n      };\n    });\n  };\n\n  var process = function process(analysis) {\n    return BeforeAfter.cata(analysis, function (message) {\n      return Option.none();\n    }, function () {\n      return Option.none();\n    }, function (cell) {\n      return Option.some(point(cell, 0));\n    }, function (cell) {\n      return Option.some(point(cell, getEnd(cell)));\n    });\n  };\n\n  var BrTags = {\n    tryBr: tryBr,\n    process: process\n  };\n  var nu$3 = MixedBag(['left', 'top', 'right', 'bottom'], []);\n\n  var moveDown = function moveDown(caret, amount) {\n    return nu$3({\n      left: caret.left(),\n      top: caret.top() + amount,\n      right: caret.right(),\n      bottom: caret.bottom() + amount\n    });\n  };\n\n  var moveUp = function moveUp(caret, amount) {\n    return nu$3({\n      left: caret.left(),\n      top: caret.top() - amount,\n      right: caret.right(),\n      bottom: caret.bottom() - amount\n    });\n  };\n\n  var moveBottomTo = function moveBottomTo(caret, bottom) {\n    var height = caret.bottom() - caret.top();\n    return nu$3({\n      left: caret.left(),\n      top: bottom - height,\n      right: caret.right(),\n      bottom: bottom\n    });\n  };\n\n  var moveTopTo = function moveTopTo(caret, top) {\n    var height = caret.bottom() - caret.top();\n    return nu$3({\n      left: caret.left(),\n      top: top,\n      right: caret.right(),\n      bottom: top + height\n    });\n  };\n\n  var translate = function translate(caret, xDelta, yDelta) {\n    return nu$3({\n      left: caret.left() + xDelta,\n      top: caret.top() + yDelta,\n      right: caret.right() + xDelta,\n      bottom: caret.bottom() + yDelta\n    });\n  };\n\n  var getTop$1 = function getTop$1(caret) {\n    return caret.top();\n  };\n\n  var getBottom = function getBottom(caret) {\n    return caret.bottom();\n  };\n\n  var toString = function toString(caret) {\n    return '(' + caret.left() + ', ' + caret.top() + ') -> (' + caret.right() + ', ' + caret.bottom() + ')';\n  };\n\n  var Carets = {\n    nu: nu$3,\n    moveUp: moveUp,\n    moveDown: moveDown,\n    moveBottomTo: moveBottomTo,\n    moveTopTo: moveTopTo,\n    getTop: getTop$1,\n    getBottom: getBottom,\n    translate: translate,\n    toString: toString\n  };\n\n  var getPartialBox = function getPartialBox(bridge, element, offset) {\n    if (offset >= 0 && offset < getEnd(element)) {\n      return bridge.getRangedRect(element, offset, element, offset + 1);\n    } else if (offset > 0) {\n      return bridge.getRangedRect(element, offset - 1, element, offset);\n    }\n\n    return Option.none();\n  };\n\n  var toCaret = function toCaret(rect) {\n    return Carets.nu({\n      left: rect.left,\n      top: rect.top,\n      right: rect.right,\n      bottom: rect.bottom\n    });\n  };\n\n  var getElemBox = function getElemBox(bridge, element) {\n    return Option.some(bridge.getRect(element));\n  };\n\n  var getBoxAt = function getBoxAt(bridge, element, offset) {\n    if (isElement(element)) {\n      return getElemBox(bridge, element).map(toCaret);\n    } else if (isText(element)) {\n      return getPartialBox(bridge, element, offset).map(toCaret);\n    } else {\n      return Option.none();\n    }\n  };\n\n  var getEntireBox = function getEntireBox(bridge, element) {\n    if (isElement(element)) {\n      return getElemBox(bridge, element).map(toCaret);\n    } else if (isText(element)) {\n      return bridge.getRangedRect(element, 0, element, getEnd(element)).map(toCaret);\n    } else {\n      return Option.none();\n    }\n  };\n\n  var Rectangles = {\n    getBoxAt: getBoxAt,\n    getEntireBox: getEntireBox\n  };\n  var JUMP_SIZE = 5;\n  var NUM_RETRIES = 100;\n  var adt$6 = Adt.generate([{\n    none: []\n  }, {\n    retry: ['caret']\n  }]);\n\n  var isOutside = function isOutside(caret, box) {\n    return caret.left() < box.left() || Math.abs(box.right() - caret.left()) < 1 || caret.left() > box.right();\n  };\n\n  var inOutsideBlock = function inOutsideBlock(bridge, element, caret) {\n    return closest(element, DomStructure.isBlock).fold(constant(false), function (cell) {\n      return Rectangles.getEntireBox(bridge, cell).exists(function (box) {\n        return isOutside(caret, box);\n      });\n    });\n  };\n\n  var adjustDown = function adjustDown(bridge, element, guessBox, original, caret) {\n    var lowerCaret = Carets.moveDown(caret, JUMP_SIZE);\n\n    if (Math.abs(guessBox.bottom() - original.bottom()) < 1) {\n      return adt$6.retry(lowerCaret);\n    } else if (guessBox.top() > caret.bottom()) {\n      return adt$6.retry(lowerCaret);\n    } else if (guessBox.top() === caret.bottom()) {\n      return adt$6.retry(Carets.moveDown(caret, 1));\n    } else {\n      return inOutsideBlock(bridge, element, caret) ? adt$6.retry(Carets.translate(lowerCaret, JUMP_SIZE, 0)) : adt$6.none();\n    }\n  };\n\n  var adjustUp = function adjustUp(bridge, element, guessBox, original, caret) {\n    var higherCaret = Carets.moveUp(caret, JUMP_SIZE);\n\n    if (Math.abs(guessBox.top() - original.top()) < 1) {\n      return adt$6.retry(higherCaret);\n    } else if (guessBox.bottom() < caret.top()) {\n      return adt$6.retry(higherCaret);\n    } else if (guessBox.bottom() === caret.top()) {\n      return adt$6.retry(Carets.moveUp(caret, 1));\n    } else {\n      return inOutsideBlock(bridge, element, caret) ? adt$6.retry(Carets.translate(higherCaret, JUMP_SIZE, 0)) : adt$6.none();\n    }\n  };\n\n  var upMovement = {\n    point: Carets.getTop,\n    adjuster: adjustUp,\n    move: Carets.moveUp,\n    gather: before$4\n  };\n  var downMovement = {\n    point: Carets.getBottom,\n    adjuster: adjustDown,\n    move: Carets.moveDown,\n    gather: after$5\n  };\n\n  var isAtTable = function isAtTable(bridge, x, y) {\n    return bridge.elementFromPoint(x, y).filter(function (elm) {\n      return name(elm) === 'table';\n    }).isSome();\n  };\n\n  var adjustForTable = function adjustForTable(bridge, movement, original, caret, numRetries) {\n    return adjustTil(bridge, movement, original, movement.move(caret, JUMP_SIZE), numRetries);\n  };\n\n  var adjustTil = function adjustTil(bridge, movement, original, caret, numRetries) {\n    if (numRetries === 0) {\n      return Option.some(caret);\n    }\n\n    if (isAtTable(bridge, caret.left(), movement.point(caret))) {\n      return adjustForTable(bridge, movement, original, caret, numRetries - 1);\n    }\n\n    return bridge.situsFromPoint(caret.left(), movement.point(caret)).bind(function (guess) {\n      return guess.start().fold(Option.none, function (element) {\n        return Rectangles.getEntireBox(bridge, element).bind(function (guessBox) {\n          return movement.adjuster(bridge, element, guessBox, original, caret).fold(Option.none, function (newCaret) {\n            return adjustTil(bridge, movement, original, newCaret, numRetries - 1);\n          });\n        }).orThunk(function () {\n          return Option.some(caret);\n        });\n      }, Option.none);\n    });\n  };\n\n  var ieTryDown = function ieTryDown(bridge, caret) {\n    return bridge.situsFromPoint(caret.left(), caret.bottom() + JUMP_SIZE);\n  };\n\n  var ieTryUp = function ieTryUp(bridge, caret) {\n    return bridge.situsFromPoint(caret.left(), caret.top() - JUMP_SIZE);\n  };\n\n  var checkScroll = function checkScroll(movement, adjusted, bridge) {\n    if (movement.point(adjusted) > bridge.getInnerHeight()) {\n      return Option.some(movement.point(adjusted) - bridge.getInnerHeight());\n    } else if (movement.point(adjusted) < 0) {\n      return Option.some(-movement.point(adjusted));\n    } else {\n      return Option.none();\n    }\n  };\n\n  var retry = function retry(movement, bridge, caret) {\n    var moved = movement.move(caret, JUMP_SIZE);\n    var adjusted = adjustTil(bridge, movement, caret, moved, NUM_RETRIES).getOr(moved);\n    return checkScroll(movement, adjusted, bridge).fold(function () {\n      return bridge.situsFromPoint(adjusted.left(), movement.point(adjusted));\n    }, function (delta) {\n      bridge.scrollBy(0, delta);\n      return bridge.situsFromPoint(adjusted.left(), movement.point(adjusted) - delta);\n    });\n  };\n\n  var Retries = {\n    tryUp: curry(retry, upMovement),\n    tryDown: curry(retry, downMovement),\n    ieTryUp: ieTryUp,\n    ieTryDown: ieTryDown,\n    getJumpSize: constant(JUMP_SIZE)\n  };\n  var MAX_RETRIES = 20;\n  var platform$2 = detect$3();\n\n  var findSpot = function findSpot(bridge, isRoot, direction) {\n    return bridge.getSelection().bind(function (sel) {\n      return BrTags.tryBr(isRoot, sel.finish(), sel.foffset(), direction).fold(function () {\n        return Option.some(point(sel.finish(), sel.foffset()));\n      }, function (brNeighbour) {\n        var range = bridge.fromSitus(brNeighbour);\n        var analysis = BeforeAfter.verify(bridge, sel.finish(), sel.foffset(), range.finish(), range.foffset(), direction.failure, isRoot);\n        return BrTags.process(analysis);\n      });\n    });\n  };\n\n  var scan = function scan(bridge, isRoot, element, offset, direction, numRetries) {\n    if (numRetries === 0) {\n      return Option.none();\n    }\n\n    return tryCursor(bridge, isRoot, element, offset, direction).bind(function (situs) {\n      var range = bridge.fromSitus(situs);\n      var analysis = BeforeAfter.verify(bridge, element, offset, range.finish(), range.foffset(), direction.failure, isRoot);\n      return BeforeAfter.cata(analysis, function () {\n        return Option.none();\n      }, function () {\n        return Option.some(situs);\n      }, function (cell) {\n        if (eq(element, cell) && offset === 0) {\n          return tryAgain(bridge, element, offset, Carets.moveUp, direction);\n        } else {\n          return scan(bridge, isRoot, cell, 0, direction, numRetries - 1);\n        }\n      }, function (cell) {\n        if (eq(element, cell) && offset === getEnd(cell)) {\n          return tryAgain(bridge, element, offset, Carets.moveDown, direction);\n        } else {\n          return scan(bridge, isRoot, cell, getEnd(cell), direction, numRetries - 1);\n        }\n      });\n    });\n  };\n\n  var tryAgain = function tryAgain(bridge, element, offset, move, direction) {\n    return Rectangles.getBoxAt(bridge, element, offset).bind(function (box) {\n      return tryAt(bridge, direction, move(box, Retries.getJumpSize()));\n    });\n  };\n\n  var tryAt = function tryAt(bridge, direction, box) {\n    if (platform$2.browser.isChrome() || platform$2.browser.isSafari() || platform$2.browser.isFirefox() || platform$2.browser.isEdge()) {\n      return direction.otherRetry(bridge, box);\n    } else if (platform$2.browser.isIE()) {\n      return direction.ieRetry(bridge, box);\n    } else {\n      return Option.none();\n    }\n  };\n\n  var tryCursor = function tryCursor(bridge, isRoot, element, offset, direction) {\n    return Rectangles.getBoxAt(bridge, element, offset).bind(function (box) {\n      return tryAt(bridge, direction, box);\n    });\n  };\n\n  var handle$2 = function handle$2(bridge, isRoot, direction) {\n    return findSpot(bridge, isRoot, direction).bind(function (spot) {\n      return scan(bridge, isRoot, spot.element(), spot.offset(), direction, MAX_RETRIES).map(bridge.fromSitus);\n    });\n  };\n\n  var TableKeys = {\n    handle: handle$2\n  };\n  var detection = detect$3();\n\n  var inSameTable = function inSameTable(elem, table) {\n    return ancestor$2(elem, function (e) {\n      return parent(e).exists(function (p) {\n        return eq(p, table);\n      });\n    });\n  };\n\n  var simulate = function simulate(bridge, isRoot, direction, initial, anchor) {\n    return closest$1(initial, 'td,th', isRoot).bind(function (start) {\n      return closest$1(start, 'table', isRoot).bind(function (table) {\n        if (!inSameTable(anchor, table)) {\n          return Option.none();\n        }\n\n        return TableKeys.handle(bridge, isRoot, direction).bind(function (range) {\n          return closest$1(range.finish(), 'td,th', isRoot).map(function (finish) {\n            return {\n              start: constant(start),\n              finish: constant(finish),\n              range: constant(range)\n            };\n          });\n        });\n      });\n    });\n  };\n\n  var navigate = function navigate(bridge, isRoot, direction, initial, anchor, precheck) {\n    if (detection.browser.isIE()) {\n      return Option.none();\n    } else {\n      return precheck(initial, isRoot).orThunk(function () {\n        return simulate(bridge, isRoot, direction, initial, anchor).map(function (info) {\n          var range = info.range();\n          return Response.create(Option.some(Util.makeSitus(range.start(), range.soffset(), range.finish(), range.foffset())), true);\n        });\n      });\n    }\n  };\n\n  var firstUpCheck = function firstUpCheck(initial, isRoot) {\n    return closest$1(initial, 'tr', isRoot).bind(function (startRow) {\n      return closest$1(startRow, 'table', isRoot).bind(function (table) {\n        var rows = descendants$1(table, 'tr');\n\n        if (eq(startRow, rows[0])) {\n          return seekLeft$1(table, function (element) {\n            return last$1(element).isSome();\n          }, isRoot).map(function (last) {\n            var lastOffset = getEnd(last);\n            return Response.create(Option.some(Util.makeSitus(last, lastOffset, last, lastOffset)), true);\n          });\n        } else {\n          return Option.none();\n        }\n      });\n    });\n  };\n\n  var lastDownCheck = function lastDownCheck(initial, isRoot) {\n    return closest$1(initial, 'tr', isRoot).bind(function (startRow) {\n      return closest$1(startRow, 'table', isRoot).bind(function (table) {\n        var rows = descendants$1(table, 'tr');\n\n        if (eq(startRow, rows[rows.length - 1])) {\n          return seekRight$1(table, function (element) {\n            return first(element).isSome();\n          }, isRoot).map(function (first) {\n            return Response.create(Option.some(Util.makeSitus(first, 0, first, 0)), true);\n          });\n        } else {\n          return Option.none();\n        }\n      });\n    });\n  };\n\n  var select = function select(bridge, container, isRoot, direction, initial, anchor, selectRange) {\n    return simulate(bridge, isRoot, direction, initial, anchor).bind(function (info) {\n      return KeySelection.detect(container, isRoot, info.start(), info.finish(), selectRange);\n    });\n  };\n\n  var VerticalMovement = {\n    navigate: navigate,\n    select: select,\n    firstUpCheck: firstUpCheck,\n    lastDownCheck: lastDownCheck\n  };\n\n  var findCell = function findCell(target, isRoot) {\n    return closest$1(target, 'td,th', isRoot);\n  };\n\n  function MouseSelection(bridge, container, isRoot, annotations) {\n    var cursor = Option.none();\n\n    var clearState = function clearState() {\n      cursor = Option.none();\n    };\n\n    var mousedown = function mousedown(event) {\n      annotations.clear(container);\n      cursor = findCell(event.target(), isRoot);\n    };\n\n    var mouseover = function mouseover(event) {\n      cursor.each(function (start) {\n        annotations.clearBeforeUpdate(container);\n        findCell(event.target(), isRoot).each(function (finish) {\n          CellSelection.identify(start, finish, isRoot).each(function (cellSel) {\n            var boxes = cellSel.boxes().getOr([]);\n\n            if (boxes.length > 1 || boxes.length === 1 && !eq(start, finish)) {\n              annotations.selectRange(container, boxes, cellSel.start(), cellSel.finish());\n              bridge.selectContents(finish);\n            }\n          });\n        });\n      });\n    };\n\n    var mouseup = function mouseup(_event) {\n      cursor.each(clearState);\n    };\n\n    return {\n      mousedown: mousedown,\n      mouseover: mouseover,\n      mouseup: mouseup\n    };\n  }\n\n  var down = {\n    traverse: nextSibling,\n    gather: after$5,\n    relative: Situ.before,\n    otherRetry: Retries.tryDown,\n    ieRetry: Retries.ieTryDown,\n    failure: BeforeAfter.failedDown\n  };\n  var up = {\n    traverse: prevSibling,\n    gather: before$4,\n    relative: Situ.before,\n    otherRetry: Retries.tryUp,\n    ieRetry: Retries.ieTryUp,\n    failure: BeforeAfter.failedUp\n  };\n  var KeyDirection = {\n    down: down,\n    up: up\n  };\n\n  var isKey = function isKey(key) {\n    return function (keycode) {\n      return keycode === key;\n    };\n  };\n\n  var isUp = isKey(38);\n  var isDown = isKey(40);\n\n  var isNavigation = function isNavigation(keycode) {\n    return keycode >= 37 && keycode <= 40;\n  };\n\n  var SelectionKeys = {\n    ltr: {\n      isBackward: isKey(37),\n      isForward: isKey(39)\n    },\n    rtl: {\n      isBackward: isKey(39),\n      isForward: isKey(37)\n    },\n    isUp: isUp,\n    isDown: isDown,\n    isNavigation: isNavigation\n  };\n\n  var toRaw = function toRaw(sr) {\n    return {\n      left: sr.left(),\n      top: sr.top(),\n      right: sr.right(),\n      bottom: sr.bottom(),\n      width: sr.width(),\n      height: sr.height()\n    };\n  };\n\n  var Rect = {\n    toRaw: toRaw\n  };\n  var isSafari = detect$3().browser.isSafari();\n\n  var get$b = function get$b(_DOC) {\n    var doc = _DOC !== undefined ? _DOC.dom() : domGlobals.document;\n    var x = doc.body.scrollLeft || doc.documentElement.scrollLeft;\n    var y = doc.body.scrollTop || doc.documentElement.scrollTop;\n    return Position(x, y);\n  };\n\n  var by = function by(x, y, _DOC) {\n    var doc = _DOC !== undefined ? _DOC.dom() : domGlobals.document;\n    var win = doc.defaultView;\n    win.scrollBy(x, y);\n  };\n\n  var WindowBridge = function WindowBridge(win) {\n    var elementFromPoint = function elementFromPoint(x, y) {\n      return Element.fromPoint(Element.fromDom(win.document), x, y);\n    };\n\n    var getRect = function getRect(element) {\n      return element.dom().getBoundingClientRect();\n    };\n\n    var getRangedRect = function getRangedRect(start, soffset, finish, foffset) {\n      var sel = Selection.exact(start, soffset, finish, foffset);\n      return getFirstRect$1(win, sel).map(Rect.toRaw);\n    };\n\n    var getSelection = function getSelection() {\n      return get$a(win).map(function (exactAdt) {\n        return Util.convertToRange(win, exactAdt);\n      });\n    };\n\n    var fromSitus = function fromSitus(situs) {\n      var relative = Selection.relative(situs.start(), situs.finish());\n      return Util.convertToRange(win, relative);\n    };\n\n    var situsFromPoint = function situsFromPoint(x, y) {\n      return getAtPoint(win, x, y).map(function (exact) {\n        return Situs.create(exact.start(), exact.soffset(), exact.finish(), exact.foffset());\n      });\n    };\n\n    var clearSelection = function clearSelection() {\n      clear(win);\n    };\n\n    var collapseSelection = function collapseSelection(toStart) {\n      if (toStart === void 0) {\n        toStart = false;\n      }\n\n      get$a(win).each(function (sel) {\n        return sel.fold(function (rng) {\n          return rng.collapse(toStart);\n        }, function (startSitu, finishSitu) {\n          var situ = toStart ? startSitu : finishSitu;\n          setRelative(win, situ, situ);\n        }, function (start, soffset, finish, foffset) {\n          var node = toStart ? start : finish;\n          var offset = toStart ? soffset : foffset;\n          setExact(win, node, offset, node, offset);\n        });\n      });\n    };\n\n    var selectContents = function selectContents(element) {\n      setToElement(win, element);\n    };\n\n    var setSelection = function setSelection(sel) {\n      setExact(win, sel.start(), sel.soffset(), sel.finish(), sel.foffset());\n    };\n\n    var setRelativeSelection = function setRelativeSelection(start, finish) {\n      setRelative(win, start, finish);\n    };\n\n    var getInnerHeight = function getInnerHeight() {\n      return win.innerHeight;\n    };\n\n    var getScrollY = function getScrollY() {\n      var pos = get$b(Element.fromDom(win.document));\n      return pos.top();\n    };\n\n    var scrollBy = function scrollBy(x, y) {\n      by(x, y, Element.fromDom(win.document));\n    };\n\n    return {\n      elementFromPoint: elementFromPoint,\n      getRect: getRect,\n      getRangedRect: getRangedRect,\n      getSelection: getSelection,\n      fromSitus: fromSitus,\n      situsFromPoint: situsFromPoint,\n      clearSelection: clearSelection,\n      collapseSelection: collapseSelection,\n      setSelection: setSelection,\n      setRelativeSelection: setRelativeSelection,\n      selectContents: selectContents,\n      getInnerHeight: getInnerHeight,\n      getScrollY: getScrollY,\n      scrollBy: scrollBy\n    };\n  };\n\n  var rc = Immutable('rows', 'cols');\n\n  var mouse = function mouse(win, container, isRoot, annotations) {\n    var bridge = WindowBridge(win);\n    var handlers = MouseSelection(bridge, container, isRoot, annotations);\n    return {\n      mousedown: handlers.mousedown,\n      mouseover: handlers.mouseover,\n      mouseup: handlers.mouseup\n    };\n  };\n\n  var keyboard = function keyboard(win, container, isRoot, annotations) {\n    var bridge = WindowBridge(win);\n\n    var clearToNavigate = function clearToNavigate() {\n      annotations.clear(container);\n      return Option.none();\n    };\n\n    var keydown = function keydown(event, start, soffset, finish, foffset, direction) {\n      var realEvent = event.raw();\n      var keycode = realEvent.which;\n      var shiftKey = realEvent.shiftKey === true;\n      var handler = CellSelection.retrieve(container, annotations.selectedSelector()).fold(function () {\n        if (SelectionKeys.isDown(keycode) && shiftKey) {\n          return curry(VerticalMovement.select, bridge, container, isRoot, KeyDirection.down, finish, start, annotations.selectRange);\n        } else if (SelectionKeys.isUp(keycode) && shiftKey) {\n          return curry(VerticalMovement.select, bridge, container, isRoot, KeyDirection.up, finish, start, annotations.selectRange);\n        } else if (SelectionKeys.isDown(keycode)) {\n          return curry(VerticalMovement.navigate, bridge, isRoot, KeyDirection.down, finish, start, VerticalMovement.lastDownCheck);\n        } else if (SelectionKeys.isUp(keycode)) {\n          return curry(VerticalMovement.navigate, bridge, isRoot, KeyDirection.up, finish, start, VerticalMovement.firstUpCheck);\n        } else {\n          return Option.none;\n        }\n      }, function (selected) {\n        var update = function update(attempts) {\n          return function () {\n            var navigation = findMap(attempts, function (delta) {\n              return KeySelection.update(delta.rows(), delta.cols(), container, selected, annotations);\n            });\n            return navigation.fold(function () {\n              return CellSelection.getEdges(container, annotations.firstSelectedSelector(), annotations.lastSelectedSelector()).map(function (edges) {\n                var relative = SelectionKeys.isDown(keycode) || direction.isForward(keycode) ? Situ.after : Situ.before;\n                bridge.setRelativeSelection(Situ.on(edges.first(), 0), relative(edges.table()));\n                annotations.clear(container);\n                return Response.create(Option.none(), true);\n              });\n            }, function (_) {\n              return Option.some(Response.create(Option.none(), true));\n            });\n          };\n        };\n\n        if (SelectionKeys.isDown(keycode) && shiftKey) {\n          return update([rc(+1, 0)]);\n        } else if (SelectionKeys.isUp(keycode) && shiftKey) {\n          return update([rc(-1, 0)]);\n        } else if (direction.isBackward(keycode) && shiftKey) {\n          return update([rc(0, -1), rc(-1, 0)]);\n        } else if (direction.isForward(keycode) && shiftKey) {\n          return update([rc(0, +1), rc(+1, 0)]);\n        } else if (SelectionKeys.isNavigation(keycode) && shiftKey === false) {\n          return clearToNavigate;\n        } else {\n          return Option.none;\n        }\n      });\n      return handler();\n    };\n\n    var keyup = function keyup(event, start, soffset, finish, foffset) {\n      return CellSelection.retrieve(container, annotations.selectedSelector()).fold(function () {\n        var realEvent = event.raw();\n        var keycode = realEvent.which;\n        var shiftKey = realEvent.shiftKey === true;\n\n        if (shiftKey === false) {\n          return Option.none();\n        }\n\n        if (SelectionKeys.isNavigation(keycode)) {\n          return KeySelection.sync(container, isRoot, start, soffset, finish, foffset, annotations.selectRange);\n        } else {\n          return Option.none();\n        }\n      }, Option.none);\n    };\n\n    return {\n      keydown: keydown,\n      keyup: keyup\n    };\n  };\n\n  var external = function external(win, container, isRoot, annotations) {\n    var bridge = WindowBridge(win);\n    return function (start, finish) {\n      annotations.clearBeforeUpdate(container);\n      CellSelection.identify(start, finish, isRoot).each(function (cellSel) {\n        var boxes = cellSel.boxes().getOr([]);\n        annotations.selectRange(container, boxes, cellSel.start(), cellSel.finish());\n        bridge.selectContents(finish);\n        bridge.collapseSelection();\n      });\n    };\n  };\n\n  var InputHandlers = {\n    mouse: mouse,\n    keyboard: keyboard,\n    external: external\n  };\n\n  var remove$7 = function remove$7(element, classes) {\n    each(classes, function (x) {\n      remove$5(element, x);\n    });\n  };\n\n  var addClass = function addClass(clazz) {\n    return function (element) {\n      add$2(element, clazz);\n    };\n  };\n\n  var removeClasses = function removeClasses(classes) {\n    return function (element) {\n      remove$7(element, classes);\n    };\n  };\n\n  var byClass = function byClass(ephemera) {\n    var addSelectionClass = addClass(ephemera.selected());\n    var removeSelectionClasses = removeClasses([ephemera.selected(), ephemera.lastSelected(), ephemera.firstSelected()]);\n\n    var clear = function clear(container) {\n      var sels = descendants$1(container, ephemera.selectedSelector());\n      each(sels, removeSelectionClasses);\n    };\n\n    var selectRange = function selectRange(container, cells, start, finish) {\n      clear(container);\n      each(cells, addSelectionClass);\n      add$2(start, ephemera.firstSelected());\n      add$2(finish, ephemera.lastSelected());\n    };\n\n    return {\n      clearBeforeUpdate: clear,\n      clear: clear,\n      selectRange: selectRange,\n      selectedSelector: ephemera.selectedSelector,\n      firstSelectedSelector: ephemera.firstSelectedSelector,\n      lastSelectedSelector: ephemera.lastSelectedSelector\n    };\n  };\n\n  var byAttr = function byAttr(ephemera, onSelection, onClear) {\n    var removeSelectionAttributes = function removeSelectionAttributes(element) {\n      remove(element, ephemera.selected());\n      remove(element, ephemera.firstSelected());\n      remove(element, ephemera.lastSelected());\n    };\n\n    var addSelectionAttribute = function addSelectionAttribute(element) {\n      set(element, ephemera.selected(), '1');\n    };\n\n    var clear = function clear(container) {\n      clearBeforeUpdate(container);\n      onClear();\n    };\n\n    var clearBeforeUpdate = function clearBeforeUpdate(container) {\n      var sels = descendants$1(container, ephemera.selectedSelector());\n      each(sels, removeSelectionAttributes);\n    };\n\n    var selectRange = function selectRange(container, cells, start, finish) {\n      clear(container);\n      each(cells, addSelectionAttribute);\n      set(start, ephemera.firstSelected(), '1');\n      set(finish, ephemera.lastSelected(), '1');\n      onSelection(cells, start, finish);\n    };\n\n    return {\n      clearBeforeUpdate: clearBeforeUpdate,\n      clear: clear,\n      selectRange: selectRange,\n      selectedSelector: ephemera.selectedSelector,\n      firstSelectedSelector: ephemera.firstSelectedSelector,\n      lastSelectedSelector: ephemera.lastSelectedSelector\n    };\n  };\n\n  var SelectionAnnotation = {\n    byClass: byClass,\n    byAttr: byAttr\n  };\n\n  var getUpOrLeftCells = function getUpOrLeftCells(grid, selectedCells, generators) {\n    var upGrid = grid.slice(0, selectedCells[selectedCells.length - 1].row() + 1);\n    var upDetails = toDetailList(upGrid, generators);\n    return bind(upDetails, function (detail) {\n      var slicedCells = detail.cells().slice(0, selectedCells[selectedCells.length - 1].column() + 1);\n      return map(slicedCells, function (cell) {\n        return cell.element();\n      });\n    });\n  };\n\n  var getDownOrRightCells = function getDownOrRightCells(grid, selectedCells, generators) {\n    var downGrid = grid.slice(selectedCells[0].row() + selectedCells[0].rowspan() - 1, grid.length);\n    var downDetails = toDetailList(downGrid, generators);\n    return bind(downDetails, function (detail) {\n      var slicedCells = detail.cells().slice(selectedCells[0].column() + selectedCells[0].colspan() - 1, +detail.cells().length);\n      return map(slicedCells, function (cell) {\n        return cell.element();\n      });\n    });\n  };\n\n  var getOtherCells = function getOtherCells(table, target, generators) {\n    var list = DetailsList.fromTable(table);\n    var house = Warehouse.generate(list);\n    var details = onCells(house, target);\n    return details.map(function (selectedCells) {\n      var grid = Transitions.toGrid(house, generators, false);\n      var upOrLeftCells = getUpOrLeftCells(grid, selectedCells, generators);\n      var downOrRightCells = getDownOrRightCells(grid, selectedCells, generators);\n      return {\n        upOrLeftCells: upOrLeftCells,\n        downOrRightCells: downOrRightCells\n      };\n    });\n  };\n\n  var OtherCells = {\n    getOtherCells: getOtherCells\n  };\n\n  var hasInternalTarget = function hasInternalTarget(e) {\n    return has$2(Element.fromDom(e.target), 'ephox-snooker-resizer-bar') === false;\n  };\n\n  function CellSelection$1(editor, lazyResize, selectionTargets) {\n    var handlerStruct = MixedBag(['mousedown', 'mouseover', 'mouseup', 'keyup', 'keydown'], []);\n    var handlers = Option.none();\n    var cloneFormats = getCloneElements(editor);\n\n    var onSelection = function onSelection(cells, start, finish) {\n      selectionTargets.targets().each(function (targets) {\n        var tableOpt = TableLookup.table(start);\n        tableOpt.each(function (table) {\n          var doc = Element.fromDom(editor.getDoc());\n          var generators = TableFill.cellOperations(noop, doc, cloneFormats);\n          var otherCells = OtherCells.getOtherCells(table, targets, generators);\n          fireTableSelectionChange(editor, cells, start, finish, otherCells);\n        });\n      });\n    };\n\n    var onClear = function onClear() {\n      fireTableSelectionClear(editor);\n    };\n\n    var annotations = SelectionAnnotation.byAttr(Ephemera, onSelection, onClear);\n    editor.on('init', function (e) {\n      var win = editor.getWin();\n      var body = getBody$1(editor);\n      var isRoot = getIsRoot(editor);\n\n      var syncSelection = function syncSelection() {\n        var sel = editor.selection;\n        var start = Element.fromDom(sel.getStart());\n        var end = Element.fromDom(sel.getEnd());\n        var shared = DomParent.sharedOne(TableLookup.table, [start, end]);\n        shared.fold(function () {\n          annotations.clear(body);\n        }, noop);\n      };\n\n      var mouseHandlers = InputHandlers.mouse(win, body, isRoot, annotations);\n      var keyHandlers = InputHandlers.keyboard(win, body, isRoot, annotations);\n      var external = InputHandlers.external(win, body, isRoot, annotations);\n\n      var hasShiftKey = function hasShiftKey(event) {\n        return event.raw().shiftKey === true;\n      };\n\n      editor.on('TableSelectorChange', function (e) {\n        external(e.start, e.finish);\n      });\n\n      var handleResponse = function handleResponse(event, response) {\n        if (!hasShiftKey(event)) {\n          return;\n        }\n\n        if (response.kill()) {\n          event.kill();\n        }\n\n        response.selection().each(function (ns) {\n          var relative = Selection.relative(ns.start(), ns.finish());\n          var rng = asLtrRange(win, relative);\n          editor.selection.setRng(rng);\n        });\n      };\n\n      var keyup = function keyup(event) {\n        var wrappedEvent = wrapEvent(event);\n\n        if (wrappedEvent.raw().shiftKey && SelectionKeys.isNavigation(wrappedEvent.raw().which)) {\n          var rng = editor.selection.getRng();\n          var start = Element.fromDom(rng.startContainer);\n          var end = Element.fromDom(rng.endContainer);\n          keyHandlers.keyup(wrappedEvent, start, rng.startOffset, end, rng.endOffset).each(function (response) {\n            handleResponse(wrappedEvent, response);\n          });\n        }\n      };\n\n      var keydown = function keydown(event) {\n        var wrappedEvent = wrapEvent(event);\n        lazyResize().each(function (resize) {\n          resize.hideBars();\n        });\n        var rng = editor.selection.getRng();\n        var startContainer = Element.fromDom(editor.selection.getStart());\n        var start = Element.fromDom(rng.startContainer);\n        var end = Element.fromDom(rng.endContainer);\n        var direction = Direction.directionAt(startContainer).isRtl() ? SelectionKeys.rtl : SelectionKeys.ltr;\n        keyHandlers.keydown(wrappedEvent, start, rng.startOffset, end, rng.endOffset, direction).each(function (response) {\n          handleResponse(wrappedEvent, response);\n        });\n        lazyResize().each(function (resize) {\n          resize.showBars();\n        });\n      };\n\n      var isMouseEvent = function isMouseEvent(event) {\n        return event.hasOwnProperty('x') && event.hasOwnProperty('y');\n      };\n\n      var wrapEvent = function wrapEvent(event) {\n        var target = Element.fromDom(event.target);\n\n        var stop = function stop() {\n          event.stopPropagation();\n        };\n\n        var prevent = function prevent() {\n          event.preventDefault();\n        };\n\n        var kill = compose(prevent, stop);\n        return {\n          target: constant(target),\n          x: constant(isMouseEvent(event) ? event.x : null),\n          y: constant(isMouseEvent(event) ? event.y : null),\n          stop: stop,\n          prevent: prevent,\n          kill: kill,\n          raw: constant(event)\n        };\n      };\n\n      var isLeftMouse = function isLeftMouse(raw) {\n        return raw.button === 0;\n      };\n\n      var isLeftButtonPressed = function isLeftButtonPressed(raw) {\n        if (raw.buttons === undefined) {\n          return true;\n        }\n\n        return (raw.buttons & 1) !== 0;\n      };\n\n      var mouseDown = function mouseDown(e) {\n        if (isLeftMouse(e) && hasInternalTarget(e)) {\n          mouseHandlers.mousedown(wrapEvent(e));\n        }\n      };\n\n      var mouseOver = function mouseOver(e) {\n        if (isLeftButtonPressed(e) && hasInternalTarget(e)) {\n          mouseHandlers.mouseover(wrapEvent(e));\n        }\n      };\n\n      var mouseUp = function mouseUp(e) {\n        if (isLeftMouse(e) && hasInternalTarget(e)) {\n          mouseHandlers.mouseup(wrapEvent(e));\n        }\n      };\n\n      var getDoubleTap = function getDoubleTap() {\n        var lastTarget = Cell(Element.fromDom(body));\n        var lastTimeStamp = Cell(0);\n\n        var touchEnd = function touchEnd(t) {\n          var target = Element.fromDom(t.target);\n\n          if (name(target) === 'td' || name(target) === 'th') {\n            var lT = lastTarget.get();\n            var lTS = lastTimeStamp.get();\n\n            if (eq(lT, target) && t.timeStamp - lTS < 300) {\n              t.preventDefault();\n              external(target, target);\n            }\n          }\n\n          lastTarget.set(target);\n          lastTimeStamp.set(t.timeStamp);\n        };\n\n        return {\n          touchEnd: touchEnd\n        };\n      };\n\n      var doubleTap = getDoubleTap();\n      editor.on('mousedown', mouseDown);\n      editor.on('mouseover', mouseOver);\n      editor.on('mouseup', mouseUp);\n      editor.on('touchend', doubleTap.touchEnd);\n      editor.on('keyup', keyup);\n      editor.on('keydown', keydown);\n      editor.on('NodeChange', syncSelection);\n      handlers = Option.some(handlerStruct({\n        mousedown: mouseDown,\n        mouseover: mouseOver,\n        mouseup: mouseUp,\n        keyup: keyup,\n        keydown: keydown\n      }));\n    });\n\n    var destroy = function destroy() {\n      handlers.each(function (handlers) {});\n    };\n\n    return {\n      clear: annotations.clear,\n      destroy: destroy\n    };\n  }\n\n  var Selections = function Selections(editor) {\n    var get = function get() {\n      var body = getBody$1(editor);\n      return TableSelection.retrieve(body, Ephemera.selectedSelector()).fold(function () {\n        if (editor.selection.getStart() === undefined) {\n          return SelectionTypes.none();\n        } else {\n          return SelectionTypes.single(editor.selection);\n        }\n      }, function (cells) {\n        return SelectionTypes.multiple(cells);\n      });\n    };\n\n    return {\n      get: get\n    };\n  };\n\n  var getSelectionTargets = function getSelectionTargets(editor, selections) {\n    var _targets = Cell(Option.none());\n\n    var changeHandlers = Cell([]);\n\n    var findTargets = function findTargets() {\n      return getSelectionStartCellOrCaption(editor).bind(function (cellOrCaption) {\n        var table = TableLookup.table(cellOrCaption);\n        return table.map(function (table) {\n          if (name(cellOrCaption) === 'caption') {\n            return TableTargets.notCell(cellOrCaption);\n          } else {\n            return TableTargets.forMenu(selections, table, cellOrCaption);\n          }\n        });\n      });\n    };\n\n    var resetTargets = function resetTargets() {\n      _targets.set(cached(findTargets)());\n\n      each(changeHandlers.get(), function (handler) {\n        return handler();\n      });\n    };\n\n    var onSetup = function onSetup(api, isDisabled) {\n      var handler = function handler() {\n        return _targets.get().fold(function () {\n          api.setDisabled(true);\n        }, function (targets) {\n          api.setDisabled(isDisabled(targets));\n        });\n      };\n\n      handler();\n      changeHandlers.set(changeHandlers.get().concat([handler]));\n      return function () {\n        changeHandlers.set(filter(changeHandlers.get(), function (h) {\n          return h !== handler;\n        }));\n      };\n    };\n\n    var onSetupTable = function onSetupTable(api) {\n      return onSetup(api, function (_) {\n        return false;\n      });\n    };\n\n    var onSetupCellOrRow = function onSetupCellOrRow(api) {\n      return onSetup(api, function (targets) {\n        return name(targets.element()) === 'caption';\n      });\n    };\n\n    var onSetupMergeable = function onSetupMergeable(api) {\n      return onSetup(api, function (targets) {\n        return targets.mergable().isNone();\n      });\n    };\n\n    var onSetupUnmergeable = function onSetupUnmergeable(api) {\n      return onSetup(api, function (targets) {\n        return targets.unmergable().isNone();\n      });\n    };\n\n    editor.on('NodeChange TableSelectorChange', resetTargets);\n    return {\n      onSetupTable: onSetupTable,\n      onSetupCellOrRow: onSetupCellOrRow,\n      onSetupMergeable: onSetupMergeable,\n      onSetupUnmergeable: onSetupUnmergeable,\n      resetTargets: resetTargets,\n      targets: function targets() {\n        return _targets.get();\n      }\n    };\n  };\n\n  var addButtons = function addButtons(editor, selectionTargets) {\n    editor.ui.registry.addMenuButton('table', {\n      tooltip: 'Table',\n      icon: 'table',\n      fetch: function fetch(callback) {\n        return callback('inserttable | cell row column | advtablesort | tableprops deletetable');\n      }\n    });\n\n    var cmd = function cmd(command) {\n      return function () {\n        return editor.execCommand(command);\n      };\n    };\n\n    editor.ui.registry.addButton('tableprops', {\n      tooltip: 'Table properties',\n      onAction: cmd('mceTableProps'),\n      icon: 'table',\n      onSetup: selectionTargets.onSetupTable\n    });\n    editor.ui.registry.addButton('tabledelete', {\n      tooltip: 'Delete table',\n      onAction: cmd('mceTableDelete'),\n      icon: 'table-delete-table',\n      onSetup: selectionTargets.onSetupTable\n    });\n    editor.ui.registry.addButton('tablecellprops', {\n      tooltip: 'Cell properties',\n      onAction: cmd('mceTableCellProps'),\n      icon: 'table-cell-properties',\n      onSetup: selectionTargets.onSetupCellOrRow\n    });\n    editor.ui.registry.addButton('tablemergecells', {\n      tooltip: 'Merge cells',\n      onAction: cmd('mceTableMergeCells'),\n      icon: 'table-merge-cells',\n      onSetup: selectionTargets.onSetupMergeable\n    });\n    editor.ui.registry.addButton('tablesplitcells', {\n      tooltip: 'Split cell',\n      onAction: cmd('mceTableSplitCells'),\n      icon: 'table-split-cells',\n      onSetup: selectionTargets.onSetupUnmergeable\n    });\n    editor.ui.registry.addButton('tableinsertrowbefore', {\n      tooltip: 'Insert row before',\n      onAction: cmd('mceTableInsertRowBefore'),\n      icon: 'table-insert-row-above',\n      onSetup: selectionTargets.onSetupCellOrRow\n    });\n    editor.ui.registry.addButton('tableinsertrowafter', {\n      tooltip: 'Insert row after',\n      onAction: cmd('mceTableInsertRowAfter'),\n      icon: 'table-insert-row-after',\n      onSetup: selectionTargets.onSetupCellOrRow\n    });\n    editor.ui.registry.addButton('tabledeleterow', {\n      tooltip: 'Delete row',\n      onAction: cmd('mceTableDeleteRow'),\n      icon: 'table-delete-row',\n      onSetup: selectionTargets.onSetupCellOrRow\n    });\n    editor.ui.registry.addButton('tablerowprops', {\n      tooltip: 'Row properties',\n      onAction: cmd('mceTableRowProps'),\n      icon: 'table-row-properties',\n      onSetup: selectionTargets.onSetupCellOrRow\n    });\n    editor.ui.registry.addButton('tableinsertcolbefore', {\n      tooltip: 'Insert column before',\n      onAction: cmd('mceTableInsertColBefore'),\n      icon: 'table-insert-column-before',\n      onSetup: selectionTargets.onSetupCellOrRow\n    });\n    editor.ui.registry.addButton('tableinsertcolafter', {\n      tooltip: 'Insert column after',\n      onAction: cmd('mceTableInsertColAfter'),\n      icon: 'table-insert-column-after',\n      onSetup: selectionTargets.onSetupCellOrRow\n    });\n    editor.ui.registry.addButton('tabledeletecol', {\n      tooltip: 'Delete column',\n      onAction: cmd('mceTableDeleteCol'),\n      icon: 'table-delete-column',\n      onSetup: selectionTargets.onSetupCellOrRow\n    });\n    editor.ui.registry.addButton('tablecutrow', {\n      tooltip: 'Cut row',\n      onAction: cmd('mceTableCutRow'),\n      icon: 'temporary-placeholder',\n      onSetup: selectionTargets.onSetupCellOrRow\n    });\n    editor.ui.registry.addButton('tablecopyrow', {\n      tooltip: 'Copy row',\n      onAction: cmd('mceTableCopyRow'),\n      icon: 'temporary-placeholder',\n      onSetup: selectionTargets.onSetupCellOrRow\n    });\n    editor.ui.registry.addButton('tablepasterowbefore', {\n      tooltip: 'Paste row before',\n      onAction: cmd('mceTablePasteRowBefore'),\n      icon: 'temporary-placeholder',\n      onSetup: selectionTargets.onSetupCellOrRow\n    });\n    editor.ui.registry.addButton('tablepasterowafter', {\n      tooltip: 'Paste row after',\n      onAction: cmd('mceTablePasteRowAfter'),\n      icon: 'temporary-placeholder',\n      onSetup: selectionTargets.onSetupCellOrRow\n    });\n    editor.ui.registry.addButton('tableinsertdialog', {\n      tooltip: 'Insert table',\n      onAction: cmd('mceInsertTable'),\n      icon: 'table'\n    });\n  };\n\n  var addToolbars = function addToolbars(editor) {\n    var isTable = function isTable(table) {\n      return editor.dom.is(table, 'table') && editor.getBody().contains(table);\n    };\n\n    var toolbar = getToolbar(editor);\n\n    if (toolbar.length > 0) {\n      editor.ui.registry.addContextToolbar('table', {\n        predicate: isTable,\n        items: toolbar,\n        scope: 'node',\n        position: 'node'\n      });\n    }\n  };\n\n  var Buttons = {\n    addButtons: addButtons,\n    addToolbars: addToolbars\n  };\n\n  var addMenuItems = function addMenuItems(editor, selectionTargets) {\n    var cmd = function cmd(command) {\n      return function () {\n        return editor.execCommand(command);\n      };\n    };\n\n    var insertTableAction = function insertTableAction(_a) {\n      var numRows = _a.numRows,\n          numColumns = _a.numColumns;\n      editor.undoManager.transact(function () {\n        InsertTable.insert(editor, numColumns, numRows);\n      });\n      editor.addVisual();\n    };\n\n    var tableProperties = {\n      text: 'Table properties',\n      onSetup: selectionTargets.onSetupTable,\n      onAction: cmd('mceTableProps')\n    };\n    var deleteTable = {\n      text: 'Delete table',\n      icon: 'table-delete-table',\n      onSetup: selectionTargets.onSetupTable,\n      onAction: cmd('mceTableDelete')\n    };\n    var rowItems = [{\n      type: 'menuitem',\n      text: 'Insert row before',\n      icon: 'table-insert-row-above',\n      onAction: cmd('mceTableInsertRowBefore'),\n      onSetup: selectionTargets.onSetupCellOrRow\n    }, {\n      type: 'menuitem',\n      text: 'Insert row after',\n      icon: 'table-insert-row-after',\n      onAction: cmd('mceTableInsertRowAfter'),\n      onSetup: selectionTargets.onSetupCellOrRow\n    }, {\n      type: 'menuitem',\n      text: 'Delete row',\n      icon: 'table-delete-row',\n      onAction: cmd('mceTableDeleteRow'),\n      onSetup: selectionTargets.onSetupCellOrRow\n    }, {\n      type: 'menuitem',\n      text: 'Row properties',\n      icon: 'table-row-properties',\n      onAction: cmd('mceTableRowProps'),\n      onSetup: selectionTargets.onSetupCellOrRow\n    }, {\n      type: 'separator'\n    }, {\n      type: 'menuitem',\n      text: 'Cut row',\n      onAction: cmd('mceTableCutRow'),\n      onSetup: selectionTargets.onSetupCellOrRow\n    }, {\n      type: 'menuitem',\n      text: 'Copy row',\n      onAction: cmd('mceTableCopyRow'),\n      onSetup: selectionTargets.onSetupCellOrRow\n    }, {\n      type: 'menuitem',\n      text: 'Paste row before',\n      onAction: cmd('mceTablePasteRowBefore'),\n      onSetup: selectionTargets.onSetupCellOrRow\n    }, {\n      type: 'menuitem',\n      text: 'Paste row after',\n      onAction: cmd('mceTablePasteRowAfter'),\n      onSetup: selectionTargets.onSetupCellOrRow\n    }];\n    var row = {\n      type: 'nestedmenuitem',\n      text: 'Row',\n      getSubmenuItems: function getSubmenuItems() {\n        return rowItems;\n      }\n    };\n    var columnItems = [{\n      type: 'menuitem',\n      text: 'Insert column before',\n      icon: 'table-insert-column-before',\n      onAction: cmd('mceTableInsertColBefore'),\n      onSetup: selectionTargets.onSetupCellOrRow\n    }, {\n      type: 'menuitem',\n      text: 'Insert column after',\n      icon: 'table-insert-column-after',\n      onAction: cmd('mceTableInsertColAfter'),\n      onSetup: selectionTargets.onSetupCellOrRow\n    }, {\n      type: 'menuitem',\n      text: 'Delete column',\n      icon: 'table-delete-column',\n      onAction: cmd('mceTableDeleteCol'),\n      onSetup: selectionTargets.onSetupCellOrRow\n    }];\n    var column = {\n      type: 'nestedmenuitem',\n      text: 'Column',\n      getSubmenuItems: function getSubmenuItems() {\n        return columnItems;\n      }\n    };\n    var cellItems = [{\n      type: 'menuitem',\n      text: 'Cell properties',\n      icon: 'table-cell-properties',\n      onAction: cmd('mceTableCellProps'),\n      onSetup: selectionTargets.onSetupCellOrRow\n    }, {\n      type: 'menuitem',\n      text: 'Merge cells',\n      icon: 'table-merge-cells',\n      onAction: cmd('mceTableMergeCells'),\n      onSetup: selectionTargets.onSetupMergeable\n    }, {\n      type: 'menuitem',\n      text: 'Split cell',\n      icon: 'table-split-cells',\n      onAction: cmd('mceTableSplitCells'),\n      onSetup: selectionTargets.onSetupUnmergeable\n    }];\n    var cell = {\n      type: 'nestedmenuitem',\n      text: 'Cell',\n      getSubmenuItems: function getSubmenuItems() {\n        return cellItems;\n      }\n    };\n\n    if (hasTableGrid(editor) === false) {\n      editor.ui.registry.addMenuItem('inserttable', {\n        text: 'Table',\n        icon: 'table',\n        onAction: cmd('mceInsertTable')\n      });\n    } else {\n      editor.ui.registry.addNestedMenuItem('inserttable', {\n        text: 'Table',\n        icon: 'table',\n        getSubmenuItems: function getSubmenuItems() {\n          return [{\n            type: 'fancymenuitem',\n            fancytype: 'inserttable',\n            onAction: insertTableAction\n          }];\n        }\n      });\n    }\n\n    editor.ui.registry.addMenuItem('inserttabledialog', {\n      text: 'Insert table',\n      icon: 'table',\n      onAction: cmd('mceInsertTable')\n    });\n    editor.ui.registry.addMenuItem('tableprops', tableProperties);\n    editor.ui.registry.addMenuItem('deletetable', deleteTable);\n    editor.ui.registry.addNestedMenuItem('row', row);\n    editor.ui.registry.addNestedMenuItem('column', column);\n    editor.ui.registry.addNestedMenuItem('cell', cell);\n    editor.ui.registry.addContextMenu('table', {\n      update: function update() {\n        selectionTargets.resetTargets();\n        return selectionTargets.targets().fold(function () {\n          return '';\n        }, function (targets) {\n          if (name(targets.element()) === 'caption') {\n            return 'tableprops deletetable';\n          } else {\n            return 'cell row column | advtablesort | tableprops deletetable';\n          }\n        });\n      }\n    });\n  };\n\n  var MenuItems = {\n    addMenuItems: addMenuItems\n  };\n\n  var _getClipboardRows = function getClipboardRows(clipboardRows) {\n    return clipboardRows.get().fold(function () {\n      return;\n    }, function (rows) {\n      return map(rows, function (row) {\n        return row.dom();\n      });\n    });\n  };\n\n  var _setClipboardRows = function setClipboardRows(rows, clipboardRows) {\n    var sugarRows = map(rows, Element.fromDom);\n    clipboardRows.set(Option.from(sugarRows));\n  };\n\n  var getApi = function getApi(editor, clipboardRows, resizeHandler, selectionTargets) {\n    return {\n      insertTable: function insertTable(columns, rows) {\n        return InsertTable.insert(editor, columns, rows);\n      },\n      setClipboardRows: function setClipboardRows(rows) {\n        return _setClipboardRows(rows, clipboardRows);\n      },\n      getClipboardRows: function getClipboardRows() {\n        return _getClipboardRows(clipboardRows);\n      },\n      resizeHandler: resizeHandler,\n      selectionTargets: selectionTargets\n    };\n  };\n\n  function Plugin(editor) {\n    var selections = Selections(editor);\n    var selectionTargets = getSelectionTargets(editor, selections);\n    var resizeHandler = getResizeHandler(editor);\n    var cellSelection = CellSelection$1(editor, resizeHandler.lazyResize, selectionTargets);\n    var actions = TableActions(editor, resizeHandler.lazyWire);\n    var clipboardRows = Cell(Option.none());\n    Commands.registerCommands(editor, actions, cellSelection, selections, clipboardRows);\n    Clipboard.registerEvents(editor, selections, actions, cellSelection);\n    MenuItems.addMenuItems(editor, selectionTargets);\n    Buttons.addButtons(editor, selectionTargets);\n    Buttons.addToolbars(editor);\n    editor.on('PreInit', function () {\n      editor.serializer.addTempAttr(Ephemera.firstSelected());\n      editor.serializer.addTempAttr(Ephemera.lastSelected());\n    });\n\n    if (hasTabNavigation(editor)) {\n      editor.on('keydown', function (e) {\n        TabContext.handle(e, editor, actions, resizeHandler.lazyWire);\n      });\n    }\n\n    editor.on('remove', function () {\n      resizeHandler.destroy();\n      cellSelection.destroy();\n    });\n    return getApi(editor, clipboardRows, resizeHandler, selectionTargets);\n  }\n\n  function Plugin$1() {\n    global.add('table', Plugin);\n  }\n\n  Plugin$1();\n})(window);","require(\"core-js/modules/es6.regexp.flags\");\n\nrequire(\"core-js/modules/es6.function.bind\");\n\nrequire(\"core-js/modules/web.dom.iterable\");\n\nrequire(\"core-js/modules/es6.array.iterator\");\n\nrequire(\"core-js/modules/es6.object.to-string\");\n\nrequire(\"core-js/modules/es6.string.anchor\");\n\nrequire(\"core-js/modules/es6.string.link\");\n\nrequire(\"core-js/modules/es6.array.some\");\n\nrequire(\"core-js/modules/es6.array.map\");\n\nrequire(\"core-js/modules/es6.regexp.replace\");\n\nrequire(\"core-js/modules/es6.array.filter\");\n\nrequire(\"core-js/modules/es6.array.sort\");\n\nrequire(\"core-js/modules/es6.string.trim\");\n\nrequire(\"core-js/modules/es6.regexp.split\");\n\nrequire(\"core-js/modules/es6.string.iterator\");\n\nrequire(\"core-js/modules/es6.array.from\");\n\nrequire(\"core-js/modules/es6.array.index-of\");\n\nrequire(\"core-js/modules/es6.object.freeze\");\n\nrequire(\"core-js/modules/es6.object.assign\");\n\nrequire(\"core-js/modules/es6.function.name\");\n\n/**\n * Copyright (c) Tiny Technologies, Inc. All rights reserved.\n * Licensed under the LGPL or a commercial license.\n * For LGPL see License.txt in the project root for license information.\n * For commercial licenses see https://www.tiny.cloud/\n *\n * Version: 5.1.3 (2019-12-04)\n */\n(function (domGlobals) {\n  'use strict';\n\n  var global$1 = tinymce.util.Tools.resolve('tinymce.PluginManager');\n  var global$2 = tinymce.util.Tools.resolve('tinymce.util.VK');\n\n  var typeOf = function typeOf(x) {\n    if (x === null) {\n      return 'null';\n    }\n\n    var t = typeof x;\n\n    if (t === 'object' && (Array.prototype.isPrototypeOf(x) || x.constructor && x.constructor.name === 'Array')) {\n      return 'array';\n    }\n\n    if (t === 'object' && (String.prototype.isPrototypeOf(x) || x.constructor && x.constructor.name === 'String')) {\n      return 'string';\n    }\n\n    return t;\n  };\n\n  var isType = function isType(type) {\n    return function (value) {\n      return typeOf(value) === type;\n    };\n  };\n\n  var isString = isType('string');\n  var isArray = isType('array');\n  var isBoolean = isType('boolean');\n  var isFunction = isType('function');\n\n  var assumeExternalTargets = function assumeExternalTargets(editor) {\n    var externalTargets = editor.getParam('link_assume_external_targets', false);\n\n    if (isBoolean(externalTargets) && externalTargets) {\n      return 1;\n    } else if (isString(externalTargets) && (externalTargets === 'http' || externalTargets === 'https')) {\n      return externalTargets;\n    }\n\n    return 0;\n  };\n\n  var hasContextToolbar = function hasContextToolbar(editor) {\n    return editor.getParam('link_context_toolbar', false, 'boolean');\n  };\n\n  var getLinkList = function getLinkList(editor) {\n    return editor.getParam('link_list');\n  };\n\n  var getDefaultLinkTarget = function getDefaultLinkTarget(editor) {\n    return editor.getParam('default_link_target');\n  };\n\n  var getTargetList = function getTargetList(editor) {\n    return editor.getParam('target_list', true);\n  };\n\n  var getRelList = function getRelList(editor) {\n    return editor.getParam('rel_list', [], 'array');\n  };\n\n  var getLinkClassList = function getLinkClassList(editor) {\n    return editor.getParam('link_class_list', [], 'array');\n  };\n\n  var shouldShowLinkTitle = function shouldShowLinkTitle(editor) {\n    return editor.getParam('link_title', true, 'boolean');\n  };\n\n  var allowUnsafeLinkTarget = function allowUnsafeLinkTarget(editor) {\n    return editor.getParam('allow_unsafe_link_target', false, 'boolean');\n  };\n\n  var useQuickLink = function useQuickLink(editor) {\n    return editor.getParam('link_quicklink', false, 'boolean');\n  };\n\n  var Settings = {\n    assumeExternalTargets: assumeExternalTargets,\n    hasContextToolbar: hasContextToolbar,\n    getLinkList: getLinkList,\n    getDefaultLinkTarget: getDefaultLinkTarget,\n    getTargetList: getTargetList,\n    getRelList: getRelList,\n    getLinkClassList: getLinkClassList,\n    shouldShowLinkTitle: shouldShowLinkTitle,\n    allowUnsafeLinkTarget: allowUnsafeLinkTarget,\n    useQuickLink: useQuickLink\n  };\n\n  var appendClickRemove = function appendClickRemove(link, evt) {\n    domGlobals.document.body.appendChild(link);\n    link.dispatchEvent(evt);\n    domGlobals.document.body.removeChild(link);\n  };\n\n  var open = function open(url) {\n    var link = domGlobals.document.createElement('a');\n    link.target = '_blank';\n    link.href = url;\n    link.rel = 'noreferrer noopener';\n    var evt = domGlobals.document.createEvent('MouseEvents');\n    evt.initMouseEvent('click', true, true, domGlobals.window, 0, 0, 0, 0, 0, false, false, false, false, 0, null);\n    appendClickRemove(link, evt);\n  };\n\n  var OpenUrl = {\n    open: open\n  };\n\n  var _assign = function __assign() {\n    _assign = Object.assign || function __assign(t) {\n      for (var s, i = 1, n = arguments.length; i < n; i++) {\n        s = arguments[i];\n\n        for (var p in s) {\n          if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n        }\n      }\n\n      return t;\n    };\n\n    return _assign.apply(this, arguments);\n  };\n\n  var noop = function noop() {};\n\n  var constant = function constant(value) {\n    return function () {\n      return value;\n    };\n  };\n\n  var never = constant(false);\n  var always = constant(true);\n\n  var none = function none() {\n    return NONE;\n  };\n\n  var NONE = function () {\n    var eq = function eq(o) {\n      return o.isNone();\n    };\n\n    var call = function call(thunk) {\n      return thunk();\n    };\n\n    var id = function id(n) {\n      return n;\n    };\n\n    var me = {\n      fold: function fold(n, s) {\n        return n();\n      },\n      is: never,\n      isSome: never,\n      isNone: always,\n      getOr: id,\n      getOrThunk: call,\n      getOrDie: function getOrDie(msg) {\n        throw new Error(msg || 'error: getOrDie called on none.');\n      },\n      getOrNull: constant(null),\n      getOrUndefined: constant(undefined),\n      or: id,\n      orThunk: call,\n      map: none,\n      each: noop,\n      bind: none,\n      exists: never,\n      forall: always,\n      filter: none,\n      equals: eq,\n      equals_: eq,\n      toArray: function toArray() {\n        return [];\n      },\n      toString: constant('none()')\n    };\n\n    if (Object.freeze) {\n      Object.freeze(me);\n    }\n\n    return me;\n  }();\n\n  var some = function some(a) {\n    var constant_a = constant(a);\n\n    var self = function self() {\n      return me;\n    };\n\n    var bind = function bind(f) {\n      return f(a);\n    };\n\n    var me = {\n      fold: function fold(n, s) {\n        return s(a);\n      },\n      is: function is(v) {\n        return a === v;\n      },\n      isSome: always,\n      isNone: never,\n      getOr: constant_a,\n      getOrThunk: constant_a,\n      getOrDie: constant_a,\n      getOrNull: constant_a,\n      getOrUndefined: constant_a,\n      or: self,\n      orThunk: self,\n      map: function map(f) {\n        return some(f(a));\n      },\n      each: function each(f) {\n        f(a);\n      },\n      bind: bind,\n      exists: bind,\n      forall: bind,\n      filter: function filter(f) {\n        return f(a) ? me : NONE;\n      },\n      toArray: function toArray() {\n        return [a];\n      },\n      toString: function toString() {\n        return 'some(' + a + ')';\n      },\n      equals: function equals(o) {\n        return o.is(a);\n      },\n      equals_: function equals_(o, elementEq) {\n        return o.fold(never, function (b) {\n          return elementEq(a, b);\n        });\n      }\n    };\n    return me;\n  };\n\n  var from = function from(value) {\n    return value === null || value === undefined ? NONE : some(value);\n  };\n\n  var Option = {\n    some: some,\n    none: none,\n    from: from\n  };\n  var nativeSlice = Array.prototype.slice;\n  var nativeIndexOf = Array.prototype.indexOf;\n  var nativePush = Array.prototype.push;\n\n  var rawIndexOf = function rawIndexOf(ts, t) {\n    return nativeIndexOf.call(ts, t);\n  };\n\n  var contains = function contains(xs, x) {\n    return rawIndexOf(xs, x) > -1;\n  };\n\n  var map = function map(xs, f) {\n    var len = xs.length;\n    var r = new Array(len);\n\n    for (var i = 0; i < len; i++) {\n      var x = xs[i];\n      r[i] = f(x, i);\n    }\n\n    return r;\n  };\n\n  var each = function each(xs, f) {\n    for (var i = 0, len = xs.length; i < len; i++) {\n      var x = xs[i];\n      f(x, i);\n    }\n  };\n\n  var foldl = function foldl(xs, f, acc) {\n    each(xs, function (x) {\n      acc = f(acc, x);\n    });\n    return acc;\n  };\n\n  var flatten = function flatten(xs) {\n    var r = [];\n\n    for (var i = 0, len = xs.length; i < len; ++i) {\n      if (!isArray(xs[i])) {\n        throw new Error('Arr.flatten item ' + i + ' was not an array, input: ' + xs);\n      }\n\n      nativePush.apply(r, xs[i]);\n    }\n\n    return r;\n  };\n\n  var bind = function bind(xs, f) {\n    var output = map(xs, f);\n    return flatten(output);\n  };\n\n  var from$1 = isFunction(Array.from) ? Array.from : function (x) {\n    return nativeSlice.call(x);\n  };\n  var global$3 = tinymce.util.Tools.resolve('tinymce.util.Tools');\n\n  var hasProtocol = function hasProtocol(url) {\n    return /^\\w+:/i.test(url);\n  };\n\n  var getHref = function getHref(elm) {\n    var href = elm.getAttribute('data-mce-href');\n    return href ? href : elm.getAttribute('href');\n  };\n\n  var applyRelTargetRules = function applyRelTargetRules(rel, isUnsafe) {\n    var rules = ['noopener'];\n    var rels = rel ? rel.split(/\\s+/) : [];\n\n    var toString = function toString(rels) {\n      return global$3.trim(rels.sort().join(' '));\n    };\n\n    var addTargetRules = function addTargetRules(rels) {\n      rels = removeTargetRules(rels);\n      return rels.length > 0 ? rels.concat(rules) : rules;\n    };\n\n    var removeTargetRules = function removeTargetRules(rels) {\n      return rels.filter(function (val) {\n        return global$3.inArray(rules, val) === -1;\n      });\n    };\n\n    var newRels = isUnsafe ? addTargetRules(rels) : removeTargetRules(rels);\n    return newRels.length > 0 ? toString(newRels) : '';\n  };\n\n  var trimCaretContainers = function trimCaretContainers(text) {\n    return text.replace(/\\uFEFF/g, '');\n  };\n\n  var getAnchorElement = function getAnchorElement(editor, selectedElm) {\n    selectedElm = selectedElm || editor.selection.getNode();\n\n    if (isImageFigure(selectedElm)) {\n      return editor.dom.select('a[href]', selectedElm)[0];\n    } else {\n      return editor.dom.getParent(selectedElm, 'a[href]');\n    }\n  };\n\n  var getAnchorText = function getAnchorText(selection, anchorElm) {\n    var text = anchorElm ? anchorElm.innerText || anchorElm.textContent : selection.getContent({\n      format: 'text'\n    });\n    return trimCaretContainers(text);\n  };\n\n  var isLink = function isLink(elm) {\n    return elm && elm.nodeName === 'A' && !!elm.href;\n  };\n\n  var hasLinks = function hasLinks(elements) {\n    return global$3.grep(elements, isLink).length > 0;\n  };\n\n  var isOnlyTextSelected = function isOnlyTextSelected(html) {\n    if (/</.test(html) && (!/^<a [^>]+>[^<]+<\\/a>$/.test(html) || html.indexOf('href=') === -1)) {\n      return false;\n    }\n\n    return true;\n  };\n\n  var isImageFigure = function isImageFigure(elm) {\n    return elm && elm.nodeName === 'FIGURE' && /\\bimage\\b/i.test(elm.className);\n  };\n\n  var getLinkAttrs = function getLinkAttrs(data) {\n    return foldl(['title', 'rel', 'class', 'target'], function (acc, key) {\n      data[key].each(function (value) {\n        acc[key] = value.length > 0 ? value : null;\n      });\n      return acc;\n    }, {\n      href: data.href\n    });\n  };\n\n  var handleExternalTargets = function handleExternalTargets(href, assumeExternalTargets) {\n    if ((assumeExternalTargets === 'http' || assumeExternalTargets === 'https') && !hasProtocol(href)) {\n      return assumeExternalTargets + '://' + href;\n    }\n\n    return href;\n  };\n\n  var applyLinkOverrides = function applyLinkOverrides(editor, linkAttrs) {\n    var newLinkAttrs = _assign({}, linkAttrs);\n\n    if (!(Settings.getRelList(editor).length > 0) && Settings.allowUnsafeLinkTarget(editor) === false) {\n      var newRel = applyRelTargetRules(newLinkAttrs.rel, newLinkAttrs.target === '_blank');\n      newLinkAttrs.rel = newRel ? newRel : null;\n    }\n\n    if (Option.from(newLinkAttrs.target).isNone() && Settings.getTargetList(editor) === false) {\n      newLinkAttrs.target = Settings.getDefaultLinkTarget(editor);\n    }\n\n    newLinkAttrs.href = handleExternalTargets(newLinkAttrs.href, Settings.assumeExternalTargets(editor));\n    return newLinkAttrs;\n  };\n\n  var updateLink = function updateLink(editor, anchorElm, text, linkAttrs) {\n    text.each(function (text) {\n      if (anchorElm.hasOwnProperty('innerText')) {\n        anchorElm.innerText = text;\n      } else {\n        anchorElm.textContent = text;\n      }\n    });\n    editor.dom.setAttribs(anchorElm, linkAttrs);\n    editor.selection.select(anchorElm);\n  };\n\n  var createLink = function createLink(editor, selectedElm, text, linkAttrs) {\n    if (isImageFigure(selectedElm)) {\n      linkImageFigure(editor, selectedElm, linkAttrs);\n    } else {\n      text.fold(function () {\n        editor.execCommand('mceInsertLink', false, linkAttrs);\n      }, function (text) {\n        editor.insertContent(editor.dom.createHTML('a', linkAttrs, editor.dom.encode(text)));\n      });\n    }\n  };\n\n  var link = function link(editor, attachState, data) {\n    var selectedElm = editor.selection.getNode();\n    var anchorElm = getAnchorElement(editor, selectedElm);\n    var linkAttrs = applyLinkOverrides(editor, getLinkAttrs(data));\n    editor.undoManager.transact(function () {\n      if (data.href === attachState.href) {\n        attachState.attach();\n      }\n\n      if (anchorElm) {\n        editor.focus();\n        updateLink(editor, anchorElm, data.text, linkAttrs);\n      } else {\n        createLink(editor, selectedElm, data.text, linkAttrs);\n      }\n    });\n  };\n\n  var unlink = function unlink(editor) {\n    editor.undoManager.transact(function () {\n      var node = editor.selection.getNode();\n\n      if (isImageFigure(node)) {\n        unlinkImageFigure(editor, node);\n      } else {\n        var anchorElm = editor.dom.getParent(node, 'a[href]', editor.getBody());\n\n        if (anchorElm) {\n          editor.dom.remove(anchorElm, true);\n        }\n      }\n\n      editor.focus();\n    });\n  };\n\n  var unlinkImageFigure = function unlinkImageFigure(editor, fig) {\n    var img = editor.dom.select('img', fig)[0];\n\n    if (img) {\n      var a = editor.dom.getParents(img, 'a[href]', fig)[0];\n\n      if (a) {\n        a.parentNode.insertBefore(img, a);\n        editor.dom.remove(a);\n      }\n    }\n  };\n\n  var linkImageFigure = function linkImageFigure(editor, fig, attrs) {\n    var img = editor.dom.select('img', fig)[0];\n\n    if (img) {\n      var a = editor.dom.create('a', attrs);\n      img.parentNode.insertBefore(a, img);\n      a.appendChild(img);\n    }\n  };\n\n  var Utils = {\n    link: link,\n    unlink: unlink,\n    isLink: isLink,\n    hasLinks: hasLinks,\n    getHref: getHref,\n    isOnlyTextSelected: isOnlyTextSelected,\n    getAnchorElement: getAnchorElement,\n    getAnchorText: getAnchorText,\n    applyRelTargetRules: applyRelTargetRules,\n    hasProtocol: hasProtocol\n  };\n\n  var cat = function cat(arr) {\n    var r = [];\n\n    var push = function push(x) {\n      r.push(x);\n    };\n\n    for (var i = 0; i < arr.length; i++) {\n      arr[i].each(push);\n    }\n\n    return r;\n  };\n\n  var findMap = function findMap(arr, f) {\n    for (var i = 0; i < arr.length; i++) {\n      var r = f(arr[i], i);\n\n      if (r.isSome()) {\n        return r;\n      }\n    }\n\n    return Option.none();\n  };\n\n  var getValue = function getValue(item) {\n    return isString(item.value) ? item.value : '';\n  };\n\n  var sanitizeList = function sanitizeList(list, extractValue) {\n    var out = [];\n    global$3.each(list, function (item) {\n      var text = isString(item.text) ? item.text : isString(item.title) ? item.title : '';\n      if (item.menu !== undefined) ;else {\n        var value = extractValue(item);\n        out.push({\n          text: text,\n          value: value\n        });\n      }\n    });\n    return out;\n  };\n\n  var sanitizeWith = function sanitizeWith(extracter) {\n    if (extracter === void 0) {\n      extracter = getValue;\n    }\n\n    return function (list) {\n      return Option.from(list).map(function (list) {\n        return sanitizeList(list, extracter);\n      });\n    };\n  };\n\n  var sanitize = function sanitize(list) {\n    return sanitizeWith(getValue)(list);\n  };\n\n  var createUi = function createUi(name, label) {\n    return function (items) {\n      return {\n        name: name,\n        type: 'selectbox',\n        label: label,\n        items: items\n      };\n    };\n  };\n\n  var ListOptions = {\n    sanitize: sanitize,\n    sanitizeWith: sanitizeWith,\n    createUi: createUi,\n    getValue: getValue\n  };\n\n  var Cell = function Cell(initial) {\n    var value = initial;\n\n    var get = function get() {\n      return value;\n    };\n\n    var set = function set(v) {\n      value = v;\n    };\n\n    var clone = function clone() {\n      return Cell(get());\n    };\n\n    return {\n      get: get,\n      set: set,\n      clone: clone\n    };\n  };\n\n  var findTextByValue = function findTextByValue(value, catalog) {\n    return findMap(catalog, function (item) {\n      return Option.some(item).filter(function (i) {\n        return i.value === value;\n      });\n    });\n  };\n\n  var getDelta = function getDelta(persistentText, fieldName, catalog, data) {\n    var value = data[fieldName];\n    var hasPersistentText = persistentText.length > 0;\n    return value !== undefined ? findTextByValue(value, catalog).map(function (i) {\n      return {\n        url: {\n          value: i.value,\n          meta: {\n            text: hasPersistentText ? persistentText : i.text,\n            attach: noop\n          }\n        },\n        text: hasPersistentText ? persistentText : i.text\n      };\n    }) : Option.none();\n  };\n\n  var findCatalog = function findCatalog(settings, fieldName) {\n    if (fieldName === 'link') {\n      return settings.catalogs.link;\n    } else if (fieldName === 'anchor') {\n      return settings.catalogs.anchor;\n    } else {\n      return Option.none();\n    }\n  };\n\n  var init = function init(initialData, linkSettings) {\n    var persistentText = Cell(initialData.text);\n\n    var onUrlChange = function onUrlChange(data) {\n      if (persistentText.get().length <= 0) {\n        var urlText = data.url.meta.text !== undefined ? data.url.meta.text : data.url.value;\n        return Option.some({\n          text: urlText\n        });\n      } else {\n        return Option.none();\n      }\n    };\n\n    var onCatalogChange = function onCatalogChange(data, change) {\n      var catalog = findCatalog(linkSettings, change.name).getOr([]);\n      return getDelta(persistentText.get(), change.name, catalog, data);\n    };\n\n    var onChange = function onChange(getData, change) {\n      if (change.name === 'url') {\n        return onUrlChange(getData());\n      } else if (contains(['anchor', 'link'], change.name)) {\n        return onCatalogChange(getData(), change);\n      } else if (change.name === 'text') {\n        persistentText.set(getData().text);\n        return Option.none();\n      } else {\n        return Option.none();\n      }\n    };\n\n    return {\n      onChange: onChange\n    };\n  };\n\n  var DialogChanges = {\n    init: init,\n    getDelta: getDelta\n  };\n  var exports$1 = {},\n      module = {\n    exports: exports$1\n  };\n\n  (function (define, exports, module, require) {\n    (function (f) {\n      if (typeof exports === 'object' && typeof module !== 'undefined') {\n        module.exports = f();\n      } else if (typeof define === 'function' && define.amd) {\n        define([], f);\n      } else {\n        var g;\n\n        if (typeof window !== 'undefined') {\n          g = window;\n        } else if (typeof global !== 'undefined') {\n          g = global;\n        } else if (typeof self !== 'undefined') {\n          g = self;\n        } else {\n          g = this;\n        }\n\n        g.EphoxContactWrapper = f();\n      }\n    })(function () {\n      return function () {\n        function r(e, n, t) {\n          function o(i, f) {\n            if (!n[i]) {\n              if (!e[i]) {\n                var c = 'function' == typeof require && require;\n                if (!f && c) return c(i, !0);\n                if (u) return u(i, !0);\n                var a = new Error('Cannot find module \\'' + i + '\\'');\n                throw a.code = 'MODULE_NOT_FOUND', a;\n              }\n\n              var p = n[i] = {\n                exports: {}\n              };\n              e[i][0].call(p.exports, function (r) {\n                var n = e[i][1][r];\n                return o(n || r);\n              }, p, p.exports, r, e, n, t);\n            }\n\n            return n[i].exports;\n          }\n\n          for (var u = 'function' == typeof require && require, i = 0; i < t.length; i++) {\n            o(t[i]);\n          }\n\n          return o;\n        }\n\n        return r;\n      }()({\n        1: [function (require, module, exports) {\n          var process = module.exports = {};\n          var cachedSetTimeout;\n          var cachedClearTimeout;\n\n          function defaultSetTimout() {\n            throw new Error('setTimeout has not been defined');\n          }\n\n          function defaultClearTimeout() {\n            throw new Error('clearTimeout has not been defined');\n          }\n\n          (function () {\n            try {\n              if (typeof setTimeout === 'function') {\n                cachedSetTimeout = setTimeout;\n              } else {\n                cachedSetTimeout = defaultSetTimout;\n              }\n            } catch (e) {\n              cachedSetTimeout = defaultSetTimout;\n            }\n\n            try {\n              if (typeof clearTimeout === 'function') {\n                cachedClearTimeout = clearTimeout;\n              } else {\n                cachedClearTimeout = defaultClearTimeout;\n              }\n            } catch (e) {\n              cachedClearTimeout = defaultClearTimeout;\n            }\n          })();\n\n          function runTimeout(fun) {\n            if (cachedSetTimeout === setTimeout) {\n              return setTimeout(fun, 0);\n            }\n\n            if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n              cachedSetTimeout = setTimeout;\n              return setTimeout(fun, 0);\n            }\n\n            try {\n              return cachedSetTimeout(fun, 0);\n            } catch (e) {\n              try {\n                return cachedSetTimeout.call(null, fun, 0);\n              } catch (e) {\n                return cachedSetTimeout.call(this, fun, 0);\n              }\n            }\n          }\n\n          function runClearTimeout(marker) {\n            if (cachedClearTimeout === clearTimeout) {\n              return clearTimeout(marker);\n            }\n\n            if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n              cachedClearTimeout = clearTimeout;\n              return clearTimeout(marker);\n            }\n\n            try {\n              return cachedClearTimeout(marker);\n            } catch (e) {\n              try {\n                return cachedClearTimeout.call(null, marker);\n              } catch (e) {\n                return cachedClearTimeout.call(this, marker);\n              }\n            }\n          }\n\n          var queue = [];\n          var draining = false;\n          var currentQueue;\n          var queueIndex = -1;\n\n          function cleanUpNextTick() {\n            if (!draining || !currentQueue) {\n              return;\n            }\n\n            draining = false;\n\n            if (currentQueue.length) {\n              queue = currentQueue.concat(queue);\n            } else {\n              queueIndex = -1;\n            }\n\n            if (queue.length) {\n              drainQueue();\n            }\n          }\n\n          function drainQueue() {\n            if (draining) {\n              return;\n            }\n\n            var timeout = runTimeout(cleanUpNextTick);\n            draining = true;\n            var len = queue.length;\n\n            while (len) {\n              currentQueue = queue;\n              queue = [];\n\n              while (++queueIndex < len) {\n                if (currentQueue) {\n                  currentQueue[queueIndex].run();\n                }\n              }\n\n              queueIndex = -1;\n              len = queue.length;\n            }\n\n            currentQueue = null;\n            draining = false;\n            runClearTimeout(timeout);\n          }\n\n          process.nextTick = function (fun) {\n            var args = new Array(arguments.length - 1);\n\n            if (arguments.length > 1) {\n              for (var i = 1; i < arguments.length; i++) {\n                args[i - 1] = arguments[i];\n              }\n            }\n\n            queue.push(new Item(fun, args));\n\n            if (queue.length === 1 && !draining) {\n              runTimeout(drainQueue);\n            }\n          };\n\n          function Item(fun, array) {\n            this.fun = fun;\n            this.array = array;\n          }\n\n          Item.prototype.run = function () {\n            this.fun.apply(null, this.array);\n          };\n\n          process.title = 'browser';\n          process.browser = true;\n          process.env = {};\n          process.argv = [];\n          process.version = '';\n          process.versions = {};\n\n          function noop() {}\n\n          process.on = noop;\n          process.addListener = noop;\n          process.once = noop;\n          process.off = noop;\n          process.removeListener = noop;\n          process.removeAllListeners = noop;\n          process.emit = noop;\n          process.prependListener = noop;\n          process.prependOnceListener = noop;\n\n          process.listeners = function (name) {\n            return [];\n          };\n\n          process.binding = function (name) {\n            throw new Error('process.binding is not supported');\n          };\n\n          process.cwd = function () {\n            return '/';\n          };\n\n          process.chdir = function (dir) {\n            throw new Error('process.chdir is not supported');\n          };\n\n          process.umask = function () {\n            return 0;\n          };\n        }, {}],\n        2: [function (require, module, exports) {\n          (function (setImmediate) {\n            (function (root) {\n              var setTimeoutFunc = setTimeout;\n\n              function noop() {}\n\n              function bind(fn, thisArg) {\n                return function () {\n                  fn.apply(thisArg, arguments);\n                };\n              }\n\n              function Promise(fn) {\n                if (typeof this !== 'object') throw new TypeError('Promises must be constructed via new');\n                if (typeof fn !== 'function') throw new TypeError('not a function');\n                this._state = 0;\n                this._handled = false;\n                this._value = undefined;\n                this._deferreds = [];\n                doResolve(fn, this);\n              }\n\n              function handle(self, deferred) {\n                while (self._state === 3) {\n                  self = self._value;\n                }\n\n                if (self._state === 0) {\n                  self._deferreds.push(deferred);\n\n                  return;\n                }\n\n                self._handled = true;\n\n                Promise._immediateFn(function () {\n                  var cb = self._state === 1 ? deferred.onFulfilled : deferred.onRejected;\n\n                  if (cb === null) {\n                    (self._state === 1 ? resolve : reject)(deferred.promise, self._value);\n                    return;\n                  }\n\n                  var ret;\n\n                  try {\n                    ret = cb(self._value);\n                  } catch (e) {\n                    reject(deferred.promise, e);\n                    return;\n                  }\n\n                  resolve(deferred.promise, ret);\n                });\n              }\n\n              function resolve(self, newValue) {\n                try {\n                  if (newValue === self) throw new TypeError('A promise cannot be resolved with itself.');\n\n                  if (newValue && (typeof newValue === 'object' || typeof newValue === 'function')) {\n                    var then = newValue.then;\n\n                    if (newValue instanceof Promise) {\n                      self._state = 3;\n                      self._value = newValue;\n                      finale(self);\n                      return;\n                    } else if (typeof then === 'function') {\n                      doResolve(bind(then, newValue), self);\n                      return;\n                    }\n                  }\n\n                  self._state = 1;\n                  self._value = newValue;\n                  finale(self);\n                } catch (e) {\n                  reject(self, e);\n                }\n              }\n\n              function reject(self, newValue) {\n                self._state = 2;\n                self._value = newValue;\n                finale(self);\n              }\n\n              function finale(self) {\n                if (self._state === 2 && self._deferreds.length === 0) {\n                  Promise._immediateFn(function () {\n                    if (!self._handled) {\n                      Promise._unhandledRejectionFn(self._value);\n                    }\n                  });\n                }\n\n                for (var i = 0, len = self._deferreds.length; i < len; i++) {\n                  handle(self, self._deferreds[i]);\n                }\n\n                self._deferreds = null;\n              }\n\n              function Handler(onFulfilled, onRejected, promise) {\n                this.onFulfilled = typeof onFulfilled === 'function' ? onFulfilled : null;\n                this.onRejected = typeof onRejected === 'function' ? onRejected : null;\n                this.promise = promise;\n              }\n\n              function doResolve(fn, self) {\n                var done = false;\n\n                try {\n                  fn(function (value) {\n                    if (done) return;\n                    done = true;\n                    resolve(self, value);\n                  }, function (reason) {\n                    if (done) return;\n                    done = true;\n                    reject(self, reason);\n                  });\n                } catch (ex) {\n                  if (done) return;\n                  done = true;\n                  reject(self, ex);\n                }\n              }\n\n              Promise.prototype['catch'] = function (onRejected) {\n                return this.then(null, onRejected);\n              };\n\n              Promise.prototype.then = function (onFulfilled, onRejected) {\n                var prom = new this.constructor(noop);\n                handle(this, new Handler(onFulfilled, onRejected, prom));\n                return prom;\n              };\n\n              Promise.all = function (arr) {\n                var args = Array.prototype.slice.call(arr);\n                return new Promise(function (resolve, reject) {\n                  if (args.length === 0) return resolve([]);\n                  var remaining = args.length;\n\n                  function res(i, val) {\n                    try {\n                      if (val && (typeof val === 'object' || typeof val === 'function')) {\n                        var then = val.then;\n\n                        if (typeof then === 'function') {\n                          then.call(val, function (val) {\n                            res(i, val);\n                          }, reject);\n                          return;\n                        }\n                      }\n\n                      args[i] = val;\n\n                      if (--remaining === 0) {\n                        resolve(args);\n                      }\n                    } catch (ex) {\n                      reject(ex);\n                    }\n                  }\n\n                  for (var i = 0; i < args.length; i++) {\n                    res(i, args[i]);\n                  }\n                });\n              };\n\n              Promise.resolve = function (value) {\n                if (value && typeof value === 'object' && value.constructor === Promise) {\n                  return value;\n                }\n\n                return new Promise(function (resolve) {\n                  resolve(value);\n                });\n              };\n\n              Promise.reject = function (value) {\n                return new Promise(function (resolve, reject) {\n                  reject(value);\n                });\n              };\n\n              Promise.race = function (values) {\n                return new Promise(function (resolve, reject) {\n                  for (var i = 0, len = values.length; i < len; i++) {\n                    values[i].then(resolve, reject);\n                  }\n                });\n              };\n\n              Promise._immediateFn = typeof setImmediate === 'function' ? function (fn) {\n                setImmediate(fn);\n              } : function (fn) {\n                setTimeoutFunc(fn, 0);\n              };\n\n              Promise._unhandledRejectionFn = function _unhandledRejectionFn(err) {\n                if (typeof console !== 'undefined' && console) {\n                  console.warn('Possible Unhandled Promise Rejection:', err);\n                }\n              };\n\n              Promise._setImmediateFn = function _setImmediateFn(fn) {\n                Promise._immediateFn = fn;\n              };\n\n              Promise._setUnhandledRejectionFn = function _setUnhandledRejectionFn(fn) {\n                Promise._unhandledRejectionFn = fn;\n              };\n\n              if (typeof module !== 'undefined' && module.exports) {\n                module.exports = Promise;\n              } else if (!root.Promise) {\n                root.Promise = Promise;\n              }\n            })(this);\n          }).call(this, require('timers').setImmediate);\n        }, {\n          'timers': 3\n        }],\n        3: [function (require, module, exports) {\n          (function (setImmediate, clearImmediate) {\n            var nextTick = require('process/browser.js').nextTick;\n\n            var apply = Function.prototype.apply;\n            var slice = Array.prototype.slice;\n            var immediateIds = {};\n            var nextImmediateId = 0;\n\n            exports.setTimeout = function () {\n              return new Timeout(apply.call(setTimeout, window, arguments), clearTimeout);\n            };\n\n            exports.setInterval = function () {\n              return new Timeout(apply.call(setInterval, window, arguments), clearInterval);\n            };\n\n            exports.clearTimeout = exports.clearInterval = function (timeout) {\n              timeout.close();\n            };\n\n            function Timeout(id, clearFn) {\n              this._id = id;\n              this._clearFn = clearFn;\n            }\n\n            Timeout.prototype.unref = Timeout.prototype.ref = function () {};\n\n            Timeout.prototype.close = function () {\n              this._clearFn.call(window, this._id);\n            };\n\n            exports.enroll = function (item, msecs) {\n              clearTimeout(item._idleTimeoutId);\n              item._idleTimeout = msecs;\n            };\n\n            exports.unenroll = function (item) {\n              clearTimeout(item._idleTimeoutId);\n              item._idleTimeout = -1;\n            };\n\n            exports._unrefActive = exports.active = function (item) {\n              clearTimeout(item._idleTimeoutId);\n              var msecs = item._idleTimeout;\n\n              if (msecs >= 0) {\n                item._idleTimeoutId = setTimeout(function onTimeout() {\n                  if (item._onTimeout) item._onTimeout();\n                }, msecs);\n              }\n            };\n\n            exports.setImmediate = typeof setImmediate === 'function' ? setImmediate : function (fn) {\n              var id = nextImmediateId++;\n              var args = arguments.length < 2 ? false : slice.call(arguments, 1);\n              immediateIds[id] = true;\n              nextTick(function onNextTick() {\n                if (immediateIds[id]) {\n                  if (args) {\n                    fn.apply(null, args);\n                  } else {\n                    fn.call(null);\n                  }\n\n                  exports.clearImmediate(id);\n                }\n              });\n              return id;\n            };\n            exports.clearImmediate = typeof clearImmediate === 'function' ? clearImmediate : function (id) {\n              delete immediateIds[id];\n            };\n          }).call(this, require('timers').setImmediate, require('timers').clearImmediate);\n        }, {\n          'process/browser.js': 1,\n          'timers': 3\n        }],\n        4: [function (require, module, exports) {\n          var promisePolyfill = require('promise-polyfill');\n\n          var Global = function () {\n            if (typeof window !== 'undefined') {\n              return window;\n            } else {\n              return Function('return this;')();\n            }\n          }();\n\n          module.exports = {\n            boltExport: Global.Promise || promisePolyfill\n          };\n        }, {\n          'promise-polyfill': 2\n        }]\n      }, {}, [4])(4);\n    });\n  })(undefined, exports$1, module, undefined);\n\n  var Promise = module.exports.boltExport;\n\n  var nu = function nu(baseFn) {\n    var data = Option.none();\n    var callbacks = [];\n\n    var map = function map(f) {\n      return nu(function (nCallback) {\n        get(function (data) {\n          nCallback(f(data));\n        });\n      });\n    };\n\n    var get = function get(nCallback) {\n      if (isReady()) {\n        call(nCallback);\n      } else {\n        callbacks.push(nCallback);\n      }\n    };\n\n    var set = function set(x) {\n      data = Option.some(x);\n      run(callbacks);\n      callbacks = [];\n    };\n\n    var isReady = function isReady() {\n      return data.isSome();\n    };\n\n    var run = function run(cbs) {\n      each(cbs, call);\n    };\n\n    var call = function call(cb) {\n      data.each(function (x) {\n        domGlobals.setTimeout(function () {\n          cb(x);\n        }, 0);\n      });\n    };\n\n    baseFn(set);\n    return {\n      get: get,\n      map: map,\n      isReady: isReady\n    };\n  };\n\n  var pure = function pure(a) {\n    return nu(function (callback) {\n      callback(a);\n    });\n  };\n\n  var LazyValue = {\n    nu: nu,\n    pure: pure\n  };\n\n  var errorReporter = function errorReporter(err) {\n    domGlobals.setTimeout(function () {\n      throw err;\n    }, 0);\n  };\n\n  var make = function make(run) {\n    var get = function get(callback) {\n      run().then(callback, errorReporter);\n    };\n\n    var map = function map(fab) {\n      return make(function () {\n        return run().then(fab);\n      });\n    };\n\n    var bind = function bind(aFutureB) {\n      return make(function () {\n        return run().then(function (v) {\n          return aFutureB(v).toPromise();\n        });\n      });\n    };\n\n    var anonBind = function anonBind(futureB) {\n      return make(function () {\n        return run().then(function () {\n          return futureB.toPromise();\n        });\n      });\n    };\n\n    var toLazy = function toLazy() {\n      return LazyValue.nu(get);\n    };\n\n    var toCached = function toCached() {\n      var cache = null;\n      return make(function () {\n        if (cache === null) {\n          cache = run();\n        }\n\n        return cache;\n      });\n    };\n\n    var toPromise = run;\n    return {\n      map: map,\n      bind: bind,\n      anonBind: anonBind,\n      toLazy: toLazy,\n      toCached: toCached,\n      toPromise: toPromise,\n      get: get\n    };\n  };\n\n  var nu$1 = function nu$1(baseFn) {\n    return make(function () {\n      return new Promise(baseFn);\n    });\n  };\n\n  var pure$1 = function pure$1(a) {\n    return make(function () {\n      return Promise.resolve(a);\n    });\n  };\n\n  var Future = {\n    nu: nu$1,\n    pure: pure$1\n  };\n  var global$4 = tinymce.util.Tools.resolve('tinymce.util.Delay');\n\n  var delayedConfirm = function delayedConfirm(editor, message, callback) {\n    var rng = editor.selection.getRng();\n    global$4.setEditorTimeout(editor, function () {\n      editor.windowManager.confirm(message, function (state) {\n        editor.selection.setRng(rng);\n        callback(state);\n      });\n    });\n  };\n\n  var tryEmailTransform = function tryEmailTransform(data) {\n    var url = data.href;\n    var suggestMailTo = url.indexOf('@') > 0 && url.indexOf('//') === -1 && url.indexOf('mailto:') === -1;\n    return suggestMailTo ? Option.some({\n      message: 'The URL you entered seems to be an email address. Do you want to add the required mailto: prefix?',\n      preprocess: function preprocess(oldData) {\n        return _assign(_assign({}, oldData), {\n          href: 'mailto:' + url\n        });\n      }\n    }) : Option.none();\n  };\n\n  var tryProtocolTransform = function tryProtocolTransform(assumeExternalTargets) {\n    return function (data) {\n      var url = data.href;\n      var suggestProtocol = assumeExternalTargets === 1 && !Utils.hasProtocol(url) || assumeExternalTargets === 0 && /^\\s*www[\\.|\\d\\.]/i.test(url);\n      return suggestProtocol ? Option.some({\n        message: 'The URL you entered seems to be an external link. Do you want to add the required http:// prefix?',\n        preprocess: function preprocess(oldData) {\n          return _assign(_assign({}, oldData), {\n            href: 'http://' + url\n          });\n        }\n      }) : Option.none();\n    };\n  };\n\n  var preprocess = function preprocess(editor, assumeExternalTargets, data) {\n    return findMap([tryEmailTransform, tryProtocolTransform(assumeExternalTargets)], function (f) {\n      return f(data);\n    }).fold(function () {\n      return Future.pure(data);\n    }, function (transform) {\n      return Future.nu(function (callback) {\n        delayedConfirm(editor, transform.message, function (state) {\n          callback(state ? transform.preprocess(data) : data);\n        });\n      });\n    });\n  };\n\n  var DialogConfirms = {\n    preprocess: preprocess\n  };\n\n  var getAnchors = function getAnchors(editor) {\n    var anchorNodes = editor.dom.select('a:not([href])');\n    var anchors = bind(anchorNodes, function (anchor) {\n      var id = anchor.name || anchor.id;\n      return id ? [{\n        text: id,\n        value: '#' + id\n      }] : [];\n    });\n    return anchors.length > 0 ? Option.some([{\n      text: 'None',\n      value: ''\n    }].concat(anchors)) : Option.none();\n  };\n\n  var AnchorListOptions = {\n    getAnchors: getAnchors\n  };\n\n  var getClasses = function getClasses(editor) {\n    var list = Settings.getLinkClassList(editor);\n\n    if (list.length > 0) {\n      return ListOptions.sanitize(list);\n    }\n\n    return Option.none();\n  };\n\n  var ClassListOptions = {\n    getClasses: getClasses\n  };\n  var global$5 = tinymce.util.Tools.resolve('tinymce.util.XHR');\n\n  var parseJson = function parseJson(text) {\n    try {\n      return Option.some(JSON.parse(text));\n    } catch (err) {\n      return Option.none();\n    }\n  };\n\n  var getLinks = function getLinks(editor) {\n    var extractor = function extractor(item) {\n      return editor.convertURL(item.value || item.url, 'href');\n    };\n\n    var linkList = Settings.getLinkList(editor);\n    return Future.nu(function (callback) {\n      if (isString(linkList)) {\n        global$5.send({\n          url: linkList,\n          success: function success(text) {\n            return callback(parseJson(text));\n          },\n          error: function error(_) {\n            return callback(Option.none());\n          }\n        });\n      } else if (isFunction(linkList)) {\n        linkList(function (output) {\n          return callback(Option.some(output));\n        });\n      } else {\n        callback(Option.from(linkList));\n      }\n    }).map(function (optItems) {\n      return optItems.bind(ListOptions.sanitizeWith(extractor)).map(function (items) {\n        if (items.length > 0) {\n          return [{\n            text: 'None',\n            value: ''\n          }].concat(items);\n        } else {\n          return items;\n        }\n      });\n    });\n  };\n\n  var LinkListOptions = {\n    getLinks: getLinks\n  };\n\n  var getRels = function getRels(editor, initialTarget) {\n    var list = Settings.getRelList(editor);\n\n    if (list.length > 0) {\n      var isTargetBlank_1 = initialTarget.is('_blank');\n      var enforceSafe = Settings.allowUnsafeLinkTarget(editor) === false;\n\n      var safeRelExtractor = function safeRelExtractor(item) {\n        return Utils.applyRelTargetRules(ListOptions.getValue(item), isTargetBlank_1);\n      };\n\n      var sanitizer = enforceSafe ? ListOptions.sanitizeWith(safeRelExtractor) : ListOptions.sanitize;\n      return sanitizer(list);\n    }\n\n    return Option.none();\n  };\n\n  var RelOptions = {\n    getRels: getRels\n  };\n  var fallbacks = [{\n    text: 'Current window',\n    value: ''\n  }, {\n    text: 'New window',\n    value: '_blank'\n  }];\n\n  var getTargets = function getTargets(editor) {\n    var list = Settings.getTargetList(editor);\n\n    if (isArray(list)) {\n      return ListOptions.sanitize(list).orThunk(function () {\n        return Option.some(fallbacks);\n      });\n    } else if (list === false) {\n      return Option.none();\n    }\n\n    return Option.some(fallbacks);\n  };\n\n  var TargetOptions = {\n    getTargets: getTargets\n  };\n\n  var nonEmptyAttr = function nonEmptyAttr(dom, elem, name) {\n    var val = dom.getAttrib(elem, name);\n    return val !== null && val.length > 0 ? Option.some(val) : Option.none();\n  };\n\n  var extractFromAnchor = function extractFromAnchor(editor, anchor) {\n    var dom = editor.dom;\n    var onlyText = Utils.isOnlyTextSelected(editor.selection.getContent());\n    var text = onlyText ? Option.some(Utils.getAnchorText(editor.selection, anchor)) : Option.none();\n    var url = anchor ? Option.some(dom.getAttrib(anchor, 'href')) : Option.none();\n    var target = anchor ? Option.from(dom.getAttrib(anchor, 'target')) : Option.none();\n    var rel = nonEmptyAttr(dom, anchor, 'rel');\n    var linkClass = nonEmptyAttr(dom, anchor, 'class');\n    var title = nonEmptyAttr(dom, anchor, 'title');\n    return {\n      url: url,\n      text: text,\n      title: title,\n      target: target,\n      rel: rel,\n      linkClass: linkClass\n    };\n  };\n\n  var collect = function collect(editor, linkNode) {\n    return LinkListOptions.getLinks(editor).map(function (links) {\n      var anchor = extractFromAnchor(editor, linkNode);\n      return {\n        anchor: anchor,\n        catalogs: {\n          targets: TargetOptions.getTargets(editor),\n          rels: RelOptions.getRels(editor, anchor.target),\n          classes: ClassListOptions.getClasses(editor),\n          anchor: AnchorListOptions.getAnchors(editor),\n          link: links\n        },\n        optNode: Option.from(linkNode),\n        flags: {\n          titleEnabled: Settings.shouldShowLinkTitle(editor)\n        }\n      };\n    });\n  };\n\n  var DialogInfo = {\n    collect: collect\n  };\n\n  var handleSubmit = function handleSubmit(editor, info, assumeExternalTargets) {\n    return function (api) {\n      var data = api.getData();\n\n      if (!data.url.value) {\n        Utils.unlink(editor);\n        api.close();\n        return;\n      }\n\n      var getChangedValue = function getChangedValue(key) {\n        return Option.from(data[key]).filter(function (value) {\n          return !info.anchor[key].is(value);\n        });\n      };\n\n      var changedData = {\n        href: data.url.value,\n        text: getChangedValue('text'),\n        target: getChangedValue('target'),\n        rel: getChangedValue('rel'),\n        \"class\": getChangedValue('linkClass'),\n        title: getChangedValue('title')\n      };\n      var attachState = {\n        href: data.url.value,\n        attach: data.url.meta !== undefined && data.url.meta.attach ? data.url.meta.attach : function () {}\n      };\n      DialogConfirms.preprocess(editor, assumeExternalTargets, changedData).get(function (pData) {\n        Utils.link(editor, attachState, pData);\n      });\n      api.close();\n    };\n  };\n\n  var collectData = function collectData(editor) {\n    var anchorNode = Utils.getAnchorElement(editor);\n    return DialogInfo.collect(editor, anchorNode);\n  };\n\n  var getInitialData = function getInitialData(info, defaultTarget) {\n    return {\n      url: {\n        value: info.anchor.url.getOr(''),\n        meta: {\n          attach: function attach() {},\n          text: info.anchor.url.fold(function () {\n            return '';\n          }, function () {\n            return info.anchor.text.getOr('');\n          }),\n          original: {\n            value: info.anchor.url.getOr('')\n          }\n        }\n      },\n      text: info.anchor.text.getOr(''),\n      title: info.anchor.title.getOr(''),\n      anchor: info.anchor.url.getOr(''),\n      link: info.anchor.url.getOr(''),\n      rel: info.anchor.rel.getOr(''),\n      target: info.anchor.target.or(defaultTarget).getOr(''),\n      linkClass: info.anchor.linkClass.getOr('')\n    };\n  };\n\n  var makeDialog = function makeDialog(settings, onSubmit, editor) {\n    var urlInput = [{\n      name: 'url',\n      type: 'urlinput',\n      filetype: 'file',\n      label: 'URL'\n    }];\n    var displayText = settings.anchor.text.map(function () {\n      return {\n        name: 'text',\n        type: 'input',\n        label: 'Text to display'\n      };\n    }).toArray();\n    var titleText = settings.flags.titleEnabled ? [{\n      name: 'title',\n      type: 'input',\n      label: 'Title'\n    }] : [];\n    var defaultTarget = Option.from(Settings.getDefaultLinkTarget(editor));\n    var initialData = getInitialData(settings, defaultTarget);\n    var dialogDelta = DialogChanges.init(initialData, settings);\n    var catalogs = settings.catalogs;\n    var body = {\n      type: 'panel',\n      items: flatten([urlInput, displayText, titleText, cat([catalogs.anchor.map(ListOptions.createUi('anchor', 'Anchors')), catalogs.rels.map(ListOptions.createUi('rel', 'Rel')), catalogs.targets.map(ListOptions.createUi('target', 'Open link in...')), catalogs.link.map(ListOptions.createUi('link', 'Link list')), catalogs.classes.map(ListOptions.createUi('linkClass', 'Class'))])])\n    };\n    return {\n      title: 'Insert/Edit Link',\n      size: 'normal',\n      body: body,\n      buttons: [{\n        type: 'cancel',\n        name: 'cancel',\n        text: 'Cancel'\n      }, {\n        type: 'submit',\n        name: 'save',\n        text: 'Save',\n        primary: true\n      }],\n      initialData: initialData,\n      onChange: function onChange(api, _a) {\n        var name = _a.name;\n        dialogDelta.onChange(api.getData, {\n          name: name\n        }).each(function (newData) {\n          api.setData(newData);\n        });\n      },\n      onSubmit: onSubmit\n    };\n  };\n\n  var open$1 = function open$1(editor) {\n    var data = collectData(editor);\n    data.map(function (info) {\n      var onSubmit = handleSubmit(editor, info, Settings.assumeExternalTargets(editor));\n      return makeDialog(info, onSubmit, editor);\n    }).get(function (spec) {\n      editor.windowManager.open(spec);\n    });\n  };\n\n  var Dialog = {\n    open: open$1\n  };\n\n  var getLink = function getLink(editor, elm) {\n    return editor.dom.getParent(elm, 'a[href]');\n  };\n\n  var getSelectedLink = function getSelectedLink(editor) {\n    return getLink(editor, editor.selection.getStart());\n  };\n\n  var hasOnlyAltModifier = function hasOnlyAltModifier(e) {\n    return e.altKey === true && e.shiftKey === false && e.ctrlKey === false && e.metaKey === false;\n  };\n\n  var gotoLink = function gotoLink(editor, a) {\n    if (a) {\n      var href = Utils.getHref(a);\n\n      if (/^#/.test(href)) {\n        var targetEl = editor.$(href);\n\n        if (targetEl.length) {\n          editor.selection.scrollIntoView(targetEl[0], true);\n        }\n      } else {\n        OpenUrl.open(a.href);\n      }\n    }\n  };\n\n  var openDialog = function openDialog(editor) {\n    return function () {\n      Dialog.open(editor);\n    };\n  };\n\n  var gotoSelectedLink = function gotoSelectedLink(editor) {\n    return function () {\n      gotoLink(editor, getSelectedLink(editor));\n    };\n  };\n\n  var leftClickedOnAHref = function leftClickedOnAHref(editor) {\n    return function (elm) {\n      var sel, rng, node;\n\n      if (Settings.hasContextToolbar(editor) && Utils.isLink(elm)) {\n        sel = editor.selection;\n        rng = sel.getRng();\n        node = rng.startContainer;\n\n        if (node.nodeType === 3 && sel.isCollapsed() && rng.startOffset > 0 && rng.startOffset < node.data.length) {\n          return true;\n        }\n      }\n\n      return false;\n    };\n  };\n\n  var setupGotoLinks = function setupGotoLinks(editor) {\n    editor.on('click', function (e) {\n      var link = getLink(editor, e.target);\n\n      if (link && global$2.metaKeyPressed(e)) {\n        e.preventDefault();\n        gotoLink(editor, link);\n      }\n    });\n    editor.on('keydown', function (e) {\n      var link = getSelectedLink(editor);\n\n      if (link && e.keyCode === 13 && hasOnlyAltModifier(e)) {\n        e.preventDefault();\n        gotoLink(editor, link);\n      }\n    });\n  };\n\n  var toggleActiveState = function toggleActiveState(editor) {\n    return function (api) {\n      var nodeChangeHandler = function nodeChangeHandler(e) {\n        return api.setActive(!editor.readonly && !!Utils.getAnchorElement(editor, e.element));\n      };\n\n      editor.on('NodeChange', nodeChangeHandler);\n      return function () {\n        return editor.off('NodeChange', nodeChangeHandler);\n      };\n    };\n  };\n\n  var toggleEnabledState = function toggleEnabledState(editor) {\n    return function (api) {\n      api.setDisabled(!Utils.hasLinks(editor.dom.getParents(editor.selection.getStart())));\n\n      var nodeChangeHandler = function nodeChangeHandler(e) {\n        return api.setDisabled(!Utils.hasLinks(e.parents));\n      };\n\n      editor.on('NodeChange', nodeChangeHandler);\n      return function () {\n        return editor.off('NodeChange', nodeChangeHandler);\n      };\n    };\n  };\n\n  var Actions = {\n    openDialog: openDialog,\n    gotoSelectedLink: gotoSelectedLink,\n    leftClickedOnAHref: leftClickedOnAHref,\n    setupGotoLinks: setupGotoLinks,\n    toggleActiveState: toggleActiveState,\n    toggleEnabledState: toggleEnabledState\n  };\n\n  var register = function register(editor) {\n    editor.addCommand('mceLink', function () {\n      if (Settings.useQuickLink(editor)) {\n        editor.fire('contexttoolbar-show', {\n          toolbarKey: 'quicklink'\n        });\n      } else {\n        Actions.openDialog(editor)();\n      }\n    });\n  };\n\n  var Commands = {\n    register: register\n  };\n\n  var setup = function setup(editor) {\n    editor.addShortcut('Meta+K', '', function () {\n      editor.execCommand('mceLink');\n    });\n  };\n\n  var Keyboard = {\n    setup: setup\n  };\n\n  var setupButtons = function setupButtons(editor) {\n    editor.ui.registry.addToggleButton('link', {\n      icon: 'link',\n      tooltip: 'Insert/edit link',\n      onAction: Actions.openDialog(editor),\n      onSetup: Actions.toggleActiveState(editor)\n    });\n    editor.ui.registry.addButton('openlink', {\n      icon: 'new-tab',\n      tooltip: 'Open link',\n      onAction: Actions.gotoSelectedLink(editor),\n      onSetup: Actions.toggleEnabledState(editor)\n    });\n    editor.ui.registry.addButton('unlink', {\n      icon: 'unlink',\n      tooltip: 'Remove link',\n      onAction: function onAction() {\n        return Utils.unlink(editor);\n      },\n      onSetup: Actions.toggleEnabledState(editor)\n    });\n  };\n\n  var setupMenuItems = function setupMenuItems(editor) {\n    editor.ui.registry.addMenuItem('openlink', {\n      text: 'Open link',\n      icon: 'new-tab',\n      onAction: Actions.gotoSelectedLink(editor),\n      onSetup: Actions.toggleEnabledState(editor)\n    });\n    editor.ui.registry.addMenuItem('link', {\n      icon: 'link',\n      text: 'Link...',\n      shortcut: 'Meta+K',\n      onAction: Actions.openDialog(editor)\n    });\n    editor.ui.registry.addMenuItem('unlink', {\n      icon: 'unlink',\n      text: 'Remove link',\n      onAction: function onAction() {\n        return Utils.unlink(editor);\n      },\n      onSetup: Actions.toggleEnabledState(editor)\n    });\n  };\n\n  var setupContextMenu = function setupContextMenu(editor) {\n    var inLink = 'link unlink openlink';\n    var noLink = 'link';\n    editor.ui.registry.addContextMenu('link', {\n      update: function update(element) {\n        return Utils.hasLinks(editor.dom.getParents(element, 'a')) ? inLink : noLink;\n      }\n    });\n  };\n\n  var setupContextToolbars = function setupContextToolbars(editor) {\n    var collapseSelectionToEnd = function collapseSelectionToEnd(editor) {\n      editor.selection.collapse(false);\n    };\n\n    var onSetupLink = function onSetupLink(buttonApi) {\n      var node = editor.selection.getNode();\n      buttonApi.setDisabled(!Utils.getAnchorElement(editor, node));\n      return function () {};\n    };\n\n    editor.ui.registry.addContextForm('quicklink', {\n      launch: {\n        type: 'contextformtogglebutton',\n        icon: 'link',\n        tooltip: 'Link',\n        onSetup: Actions.toggleActiveState(editor)\n      },\n      label: 'Link',\n      predicate: function predicate(node) {\n        return !!Utils.getAnchorElement(editor, node) && Settings.hasContextToolbar(editor);\n      },\n      initValue: function initValue() {\n        var elm = Utils.getAnchorElement(editor);\n        return !!elm ? Utils.getHref(elm) : '';\n      },\n      commands: [{\n        type: 'contextformtogglebutton',\n        icon: 'link',\n        tooltip: 'Link',\n        primary: true,\n        onSetup: function onSetup(buttonApi) {\n          var node = editor.selection.getNode();\n          buttonApi.setActive(!!Utils.getAnchorElement(editor, node));\n          return Actions.toggleActiveState(editor)(buttonApi);\n        },\n        onAction: function onAction(formApi) {\n          var anchor = Utils.getAnchorElement(editor);\n          var value = formApi.getValue();\n\n          if (!anchor) {\n            var attachState = {\n              href: value,\n              attach: function attach() {}\n            };\n            var onlyText = Utils.isOnlyTextSelected(editor.selection.getContent());\n            var text = onlyText ? Option.some(Utils.getAnchorText(editor.selection, anchor)).filter(function (t) {\n              return t.length > 0;\n            }).or(Option.from(value)) : Option.none();\n            Utils.link(editor, attachState, {\n              href: value,\n              text: text,\n              title: Option.none(),\n              rel: Option.none(),\n              target: Option.none(),\n              \"class\": Option.none()\n            });\n            formApi.hide();\n          } else {\n            editor.dom.setAttrib(anchor, 'href', value);\n            collapseSelectionToEnd(editor);\n            formApi.hide();\n          }\n        }\n      }, {\n        type: 'contextformbutton',\n        icon: 'unlink',\n        tooltip: 'Remove link',\n        onSetup: onSetupLink,\n        onAction: function onAction(formApi) {\n          Utils.unlink(editor);\n          formApi.hide();\n        }\n      }, {\n        type: 'contextformbutton',\n        icon: 'new-tab',\n        tooltip: 'Open link',\n        onSetup: onSetupLink,\n        onAction: function onAction(formApi) {\n          Actions.gotoSelectedLink(editor)();\n          formApi.hide();\n        }\n      }]\n    });\n  };\n\n  var Controls = {\n    setupButtons: setupButtons,\n    setupMenuItems: setupMenuItems,\n    setupContextMenu: setupContextMenu,\n    setupContextToolbars: setupContextToolbars\n  };\n\n  function Plugin() {\n    global$1.add('link', function (editor) {\n      Controls.setupButtons(editor);\n      Controls.setupMenuItems(editor);\n      Controls.setupContextMenu(editor);\n      Controls.setupContextToolbars(editor);\n      Actions.setupGotoLinks(editor);\n      Commands.register(editor);\n      Keyboard.setup(editor);\n    });\n  }\n\n  Plugin();\n})(window);","require(\"core-js/modules/es6.array.filter\");\n\nrequire(\"core-js/modules/es6.regexp.split\");\n\nrequire(\"core-js/modules/es6.regexp.replace\");\n\nrequire(\"core-js/modules/es6.array.map\");\n\nrequire(\"core-js/modules/es6.function.bind\");\n\nrequire(\"core-js/modules/web.dom.iterable\");\n\nrequire(\"core-js/modules/es6.array.iterator\");\n\nrequire(\"core-js/modules/es6.object.to-string\");\n\nrequire(\"core-js/modules/es6.object.assign\");\n\nrequire(\"core-js/modules/es6.string.iterator\");\n\nrequire(\"core-js/modules/es6.array.from\");\n\nrequire(\"core-js/modules/es6.array.some\");\n\nrequire(\"core-js/modules/es6.function.name\");\n\nrequire(\"core-js/modules/es6.object.freeze\");\n\n/**\n * Copyright (c) Tiny Technologies, Inc. All rights reserved.\n * Licensed under the LGPL or a commercial license.\n * For LGPL see License.txt in the project root for license information.\n * For commercial licenses see https://www.tiny.cloud/\n *\n * Version: 5.1.3 (2019-12-04)\n */\n(function (domGlobals) {\n  'use strict';\n\n  var global$1 = tinymce.util.Tools.resolve('tinymce.PluginManager');\n\n  var noop = function noop() {};\n\n  var constant = function constant(value) {\n    return function () {\n      return value;\n    };\n  };\n\n  var identity = function identity(x) {\n    return x;\n  };\n\n  var die = function die(msg) {\n    return function () {\n      throw new Error(msg);\n    };\n  };\n\n  var never = constant(false);\n  var always = constant(true);\n\n  var none = function none() {\n    return NONE;\n  };\n\n  var NONE = function () {\n    var eq = function eq(o) {\n      return o.isNone();\n    };\n\n    var call = function call(thunk) {\n      return thunk();\n    };\n\n    var id = function id(n) {\n      return n;\n    };\n\n    var me = {\n      fold: function fold(n, s) {\n        return n();\n      },\n      is: never,\n      isSome: never,\n      isNone: always,\n      getOr: id,\n      getOrThunk: call,\n      getOrDie: function getOrDie(msg) {\n        throw new Error(msg || 'error: getOrDie called on none.');\n      },\n      getOrNull: constant(null),\n      getOrUndefined: constant(undefined),\n      or: id,\n      orThunk: call,\n      map: none,\n      each: noop,\n      bind: none,\n      exists: never,\n      forall: always,\n      filter: none,\n      equals: eq,\n      equals_: eq,\n      toArray: function toArray() {\n        return [];\n      },\n      toString: constant('none()')\n    };\n\n    if (Object.freeze) {\n      Object.freeze(me);\n    }\n\n    return me;\n  }();\n\n  var some = function some(a) {\n    var constant_a = constant(a);\n\n    var self = function self() {\n      return me;\n    };\n\n    var bind = function bind(f) {\n      return f(a);\n    };\n\n    var me = {\n      fold: function fold(n, s) {\n        return s(a);\n      },\n      is: function is(v) {\n        return a === v;\n      },\n      isSome: always,\n      isNone: never,\n      getOr: constant_a,\n      getOrThunk: constant_a,\n      getOrDie: constant_a,\n      getOrNull: constant_a,\n      getOrUndefined: constant_a,\n      or: self,\n      orThunk: self,\n      map: function map(f) {\n        return some(f(a));\n      },\n      each: function each(f) {\n        f(a);\n      },\n      bind: bind,\n      exists: bind,\n      forall: bind,\n      filter: function filter(f) {\n        return f(a) ? me : NONE;\n      },\n      toArray: function toArray() {\n        return [a];\n      },\n      toString: function toString() {\n        return 'some(' + a + ')';\n      },\n      equals: function equals(o) {\n        return o.is(a);\n      },\n      equals_: function equals_(o, elementEq) {\n        return o.fold(never, function (b) {\n          return elementEq(a, b);\n        });\n      }\n    };\n    return me;\n  };\n\n  var from = function from(value) {\n    return value === null || value === undefined ? NONE : some(value);\n  };\n\n  var Option = {\n    some: some,\n    none: none,\n    from: from\n  };\n\n  var typeOf = function typeOf(x) {\n    if (x === null) {\n      return 'null';\n    }\n\n    var t = typeof x;\n\n    if (t === 'object' && (Array.prototype.isPrototypeOf(x) || x.constructor && x.constructor.name === 'Array')) {\n      return 'array';\n    }\n\n    if (t === 'object' && (String.prototype.isPrototypeOf(x) || x.constructor && x.constructor.name === 'String')) {\n      return 'string';\n    }\n\n    return t;\n  };\n\n  var isType = function isType(type) {\n    return function (value) {\n      return typeOf(value) === type;\n    };\n  };\n\n  var isString = isType('string');\n  var isObject = isType('object');\n  var isArray = isType('array');\n  var isBoolean = isType('boolean');\n  var isFunction = isType('function');\n  var nativeSlice = Array.prototype.slice;\n  var nativePush = Array.prototype.push;\n\n  var each = function each(xs, f) {\n    for (var i = 0, len = xs.length; i < len; i++) {\n      var x = xs[i];\n      f(x, i);\n    }\n  };\n\n  var flatten = function flatten(xs) {\n    var r = [];\n\n    for (var i = 0, len = xs.length; i < len; ++i) {\n      if (!isArray(xs[i])) {\n        throw new Error('Arr.flatten item ' + i + ' was not an array, input: ' + xs);\n      }\n\n      nativePush.apply(r, xs[i]);\n    }\n\n    return r;\n  };\n\n  var head = function head(xs) {\n    return xs.length === 0 ? Option.none() : Option.some(xs[0]);\n  };\n\n  var from$1 = isFunction(Array.from) ? Array.from : function (x) {\n    return nativeSlice.call(x);\n  };\n\n  var _assign = function __assign() {\n    _assign = Object.assign || function __assign(t) {\n      for (var s, i = 1, n = arguments.length; i < n; i++) {\n        s = arguments[i];\n\n        for (var p in s) {\n          if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n        }\n      }\n\n      return t;\n    };\n\n    return _assign.apply(this, arguments);\n  };\n\n  var exports$1 = {},\n      module = {\n    exports: exports$1\n  };\n\n  (function (define, exports, module, require) {\n    (function (f) {\n      if (typeof exports === 'object' && typeof module !== 'undefined') {\n        module.exports = f();\n      } else if (typeof define === 'function' && define.amd) {\n        define([], f);\n      } else {\n        var g;\n\n        if (typeof window !== 'undefined') {\n          g = window;\n        } else if (typeof global !== 'undefined') {\n          g = global;\n        } else if (typeof self !== 'undefined') {\n          g = self;\n        } else {\n          g = this;\n        }\n\n        g.EphoxContactWrapper = f();\n      }\n    })(function () {\n      return function () {\n        function r(e, n, t) {\n          function o(i, f) {\n            if (!n[i]) {\n              if (!e[i]) {\n                var c = 'function' == typeof require && require;\n                if (!f && c) return c(i, !0);\n                if (u) return u(i, !0);\n                var a = new Error('Cannot find module \\'' + i + '\\'');\n                throw a.code = 'MODULE_NOT_FOUND', a;\n              }\n\n              var p = n[i] = {\n                exports: {}\n              };\n              e[i][0].call(p.exports, function (r) {\n                var n = e[i][1][r];\n                return o(n || r);\n              }, p, p.exports, r, e, n, t);\n            }\n\n            return n[i].exports;\n          }\n\n          for (var u = 'function' == typeof require && require, i = 0; i < t.length; i++) {\n            o(t[i]);\n          }\n\n          return o;\n        }\n\n        return r;\n      }()({\n        1: [function (require, module, exports) {\n          var process = module.exports = {};\n          var cachedSetTimeout;\n          var cachedClearTimeout;\n\n          function defaultSetTimout() {\n            throw new Error('setTimeout has not been defined');\n          }\n\n          function defaultClearTimeout() {\n            throw new Error('clearTimeout has not been defined');\n          }\n\n          (function () {\n            try {\n              if (typeof setTimeout === 'function') {\n                cachedSetTimeout = setTimeout;\n              } else {\n                cachedSetTimeout = defaultSetTimout;\n              }\n            } catch (e) {\n              cachedSetTimeout = defaultSetTimout;\n            }\n\n            try {\n              if (typeof clearTimeout === 'function') {\n                cachedClearTimeout = clearTimeout;\n              } else {\n                cachedClearTimeout = defaultClearTimeout;\n              }\n            } catch (e) {\n              cachedClearTimeout = defaultClearTimeout;\n            }\n          })();\n\n          function runTimeout(fun) {\n            if (cachedSetTimeout === setTimeout) {\n              return setTimeout(fun, 0);\n            }\n\n            if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n              cachedSetTimeout = setTimeout;\n              return setTimeout(fun, 0);\n            }\n\n            try {\n              return cachedSetTimeout(fun, 0);\n            } catch (e) {\n              try {\n                return cachedSetTimeout.call(null, fun, 0);\n              } catch (e) {\n                return cachedSetTimeout.call(this, fun, 0);\n              }\n            }\n          }\n\n          function runClearTimeout(marker) {\n            if (cachedClearTimeout === clearTimeout) {\n              return clearTimeout(marker);\n            }\n\n            if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n              cachedClearTimeout = clearTimeout;\n              return clearTimeout(marker);\n            }\n\n            try {\n              return cachedClearTimeout(marker);\n            } catch (e) {\n              try {\n                return cachedClearTimeout.call(null, marker);\n              } catch (e) {\n                return cachedClearTimeout.call(this, marker);\n              }\n            }\n          }\n\n          var queue = [];\n          var draining = false;\n          var currentQueue;\n          var queueIndex = -1;\n\n          function cleanUpNextTick() {\n            if (!draining || !currentQueue) {\n              return;\n            }\n\n            draining = false;\n\n            if (currentQueue.length) {\n              queue = currentQueue.concat(queue);\n            } else {\n              queueIndex = -1;\n            }\n\n            if (queue.length) {\n              drainQueue();\n            }\n          }\n\n          function drainQueue() {\n            if (draining) {\n              return;\n            }\n\n            var timeout = runTimeout(cleanUpNextTick);\n            draining = true;\n            var len = queue.length;\n\n            while (len) {\n              currentQueue = queue;\n              queue = [];\n\n              while (++queueIndex < len) {\n                if (currentQueue) {\n                  currentQueue[queueIndex].run();\n                }\n              }\n\n              queueIndex = -1;\n              len = queue.length;\n            }\n\n            currentQueue = null;\n            draining = false;\n            runClearTimeout(timeout);\n          }\n\n          process.nextTick = function (fun) {\n            var args = new Array(arguments.length - 1);\n\n            if (arguments.length > 1) {\n              for (var i = 1; i < arguments.length; i++) {\n                args[i - 1] = arguments[i];\n              }\n            }\n\n            queue.push(new Item(fun, args));\n\n            if (queue.length === 1 && !draining) {\n              runTimeout(drainQueue);\n            }\n          };\n\n          function Item(fun, array) {\n            this.fun = fun;\n            this.array = array;\n          }\n\n          Item.prototype.run = function () {\n            this.fun.apply(null, this.array);\n          };\n\n          process.title = 'browser';\n          process.browser = true;\n          process.env = {};\n          process.argv = [];\n          process.version = '';\n          process.versions = {};\n\n          function noop() {}\n\n          process.on = noop;\n          process.addListener = noop;\n          process.once = noop;\n          process.off = noop;\n          process.removeListener = noop;\n          process.removeAllListeners = noop;\n          process.emit = noop;\n          process.prependListener = noop;\n          process.prependOnceListener = noop;\n\n          process.listeners = function (name) {\n            return [];\n          };\n\n          process.binding = function (name) {\n            throw new Error('process.binding is not supported');\n          };\n\n          process.cwd = function () {\n            return '/';\n          };\n\n          process.chdir = function (dir) {\n            throw new Error('process.chdir is not supported');\n          };\n\n          process.umask = function () {\n            return 0;\n          };\n        }, {}],\n        2: [function (require, module, exports) {\n          (function (setImmediate) {\n            (function (root) {\n              var setTimeoutFunc = setTimeout;\n\n              function noop() {}\n\n              function bind(fn, thisArg) {\n                return function () {\n                  fn.apply(thisArg, arguments);\n                };\n              }\n\n              function Promise(fn) {\n                if (typeof this !== 'object') throw new TypeError('Promises must be constructed via new');\n                if (typeof fn !== 'function') throw new TypeError('not a function');\n                this._state = 0;\n                this._handled = false;\n                this._value = undefined;\n                this._deferreds = [];\n                doResolve(fn, this);\n              }\n\n              function handle(self, deferred) {\n                while (self._state === 3) {\n                  self = self._value;\n                }\n\n                if (self._state === 0) {\n                  self._deferreds.push(deferred);\n\n                  return;\n                }\n\n                self._handled = true;\n\n                Promise._immediateFn(function () {\n                  var cb = self._state === 1 ? deferred.onFulfilled : deferred.onRejected;\n\n                  if (cb === null) {\n                    (self._state === 1 ? resolve : reject)(deferred.promise, self._value);\n                    return;\n                  }\n\n                  var ret;\n\n                  try {\n                    ret = cb(self._value);\n                  } catch (e) {\n                    reject(deferred.promise, e);\n                    return;\n                  }\n\n                  resolve(deferred.promise, ret);\n                });\n              }\n\n              function resolve(self, newValue) {\n                try {\n                  if (newValue === self) throw new TypeError('A promise cannot be resolved with itself.');\n\n                  if (newValue && (typeof newValue === 'object' || typeof newValue === 'function')) {\n                    var then = newValue.then;\n\n                    if (newValue instanceof Promise) {\n                      self._state = 3;\n                      self._value = newValue;\n                      finale(self);\n                      return;\n                    } else if (typeof then === 'function') {\n                      doResolve(bind(then, newValue), self);\n                      return;\n                    }\n                  }\n\n                  self._state = 1;\n                  self._value = newValue;\n                  finale(self);\n                } catch (e) {\n                  reject(self, e);\n                }\n              }\n\n              function reject(self, newValue) {\n                self._state = 2;\n                self._value = newValue;\n                finale(self);\n              }\n\n              function finale(self) {\n                if (self._state === 2 && self._deferreds.length === 0) {\n                  Promise._immediateFn(function () {\n                    if (!self._handled) {\n                      Promise._unhandledRejectionFn(self._value);\n                    }\n                  });\n                }\n\n                for (var i = 0, len = self._deferreds.length; i < len; i++) {\n                  handle(self, self._deferreds[i]);\n                }\n\n                self._deferreds = null;\n              }\n\n              function Handler(onFulfilled, onRejected, promise) {\n                this.onFulfilled = typeof onFulfilled === 'function' ? onFulfilled : null;\n                this.onRejected = typeof onRejected === 'function' ? onRejected : null;\n                this.promise = promise;\n              }\n\n              function doResolve(fn, self) {\n                var done = false;\n\n                try {\n                  fn(function (value) {\n                    if (done) return;\n                    done = true;\n                    resolve(self, value);\n                  }, function (reason) {\n                    if (done) return;\n                    done = true;\n                    reject(self, reason);\n                  });\n                } catch (ex) {\n                  if (done) return;\n                  done = true;\n                  reject(self, ex);\n                }\n              }\n\n              Promise.prototype['catch'] = function (onRejected) {\n                return this.then(null, onRejected);\n              };\n\n              Promise.prototype.then = function (onFulfilled, onRejected) {\n                var prom = new this.constructor(noop);\n                handle(this, new Handler(onFulfilled, onRejected, prom));\n                return prom;\n              };\n\n              Promise.all = function (arr) {\n                var args = Array.prototype.slice.call(arr);\n                return new Promise(function (resolve, reject) {\n                  if (args.length === 0) return resolve([]);\n                  var remaining = args.length;\n\n                  function res(i, val) {\n                    try {\n                      if (val && (typeof val === 'object' || typeof val === 'function')) {\n                        var then = val.then;\n\n                        if (typeof then === 'function') {\n                          then.call(val, function (val) {\n                            res(i, val);\n                          }, reject);\n                          return;\n                        }\n                      }\n\n                      args[i] = val;\n\n                      if (--remaining === 0) {\n                        resolve(args);\n                      }\n                    } catch (ex) {\n                      reject(ex);\n                    }\n                  }\n\n                  for (var i = 0; i < args.length; i++) {\n                    res(i, args[i]);\n                  }\n                });\n              };\n\n              Promise.resolve = function (value) {\n                if (value && typeof value === 'object' && value.constructor === Promise) {\n                  return value;\n                }\n\n                return new Promise(function (resolve) {\n                  resolve(value);\n                });\n              };\n\n              Promise.reject = function (value) {\n                return new Promise(function (resolve, reject) {\n                  reject(value);\n                });\n              };\n\n              Promise.race = function (values) {\n                return new Promise(function (resolve, reject) {\n                  for (var i = 0, len = values.length; i < len; i++) {\n                    values[i].then(resolve, reject);\n                  }\n                });\n              };\n\n              Promise._immediateFn = typeof setImmediate === 'function' ? function (fn) {\n                setImmediate(fn);\n              } : function (fn) {\n                setTimeoutFunc(fn, 0);\n              };\n\n              Promise._unhandledRejectionFn = function _unhandledRejectionFn(err) {\n                if (typeof console !== 'undefined' && console) {\n                  console.warn('Possible Unhandled Promise Rejection:', err);\n                }\n              };\n\n              Promise._setImmediateFn = function _setImmediateFn(fn) {\n                Promise._immediateFn = fn;\n              };\n\n              Promise._setUnhandledRejectionFn = function _setUnhandledRejectionFn(fn) {\n                Promise._unhandledRejectionFn = fn;\n              };\n\n              if (typeof module !== 'undefined' && module.exports) {\n                module.exports = Promise;\n              } else if (!root.Promise) {\n                root.Promise = Promise;\n              }\n            })(this);\n          }).call(this, require('timers').setImmediate);\n        }, {\n          'timers': 3\n        }],\n        3: [function (require, module, exports) {\n          (function (setImmediate, clearImmediate) {\n            var nextTick = require('process/browser.js').nextTick;\n\n            var apply = Function.prototype.apply;\n            var slice = Array.prototype.slice;\n            var immediateIds = {};\n            var nextImmediateId = 0;\n\n            exports.setTimeout = function () {\n              return new Timeout(apply.call(setTimeout, window, arguments), clearTimeout);\n            };\n\n            exports.setInterval = function () {\n              return new Timeout(apply.call(setInterval, window, arguments), clearInterval);\n            };\n\n            exports.clearTimeout = exports.clearInterval = function (timeout) {\n              timeout.close();\n            };\n\n            function Timeout(id, clearFn) {\n              this._id = id;\n              this._clearFn = clearFn;\n            }\n\n            Timeout.prototype.unref = Timeout.prototype.ref = function () {};\n\n            Timeout.prototype.close = function () {\n              this._clearFn.call(window, this._id);\n            };\n\n            exports.enroll = function (item, msecs) {\n              clearTimeout(item._idleTimeoutId);\n              item._idleTimeout = msecs;\n            };\n\n            exports.unenroll = function (item) {\n              clearTimeout(item._idleTimeoutId);\n              item._idleTimeout = -1;\n            };\n\n            exports._unrefActive = exports.active = function (item) {\n              clearTimeout(item._idleTimeoutId);\n              var msecs = item._idleTimeout;\n\n              if (msecs >= 0) {\n                item._idleTimeoutId = setTimeout(function onTimeout() {\n                  if (item._onTimeout) item._onTimeout();\n                }, msecs);\n              }\n            };\n\n            exports.setImmediate = typeof setImmediate === 'function' ? setImmediate : function (fn) {\n              var id = nextImmediateId++;\n              var args = arguments.length < 2 ? false : slice.call(arguments, 1);\n              immediateIds[id] = true;\n              nextTick(function onNextTick() {\n                if (immediateIds[id]) {\n                  if (args) {\n                    fn.apply(null, args);\n                  } else {\n                    fn.call(null);\n                  }\n\n                  exports.clearImmediate(id);\n                }\n              });\n              return id;\n            };\n            exports.clearImmediate = typeof clearImmediate === 'function' ? clearImmediate : function (id) {\n              delete immediateIds[id];\n            };\n          }).call(this, require('timers').setImmediate, require('timers').clearImmediate);\n        }, {\n          'process/browser.js': 1,\n          'timers': 3\n        }],\n        4: [function (require, module, exports) {\n          var promisePolyfill = require('promise-polyfill');\n\n          var Global = function () {\n            if (typeof window !== 'undefined') {\n              return window;\n            } else {\n              return Function('return this;')();\n            }\n          }();\n\n          module.exports = {\n            boltExport: Global.Promise || promisePolyfill\n          };\n        }, {\n          'promise-polyfill': 2\n        }]\n      }, {}, [4])(4);\n    });\n  })(undefined, exports$1, module, undefined);\n\n  var Promise = module.exports.boltExport;\n\n  var nu = function nu(baseFn) {\n    var data = Option.none();\n    var callbacks = [];\n\n    var map = function map(f) {\n      return nu(function (nCallback) {\n        get(function (data) {\n          nCallback(f(data));\n        });\n      });\n    };\n\n    var get = function get(nCallback) {\n      if (isReady()) {\n        call(nCallback);\n      } else {\n        callbacks.push(nCallback);\n      }\n    };\n\n    var set = function set(x) {\n      data = Option.some(x);\n      run(callbacks);\n      callbacks = [];\n    };\n\n    var isReady = function isReady() {\n      return data.isSome();\n    };\n\n    var run = function run(cbs) {\n      each(cbs, call);\n    };\n\n    var call = function call(cb) {\n      data.each(function (x) {\n        domGlobals.setTimeout(function () {\n          cb(x);\n        }, 0);\n      });\n    };\n\n    baseFn(set);\n    return {\n      get: get,\n      map: map,\n      isReady: isReady\n    };\n  };\n\n  var pure = function pure(a) {\n    return nu(function (callback) {\n      callback(a);\n    });\n  };\n\n  var LazyValue = {\n    nu: nu,\n    pure: pure\n  };\n\n  var errorReporter = function errorReporter(err) {\n    domGlobals.setTimeout(function () {\n      throw err;\n    }, 0);\n  };\n\n  var make = function make(run) {\n    var get = function get(callback) {\n      run().then(callback, errorReporter);\n    };\n\n    var map = function map(fab) {\n      return make(function () {\n        return run().then(fab);\n      });\n    };\n\n    var bind = function bind(aFutureB) {\n      return make(function () {\n        return run().then(function (v) {\n          return aFutureB(v).toPromise();\n        });\n      });\n    };\n\n    var anonBind = function anonBind(futureB) {\n      return make(function () {\n        return run().then(function () {\n          return futureB.toPromise();\n        });\n      });\n    };\n\n    var toLazy = function toLazy() {\n      return LazyValue.nu(get);\n    };\n\n    var toCached = function toCached() {\n      var cache = null;\n      return make(function () {\n        if (cache === null) {\n          cache = run();\n        }\n\n        return cache;\n      });\n    };\n\n    var toPromise = run;\n    return {\n      map: map,\n      bind: bind,\n      anonBind: anonBind,\n      toLazy: toLazy,\n      toCached: toCached,\n      toPromise: toPromise,\n      get: get\n    };\n  };\n\n  var nu$1 = function nu$1(baseFn) {\n    return make(function () {\n      return new Promise(baseFn);\n    });\n  };\n\n  var pure$1 = function pure$1(a) {\n    return make(function () {\n      return Promise.resolve(a);\n    });\n  };\n\n  var Future = {\n    nu: nu$1,\n    pure: pure$1\n  };\n\n  var value = function value(o) {\n    var is = function is(v) {\n      return o === v;\n    };\n\n    var or = function or(opt) {\n      return value(o);\n    };\n\n    var orThunk = function orThunk(f) {\n      return value(o);\n    };\n\n    var map = function map(f) {\n      return value(f(o));\n    };\n\n    var mapError = function mapError(f) {\n      return value(o);\n    };\n\n    var each = function each(f) {\n      f(o);\n    };\n\n    var bind = function bind(f) {\n      return f(o);\n    };\n\n    var fold = function fold(_, onValue) {\n      return onValue(o);\n    };\n\n    var exists = function exists(f) {\n      return f(o);\n    };\n\n    var forall = function forall(f) {\n      return f(o);\n    };\n\n    var toOption = function toOption() {\n      return Option.some(o);\n    };\n\n    return {\n      is: is,\n      isValue: always,\n      isError: never,\n      getOr: constant(o),\n      getOrThunk: constant(o),\n      getOrDie: constant(o),\n      or: or,\n      orThunk: orThunk,\n      fold: fold,\n      map: map,\n      mapError: mapError,\n      each: each,\n      bind: bind,\n      exists: exists,\n      forall: forall,\n      toOption: toOption\n    };\n  };\n\n  var error = function error(message) {\n    var getOrThunk = function getOrThunk(f) {\n      return f();\n    };\n\n    var getOrDie = function getOrDie() {\n      return die(String(message))();\n    };\n\n    var or = function or(opt) {\n      return opt;\n    };\n\n    var orThunk = function orThunk(f) {\n      return f();\n    };\n\n    var map = function map(f) {\n      return error(message);\n    };\n\n    var mapError = function mapError(f) {\n      return error(f(message));\n    };\n\n    var bind = function bind(f) {\n      return error(message);\n    };\n\n    var fold = function fold(onError, _) {\n      return onError(message);\n    };\n\n    return {\n      is: never,\n      isValue: never,\n      isError: always,\n      getOr: identity,\n      getOrThunk: getOrThunk,\n      getOrDie: getOrDie,\n      or: or,\n      orThunk: orThunk,\n      fold: fold,\n      map: map,\n      mapError: mapError,\n      each: noop,\n      bind: bind,\n      exists: never,\n      forall: always,\n      toOption: Option.none\n    };\n  };\n\n  var fromOption = function fromOption(opt, err) {\n    return opt.fold(function () {\n      return error(err);\n    }, value);\n  };\n\n  var Result = {\n    value: value,\n    error: error,\n    fromOption: fromOption\n  };\n\n  var wrap = function wrap(delegate) {\n    var toCached = function toCached() {\n      return wrap(delegate.toCached());\n    };\n\n    var bindFuture = function bindFuture(f) {\n      return wrap(delegate.bind(function (resA) {\n        return resA.fold(function (err) {\n          return Future.pure(Result.error(err));\n        }, function (a) {\n          return f(a);\n        });\n      }));\n    };\n\n    var bindResult = function bindResult(f) {\n      return wrap(delegate.map(function (resA) {\n        return resA.bind(f);\n      }));\n    };\n\n    var mapResult = function mapResult(f) {\n      return wrap(delegate.map(function (resA) {\n        return resA.map(f);\n      }));\n    };\n\n    var mapError = function mapError(f) {\n      return wrap(delegate.map(function (resA) {\n        return resA.mapError(f);\n      }));\n    };\n\n    var foldResult = function foldResult(whenError, whenValue) {\n      return delegate.map(function (res) {\n        return res.fold(whenError, whenValue);\n      });\n    };\n\n    var withTimeout = function withTimeout(timeout, errorThunk) {\n      return wrap(Future.nu(function (callback) {\n        var timedOut = false;\n        var timer = domGlobals.setTimeout(function () {\n          timedOut = true;\n          callback(Result.error(errorThunk()));\n        }, timeout);\n        delegate.get(function (result) {\n          if (!timedOut) {\n            domGlobals.clearTimeout(timer);\n            callback(result);\n          }\n        });\n      }));\n    };\n\n    return _assign(_assign({}, delegate), {\n      toCached: toCached,\n      bindFuture: bindFuture,\n      bindResult: bindResult,\n      mapResult: mapResult,\n      mapError: mapError,\n      foldResult: foldResult,\n      withTimeout: withTimeout\n    });\n  };\n\n  var nu$2 = function nu$2(worker) {\n    return wrap(Future.nu(worker));\n  };\n\n  var value$1 = function value$1(value) {\n    return wrap(Future.pure(Result.value(value)));\n  };\n\n  var error$1 = function error$1(error) {\n    return wrap(Future.pure(Result.error(error)));\n  };\n\n  var fromResult = function fromResult(result) {\n    return wrap(Future.pure(result));\n  };\n\n  var fromFuture = function fromFuture(future) {\n    return wrap(future.map(Result.value));\n  };\n\n  var fromPromise = function fromPromise(promise) {\n    return nu$2(function (completer) {\n      promise.then(function (value) {\n        completer(Result.value(value));\n      }, function (error) {\n        completer(Result.error(error));\n      });\n    });\n  };\n\n  var FutureResult = {\n    nu: nu$2,\n    wrap: wrap,\n    pure: value$1,\n    value: value$1,\n    error: error$1,\n    fromResult: fromResult,\n    fromFuture: fromFuture,\n    fromPromise: fromPromise\n  };\n  var hasOwnProperty = Object.prototype.hasOwnProperty;\n\n  var shallow = function shallow(old, nu) {\n    return nu;\n  };\n\n  var deep = function deep(old, nu) {\n    var bothObjects = isObject(old) && isObject(nu);\n    return bothObjects ? deepMerge(old, nu) : nu;\n  };\n\n  var baseMerge = function baseMerge(merger) {\n    return function () {\n      var objects = new Array(arguments.length);\n\n      for (var i = 0; i < objects.length; i++) {\n        objects[i] = arguments[i];\n      }\n\n      if (objects.length === 0) {\n        throw new Error('Can\\'t merge zero objects');\n      }\n\n      var ret = {};\n\n      for (var j = 0; j < objects.length; j++) {\n        var curObject = objects[j];\n\n        for (var key in curObject) {\n          if (hasOwnProperty.call(curObject, key)) {\n            ret[key] = merger(ret[key], curObject[key]);\n          }\n        }\n      }\n\n      return ret;\n    };\n  };\n\n  var deepMerge = baseMerge(deep);\n  var merge = baseMerge(shallow);\n\n  var makeItems = function makeItems(info) {\n    var imageUrl = {\n      name: 'src',\n      type: 'urlinput',\n      filetype: 'image',\n      label: 'Source'\n    };\n    var imageList = info.imageList.map(function (items) {\n      return {\n        name: 'images',\n        type: 'selectbox',\n        label: 'Image list',\n        items: items\n      };\n    });\n    var imageDescription = {\n      name: 'alt',\n      type: 'input',\n      label: 'Image description'\n    };\n    var imageTitle = {\n      name: 'title',\n      type: 'input',\n      label: 'Image title'\n    };\n    var imageDimensions = {\n      name: 'dimensions',\n      type: 'sizeinput'\n    };\n    var classList = info.classList.map(function (items) {\n      return {\n        name: 'classes',\n        type: 'selectbox',\n        label: 'Class',\n        items: items\n      };\n    });\n    var caption = {\n      type: 'label',\n      label: 'Caption',\n      items: [{\n        type: 'checkbox',\n        name: 'caption',\n        label: 'Show caption'\n      }]\n    };\n    return flatten([[imageUrl], imageList.toArray(), info.hasDescription ? [imageDescription] : [], info.hasImageTitle ? [imageTitle] : [], info.hasDimensions ? [imageDimensions] : [], [{\n      type: 'grid',\n      columns: 2,\n      items: flatten([classList.toArray(), info.hasImageCaption ? [caption] : []])\n    }]]);\n  };\n\n  var makeTab = function makeTab(info) {\n    return {\n      title: 'General',\n      name: 'general',\n      items: makeItems(info)\n    };\n  };\n\n  var MainTab = {\n    makeTab: makeTab,\n    makeItems: makeItems\n  };\n  var global$2 = tinymce.util.Tools.resolve('tinymce.dom.DOMUtils');\n  var global$3 = tinymce.util.Tools.resolve('tinymce.util.Promise');\n  var global$4 = tinymce.util.Tools.resolve('tinymce.util.XHR');\n\n  var hasDimensions = function hasDimensions(editor) {\n    return editor.getParam('image_dimensions', true, 'boolean');\n  };\n\n  var hasAdvTab = function hasAdvTab(editor) {\n    return editor.getParam('image_advtab', false, 'boolean');\n  };\n\n  var hasUploadTab = function hasUploadTab(editor) {\n    return editor.getParam('image_uploadtab', true, 'boolean');\n  };\n\n  var getPrependUrl = function getPrependUrl(editor) {\n    return editor.getParam('image_prepend_url', '', 'string');\n  };\n\n  var getClassList = function getClassList(editor) {\n    return editor.getParam('image_class_list');\n  };\n\n  var hasDescription = function hasDescription(editor) {\n    return editor.getParam('image_description', true, 'boolean');\n  };\n\n  var hasImageTitle = function hasImageTitle(editor) {\n    return editor.getParam('image_title', false, 'boolean');\n  };\n\n  var hasImageCaption = function hasImageCaption(editor) {\n    return editor.getParam('image_caption', false, 'boolean');\n  };\n\n  var getImageList = function getImageList(editor) {\n    return editor.getParam('image_list', false);\n  };\n\n  var hasUploadUrl = function hasUploadUrl(editor) {\n    return !!getUploadUrl(editor);\n  };\n\n  var hasUploadHandler = function hasUploadHandler(editor) {\n    return !!getUploadHandler(editor);\n  };\n\n  var getUploadUrl = function getUploadUrl(editor) {\n    return editor.getParam('images_upload_url', '', 'string');\n  };\n\n  var getUploadHandler = function getUploadHandler(editor) {\n    return editor.getParam('images_upload_handler', undefined, 'function');\n  };\n\n  var getUploadBasePath = function getUploadBasePath(editor) {\n    return editor.getParam('images_upload_base_path', undefined, 'string');\n  };\n\n  var getUploadCredentials = function getUploadCredentials(editor) {\n    return editor.getParam('images_upload_credentials', false, 'boolean');\n  };\n\n  var Settings = {\n    hasDimensions: hasDimensions,\n    hasUploadTab: hasUploadTab,\n    hasAdvTab: hasAdvTab,\n    getPrependUrl: getPrependUrl,\n    getClassList: getClassList,\n    hasDescription: hasDescription,\n    hasImageTitle: hasImageTitle,\n    hasImageCaption: hasImageCaption,\n    getImageList: getImageList,\n    hasUploadUrl: hasUploadUrl,\n    hasUploadHandler: hasUploadHandler,\n    getUploadUrl: getUploadUrl,\n    getUploadHandler: getUploadHandler,\n    getUploadBasePath: getUploadBasePath,\n    getUploadCredentials: getUploadCredentials\n  };\n\n  var parseIntAndGetMax = function parseIntAndGetMax(val1, val2) {\n    return Math.max(parseInt(val1, 10), parseInt(val2, 10));\n  };\n\n  var getImageSize = function getImageSize(url, callback) {\n    var img = domGlobals.document.createElement('img');\n\n    var done = function done(dimensions) {\n      if (img.parentNode) {\n        img.parentNode.removeChild(img);\n      }\n\n      callback(dimensions);\n    };\n\n    img.onload = function () {\n      var width = parseIntAndGetMax(img.width, img.clientWidth);\n      var height = parseIntAndGetMax(img.height, img.clientHeight);\n      var dimensions = {\n        width: width,\n        height: height\n      };\n      done(Result.value(dimensions));\n    };\n\n    img.onerror = function () {\n      done(Result.error('Failed to get image dimensions for: ' + url));\n    };\n\n    var style = img.style;\n    style.visibility = 'hidden';\n    style.position = 'fixed';\n    style.bottom = style.left = '0px';\n    style.width = style.height = 'auto';\n    domGlobals.document.body.appendChild(img);\n    img.src = url;\n  };\n\n  var removePixelSuffix = function removePixelSuffix(value) {\n    if (value) {\n      value = value.replace(/px$/, '');\n    }\n\n    return value;\n  };\n\n  var addPixelSuffix = function addPixelSuffix(value) {\n    if (value.length > 0 && /^[0-9]+$/.test(value)) {\n      value += 'px';\n    }\n\n    return value;\n  };\n\n  var mergeMargins = function mergeMargins(css) {\n    if (css.margin) {\n      var splitMargin = String(css.margin).split(' ');\n\n      switch (splitMargin.length) {\n        case 1:\n          css['margin-top'] = css['margin-top'] || splitMargin[0];\n          css['margin-right'] = css['margin-right'] || splitMargin[0];\n          css['margin-bottom'] = css['margin-bottom'] || splitMargin[0];\n          css['margin-left'] = css['margin-left'] || splitMargin[0];\n          break;\n\n        case 2:\n          css['margin-top'] = css['margin-top'] || splitMargin[0];\n          css['margin-right'] = css['margin-right'] || splitMargin[1];\n          css['margin-bottom'] = css['margin-bottom'] || splitMargin[0];\n          css['margin-left'] = css['margin-left'] || splitMargin[1];\n          break;\n\n        case 3:\n          css['margin-top'] = css['margin-top'] || splitMargin[0];\n          css['margin-right'] = css['margin-right'] || splitMargin[1];\n          css['margin-bottom'] = css['margin-bottom'] || splitMargin[2];\n          css['margin-left'] = css['margin-left'] || splitMargin[1];\n          break;\n\n        case 4:\n          css['margin-top'] = css['margin-top'] || splitMargin[0];\n          css['margin-right'] = css['margin-right'] || splitMargin[1];\n          css['margin-bottom'] = css['margin-bottom'] || splitMargin[2];\n          css['margin-left'] = css['margin-left'] || splitMargin[3];\n      }\n\n      delete css.margin;\n    }\n\n    return css;\n  };\n\n  var createImageList = function createImageList(editor, callback) {\n    var imageList = Settings.getImageList(editor);\n\n    if (typeof imageList === 'string') {\n      global$4.send({\n        url: imageList,\n        success: function success(text) {\n          callback(JSON.parse(text));\n        }\n      });\n    } else if (typeof imageList === 'function') {\n      imageList(callback);\n    } else {\n      callback(imageList);\n    }\n  };\n\n  var waitLoadImage = function waitLoadImage(editor, data, imgElm) {\n    var selectImage = function selectImage() {\n      imgElm.onload = imgElm.onerror = null;\n\n      if (editor.selection) {\n        editor.selection.select(imgElm);\n        editor.nodeChanged();\n      }\n    };\n\n    imgElm.onload = function () {\n      if (!data.width && !data.height && Settings.hasDimensions(editor)) {\n        editor.dom.setAttribs(imgElm, {\n          width: String(imgElm.clientWidth),\n          height: String(imgElm.clientHeight)\n        });\n      }\n\n      selectImage();\n    };\n\n    imgElm.onerror = selectImage;\n  };\n\n  var blobToDataUri = function blobToDataUri(blob) {\n    return new global$3(function (resolve, reject) {\n      var reader = new domGlobals.FileReader();\n\n      reader.onload = function () {\n        resolve(reader.result);\n      };\n\n      reader.onerror = function () {\n        reject(reader.error.message);\n      };\n\n      reader.readAsDataURL(blob);\n    });\n  };\n\n  var isPlaceholderImage = function isPlaceholderImage(imgElm) {\n    return imgElm.nodeName === 'IMG' && (imgElm.hasAttribute('data-mce-object') || imgElm.hasAttribute('data-mce-placeholder'));\n  };\n\n  var Utils = {\n    getImageSize: getImageSize,\n    removePixelSuffix: removePixelSuffix,\n    addPixelSuffix: addPixelSuffix,\n    mergeMargins: mergeMargins,\n    createImageList: createImageList,\n    waitLoadImage: waitLoadImage,\n    blobToDataUri: blobToDataUri,\n    isPlaceholderImage: isPlaceholderImage\n  };\n  var DOM = global$2.DOM;\n\n  var getHspace = function getHspace(image) {\n    if (image.style.marginLeft && image.style.marginRight && image.style.marginLeft === image.style.marginRight) {\n      return Utils.removePixelSuffix(image.style.marginLeft);\n    } else {\n      return '';\n    }\n  };\n\n  var getVspace = function getVspace(image) {\n    if (image.style.marginTop && image.style.marginBottom && image.style.marginTop === image.style.marginBottom) {\n      return Utils.removePixelSuffix(image.style.marginTop);\n    } else {\n      return '';\n    }\n  };\n\n  var getBorder = function getBorder(image) {\n    if (image.style.borderWidth) {\n      return Utils.removePixelSuffix(image.style.borderWidth);\n    } else {\n      return '';\n    }\n  };\n\n  var getAttrib = function getAttrib(image, name) {\n    if (image.hasAttribute(name)) {\n      return image.getAttribute(name);\n    } else {\n      return '';\n    }\n  };\n\n  var getStyle = function getStyle(image, name) {\n    return image.style[name] ? image.style[name] : '';\n  };\n\n  var hasCaption = function hasCaption(image) {\n    return image.parentNode !== null && image.parentNode.nodeName === 'FIGURE';\n  };\n\n  var setAttrib = function setAttrib(image, name, value) {\n    image.setAttribute(name, value);\n  };\n\n  var wrapInFigure = function wrapInFigure(image) {\n    var figureElm = DOM.create('figure', {\n      \"class\": 'image'\n    });\n    DOM.insertAfter(figureElm, image);\n    figureElm.appendChild(image);\n    figureElm.appendChild(DOM.create('figcaption', {\n      contentEditable: 'true'\n    }, 'Caption'));\n    figureElm.contentEditable = 'false';\n  };\n\n  var removeFigure = function removeFigure(image) {\n    var figureElm = image.parentNode;\n    DOM.insertAfter(image, figureElm);\n    DOM.remove(figureElm);\n  };\n\n  var toggleCaption = function toggleCaption(image) {\n    if (hasCaption(image)) {\n      removeFigure(image);\n    } else {\n      wrapInFigure(image);\n    }\n  };\n\n  var normalizeStyle = function normalizeStyle(image, normalizeCss) {\n    var attrValue = image.getAttribute('style');\n    var value = normalizeCss(attrValue !== null ? attrValue : '');\n\n    if (value.length > 0) {\n      image.setAttribute('style', value);\n      image.setAttribute('data-mce-style', value);\n    } else {\n      image.removeAttribute('style');\n    }\n  };\n\n  var setSize = function setSize(name, normalizeCss) {\n    return function (image, name, value) {\n      if (image.style[name]) {\n        image.style[name] = Utils.addPixelSuffix(value);\n        normalizeStyle(image, normalizeCss);\n      } else {\n        setAttrib(image, name, value);\n      }\n    };\n  };\n\n  var getSize = function getSize(image, name) {\n    if (image.style[name]) {\n      return Utils.removePixelSuffix(image.style[name]);\n    } else {\n      return getAttrib(image, name);\n    }\n  };\n\n  var setHspace = function setHspace(image, value) {\n    var pxValue = Utils.addPixelSuffix(value);\n    image.style.marginLeft = pxValue;\n    image.style.marginRight = pxValue;\n  };\n\n  var setVspace = function setVspace(image, value) {\n    var pxValue = Utils.addPixelSuffix(value);\n    image.style.marginTop = pxValue;\n    image.style.marginBottom = pxValue;\n  };\n\n  var setBorder = function setBorder(image, value) {\n    var pxValue = Utils.addPixelSuffix(value);\n    image.style.borderWidth = pxValue;\n  };\n\n  var setBorderStyle = function setBorderStyle(image, value) {\n    image.style.borderStyle = value;\n  };\n\n  var getBorderStyle = function getBorderStyle(image) {\n    return getStyle(image, 'borderStyle');\n  };\n\n  var isFigure = function isFigure(elm) {\n    return elm.nodeName === 'FIGURE';\n  };\n\n  var isImage = function isImage(elm) {\n    return elm.nodeName === 'IMG';\n  };\n\n  var defaultData = function defaultData() {\n    return {\n      src: '',\n      alt: '',\n      title: '',\n      width: '',\n      height: '',\n      \"class\": '',\n      style: '',\n      caption: false,\n      hspace: '',\n      vspace: '',\n      border: '',\n      borderStyle: ''\n    };\n  };\n\n  var getStyleValue = function getStyleValue(normalizeCss, data) {\n    var image = domGlobals.document.createElement('img');\n    setAttrib(image, 'style', data.style);\n\n    if (getHspace(image) || data.hspace !== '') {\n      setHspace(image, data.hspace);\n    }\n\n    if (getVspace(image) || data.vspace !== '') {\n      setVspace(image, data.vspace);\n    }\n\n    if (getBorder(image) || data.border !== '') {\n      setBorder(image, data.border);\n    }\n\n    if (getBorderStyle(image) || data.borderStyle !== '') {\n      setBorderStyle(image, data.borderStyle);\n    }\n\n    return normalizeCss(image.getAttribute('style'));\n  };\n\n  var create = function create(normalizeCss, data) {\n    var image = domGlobals.document.createElement('img');\n    write(normalizeCss, merge(data, {\n      caption: false\n    }), image);\n    setAttrib(image, 'alt', data.alt);\n\n    if (data.caption) {\n      var figure = DOM.create('figure', {\n        \"class\": 'image'\n      });\n      figure.appendChild(image);\n      figure.appendChild(DOM.create('figcaption', {\n        contentEditable: 'true'\n      }, 'Caption'));\n      figure.contentEditable = 'false';\n      return figure;\n    } else {\n      return image;\n    }\n  };\n\n  var read = function read(normalizeCss, image) {\n    return {\n      src: getAttrib(image, 'src'),\n      alt: getAttrib(image, 'alt'),\n      title: getAttrib(image, 'title'),\n      width: getSize(image, 'width'),\n      height: getSize(image, 'height'),\n      \"class\": getAttrib(image, 'class'),\n      style: normalizeCss(getAttrib(image, 'style')),\n      caption: hasCaption(image),\n      hspace: getHspace(image),\n      vspace: getVspace(image),\n      border: getBorder(image),\n      borderStyle: getStyle(image, 'borderStyle')\n    };\n  };\n\n  var updateProp = function updateProp(image, oldData, newData, name, set) {\n    if (newData[name] !== oldData[name]) {\n      set(image, name, newData[name]);\n    }\n  };\n\n  var normalized = function normalized(set, normalizeCss) {\n    return function (image, name, value) {\n      set(image, value);\n      normalizeStyle(image, normalizeCss);\n    };\n  };\n\n  var write = function write(normalizeCss, newData, image) {\n    var oldData = read(normalizeCss, image);\n    updateProp(image, oldData, newData, 'caption', function (image, _name, _value) {\n      return toggleCaption(image);\n    });\n    updateProp(image, oldData, newData, 'src', setAttrib);\n    updateProp(image, oldData, newData, 'alt', setAttrib);\n    updateProp(image, oldData, newData, 'title', setAttrib);\n    updateProp(image, oldData, newData, 'width', setSize('width', normalizeCss));\n    updateProp(image, oldData, newData, 'height', setSize('height', normalizeCss));\n    updateProp(image, oldData, newData, 'class', setAttrib);\n    updateProp(image, oldData, newData, 'style', normalized(function (image, value) {\n      return setAttrib(image, 'style', value);\n    }, normalizeCss));\n    updateProp(image, oldData, newData, 'hspace', normalized(setHspace, normalizeCss));\n    updateProp(image, oldData, newData, 'vspace', normalized(setVspace, normalizeCss));\n    updateProp(image, oldData, newData, 'border', normalized(setBorder, normalizeCss));\n    updateProp(image, oldData, newData, 'borderStyle', normalized(setBorderStyle, normalizeCss));\n  };\n\n  var normalizeCss = function normalizeCss(editor, cssText) {\n    var css = editor.dom.styles.parse(cssText);\n    var mergedCss = Utils.mergeMargins(css);\n    var compressed = editor.dom.styles.parse(editor.dom.styles.serialize(mergedCss));\n    return editor.dom.styles.serialize(compressed);\n  };\n\n  var getSelectedImage = function getSelectedImage(editor) {\n    var imgElm = editor.selection.getNode();\n    var figureElm = editor.dom.getParent(imgElm, 'figure.image');\n\n    if (figureElm) {\n      return editor.dom.select('img', figureElm)[0];\n    }\n\n    if (imgElm && (imgElm.nodeName !== 'IMG' || Utils.isPlaceholderImage(imgElm))) {\n      return null;\n    }\n\n    return imgElm;\n  };\n\n  var splitTextBlock = function splitTextBlock(editor, figure) {\n    var dom = editor.dom;\n    var textBlock = dom.getParent(figure.parentNode, function (node) {\n      return editor.schema.getTextBlockElements()[node.nodeName];\n    }, editor.getBody());\n\n    if (textBlock) {\n      return dom.split(textBlock, figure);\n    } else {\n      return figure;\n    }\n  };\n\n  var readImageDataFromSelection = function readImageDataFromSelection(editor) {\n    var image = getSelectedImage(editor);\n    return image ? read(function (css) {\n      return normalizeCss(editor, css);\n    }, image) : defaultData();\n  };\n\n  var insertImageAtCaret = function insertImageAtCaret(editor, data) {\n    var elm = create(function (css) {\n      return normalizeCss(editor, css);\n    }, data);\n    editor.dom.setAttrib(elm, 'data-mce-id', '__mcenew');\n    editor.focus();\n    editor.selection.setContent(elm.outerHTML);\n    var insertedElm = editor.dom.select('*[data-mce-id=\"__mcenew\"]')[0];\n    editor.dom.setAttrib(insertedElm, 'data-mce-id', null);\n\n    if (isFigure(insertedElm)) {\n      var figure = splitTextBlock(editor, insertedElm);\n      editor.selection.select(figure);\n    } else {\n      editor.selection.select(insertedElm);\n    }\n  };\n\n  var syncSrcAttr = function syncSrcAttr(editor, image) {\n    editor.dom.setAttrib(image, 'src', image.getAttribute('src'));\n  };\n\n  var deleteImage = function deleteImage(editor, image) {\n    if (image) {\n      var elm = editor.dom.is(image.parentNode, 'figure.image') ? image.parentNode : image;\n      editor.dom.remove(elm);\n      editor.focus();\n      editor.nodeChanged();\n\n      if (editor.dom.isEmpty(editor.getBody())) {\n        editor.setContent('');\n        editor.selection.setCursorLocation();\n      }\n    }\n  };\n\n  var writeImageDataToSelection = function writeImageDataToSelection(editor, data) {\n    var image = getSelectedImage(editor);\n    write(function (css) {\n      return normalizeCss(editor, css);\n    }, data, image);\n    syncSrcAttr(editor, image);\n\n    if (isFigure(image.parentNode)) {\n      var figure = image.parentNode;\n      splitTextBlock(editor, figure);\n      editor.selection.select(image.parentNode);\n    } else {\n      editor.selection.select(image);\n      Utils.waitLoadImage(editor, data, image);\n    }\n  };\n\n  var insertOrUpdateImage = function insertOrUpdateImage(editor, data) {\n    var image = getSelectedImage(editor);\n\n    if (image) {\n      if (data.src) {\n        writeImageDataToSelection(editor, data);\n      } else {\n        deleteImage(editor, image);\n      }\n    } else if (data.src) {\n      insertImageAtCaret(editor, data);\n    }\n  };\n\n  var findMap = function findMap(arr, f) {\n    for (var i = 0; i < arr.length; i++) {\n      var r = f(arr[i], i);\n\n      if (r.isSome()) {\n        return r;\n      }\n    }\n\n    return Option.none();\n  };\n\n  var global$5 = tinymce.util.Tools.resolve('tinymce.util.Tools');\n\n  var getValue = function getValue(item) {\n    return isString(item.value) ? item.value : '';\n  };\n\n  var sanitizeList = function sanitizeList(list, extractValue) {\n    var out = [];\n    global$5.each(list, function (item) {\n      var text = isString(item.text) ? item.text : isString(item.title) ? item.title : '';\n\n      if (item.menu !== undefined) {\n        var items = sanitizeList(item.menu, extractValue);\n        out.push({\n          text: text,\n          items: items\n        });\n      } else {\n        var value = extractValue(item);\n        out.push({\n          text: text,\n          value: value\n        });\n      }\n    });\n    return out;\n  };\n\n  var sanitizer = function sanitizer(extracter) {\n    if (extracter === void 0) {\n      extracter = getValue;\n    }\n\n    return function (list) {\n      if (list) {\n        return Option.from(list).map(function (list) {\n          return sanitizeList(list, extracter);\n        });\n      } else {\n        return Option.none();\n      }\n    };\n  };\n\n  var sanitize = function sanitize(list) {\n    return sanitizer(getValue)(list);\n  };\n\n  var isGroup = function isGroup(item) {\n    return Object.prototype.hasOwnProperty.call(item, 'items');\n  };\n\n  var findEntryDelegate = function findEntryDelegate(list, value) {\n    return findMap(list, function (item) {\n      if (isGroup(item)) {\n        return findEntryDelegate(item.items, value);\n      } else if (item.value === value) {\n        return Option.some(item);\n      } else {\n        return Option.none();\n      }\n    });\n  };\n\n  var findEntry = function findEntry(optList, value) {\n    return optList.bind(function (list) {\n      return findEntryDelegate(list, value);\n    });\n  };\n\n  var ListUtils = {\n    sanitizer: sanitizer,\n    sanitize: sanitize,\n    findEntry: findEntry\n  };\n\n  var pathJoin = function pathJoin(path1, path2) {\n    if (path1) {\n      return path1.replace(/\\/$/, '') + '/' + path2.replace(/^\\//, '');\n    }\n\n    return path2;\n  };\n\n  function Uploader(settings) {\n    var defaultHandler = function defaultHandler(blobInfo, success, failure, progress) {\n      var xhr, formData;\n      xhr = new domGlobals.XMLHttpRequest();\n      xhr.open('POST', settings.url);\n      xhr.withCredentials = settings.credentials;\n\n      xhr.upload.onprogress = function (e) {\n        progress(e.loaded / e.total * 100);\n      };\n\n      xhr.onerror = function () {\n        failure('Image upload failed due to a XHR Transport error. Code: ' + xhr.status);\n      };\n\n      xhr.onload = function () {\n        var json;\n\n        if (xhr.status < 200 || xhr.status >= 300) {\n          failure('HTTP Error: ' + xhr.status);\n          return;\n        }\n\n        json = JSON.parse(xhr.responseText);\n\n        if (!json || typeof json.location !== 'string') {\n          failure('Invalid JSON: ' + xhr.responseText);\n          return;\n        }\n\n        success(pathJoin(settings.basePath, json.location));\n      };\n\n      formData = new domGlobals.FormData();\n      formData.append('file', blobInfo.blob(), blobInfo.filename());\n      xhr.send(formData);\n    };\n\n    var uploadBlob = function uploadBlob(blobInfo, handler) {\n      return new global$3(function (resolve, reject) {\n        try {\n          handler(blobInfo, resolve, reject, noop);\n        } catch (ex) {\n          reject(ex.message);\n        }\n      });\n    };\n\n    var isDefaultHandler = function isDefaultHandler(handler) {\n      return handler === defaultHandler;\n    };\n\n    var upload = function upload(blobInfo) {\n      return !settings.url && isDefaultHandler(settings.handler) ? global$3.reject('Upload url missing from the settings.') : uploadBlob(blobInfo, settings.handler);\n    };\n\n    settings = global$5.extend({\n      credentials: false,\n      handler: defaultHandler\n    }, settings);\n    return {\n      upload: upload\n    };\n  }\n\n  var makeTab$1 = function makeTab$1(info) {\n    return {\n      title: 'Advanced',\n      name: 'advanced',\n      items: [{\n        type: 'input',\n        label: 'Style',\n        name: 'style'\n      }, {\n        type: 'grid',\n        columns: 2,\n        items: [{\n          type: 'input',\n          label: 'Vertical space',\n          name: 'vspace',\n          inputMode: 'numeric'\n        }, {\n          type: 'input',\n          label: 'Horizontal space',\n          name: 'hspace',\n          inputMode: 'numeric'\n        }, {\n          type: 'input',\n          label: 'Border width',\n          name: 'border',\n          inputMode: 'numeric'\n        }, {\n          type: 'selectbox',\n          name: 'borderstyle',\n          label: 'Border style',\n          items: [{\n            text: 'Select...',\n            value: ''\n          }, {\n            text: 'Solid',\n            value: 'solid'\n          }, {\n            text: 'Dotted',\n            value: 'dotted'\n          }, {\n            text: 'Dashed',\n            value: 'dashed'\n          }, {\n            text: 'Double',\n            value: 'double'\n          }, {\n            text: 'Groove',\n            value: 'groove'\n          }, {\n            text: 'Ridge',\n            value: 'ridge'\n          }, {\n            text: 'Inset',\n            value: 'inset'\n          }, {\n            text: 'Outset',\n            value: 'outset'\n          }, {\n            text: 'None',\n            value: 'none'\n          }, {\n            text: 'Hidden',\n            value: 'hidden'\n          }]\n        }]\n      }]\n    };\n  };\n\n  var AdvTab = {\n    makeTab: makeTab$1\n  };\n\n  var collect = function collect(editor) {\n    var urlListSanitizer = ListUtils.sanitizer(function (item) {\n      return editor.convertURL(item.value || item.url, 'src');\n    });\n    var futureImageList = Future.nu(function (completer) {\n      Utils.createImageList(editor, function (imageList) {\n        completer(urlListSanitizer(imageList).map(function (items) {\n          return flatten([[{\n            text: 'None',\n            value: ''\n          }], items]);\n        }));\n      });\n    });\n    var classList = ListUtils.sanitize(Settings.getClassList(editor));\n    var hasAdvTab = Settings.hasAdvTab(editor);\n    var hasUploadTab = Settings.hasUploadTab(editor);\n    var hasUploadUrl = Settings.hasUploadUrl(editor);\n    var hasUploadHandler = Settings.hasUploadHandler(editor);\n    var image = readImageDataFromSelection(editor);\n    var hasDescription = Settings.hasDescription(editor);\n    var hasImageTitle = Settings.hasImageTitle(editor);\n    var hasDimensions = Settings.hasDimensions(editor);\n    var hasImageCaption = Settings.hasImageCaption(editor);\n    var url = Settings.getUploadUrl(editor);\n    var basePath = Settings.getUploadBasePath(editor);\n    var credentials = Settings.getUploadCredentials(editor);\n    var handler = Settings.getUploadHandler(editor);\n    var prependURL = Option.some(Settings.getPrependUrl(editor)).filter(function (preUrl) {\n      return isString(preUrl) && preUrl.length > 0;\n    });\n    return futureImageList.map(function (imageList) {\n      return {\n        image: image,\n        imageList: imageList,\n        classList: classList,\n        hasAdvTab: hasAdvTab,\n        hasUploadTab: hasUploadTab,\n        hasUploadUrl: hasUploadUrl,\n        hasUploadHandler: hasUploadHandler,\n        hasDescription: hasDescription,\n        hasImageTitle: hasImageTitle,\n        hasDimensions: hasDimensions,\n        hasImageCaption: hasImageCaption,\n        url: url,\n        basePath: basePath,\n        credentials: credentials,\n        handler: handler,\n        prependURL: prependURL\n      };\n    });\n  };\n\n  var makeTab$2 = function makeTab$2(info) {\n    var items = [{\n      type: 'dropzone',\n      name: 'fileinput'\n    }];\n    return {\n      title: 'Upload',\n      name: 'upload',\n      items: items\n    };\n  };\n\n  var UploadTab = {\n    makeTab: makeTab$2\n  };\n\n  var createState = function createState(info) {\n    return {\n      prevImage: ListUtils.findEntry(info.imageList, info.image.src),\n      prevAlt: info.image.alt,\n      open: true\n    };\n  };\n\n  var fromImageData = function fromImageData(image) {\n    return {\n      src: {\n        value: image.src,\n        meta: {}\n      },\n      images: image.src,\n      alt: image.alt,\n      title: image.title,\n      dimensions: {\n        width: image.width,\n        height: image.height\n      },\n      classes: image[\"class\"],\n      caption: image.caption,\n      style: image.style,\n      vspace: image.vspace,\n      border: image.border,\n      hspace: image.hspace,\n      borderstyle: image.borderStyle,\n      fileinput: []\n    };\n  };\n\n  var toImageData = function toImageData(data) {\n    return {\n      src: data.src.value,\n      alt: data.alt,\n      title: data.title,\n      width: data.dimensions.width,\n      height: data.dimensions.height,\n      \"class\": data.classes,\n      style: data.style,\n      caption: data.caption,\n      hspace: data.hspace,\n      vspace: data.vspace,\n      border: data.border,\n      borderStyle: data.borderstyle\n    };\n  };\n\n  var addPrependUrl2 = function addPrependUrl2(info, srcURL) {\n    if (!/^(?:[a-zA-Z]+:)?\\/\\//.test(srcURL)) {\n      return info.prependURL.bind(function (prependUrl) {\n        if (srcURL.substring(0, prependUrl.length) !== prependUrl) {\n          return Option.some(prependUrl + srcURL);\n        }\n\n        return Option.none();\n      });\n    }\n\n    return Option.none();\n  };\n\n  var addPrependUrl = function addPrependUrl(info, api) {\n    var data = api.getData();\n    addPrependUrl2(info, data.src.value).each(function (srcURL) {\n      api.setData({\n        src: {\n          value: srcURL,\n          meta: data.src.meta\n        }\n      });\n    });\n  };\n\n  var formFillFromMeta2 = function formFillFromMeta2(info, data, meta) {\n    if (info.hasDescription && isString(meta.alt)) {\n      data.alt = meta.alt;\n    }\n\n    if (info.hasImageTitle && isString(meta.title)) {\n      data.title = meta.title;\n    }\n\n    if (info.hasDimensions) {\n      if (isString(meta.width)) {\n        data.dimensions.width = meta.width;\n      }\n\n      if (isString(meta.height)) {\n        data.dimensions.height = meta.height;\n      }\n    }\n\n    if (isString(meta[\"class\"])) {\n      ListUtils.findEntry(info.classList, meta[\"class\"]).each(function (entry) {\n        data.classes = entry.value;\n      });\n    }\n\n    if (info.hasImageCaption) {\n      if (isBoolean(meta.caption)) {\n        data.caption = meta.caption;\n      }\n    }\n\n    if (info.hasAdvTab) {\n      if (isString(meta.vspace)) {\n        data.vspace = meta.vspace;\n      }\n\n      if (isString(meta.border)) {\n        data.border = meta.border;\n      }\n\n      if (isString(meta.hspace)) {\n        data.hspace = meta.hspace;\n      }\n\n      if (isString(meta.borderstyle)) {\n        data.borderstyle = meta.borderstyle;\n      }\n    }\n  };\n\n  var formFillFromMeta = function formFillFromMeta(info, api) {\n    var data = api.getData();\n    var meta = data.src.meta;\n\n    if (meta !== undefined) {\n      var newData = deepMerge({}, data);\n      formFillFromMeta2(info, newData, meta);\n      api.setData(newData);\n    }\n  };\n\n  var calculateImageSize = function calculateImageSize(helpers, info, state, api) {\n    var data = api.getData();\n    var url = data.src.value;\n    var meta = data.src.meta || {};\n\n    if (!meta.width && !meta.height && info.hasDimensions) {\n      helpers.imageSize(url).get(function (result) {\n        result.each(function (size) {\n          if (state.open) {\n            api.setData({\n              dimensions: size\n            });\n          }\n        });\n      });\n    }\n  };\n\n  var updateImagesDropdown = function updateImagesDropdown(info, state, api) {\n    var data = api.getData();\n    var image = ListUtils.findEntry(info.imageList, data.src.value);\n    state.prevImage = image;\n    api.setData({\n      images: image.map(function (entry) {\n        return entry.value;\n      }).getOr('')\n    });\n  };\n\n  var changeSrc = function changeSrc(helpers, info, state, api) {\n    addPrependUrl(info, api);\n    formFillFromMeta(info, api);\n    calculateImageSize(helpers, info, state, api);\n    updateImagesDropdown(info, state, api);\n  };\n\n  var changeImages = function changeImages(helpers, info, state, api) {\n    var data = api.getData();\n    var image = ListUtils.findEntry(info.imageList, data.images);\n    image.each(function (img) {\n      var updateAlt = data.alt === '' || state.prevImage.map(function (image) {\n        return image.text === data.alt;\n      }).getOr(false);\n\n      if (updateAlt) {\n        if (img.value === '') {\n          api.setData({\n            src: img,\n            alt: state.prevAlt\n          });\n        } else {\n          api.setData({\n            src: img,\n            alt: img.text\n          });\n        }\n      } else {\n        api.setData({\n          src: img\n        });\n      }\n    });\n    state.prevImage = image;\n    changeSrc(helpers, info, state, api);\n  };\n\n  var calcVSpace = function calcVSpace(css) {\n    var matchingTopBottom = css['margin-top'] && css['margin-bottom'] && css['margin-top'] === css['margin-bottom'];\n    return matchingTopBottom ? Utils.removePixelSuffix(String(css['margin-top'])) : '';\n  };\n\n  var calcHSpace = function calcHSpace(css) {\n    var matchingLeftRight = css['margin-right'] && css['margin-left'] && css['margin-right'] === css['margin-left'];\n    return matchingLeftRight ? Utils.removePixelSuffix(String(css['margin-right'])) : '';\n  };\n\n  var calcBorderWidth = function calcBorderWidth(css) {\n    return css['border-width'] ? Utils.removePixelSuffix(String(css['border-width'])) : '';\n  };\n\n  var calcBorderStyle = function calcBorderStyle(css) {\n    return css['border-style'] ? String(css['border-style']) : '';\n  };\n\n  var calcStyle = function calcStyle(parseStyle, serializeStyle, css) {\n    return serializeStyle(parseStyle(serializeStyle(css)));\n  };\n\n  var changeStyle2 = function changeStyle2(parseStyle, serializeStyle, data) {\n    var css = Utils.mergeMargins(parseStyle(data.style));\n    var dataCopy = deepMerge({}, data);\n    dataCopy.vspace = calcVSpace(css);\n    dataCopy.hspace = calcHSpace(css);\n    dataCopy.border = calcBorderWidth(css);\n    dataCopy.borderstyle = calcBorderStyle(css);\n    dataCopy.style = calcStyle(parseStyle, serializeStyle, css);\n    return dataCopy;\n  };\n\n  var changeStyle = function changeStyle(helpers, api) {\n    var data = api.getData();\n    var newData = changeStyle2(helpers.parseStyle, helpers.serializeStyle, data);\n    api.setData(newData);\n  };\n\n  var changeAStyle = function changeAStyle(helpers, info, api) {\n    var data = deepMerge(fromImageData(info.image), api.getData());\n    var style = getStyleValue(helpers.normalizeCss, toImageData(data));\n    api.setData({\n      style: style\n    });\n  };\n\n  var changeFileInput = function changeFileInput(helpers, info, state, api) {\n    var data = api.getData();\n    api.block('Uploading image');\n    head(data.fileinput).fold(function () {\n      api.unblock();\n    }, function (file) {\n      var blobUri = domGlobals.URL.createObjectURL(file);\n      var uploader = Uploader({\n        url: info.url,\n        basePath: info.basePath,\n        credentials: info.credentials,\n        handler: info.handler\n      });\n\n      var finalize = function finalize() {\n        api.unblock();\n        domGlobals.URL.revokeObjectURL(blobUri);\n      };\n\n      Utils.blobToDataUri(file).then(function (dataUrl) {\n        var blobInfo = helpers.createBlobCache(file, blobUri, dataUrl);\n        uploader.upload(blobInfo).then(function (url) {\n          api.setData({\n            src: {\n              value: url,\n              meta: {}\n            }\n          });\n          api.showTab('general');\n          changeSrc(helpers, info, state, api);\n          finalize();\n        })[\"catch\"](function (err) {\n          finalize();\n          helpers.alertErr(api, err);\n        });\n      });\n    });\n  };\n\n  var changeHandler = function changeHandler(helpers, info, state) {\n    return function (api, evt) {\n      if (evt.name === 'src') {\n        changeSrc(helpers, info, state, api);\n      } else if (evt.name === 'images') {\n        changeImages(helpers, info, state, api);\n      } else if (evt.name === 'alt') {\n        state.prevAlt = api.getData().alt;\n      } else if (evt.name === 'style') {\n        changeStyle(helpers, api);\n      } else if (evt.name === 'vspace' || evt.name === 'hspace' || evt.name === 'border' || evt.name === 'borderstyle') {\n        changeAStyle(helpers, info, api);\n      } else if (evt.name === 'fileinput') {\n        changeFileInput(helpers, info, state, api);\n      }\n    };\n  };\n\n  var closeHandler = function closeHandler(state) {\n    return function () {\n      state.open = false;\n    };\n  };\n\n  var makeDialogBody = function makeDialogBody(info) {\n    if (info.hasAdvTab || info.hasUploadUrl || info.hasUploadHandler) {\n      var tabPanel = {\n        type: 'tabpanel',\n        tabs: flatten([[MainTab.makeTab(info)], info.hasAdvTab ? [AdvTab.makeTab(info)] : [], info.hasUploadTab && (info.hasUploadUrl || info.hasUploadHandler) ? [UploadTab.makeTab(info)] : []])\n      };\n      return tabPanel;\n    } else {\n      var panel = {\n        type: 'panel',\n        items: MainTab.makeItems(info)\n      };\n      return panel;\n    }\n  };\n\n  var makeDialog = function makeDialog(helpers) {\n    return function (info) {\n      var state = createState(info);\n      return {\n        title: 'Insert/Edit Image',\n        size: 'normal',\n        body: makeDialogBody(info),\n        buttons: [{\n          type: 'cancel',\n          name: 'cancel',\n          text: 'Cancel'\n        }, {\n          type: 'submit',\n          name: 'save',\n          text: 'Save',\n          primary: true\n        }],\n        initialData: fromImageData(info.image),\n        onSubmit: helpers.onSubmit(info),\n        onChange: changeHandler(helpers, info, state),\n        onClose: closeHandler(state)\n      };\n    };\n  };\n\n  var submitHandler = function submitHandler(editor) {\n    return function (info) {\n      return function (api) {\n        var data = deepMerge(fromImageData(info.image), api.getData());\n        editor.undoManager.transact(function () {\n          insertOrUpdateImage(editor, toImageData(data));\n        });\n        editor.editorUpload.uploadImagesAuto();\n        api.close();\n      };\n    };\n  };\n\n  var imageSize = function imageSize(editor) {\n    return function (url) {\n      return FutureResult.nu(function (completer) {\n        Utils.getImageSize(editor.documentBaseURI.toAbsolute(url), function (data) {\n          var result = data.map(function (dimensions) {\n            return {\n              width: String(dimensions.width),\n              height: String(dimensions.height)\n            };\n          });\n          completer(result);\n        });\n      });\n    };\n  };\n\n  var createBlobCache = function createBlobCache(editor) {\n    return function (file, blobUri, dataUrl) {\n      return editor.editorUpload.blobCache.create({\n        blob: file,\n        blobUri: blobUri,\n        name: file.name ? file.name.replace(/\\.[^\\.]+$/, '') : null,\n        base64: dataUrl.split(',')[1]\n      });\n    };\n  };\n\n  var alertErr = function alertErr(editor) {\n    return function (api, message) {\n      editor.windowManager.alert(message, api.close);\n    };\n  };\n\n  var normalizeCss$1 = function normalizeCss$1(editor) {\n    return function (cssText) {\n      return normalizeCss(editor, cssText);\n    };\n  };\n\n  var parseStyle = function parseStyle(editor) {\n    return function (cssText) {\n      return editor.dom.parseStyle(cssText);\n    };\n  };\n\n  var serializeStyle = function serializeStyle(editor) {\n    return function (stylesArg, name) {\n      return editor.dom.serializeStyle(stylesArg, name);\n    };\n  };\n\n  var Dialog = function Dialog(editor) {\n    var helpers = {\n      onSubmit: submitHandler(editor),\n      imageSize: imageSize(editor),\n      createBlobCache: createBlobCache(editor),\n      alertErr: alertErr(editor),\n      normalizeCss: normalizeCss$1(editor),\n      parseStyle: parseStyle(editor),\n      serializeStyle: serializeStyle(editor)\n    };\n\n    var open = function open() {\n      return collect(editor).map(makeDialog(helpers)).get(function (spec) {\n        editor.windowManager.open(spec);\n      });\n    };\n\n    return {\n      open: open\n    };\n  };\n\n  var register = function register(editor) {\n    editor.addCommand('mceImage', Dialog(editor).open);\n  };\n\n  var Commands = {\n    register: register\n  };\n\n  var hasImageClass = function hasImageClass(node) {\n    var className = node.attr('class');\n    return className && /\\bimage\\b/.test(className);\n  };\n\n  var toggleContentEditableState = function toggleContentEditableState(state) {\n    return function (nodes) {\n      var i = nodes.length;\n\n      var toggleContentEditable = function toggleContentEditable(node) {\n        node.attr('contenteditable', state ? 'true' : null);\n      };\n\n      while (i--) {\n        var node = nodes[i];\n\n        if (hasImageClass(node)) {\n          node.attr('contenteditable', state ? 'false' : null);\n          global$5.each(node.getAll('figcaption'), toggleContentEditable);\n        }\n      }\n    };\n  };\n\n  var setup = function setup(editor) {\n    editor.on('PreInit', function () {\n      editor.parser.addNodeFilter('figure', toggleContentEditableState(true));\n      editor.serializer.addNodeFilter('figure', toggleContentEditableState(false));\n    });\n  };\n\n  var FilterContent = {\n    setup: setup\n  };\n\n  var register$1 = function register$1(editor) {\n    editor.ui.registry.addToggleButton('image', {\n      icon: 'image',\n      tooltip: 'Insert/edit image',\n      onAction: Dialog(editor).open,\n      onSetup: function onSetup(buttonApi) {\n        return editor.selection.selectorChangedWithUnbind('img:not([data-mce-object],[data-mce-placeholder]),figure.image', buttonApi.setActive).unbind;\n      }\n    });\n    editor.ui.registry.addMenuItem('image', {\n      icon: 'image',\n      text: 'Image...',\n      onAction: Dialog(editor).open\n    });\n    editor.ui.registry.addContextMenu('image', {\n      update: function update(element) {\n        return isFigure(element) || isImage(element) && !Utils.isPlaceholderImage(element) ? ['image'] : [];\n      }\n    });\n  };\n\n  var Buttons = {\n    register: register$1\n  };\n\n  function Plugin() {\n    global$1.add('image', function (editor) {\n      FilterContent.setup(editor);\n      Buttons.register(editor);\n      Commands.register(editor);\n    });\n  }\n\n  Plugin();\n})(window);"],"sourceRoot":""}